webpackJsonp([0],[,function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(358));t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()},function(e,t,n){e.exports={default:n(759),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(70));t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,a.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(775)),o=a(n(779)),l=a(n(70));t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEMPLATE_FOLDERS=t.STRIPE_PUBLIC_KEY=t.STRIPE_PUBLIC_KEY_LIVE=t.STRIPE_PUBLIC_KEY_TEST=t.DRAG_ITEM_TYPES=t.ROLE_IDS=t.ROLES=void 0;var a,r=function(e){return e&&e.__esModule?e:{default:e}}(n(17)),o=t.ROLES={SUPER_ADMIN:"super_admin",ADMIN:"Admin",REGISTRAR:"Registrar",GUEST:"Guest",STUDENT:"Student",TEACHER:"Teacher"},l=(t.ROLE_IDS=(a={},(0,r.default)(a,o.SUPER_ADMIN,1),(0,r.default)(a,o.REGISTRAR,2),(0,r.default)(a,o.STUDENT,3),(0,r.default)(a,o.TEACHER,4),(0,r.default)(a,o.ADMIN,5),a),t.DRAG_ITEM_TYPES={COURSE:"Course",GROUP:"Group",CLASS:"Class"},t.STRIPE_PUBLIC_KEY_TEST="pk_test_hBwrF4bmq7Aw41s5aMWRQEwr",t.STRIPE_PUBLIC_KEY_LIVE="pk_live_8oQT74wZDh4wMT0ByXJCLCcA");t.STRIPE_PUBLIC_KEY=l,t.TEMPLATE_FOLDERS=[{value:"madrasah",label:"madrasah"},{value:"Institute",label:"Institute"},{value:"qurbani",label:"qurbani"},{value:"Events",label:"Events"},{value:"uktour",label:"uktour"}]},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(2)),l=a(n(948));n(949);var i=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"show",value:function(e,t,n){new l.default({text:e,type:t,layout:"bottomRight",animation:{open:"animated flipInX",close:"animated flipOutX",easing:"swing",speed:500},timeout:n||5e3}).show()}},{key:"success",value:function(t){e.show(t,"success",3e3)}},{key:"error",value:function(t){e.show(t,"error")}},{key:"clear",value:function(){$("#notifications").empty()}}]),e}();t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditableSourceSelected=t.ItemView=t.EditableValueInput=t.DatePicker=t.PostcodeSelect=t.Html=t.Select=t.EditableItemList=t.RadioInputs=t.ItemListView=t.CheckableItemList=t.SettingsForm=t.RadioInput=t.EditableHTML=t.EditableValue=t.EditableValueInlineBlock=t.LabeledValue=t.FormField=void 0;var r=a(n(23)),o=a(n(59)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(22)),h=n(6),m=a(n(132)),v=a(n(31)),y=a(n(16)),g=a(n(15)),E=a(n(134)),b=a(n(43)),_=a(n(36)),C=t.FormField=function(e){function t(){return(0,i.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.width,a=e.name,r=e.label,o=e.children,l=e.labelRawHTML,i=e.style,s=!1;return r&&r.length>0&&(s=l?f.default.createElement("p",{className:"detail-field-label",dangerouslySetInnerHTML:{__html:r}}):f.default.createElement("label",{className:"detail-field-label",htmlFor:a},r)),f.default.createElement(h.Col,{mdOffset:t,md:n,style:i},f.default.createElement(p.default,null,s,o))}}]),t}(d.Component);C.propTypes={width:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.number]),label:d.PropTypes.string,children:d.PropTypes.oneOfType([d.PropTypes.object,d.PropTypes.array]),labelRawHTML:d.PropTypes.bool,name:d.PropTypes.string},(t.LabeledValue=function(e){function t(e,n){return(0,i.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.asRow,r=t.width,l=this.props.value;null==l||0===l.length?l="----------------":m.default.isObject(l)&&(l=(0,o.default)(l));var i=f.default.createElement(p.default,null,f.default.createElement("p",{className:"detail-field-label"},n),f.default.createElement("p",{className:"detail-field-value",onClick:function(t){return e.setState({editMode:!0})}},l));return a?f.default.createElement(h.Row,null,f.default.createElement(h.Col,{md:r||6},i)):i}}]),t}(d.Component)).PropTypes={label:d.PropTypes.string,value:d.PropTypes.any,asRow:d.PropTypes.bool,width:d.PropTypes.number},t.EditableValueInlineBlock=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n)),r=e.children;return a.state={editMode:!1,value:e.value,name:e.name?e.name:Array.isArray(r)?r[0].props.name:r.props.name},a.onClickOutside(function(){return a.finishEditing()}),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"handleFieldChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleKeyUp",value:function(e){switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||e.target.type){case"radio":case"text":"Enter"===e.key&&this.finishEditing()}}},{key:"finishEditing",value:function(){var e=this.props.onFieldChange,t=this.state,n=t.name,a=t.value;t.editMode&&(this.setState({editMode:!1}),e&&e(n,a))}},{key:"onClickOutside",value:function(e){var t=this.state.name;$("html").click(function(n){n.target.name!==t&&e()})}},{key:"componentWillReceiveProps",value:function(e,t){this.props.enableExternalUpdates&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.editMode,o=this.props,l=o.children,i=o.rawHTML,s=o.label,u=o.noValueText,c=o.formatValue,d=!1;!1===a&&(null!=n&&0!==n.length||(n=u||"----------------",d=!0));var p;if(a){var h=function(t,a){Array.isArray(t)&&(t=t[0]);var o={onChange:function(t){return e.handleFieldChange(t)},onKeyUp:function(t){return e.handleKeyUp(t)},key:a};switch(t.props.type){case"radio":(0,r.default)(o,{value:t.props.value,checked:n==t.props.value});break;default:(0,r.default)(o,{value:n})}return f.default.cloneElement(t,o)};"div"==l.type?(p=[],l.props.children.forEach(function(e,t){"input"==e.type?p.push(h(e,t)):p.push(e)}),p=f.default.createElement("div",null,p)):p=h(l)}else{var m=(d?"detail-field-empty":"detail-field-value")+" highlighted";if(!d){var v=this.props.valueView;n=v?v(n):n}p=i?f.default.createElement("p",{className:m,style:{color:d?"#7d8c7e":"black",margin:"0"},onClick:function(){var t=e.state.value;c&&(t=c(t)),e.setState({editMode:!0,value:t})},dangerouslySetInnerHTML:{__html:n}}):f.default.createElement("p",{className:m,style:{margin:"0",fontSize:"11pt",fontWeight:"normal"},onClick:function(){var t=e.state.value;c&&(t=c(t)),e.setState({editMode:!0,value:t})}},n)}return f.default.createElement("div",{className:"form-group",style:{display:"inline-block",width:"20%"}},f.default.createElement("p",{className:"detail-field-label"},s),p)}}]),t}(d.Component),(t.EditableValue=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n)),r=e.children;return a.state={editMode:!1,value:e.value,name:e.name?e.name:Array.isArray(r)?r[0].props.name:r.props.name},a.onClickOutside(function(){return a.finishEditing()}),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"handleFieldChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleKeyUp",value:function(e){switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||e.target.type){case"radio":case"text":"Enter"===e.key&&this.finishEditing()}}},{key:"finishEditing",value:function(){var e=this.props.onFieldChange,t=this.state,n=t.name,a=t.value;t.editMode&&(this.setState({editMode:!1}),e&&e(n,a))}},{key:"onClickOutside",value:function(e){var t=this.state.name;$("html").click(function(n){n.target.name!==t&&e()})}},{key:"componentWillReceiveProps",value:function(e,t){this.props.enableExternalUpdates&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.editMode,o=this.props,l=o.children,i=o.rawHTML,s=o.label,u=o.noValueText,c=o.formatValue,d=!1;!1===a&&(null!=n&&0!==n.length||(n=u||"----------------",d=!0));var h;if(a){var m=function(t,a){Array.isArray(t)&&(t=t[0]);var o={onChange:function(t){return e.handleFieldChange(t)},onKeyUp:function(t){return e.handleKeyUp(t)},key:a};switch(t.props.type){case"radio":(0,r.default)(o,{value:t.props.value,checked:n==t.props.value});break;default:(0,r.default)(o,{value:n})}return f.default.cloneElement(t,o)};"div"==l.type?(h=[],l.props.children.forEach(function(e,t){"input"==e.type?h.push(m(e,t)):h.push(e)}),h=f.default.createElement("div",null,h)):h=m(l)}else{var v=(d?"detail-field-empty":"detail-field-value")+" highlighted";if(!d){var y=this.props.valueView;n=y?y(n):n}h=i?f.default.createElement("p",{className:v,style:{color:d?"#7d8c7e":"black"},onClick:function(){var t=e.state.value;c&&(t=c(t)),e.setState({editMode:!0,value:t})},dangerouslySetInnerHTML:{__html:n}}):f.default.createElement("p",{className:v,onClick:function(){var t=e.state.value;c&&(t=c(t)),e.setState({editMode:!0,value:t})}},n)}return f.default.createElement(p.default,null,f.default.createElement("p",{className:"detail-field-label"},s),h)}}]),t}(d.Component)).PropTypes={label:d.PropTypes.string.isRequired,enableExternalUpdates:d.PropTypes.bool,value:d.PropTypes.string,onFieldChange:d.PropTypes.func,rawHTML:d.PropTypes.bool,name:d.PropTypes.string,children:d.PropTypes.oneOfType(d.PropTypes.element,d.PropTypes.arrayOf(d.PropTypes.element)),noValueText:d.PropTypes.string};var w=t.EditableHTML=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={value:a.props.value,editing:!1},a.onClickOutside(function(){return a.finishEditing()}),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){$(function(){return(0,b.default)($("textarea"))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.editing,r=this.props,o=r.name,l=r.height,i=r.onlyEdit,s={height:l,marginBottom:"20px",overflowY:"auto !important"};return a||i?f.default.createElement("div",null,f.default.createElement("textarea",{className:"form-control",name:o,id:o,style:s,value:n,onChange:function(t){return e.change(t)}})):f.default.createElement("div",{className:"form-control",dangerouslySetInnerHTML:{__html:n},style:s,onClick:function(){e.setState({editing:!0})}})}},{key:"change",value:function(e){var t=this.props.onChange;t&&t(e),this.setState({value:e.target.value})}},{key:"onClickOutside",value:function(e){var t=this.props.name;$("html").click(function(n){n.target.name!==t&&e()})}},{key:"finishEditing",value:function(){var e=this.state,t=e.editing;if(e.value,t){this.setState({editing:!1});var n=this.props;n.name,n.onChange}}}]),t}(d.Component);w.PropTypes={onChange:d.PropTypes.func,value:d.PropTypes.string.isRequired,name:d.PropTypes.string.isRequired,height:d.PropTypes.string,onlyEdit:d.PropTypes.bool},w.defaultProps={height:"500px"};var k=t.RadioInput=function(e){var t=e.name,n=e.value,a=e.label,r=e.checked,o=e.onChange;return f.default.createElement("div",{style:{marginTop:10}},f.default.createElement("input",{key:"input",type:"radio",name:t,value:n,checked:r,onChange:o,style:{verticalAlign:"middle"}}),f.default.createElement("span",{key:"label",style:{verticalAlign:"top"}},a||v.default.ucFirst(n)),f.default.createElement("br",{key:"br"}))},S=(t.SettingsForm=function(e){function t(){return(0,i.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){$(function(){return(0,b.default)($("textarea"))})}},{key:"render",value:function(){var e=this.props,t=e.settings,n=e.onChange;if(!t||0===t.length)return f.default.createElement("p",null,"Loading...");t.sort(function(e,t){return parseInt(e.settingWeight)>parseInt(t.settingWeight)});var a=t.map(function(e,t){var a=null;switch(e.settingType){case"radio":a=e.settingOptions.map(function(t,a){return f.default.createElement(k,{key:a,name:e.settingKey,value:t,checked:e.settingValue==t,onChange:n})});break;case"select":a=f.default.createElement("select",{className:"form-control",name:e.settingKey,value:e.settingValue,onChange:n},e.settingOptions.map(function(e,t){return f.default.createElement("option",{key:t,value:e},e)}));break;case"textarea":a=f.default.createElement("textarea",{className:"form-control",name:e.settingKey,value:e.settingValue,onChange:n});break;default:a=f.default.createElement("input",{type:e.setingType,name:e.settingKey,value:e.settingValue,className:"form-control",onChange:n})}return f.default.createElement(C,{key:t,width:12,label:e.settingLabel,labelRawHTML:!0},a)});return f.default.createElement(h.Row,null,a)}}]),t}(d.Component),t.CheckableItemList=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={checkedRows:[]},a.onChange=a.onChange.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.setAlreadyChecked(this.props)}},{key:"setAlreadyChecked",value:function(e){var t=this.state.checkedRows,n=e.items;n&&n.forEach(function(e){return t.push(parseInt(e.id))}),this.setState({checkedRows:t})}},{key:"onChange",value:function(e){var t=parseInt(e.target.value),n=this.state.checkedRows,a=n.indexOf(t);-1!==a?n.splice(a,1):n.push(t),this.setState({checkedRows:n});var r=this.props,o=r.onChange,l=r.options,i=r.name;o&&o(i,l.filter(function(e){return n.includes(parseInt(e.id))}))}},{key:"render",value:function(){var e=this,t=this.state.checkedRows,n=this.props,a=n.options,r=n.labelProp,o=n.style;return a&&0!==a.length?f.default.createElement("div",{style:o},a.map(function(n,a){return f.default.createElement("div",{key:a},f.default.createElement("input",{type:"checkbox",onChange:e.onChange,value:n.id,checked:-1!==t.indexOf(parseInt(n.id))}),f.default.createElement("span",null," ",y.default.accessObjByPath(n,r)))})):f.default.createElement("p",null,"No items defined")}}]),t}(d.Component)),x=t.ItemListView=function(e){var t=e.items,n=e.showingProp,a=e.width;return t&&0!==t.length?f.default.createElement(h.Row,null,f.default.createElement(h.Col,{md:a||5,className:"highlighted"},t.map(function(e,t){return f.default.createElement("p",{key:t},y.default.accessObjByPath(e,n))}))):f.default.createElement("p",{className:"highlighted"},"No items selected")};t.RadioInputs=function(e){var t=e.options,n=e.name,a=e.value,r=e.onChange,o="";return t&&t.length>0&&(o=t.map(function(e,t){return f.default.createElement("div",{key:t,style:{marginTop:10}},f.default.createElement("input",{type:"radio",name:n,value:e.value,checked:e.value==a,onChange:r,style:{verticalAlign:"middle"}}),f.default.createElement("span",{style:{verticalAlign:"top"}},e.label))})),f.default.createElement("div",null,o)},t.EditableItemList=(0,E.default)(S,x),t.Select=function(e){var t=e.options,n=e.children,a=y.default.except(e,["options"]);return a.className||(a.className="form-control"),f.default.createElement("select",a,!!t&&t.map(function(e,t){return f.default.createElement("option",{key:t,value:e.value},e.label)}),n)},t.Html=function(e){return f.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.children}})},(t.PostcodeSelect=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={postcodeAddresses:null,postcodeTown:null},a.searchAddress=a.searchAddress.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"searchAddress",value:function(){var e=this,t=this.props.postcode;t&&0!==t.length&&(this.getPostcodePromise&&this.getPostcodePromise.cancel(),this.getPostcodePromise=g.default.ajax({type:"get",url:"/api/users/get-postcode-data",data:{postcode:t}}),this.getPostcodePromise.then(function(t){for(var n=y.default.getIfExists,a=JSON.parse(t),r=[],o=n(a,"line1",[]),l=n(a,"line2",[]),i=0;i<o.length;i++){var s=y.default.concatProps(o[i]),u=i<l.length?y.default.concatProps(l[i]):"";r.push({line1:s,line2:u})}e.setState({postcodeAddresses:r,postcodeTown:n(a,"town",null)})},function(e){return console.error(e)}))}},{key:"renderPostcodeAddressSelect",value:function(){var e=this.state,t=e.postcodeAddresses,n=e.postcodeTown,a=this.props,r=a.addressPropName,o=a.address2PropName,l=a.address,i=a.cityPropName,s=a.onChange;return t&&0!==t.length?f.default.createElement("div",{style:{marginTop:"10px"}},f.default.createElement("select",{className:"form-control",type:"text",name:r,onChange:function(e){var a=t[e.target.value];s({target:{name:r,value:a.line1}}),s({target:{name:o,value:a.line2}});var l=y.default.concatProps(n," ");l&&l.length>0&&s({target:{name:i,value:l}})},value:l},f.default.createElement("option",{value:""},"Select address"),t.map(function(e,t){var n=e.line1;return f.default.createElement("option",{key:t,value:t},n)}))):""}},{key:"render",value:function(){var e=this.props,t=e.postcodePropName,n=e.postcode,a=e.onTextChange;return f.default.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},f.default.createElement("input",{className:"form-control",style:{display:"inline-block",width:"160px"},type:"text",name:t,onChange:a,value:n}),f.default.createElement(h.Button,{style:{marginLeft:"10px",minWidth:"48px",width:"48px",lineHeight:"21px"},className:"custom btn-success",onClick:this.searchAddress},"GO"),this.renderPostcodeAddressSelect())}}]),t}(d.Component)).propTypes={postcode:d.PropTypes.string,postcodePropName:d.PropTypes.string,addressPropName:d.PropTypes.string,address2PropName:d.PropTypes.string,address:d.PropTypes.string,cityPropName:d.PropTypes.string,onChange:d.PropTypes.func,onTextChange:d.PropTypes.func},t.DatePicker=function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"init",value:function(e,t){$(function(){var n=".datepicker";t&&t.selector&&(n=t.selector),$(n).datepicker({format:"dd-mm-yy",dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,yearRange:"-100:+0",onSelect:function(t,n){n.inline=!1,e($(this).attr("name"),t)}})})}}]),e}(),(t.EditableValueInput=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n)),r=e.children;return a.state={editMode:!1,value:e.value,name:e.name?e.name:Array.isArray(r)?r[0].props.name:r.props.name,id:e.id?e.id:Array.isArray(r)?r[0].props.id:r.props.id,data:e.data?e.data:Array.isArray(r)?r[0].props.data:r.props.data},a.onClickOutside(function(){return a.finishEditing()}),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"handleFieldChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleKeyUp",value:function(e){switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||e.target.type){case"radio":case"text":"Enter"===e.key&&this.finishEditing()}}},{key:"finishEditing",value:function(){var e=this.props.onFieldChange,t=this.state,n=t.name,a=t.value,r=t.editMode,o=t.id,l=t.data;r&&(this.setState({editMode:!1}),e&&e(n,a,o,l))}},{key:"onClickOutside",value:function(e){var t=this.state.name;$("html").click(function(n){n.target.name!==t&&e()})}},{key:"componentWillReceiveProps",value:function(e,t){this.props.enableExternalUpdates&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.editMode,o=this.props,l=o.children,i=o.rawHTML,s=o.label,u=o.noValueText,c=o.formatValue,d=!1;!1===a&&(null!=n&&0!==n.length||(n=u||"----------------",d=!0));var h;if(a){var m=function(t,a){Array.isArray(t)&&(t=t[0]);var o={onChange:function(t){return e.handleFieldChange(t)},onKeyUp:function(t){return e.handleKeyUp(t)},key:a};switch(t.props.type){case"radio":(0,r.default)(o,{value:t.props.value,checked:n==t.props.value});break;default:(0,r.default)(o,{value:n})}return f.default.cloneElement(t,o)};"div"==l.type?(h=[],l.props.children.forEach(function(e,t){"input"==e.type?h.push(m(e,t)):h.push(e)}),h=f.default.createElement("div",null,h)):h=m(l)}else{var v=(d?"detail-field-empty":"detail-field-value")+" highlighted";if(!d){var y=this.props.valueView;n=y?y(n):n}h=i?f.default.createElement("p",{className:v,style:{color:d?"#7d8c7e":"black"},onClick:function(){var t=e.state.value;c&&(t=c(t)),e.setState({editMode:!0,value:t})},dangerouslySetInnerHTML:{__html:n}}):f.default.createElement("p",{className:v,onClick:function(){var t=e.state.value;c&&(t=c(t)),e.setState({editMode:!0,value:t})}},n)}return f.default.createElement(p.default,null,f.default.createElement("p",{className:"detail-field-label"},s),h)}}]),t}(d.Component)).PropTypes={label:d.PropTypes.string.isRequired,enableExternalUpdates:d.PropTypes.bool,value:d.PropTypes.string,id:d.PropTypes.string,data:d.PropTypes.string,onFieldChange:d.PropTypes.func,rawHTML:d.PropTypes.bool,name:d.PropTypes.string,children:d.PropTypes.oneOfType(d.PropTypes.element,d.PropTypes.arrayOf(d.PropTypes.element)),noValueText:d.PropTypes.string};var T=t.ItemView=function(e){var t=e.value,n=e.defaultValue;return n||(n="-------------"),null!=t?f.default.createElement("p",{className:"detail-field-value highlighted"},t):f.default.createElement("p",{className:"detail-field-empty highlighted"},n)};t.EditableSourceSelected=(0,E.default)(_.default,T)},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(16)),p=a(n(15)),h=a(n(11)),m=a(n(19));t.default=function(e,t){return function(n){function a(e,t){(0,l.default)(this,a);var n=(0,s.default)(this,(a.__proto__||(0,o.default)(a)).call(this,e,t));return n.state={isLoading:!0,data:null,errorText:null},n.promises={},n.save=n.save.bind(n),n.load=n.load.bind(n),n.execute=n.execute.bind(n),n.logEnabled=void 0!==e.logEnabled&&e.logEnabled,n.notificationsEnabled=void 0===e.notificationsEnabled||e.notificationsEnabled,n}return(0,u.default)(a,n),(0,i.default)(a,[{key:"load",value:function(e){var t=this;this.execute("load",e,function(e){t.setState({isLoading:!1,data:e})},function(e){t.setState({isLoading:!1,errorText:e.responseText})}),this.search("load")||this.setState({isLoading:!1})}},{key:"save",value:function(e,t,n){var a=this;this.execute("save",e,function(e){a.notificationsEnabled&&h.default.success("Saved successfully"),t&&t(e)},function(e){a.notificationsEnabled&&h.default.error("Save failed"),n&&n(e)})}},{key:"search",value:function(e){var n=function(t){for(var n in t)if(n===e)return t[n];return!1};return n(this.props.ajaxOperations)||n(t)}},{key:"execute",value:function(e,t,n,a){var r=this,o=this.search(e);if(!o)return!1;this.promises[e]&&this.promises[e].cancel(),t&&(o.data=t),this.promises[e]=p.default.ajax(o),this.promises[e].then(function(e){r.logEnabled&&console.log(e),n&&n(e)},function(e){console.log(e),a&&a(e)})}},{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"render",value:function(){var t=this.state,n=t.isLoading,a=t.data,o=t.errorText;if(n)return d.default.createElement("div",null,d.default.createElement(m.default,null));if(o)return d.default.createElement("p",null,o);if(null===a&&this.search("load"))return d.default.createElement("p",null,"No data.");var l=f.default.except(this.props,["ajaxOperations"]);return d.default.createElement(e,(0,r.default)({},l,{data:a,save:this.save,load:this.load,execute:this.execute}))}}]),a}(c.Component)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(162)),o=a(n(1)),l=a(n(2)),i=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,null,[{key:"makeCancelable",value:function(e){var t=!1;return{promise:new r.default(function(n,a){e.then(function(e){t||n(e)},function(e){return a(e)})}),cancel:function(){t=!0},then:function(e,t){this.promise.then(e,t)}}}},{key:"makeCancelableAjax",value:function(e){return this.makeCancelable(r.default.resolve(e))}},{key:"ajax",value:function(e){return this.makeCancelable(r.default.resolve($.ajax(e)))}}]),e}();t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(50)),o=a(n(23)),l=a(n(70)),i=a(n(1)),s=a(n(2)),u=(a(n(0)),function(){function e(){(0,i.default)(this,e)}return(0,s.default)(e,null,[{key:"checkNestedProps",value:function(e){var t=Array.prototype.slice.call(arguments,1);for(var n in t){if(!e||!e.hasOwnProperty(t[n]))return!1;e=e[t[n]]}return!0}},{key:"assignExisting",value:function(t,n){if(!n)return!1;for(var a in n)t.hasOwnProperty(a)&&("object"===(0,l.default)(t[a])&&null!==t[a]?e.assignExisting(t[a],n[a]):t[a]=n[a])}},{key:"getIfExists",value:function(t,n,a){var r=e.accessObjByPath(t,n);return null!==r&&void 0!==r||(r=a),r}},{key:"accessObjByPath",value:function(e,t,n){if(null===e||"object"!==(void 0===e?"undefined":(0,l.default)(e))){if(!n)return null;e={}}for(var a=e,r=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),o=r.length-1,i=0;i<o;++i){var s=r[i];if(!(a&&s in a)){if(!n)return null;a[s]={}}a=a[s]}return n&&(a[r[o]]=n(a[r[o]])),null===a?null:a[r[o]]}},{key:"deleteProps",value:function(e,t){t.forEach(function(t){return delete e.prop})}},{key:"except",value:function(t,n){var a=(0,o.default)({},t);return e.deleteProps(a,n),a}},{key:"concatProps",value:function(e,t){if(!e)return"";var n=(0,r.default)(e),a="";for(var o in n)a.length>0?a+=t+e[o]:a+=e[o];return a}}]),e}());t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(358));t.default=function(e,t,n){return t in e?(0,a.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.createMemoryHistory=t.hashHistory=t.browserHistory=t.applyRouterMiddleware=t.formatPattern=t.useRouterHistory=t.match=t.routerShape=t.locationShape=t.PropTypes=t.RoutingContext=t.RouterContext=t.createRoutes=t.useRoutes=t.RouteContext=t.Lifecycle=t.History=t.Route=t.Redirect=t.IndexRoute=t.IndexRedirect=t.withRouter=t.IndexLink=t.Link=t.Router=void 0;var r=n(81);Object.defineProperty(t,"createRoutes",{enumerable:!0,get:function(){return r.createRoutes}});var o=n(218);Object.defineProperty(t,"locationShape",{enumerable:!0,get:function(){return o.locationShape}}),Object.defineProperty(t,"routerShape",{enumerable:!0,get:function(){return o.routerShape}});var l=n(105);Object.defineProperty(t,"formatPattern",{enumerable:!0,get:function(){return l.formatPattern}});var i=a(n(719)),s=a(n(350)),u=a(n(733)),c=a(n(734)),d=a(n(736)),f=a(n(737)),p=a(n(351)),h=a(n(738)),m=a(n(739)),v=a(n(740)),y=a(n(741)),g=a(n(742)),E=a(n(154)),b=a(n(743)),_=a(o),C=a(n(744)),w=a(n(354)),k=a(n(746)),S=a(n(747)),x=a(n(749)),T=a(n(352));t.Router=i.default,t.Link=s.default,t.IndexLink=u.default,t.withRouter=c.default,t.IndexRedirect=d.default,t.IndexRoute=f.default,t.Redirect=p.default,t.Route=h.default,t.History=m.default,t.Lifecycle=v.default,t.RouteContext=y.default,t.useRoutes=g.default,t.RouterContext=E.default,t.RoutingContext=b.default,t.PropTypes=_.default,t.match=C.default,t.useRouterHistory=w.default,t.applyRouterMiddleware=k.default,t.browserHistory=S.default,t.hashHistory=x.default,t.createMemoryHistory=T.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(88)),f=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.assetManager=new d.default,a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.assetManager.loadCss("/src/style/spinner.css")}},{key:"componentWillUnmount",value:function(){this.assetManager.unloadAll()}},{key:"render",value:function(){var e=this.props.show;return void 0===e||e?c.default.createElement("div",{className:"sk-circle"},c.default.createElement("div",{className:"sk-circle1 sk-child"}),c.default.createElement("div",{className:"sk-circle2 sk-child"}),c.default.createElement("div",{className:"sk-circle3 sk-child"}),c.default.createElement("div",{className:"sk-circle4 sk-child"}),c.default.createElement("div",{className:"sk-circle5 sk-child"}),c.default.createElement("div",{className:"sk-circle6 sk-child"}),c.default.createElement("div",{className:"sk-circle7 sk-child"}),c.default.createElement("div",{className:"sk-circle8 sk-child"}),c.default.createElement("div",{className:"sk-circle9 sk-child"}),c.default.createElement("div",{className:"sk-circle10 sk-child"}),c.default.createElement("div",{className:"sk-circle11 sk-child"}),c.default.createElement("div",{className:"sk-circle12 sk-child"})):c.default.createElement("div",null)}}]),t}(u.Component);t.default=f,f.propTypes={show:u.PropTypes.bool}},,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"form-group",id:this.props.id},this.props.children)}}]),t}(u.default.Component);t.default=c},function(e,t,n){e.exports={default:n(752),__esModule:!0}},,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u);a(n(16)),t.default=function(e,t){return function(n){function a(){return(0,o.default)(this,a),(0,i.default)(this,(a.__proto__||(0,r.default)(a)).apply(this,arguments))}return(0,s.default)(a,n),(0,l.default)(a,[{key:"render",value:function(){var n=this.props.appTypeKey;return!(!n||!t.includes(n))&&c.default.createElement(e,this.props)}}],[{key:"allowedRoles",value:function(){return t}}]),a}(u.Component)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(16)),f=n(12),p=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return e.checkableRows&&(a.state={checkedAll:!1,checkedRows:[]},a.rowIds=[]),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"createSubRows",value:function(e){return this.props.createSubRows?this.props.createSubRows(e):null}},{key:"createRow",value:function(e){var n=this,a=[];if(this.props.checkableRows&&e.hasOwnProperty("id"))if(!this.props.checkableRowCondition||this.props.checkableRowCondition(e)){var r=e.id.toString();this.rowIds.push(r),a.push(c.default.createElement("td",{key:"checkbox"},c.default.createElement("input",{type:"checkbox",value:e.id,onChange:function(e){return n.handleSelect(e)},onClick:function(e){return e.stopPropagation()},checked:this.state.checkedRows.includes(r)})))}else a.push(c.default.createElement("td",{key:"checkbox"},c.default.createElement("input",{name:"",type:"checkbox",disabled:"disabled"})));return a=this.props.createRow?a.concat(this.props.createRow(e,this.props.showingProps)):a.concat(t.createRowBase(e,this.props.showingProps))}},{key:"createHead",value:function(){var e=this,n=this.props,a=n.headers,r=n.createHead,o=n.checkableRows;if(!a&&!r)return!1;var l=[];return o&&l.push(c.default.createElement("td",{key:"checkbox"},c.default.createElement("input",{type:"checkbox",onChange:function(t){return e.handleSelectAll(t.target.checked)},checked:this.state.checkedAll}))),l=this.props.createHead?l.concat(r(a)):l.concat(t.createHeadBase(a)),c.default.createElement("thead",null,c.default.createElement("tr",null,l))}},{key:"createBody",value:function(){var e=this,t=this.props,n=t.data,a=(t.additionalRows,t.onRowClick),r=t.rowStyle;if(!n)return!1;for(var o=[],l=0;l<n.length;l++){var i;!function(t){i=c.default.createElement("tr",{key:t,style:r||{},onClick:function(e){a&&a(e,n[t])},className:t%2==0?"odd":"even"},e.createRow(n[t])),o.push(i);var l=e.createSubRows(n[t],t);l&&(Array.isArray(l)?o=o.concat(l):o.push(l))}(l)}return c.default.createElement("tbody",null,o)}},{key:"render",value:function(){var e=this.props,t=e.checkableRows,n=e.className,a=e.style;t&&(this.rowIds=[]);var r=this.createHead(),o=this.createBody(),l=n||"table";return c.default.createElement("div",{className:"table-responsive"},c.default.createElement("table",{className:l,style:a},r,o))}},{key:"handleSelectAll",value:function(e){var t={};t=e?{checkedAll:!0,checkedRows:this.rowIds}:{checkedAll:!1,checkedRows:[]},this.props.onCheckedRowsChange&&this.props.onCheckedRowsChange(t.checkedRows),this.setState(t)}},{key:"handleSelect",value:function(e){var t=$(e.target).val(),n=this.state.checkedRows,a=n.indexOf(t),r={};e.target.checked&&-1===a?(n.push(t),n.length===this.rowIds.length&&(r.checkedAll=!0)):e.target.checked||-1===a||(n.splice(a,1),r.checkedAll=!1),r.checkedRows=n,this.props.onCheckedRowsChange&&this.props.onCheckedRowsChange(r.checkedRows),this.setState(r)}},{key:"componentWillReceiveProps",value:function(e){e.hasOwnProperty("selectAllEventValue")&&null!==e.selectAllEventValue&&this.handleSelectAll(e.selectAllEventValue)}}],[{key:"createHeadBase",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(c.default.createElement("td",{key:n},e[n]));return t}},{key:"createRowBase",value:function(e,t,n){var a=[];if(t)t.forEach(function(t){var r=null;r=-1!=t.indexOf(".")?d.default.accessObjByPath(e,t):e[t],n&&(r=c.default.createElement(f.Html,null,r)),a.push(c.default.createElement("td",{key:t},r))});else for(var r in e){var o=e[r];n&&(o=c.default.createElement(f.Html,null,o)),a.push(c.default.createElement("td",{key:r},o))}return a}}]),t}(u.Component);t.default=p,p.PropTypes={style:u.PropTypes.object,data:u.PropTypes.array,className:u.PropTypes.string,showingProps:u.PropTypes.arrayOf(u.PropTypes.string),headers:u.PropTypes.arrayOf(u.PropTypes.string),createHead:u.PropTypes.func,createRow:u.PropTypes.func,onRowClick:u.PropTypes.func,rowStyle:u.PropTypes.object,checkableRows:u.PropTypes.bool,checkableRowCondition:u.PropTypes.func,onCheckedRowsChange:u.PropTypes.func,additionalRows:u.PropTypes.oneOf([u.PropTypes.element,u.PropTypes.arrayOf(u.PropTypes.element)])}},function(e,t,n){"use strict";e.exports=function(e,t,n,a,r,o,l,i){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,r,o,l,i],c=0;(s=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(2)),l=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"ucFirst",value:function(e){return e&&e.length>0?e.charAt(0).toUpperCase()+e.slice(1):""}},{key:"ucWords",value:function(e){return(e+"").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(e){return e.toUpperCase()})}},{key:"underscoreToCamelCase",value:function(e){}},{key:"camelCaseToSpaced",value:function(e){return e.replace(/[A-Z]/g,function(e){return" "+e.toLowerCase()})}},{key:"removeHtml",value:function(e){return e.replace(/<(?:.|\n)*?>/gm,"")}}]),e}();t.default=l},,,function(e,t,n){"use strict";function a(e,t,n){return v.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function r(e,t){return e.getBlockMap().map(function(n){return i.generate(e,n,t)}).toOrderedMap()}function o(e,t){var n=e.getBlockMap().reverse().skipUntil(function(e,n){return n===t}).skip(1).skipUntil(function(e,t){return e.getLength()}).first();return n?n.getInlineStyleAt(n.getLength()-1):f()}var l=n(80)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(614),s=n(297),u=n(1324),c=n(35),d=n(139),f=c.OrderedSet,p=c.Record,h=c.Stack,m=p({allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:h(),selection:null,treeMap:null,undoStack:h()}),v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._immutable=t}return e.createEmpty=function(t){return e.createWithContent(s.createFromText(""),t)},e.createWithContent=function(t,n){var a=t.getBlockMap().first().getKey();return e.create({currentContent:t,undoStack:h(),redoStack:h(),decorator:n||null,selection:d.createEmpty(a)})},e.create=function(t){var n=t.currentContent,a=t.decorator,o=l({},t,{treeMap:r(n,a),directionMap:u.getDirectionMap(n)});return new e(new m(o))},e.set=function(t,n){return new e(t.getImmutable().withMutations(function(e){var a=e.get("decorator"),o=a;null===n.decorator?o=null:n.decorator&&(o=n.decorator);var l=n.currentContent||t.getCurrentContent();if(o!==a){var s,u=e.get("treeMap");return s=o&&a?function(e,t,n,a,r){return n.merge(t.toSeq().filter(function(t){return a.getDecorations(t,e)!==r.getDecorations(t,e)}).map(function(t){return i.generate(e,t,a)}))}(l,l.getBlockMap(),u,o,a):r(l,o),void e.merge({decorator:o,treeMap:s,nativelyRenderedContent:null})}l!==t.getCurrentContent()&&e.set("treeMap",function(e,t,n,a){var r=e.getCurrentContent().set("entityMap",n),o=r.getBlockMap();return e.getImmutable().get("treeMap").merge(t.toSeq().filter(function(e,t){return e!==o.get(t)}).map(function(e){return i.generate(r,e,a)}))}(t,l.getBlockMap(),l.getEntityMap(),o)),e.merge(n)}))},e.prototype.toJS=function(){return this.getImmutable().toJS()},e.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.prototype.getSelection=function(){return this.getImmutable().get("selection")},e.prototype.getDecorator=function(){return this.getImmutable().get("decorator")},e.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},e.setInlineStyleOverride=function(t,n){return e.set(t,{inlineStyleOverride:n})},e.prototype.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?function(e,t){var n=t.getStartKey(),a=t.getStartOffset(),r=e.getBlockForKey(n);return a>0?r.getInlineStyleAt(a-1):r.getLength()?r.getInlineStyleAt(0):o(e,n)}(t,n):function(e,t){var n=t.getStartKey(),a=t.getStartOffset(),r=e.getBlockForKey(n);return a<r.getLength()?r.getInlineStyleAt(a):a>0?r.getInlineStyleAt(a-1):o(e,n)}(t,n)},e.prototype.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.prototype.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.prototype.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")},e.acceptSelection=function(e,t){return a(e,t,!1)},e.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),a(e,t,!0)},e.moveSelectionToEnd=function(t){var n=t.getCurrentContent().getLastBlock(),a=n.getKey(),r=n.getLength();return e.acceptSelection(t,new d({anchorKey:a,anchorOffset:r,focusKey:a,focusOffset:r,isBackward:!1}))},e.moveFocusToEnd=function(t){var n=e.moveSelectionToEnd(t);return e.forceSelection(n,n.getSelection())},e.push=function(t,n,a){if(t.getCurrentContent()===n)return t;var r="insert-characters"!==a,o=u.getDirectionMap(n,t.getDirectionMap());if(!t.getAllowUndo())return e.set(t,{currentContent:n,directionMap:o,lastChangeType:a,selection:n.getSelectionAfter(),forceSelection:r,inlineStyleOverride:null});var l=t.getSelection(),i=t.getCurrentContent(),s=t.getUndoStack(),c=n;l!==i.getSelectionAfter()||function(e,t){return t!==e.getLastChangeType()||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}(t,a)?(s=s.push(i),c=c.set("selectionBefore",l)):"insert-characters"!==a&&"backspace-character"!==a&&"delete-character"!==a||(c=c.set("selectionBefore",i.getSelectionBefore()));var d=t.getInlineStyleOverride();-1===["adjust-depth","change-block-type","split-block"].indexOf(a)&&(d=null);var f={currentContent:c,directionMap:o,undoStack:s,redoStack:h(),lastChangeType:a,selection:n.getSelectionAfter(),forceSelection:r,inlineStyleOverride:d};return e.set(t,f)},e.undo=function(t){if(!t.getAllowUndo())return t;var n=t.getUndoStack(),a=n.peek();if(!a)return t;var r=t.getCurrentContent(),o=u.getDirectionMap(a,t.getDirectionMap());return e.set(t,{currentContent:a,directionMap:o,undoStack:n.shift(),redoStack:t.getRedoStack().push(r),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:r.getSelectionBefore()})},e.redo=function(t){if(!t.getAllowUndo())return t;var n=t.getRedoStack(),a=n.peek();if(!a)return t;var r=t.getCurrentContent(),o=u.getDirectionMap(a,t.getDirectionMap());return e.set(t,{currentContent:a,directionMap:o,undoStack:t.getUndoStack().push(r),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:a.getSelectionAfter()})},e.prototype.getImmutable=function(){return this._immutable},e}();e.exports=v},function(e,t,n){!function(t,n){e.exports=function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return o(e)?e:R(e)}function n(e){return l(e)?e:O(e)}function a(e){return i(e)?e:D(e)}function r(e){return o(e)&&!s(e)?e:N(e)}function o(e){return!(!e||!e[Kt])}function l(e){return!(!e||!e[Wt])}function i(e){return!(!e||!e[zt])}function s(e){return l(e)||i(e)}function u(e){return!(!e||!e[Gt])}function c(e){return e.value=!1,e}function d(e){e&&(e.value=!0)}function f(){}function p(e,t){t=t||0;for(var n=Math.max(0,e.length-t),a=new Array(n),r=0;r<n;r++)a[r]=e[r+t];return a}function h(e){return void 0===e.size&&(e.size=e.__iterate(v)),e.size}function m(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?h(e)+t:t}function v(){return!0}function y(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function g(e,t){return b(e,t,0)}function E(e,t){return b(e,t,t)}function b(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function _(e){this.next=e}function C(e,t,n,a){var r=0===e?t:1===e?n:[t,n];return a?a.value=r:a={value:r,done:!1},a}function w(){return{value:void 0,done:!0}}function k(e){return!!T(e)}function S(e){return e&&"function"==typeof e.next}function x(e){var t=T(e);return t&&t.call(e)}function T(e){var t=e&&(nn&&e[nn]||e[an]);if("function"==typeof t)return t}function P(e){return e&&"number"==typeof e.length}function R(e){return null===e||void 0===e?j():o(e)?e.toSeq():function(e){var t=H(e)||"object"==typeof e&&new M(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function O(e){return null===e||void 0===e?j().toKeyedSeq():o(e)?l(e)?e.toSeq():e.fromEntrySeq():B(e)}function D(e){return null===e||void 0===e?j():o(e)?l(e)?e.entrySeq():e.toIndexedSeq():U(e)}function N(e){return(null===e||void 0===e?j():o(e)?l(e)?e.entrySeq():e:U(e)).toSetSeq()}function I(e){this._array=e,this.size=e.length}function M(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function A(e){this._iterable=e,this.size=e.length||e.size}function F(e){this._iterator=e,this._iteratorCache=[]}function L(e){return!(!e||!e[on])}function j(){return ln||(ln=new I([]))}function B(e){var t=Array.isArray(e)?new I(e).fromEntrySeq():S(e)?new F(e).fromEntrySeq():k(e)?new A(e).fromEntrySeq():"object"==typeof e?new M(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function U(e){var t=H(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function H(e){return P(e)?new I(e):S(e)?new F(e):k(e)?new A(e):void 0}function q(e,t,n,a){var r=e._cache;if(r){for(var o=r.length-1,l=0;l<=o;l++){var i=r[n?o-l:l];if(!1===t(i[1],a?i[0]:l,e))return l+1}return l}return e.__iterateUncached(t,n)}function K(e,t,n,a){var r=e._cache;if(r){var o=r.length-1,l=0;return new _(function(){var e=r[n?o-l:l];return l++>o?{value:void 0,done:!0}:C(t,a?e[0]:l-1,e[1])})}return e.__iteratorUncached(t,n)}function W(e,t){return t?z(t,e,"",{"":e}):G(e)}function z(e,t,n,a){return Array.isArray(t)?e.call(a,n,D(t).map(function(n,a){return z(e,n,a,t)})):V(t)?e.call(a,n,O(t).map(function(n,a){return z(e,n,a,t)})):t}function G(e){return Array.isArray(e)?D(e).map(G).toList():V(e)?O(e).map(G).toMap():e}function V(e){return e&&(e.constructor===Object||void 0===e.constructor)}function $(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function Y(e,t){if(e===t)return!0;if(!o(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||l(e)!==l(t)||i(e)!==i(t)||u(e)!==u(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!s(e);if(u(e)){var a=e.entries();return t.every(function(e,t){var r=a.next().value;return r&&$(r[1],e)&&(n||$(r[0],t))})&&a.next().done}var r=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{r=!0;var c=e;e=t,t=c}var d=!0,f=t.__iterate(function(t,a){if(n?!e.has(t):r?!$(t,e.get(a,Jt)):!$(e.get(a,Jt),t))return d=!1,!1});return d&&e.size===f}function J(e,t){if(!(this instanceof J))return new J(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(sn)return sn;sn=this}}function X(e,t){if(!e)throw new Error(t)}function Q(e,t,n){if(!(this instanceof Q))return new Q(e,t,n);if(X(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(un)return un;un=this}}function Z(){throw TypeError("Abstract")}function ee(){}function te(){}function ne(){}function ae(e){return e>>>1&1073741824|3221225471&e}function re(e){if(!1===e||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)n^=e/=4294967295;return ae(n)}if("string"===t)return e.length>yn?function(e){var t=bn[e];return void 0===t&&(t=oe(e),En===gn&&(En=0,bn={}),En++,bn[e]=t),t}(e):oe(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(hn&&void 0!==(t=cn.get(e)))return t;if(void 0!==(t=e[vn]))return t;if(!pn){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[vn]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++mn,1073741824&mn&&(mn=0),hn)cn.set(e,t);else{if(void 0!==fn&&!1===fn(e))throw new Error("Non-extensible objects are not allowed as keys.");if(pn)Object.defineProperty(e,vn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[vn]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[vn]=t}}return t}(e);if("function"==typeof e.toString)return oe(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function oe(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ae(t)}function le(e){X(e!==1/0,"Cannot perform this action with an infinite size.")}function ie(e){return null===e||void 0===e?ge():se(e)&&!u(e)?e:ge().withMutations(function(t){var a=n(e);le(a.size),a.forEach(function(e,n){return t.set(n,e)})})}function se(e){return!(!e||!e[_n])}function ue(e,t){this.ownerID=e,this.entries=t}function ce(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function de(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function fe(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function pe(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function he(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&ve(e._root)}function me(e,t){return C(e,t[0],t[1])}function ve(e,t){return{node:e,index:0,__prev:t}}function ye(e,t,n,a){var r=Object.create(Cn);return r.size=e,r._root=t,r.__ownerID=n,r.__hash=a,r.__altered=!1,r}function ge(){return wn||(wn=ye(0))}function Ee(e,t,n){var a,r;if(e._root){var o=c(Xt),l=c(Qt);if(a=be(e._root,e.__ownerID,0,void 0,t,n,o,l),!l.value)return e;r=e.size+(o.value?n===Jt?-1:1:0)}else{if(n===Jt)return e;r=1,a=new ue(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=r,e._root=a,e.__hash=void 0,e.__altered=!0,e):a?ye(r,a):ge()}function be(e,t,n,a,r,o,l,i){return e?e.update(t,n,a,r,o,l,i):o===Jt?e:(d(i),d(l),new pe(t,a,[r,o]))}function _e(e){return e.constructor===pe||e.constructor===fe}function Ce(e,t,n,a,r){if(e.keyHash===a)return new fe(t,a,[e.entry,r]);var o,l=(0===n?e.keyHash:e.keyHash>>>n)&Yt,i=(0===n?a:a>>>n)&Yt;return new ce(t,1<<l|1<<i,l===i?[Ce(e,t,n+Vt,a,r)]:(o=new pe(t,a,r),l<i?[e,o]:[o,e]))}function we(e,t,a){for(var r=[],l=0;l<a.length;l++){var i=a[l],s=n(i);o(i)||(s=s.map(function(e){return W(e)})),r.push(s)}return xe(e,t,r)}function ke(e,t,n){return e&&e.mergeDeep&&o(t)?e.mergeDeep(t):$(e,t)?e:t}function Se(e){return function(t,n,a){if(t&&t.mergeDeepWith&&o(n))return t.mergeDeepWith(e,n);var r=e(t,n,a);return $(t,r)?t:r}}function xe(e,t,n){return 0===(n=n.filter(function(e){return 0!==e.size})).length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var a=t?function(n,a){e.update(a,Jt,function(e){return e===Jt?n:t(e,n,a)})}:function(t,n){e.set(n,t)},r=0;r<n.length;r++)n[r].forEach(a)}):e.constructor(n[0])}function Te(e,t,n,a){var r=e===Jt,o=t.next();if(o.done){var l=r?n:e,i=a(l);return i===l?e:i}X(r||e&&e.set,"invalid keyPath");var s=o.value,u=r?Jt:e.get(s,Jt),c=Te(u,t,n,a);return c===u?e:c===Jt?e.remove(s):(r?ge():e).set(s,c)}function Pe(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function Re(e,t,n,a){var r=a?e:p(e);return r[t]=n,r}function Oe(e){var t=Ae();if(null===e||void 0===e)return t;if(De(e))return e;var n=a(e),r=n.size;return 0===r?t:(le(r),r>0&&r<$t?Me(0,r,Vt,null,new Ne(n.toArray())):t.withMutations(function(e){e.setSize(r),n.forEach(function(t,n){return e.set(n,t)})}))}function De(e){return!(!e||!e[Tn])}function Ne(e,t){this.array=e,this.ownerID=t}function Ie(e,t){function n(e,i,s){return 0===i?function(e,n){var i=n===o?l&&l.array:e&&e.array,s=n>a?0:a-n,u=r-n;return u>$t&&(u=$t),function(){if(s===u)return On;var e=t?--u:s++;return i&&i[e]}}(e,s):function(e,o,l){var i,s=e&&e.array,u=l>a?0:a-l>>o,c=1+(r-l>>o);return c>$t&&(c=$t),function(){for(;;){if(i){var e=i();if(e!==On)return e;i=null}if(u===c)return On;var a=t?--c:u++;i=n(s&&s[a],o-Vt,l+(a<<o))}}}(e,i,s)}var a=e._origin,r=e._capacity,o=He(r),l=e._tail;return n(e._root,e._level,0)}function Me(e,t,n,a,r,o,l){var i=Object.create(Pn);return i.size=t-e,i._origin=e,i._capacity=t,i._level=n,i._root=a,i._tail=r,i.__ownerID=o,i.__hash=l,i.__altered=!1,i}function Ae(){return Rn||(Rn=Me(0,0,Vt))}function Fe(e,t,n,a,r,o){var l=a>>>n&Yt,i=e&&l<e.array.length;if(!i&&void 0===r)return e;var s;if(n>0){var u=e&&e.array[l],c=Fe(u,t,n-Vt,a,r,o);return c===u?e:(s=Le(e,t),s.array[l]=c,s)}return i&&e.array[l]===r?e:(d(o),s=Le(e,t),void 0===r&&l===s.array.length-1?s.array.pop():s.array[l]=r,s)}function Le(e,t){return t&&e&&t===e.ownerID?e:new Ne(e?e.array.slice():[],t)}function je(e,t){if(t>=He(e._capacity))return e._tail;if(t<1<<e._level+Vt){for(var n=e._root,a=e._level;n&&a>0;)n=n.array[t>>>a&Yt],a-=Vt;return n}}function Be(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var a=e.__ownerID||new f,r=e._origin,o=e._capacity,l=r+t,i=void 0===n?o:n<0?o+n:r+n;if(l===r&&i===o)return e;if(l>=i)return e.clear();for(var s=e._level,u=e._root,c=0;l+c<0;)u=new Ne(u&&u.array.length?[void 0,u]:[],a),c+=1<<(s+=Vt);c&&(l+=c,r+=c,i+=c,o+=c);for(var d=He(o),p=He(i);p>=1<<s+Vt;)u=new Ne(u&&u.array.length?[u]:[],a),s+=Vt;var h=e._tail,m=p<d?je(e,i-1):p>d?new Ne([],a):h;if(h&&p>d&&l<o&&h.array.length){for(var v=u=Le(u,a),y=s;y>Vt;y-=Vt){var g=d>>>y&Yt;v=v.array[g]=Le(v.array[g],a)}v.array[d>>>Vt&Yt]=h}if(i<o&&(m=m&&m.removeAfter(a,0,i)),l>=p)l-=p,i-=p,s=Vt,u=null,m=m&&m.removeBefore(a,0,l);else if(l>r||p<d){for(c=0;u;){var E=l>>>s&Yt;if(E!==p>>>s&Yt)break;E&&(c+=(1<<s)*E),s-=Vt,u=u.array[E]}u&&l>r&&(u=u.removeBefore(a,s,l-c)),u&&p<d&&(u=u.removeAfter(a,s,p-c)),c&&(l-=c,i-=c)}return e.__ownerID?(e.size=i-l,e._origin=l,e._capacity=i,e._level=s,e._root=u,e._tail=m,e.__hash=void 0,e.__altered=!0,e):Me(l,i,s,u,m)}function Ue(e,t,n){for(var r=[],l=0,i=0;i<n.length;i++){var s=n[i],u=a(s);u.size>l&&(l=u.size),o(s)||(u=u.map(function(e){return W(e)})),r.push(u)}return l>e.size&&(e=e.setSize(l)),xe(e,t,r)}function He(e){return e<$t?0:e-1>>>Vt<<Vt}function qe(e){return null===e||void 0===e?ze():Ke(e)?e:ze().withMutations(function(t){var a=n(e);le(a.size),a.forEach(function(e,n){return t.set(n,e)})})}function Ke(e){return se(e)&&u(e)}function We(e,t,n,a){var r=Object.create(qe.prototype);return r.size=e?e.size:0,r._map=e,r._list=t,r.__ownerID=n,r.__hash=a,r}function ze(){return Dn||(Dn=We(ge(),Ae()))}function Ge(e,t,n){var a,r,o=e._map,l=e._list,i=o.get(t),s=void 0!==i;if(n===Jt){if(!s)return e;l.size>=$t&&l.size>=2*o.size?(a=(r=l.filter(function(e,t){return void 0!==e&&i!==t})).toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(a.__ownerID=r.__ownerID=e.__ownerID)):(a=o.remove(t),r=i===l.size-1?l.pop():l.set(i,void 0))}else if(s){if(n===l.get(i)[1])return e;a=o,r=l.set(i,[t,n])}else a=o.set(t,l.size),r=l.set(l.size,[t,n]);return e.__ownerID?(e.size=a.size,e._map=a,e._list=r,e.__hash=void 0,e):We(a,r)}function Ve(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function $e(e){this._iter=e,this.size=e.size}function Ye(e){this._iter=e,this.size=e.size}function Je(e){this._iter=e,this.size=e.size}function Xe(e){var t=ft(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=pt,t.__iterateUncached=function(t,n){var a=this;return e.__iterate(function(e,n){return!1!==t(n,e,a)},n)},t.__iteratorUncached=function(t,n){if(t===tn){var a=e.__iterator(t,n);return new _(function(){var e=a.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===en?Zt:en,n)},t}function Qe(e,t,n){var a=ft(e);return a.size=e.size,a.has=function(t){return e.has(t)},a.get=function(a,r){var o=e.get(a,Jt);return o===Jt?r:t.call(n,o,a,e)},a.__iterateUncached=function(a,r){var o=this;return e.__iterate(function(e,r,l){return!1!==a(t.call(n,e,r,l),r,o)},r)},a.__iteratorUncached=function(a,r){var o=e.__iterator(tn,r);return new _(function(){var r=o.next();if(r.done)return r;var l=r.value,i=l[0];return C(a,i,t.call(n,l[1],i,e),r)})},a}function Ze(e,t){var n=ft(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Xe(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,a){return e.get(t?n:-1-n,a)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=pt,n.__iterate=function(t,n){var a=this;return e.__iterate(function(e,n){return t(e,n,a)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function et(e,t,n,a){var r=ft(e);return a&&(r.has=function(a){var r=e.get(a,Jt);return r!==Jt&&!!t.call(n,r,a,e)},r.get=function(a,r){var o=e.get(a,Jt);return o!==Jt&&t.call(n,o,a,e)?o:r}),r.__iterateUncached=function(r,o){var l=this,i=0;return e.__iterate(function(e,o,s){if(t.call(n,e,o,s))return i++,r(e,a?o:i-1,l)},o),i},r.__iteratorUncached=function(r,o){var l=e.__iterator(tn,o),i=0;return new _(function(){for(;;){var o=l.next();if(o.done)return o;var s=o.value,u=s[0],c=s[1];if(t.call(n,c,u,e))return C(r,a?u:i++,c,o)}})},r}function tt(e,t,n,a){var r=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n|=0),y(t,n,r))return e;var o=g(t,r),l=E(n,r);if(o!=o||l!=l)return tt(e.toSeq().cacheResult(),t,n,a);var i,s=l-o;s==s&&(i=s<0?0:s);var u=ft(e);return u.size=0===i?i:e.size&&i||void 0,!a&&L(e)&&i>=0&&(u.get=function(t,n){return(t=m(this,t))>=0&&t<i?e.get(t+o,n):n}),u.__iterateUncached=function(t,n){var r=this;if(0===i)return 0;if(n)return this.cacheResult().__iterate(t,n);var l=0,s=!0,u=0;return e.__iterate(function(e,n){if(!s||!(s=l++<o))return u++,!1!==t(e,a?n:u-1,r)&&u!==i}),u},u.__iteratorUncached=function(t,n){if(0!==i&&n)return this.cacheResult().__iterator(t,n);var r=0!==i&&e.__iterator(t,n),l=0,s=0;return new _(function(){for(;l++<o;)r.next();if(++s>i)return{value:void 0,done:!0};var e=r.next();return a||t===en?e:C(t,s-1,t===Zt?void 0:e.value[1],e)})},u}function nt(e,t,n,a){var r=ft(e);return r.__iterateUncached=function(r,o){var l=this;if(o)return this.cacheResult().__iterate(r,o);var i=!0,s=0;return e.__iterate(function(e,o,u){if(!i||!(i=t.call(n,e,o,u)))return s++,r(e,a?o:s-1,l)}),s},r.__iteratorUncached=function(r,o){var l=this;if(o)return this.cacheResult().__iterator(r,o);var i=e.__iterator(tn,o),s=!0,u=0;return new _(function(){var e,o,c;do{if((e=i.next()).done)return a||r===en?e:C(r,u++,r===Zt?void 0:e.value[1],e);var d=e.value;o=d[0],c=d[1],s&&(s=t.call(n,c,o,l))}while(s);return r===tn?e:C(r,o,c,e)})},r}function at(e,t,n){var a=ft(e);return a.__iterateUncached=function(a,r){function l(e,u){var c=this;e.__iterate(function(e,r){return(!t||u<t)&&o(e)?l(e,u+1):!1===a(e,n?r:i++,c)&&(s=!0),!s},r)}var i=0,s=!1;return l(e,0),i},a.__iteratorUncached=function(a,r){var l=e.__iterator(a,r),i=[],s=0;return new _(function(){for(;l;){var e=l.next();if(!1===e.done){var u=e.value;if(a===tn&&(u=u[1]),t&&!(i.length<t)||!o(u))return n?e:C(a,s++,u,e);i.push(l),l=u.__iterator(a,r)}else l=i.pop()}return{value:void 0,done:!0}})},a}function rt(e,t,n){t||(t=ht);var a=l(e),r=0,o=e.toSeq().map(function(t,a){return[a,t,r++,n?n(t,a,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(a?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),a?O(o):i(e)?D(o):N(o)}function ot(e,t,n){if(t||(t=ht),n){var a=e.toSeq().map(function(t,a){return[t,n(t,a,e)]}).reduce(function(e,n){return lt(t,e[1],n[1])?n:e});return a&&a[0]}return e.reduce(function(e,n){return lt(t,e,n)?n:e})}function lt(e,t,n){var a=e(n,t);return 0===a&&n!==t&&(void 0===n||null===n||n!=n)||a>0}function it(e,n,a){var r=ft(e);return r.size=new I(a).map(function(e){return e.size}).min(),r.__iterate=function(e,t){for(var n,a=this.__iterator(en,t),r=0;!(n=a.next()).done&&!1!==e(n.value,r++,this););return r},r.__iteratorUncached=function(e,r){var o=a.map(function(e){return e=t(e),x(r?e.reverse():e)}),l=0,i=!1;return new _(function(){var t;return i||(t=o.map(function(e){return e.next()}),i=t.some(function(e){return e.done})),i?{value:void 0,done:!0}:C(e,l++,n.apply(null,t.map(function(e){return e.value})))})},r}function st(e,t){return L(e)?t:e.constructor(t)}function ut(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function ct(e){return le(e.size),h(e)}function dt(e){return l(e)?n:i(e)?a:r}function ft(e){return Object.create((l(e)?O:i(e)?D:N).prototype)}function pt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):R.prototype.cacheResult.call(this)}function ht(e,t){return e>t?1:e<t?-1:0}function mt(e){var n=x(e);if(!n){if(!P(e))throw new TypeError("Expected iterable or array-like: "+e);n=x(t(e))}return n}function vt(e,t){var n,a=function(o){if(o instanceof a)return o;if(!(this instanceof a))return new a(o);if(!n){n=!0;var l=Object.keys(e);!function(e,t){try{t.forEach(function(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){X(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}.bind(void 0,e))}catch(e){}}(r,l),r.size=l.length,r._name=t,r._keys=l,r._defaultValues=e}this._map=ie(o)},r=a.prototype=Object.create(Nn);return r.constructor=a,a}function yt(e,t,n){var a=Object.create(Object.getPrototypeOf(e));return a._map=t,a.__ownerID=n,a}function gt(e){return e._name||e.constructor.name||"Record"}function Et(e){return null===e||void 0===e?wt():bt(e)&&!u(e)?e:wt().withMutations(function(t){var n=r(e);le(n.size),n.forEach(function(e){return t.add(e)})})}function bt(e){return!(!e||!e[In])}function _t(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Ct(e,t){var n=Object.create(Mn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function wt(){return An||(An=Ct(ge()))}function kt(e){return null===e||void 0===e?Tt():St(e)?e:Tt().withMutations(function(t){var n=r(e);le(n.size),n.forEach(function(e){return t.add(e)})})}function St(e){return bt(e)&&u(e)}function xt(e,t){var n=Object.create(Fn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Tt(){return Ln||(Ln=xt(ze()))}function Pt(e){return null===e||void 0===e?Dt():Rt(e)?e:Dt().unshiftAll(e)}function Rt(e){return!(!e||!e[jn])}function Ot(e,t,n,a){var r=Object.create(Bn);return r.size=e,r._head=t,r.__ownerID=n,r.__hash=a,r.__altered=!1,r}function Dt(){return Un||(Un=Ot(0))}function Nt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function It(e,t){return t}function Mt(e,t){return[t,e]}function At(e){return function(){return!e.apply(this,arguments)}}function Ft(e){return function(){return-e.apply(this,arguments)}}function Lt(e){return"string"==typeof e?JSON.stringify(e):e}function jt(){return p(arguments)}function Bt(e,t){return e<t?1:e>t?-1:0}function Ut(e){if(e.size===1/0)return 0;var t=u(e),n=l(e),a=t?1:0;return function(e,t){return t=dn(t,3432918353),t=dn(t<<15|t>>>-15,461845907),t=dn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=dn(t^t>>>16,2246822507),t=dn(t^t>>>13,3266489909),t=ae(t^t>>>16)}(e.__iterate(n?t?function(e,t){a=31*a+Ht(re(e),re(t))|0}:function(e,t){a=a+Ht(re(e),re(t))|0}:t?function(e){a=31*a+re(e)|0}:function(e){a=a+re(e)|0}),a)}function Ht(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var qt=Array.prototype.slice;e(n,t),e(a,t),e(r,t),t.isIterable=o,t.isKeyed=l,t.isIndexed=i,t.isAssociative=s,t.isOrdered=u,t.Keyed=n,t.Indexed=a,t.Set=r;var Kt="@@__IMMUTABLE_ITERABLE__@@",Wt="@@__IMMUTABLE_KEYED__@@",zt="@@__IMMUTABLE_INDEXED__@@",Gt="@@__IMMUTABLE_ORDERED__@@",Vt=5,$t=1<<Vt,Yt=$t-1,Jt={},Xt={value:!1},Qt={value:!1},Zt=0,en=1,tn=2,nn="function"==typeof Symbol&&Symbol.iterator,an="@@iterator",rn=nn||an;_.prototype.toString=function(){return"[Iterator]"},_.KEYS=Zt,_.VALUES=en,_.ENTRIES=tn,_.prototype.inspect=_.prototype.toSource=function(){return this.toString()},_.prototype[rn]=function(){return this},e(R,t),R.of=function(){return R(arguments)},R.prototype.toSeq=function(){return this},R.prototype.toString=function(){return this.__toString("Seq {","}")},R.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},R.prototype.__iterate=function(e,t){return q(this,e,t,!0)},R.prototype.__iterator=function(e,t){return K(this,e,t,!0)},e(O,R),O.prototype.toKeyedSeq=function(){return this},e(D,R),D.of=function(){return D(arguments)},D.prototype.toIndexedSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq [","]")},D.prototype.__iterate=function(e,t){return q(this,e,t,!1)},D.prototype.__iterator=function(e,t){return K(this,e,t,!1)},e(N,R),N.of=function(){return N(arguments)},N.prototype.toSetSeq=function(){return this},R.isSeq=L,R.Keyed=O,R.Set=N,R.Indexed=D;var on="@@__IMMUTABLE_SEQ__@@";R.prototype[on]=!0,e(I,D),I.prototype.get=function(e,t){return this.has(e)?this._array[m(this,e)]:t},I.prototype.__iterate=function(e,t){for(var n=this._array,a=n.length-1,r=0;r<=a;r++)if(!1===e(n[t?a-r:r],r,this))return r+1;return r},I.prototype.__iterator=function(e,t){var n=this._array,a=n.length-1,r=0;return new _(function(){return r>a?{value:void 0,done:!0}:C(e,r,n[t?a-r++:r++])})},e(M,O),M.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},M.prototype.has=function(e){return this._object.hasOwnProperty(e)},M.prototype.__iterate=function(e,t){for(var n=this._object,a=this._keys,r=a.length-1,o=0;o<=r;o++){var l=a[t?r-o:o];if(!1===e(n[l],l,this))return o+1}return o},M.prototype.__iterator=function(e,t){var n=this._object,a=this._keys,r=a.length-1,o=0;return new _(function(){var l=a[t?r-o:o];return o++>r?{value:void 0,done:!0}:C(e,l,n[l])})},M.prototype[Gt]=!0,e(A,D),A.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=x(this._iterable),a=0;if(S(n))for(var r;!(r=n.next()).done&&!1!==e(r.value,a++,this););return a},A.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=x(this._iterable);if(!S(n))return new _(w);var a=0;return new _(function(){var t=n.next();return t.done?t:C(e,a++,t.value)})},e(F,D),F.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,a=this._iteratorCache,r=0;r<a.length;)if(!1===e(a[r],r++,this))return r;for(var o;!(o=n.next()).done;){var l=o.value;if(a[r]=l,!1===e(l,r++,this))break}return r},F.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,a=this._iteratorCache,r=0;return new _(function(){if(r>=a.length){var t=n.next();if(t.done)return t;a[r]=t.value}return C(e,r,a[r++])})};var ln;e(J,D),J.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},J.prototype.get=function(e,t){return this.has(e)?this._value:t},J.prototype.includes=function(e){return $(this._value,e)},J.prototype.slice=function(e,t){var n=this.size;return y(e,t,n)?this:new J(this._value,E(t,n)-g(e,n))},J.prototype.reverse=function(){return this},J.prototype.indexOf=function(e){return $(this._value,e)?0:-1},J.prototype.lastIndexOf=function(e){return $(this._value,e)?this.size:-1},J.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},J.prototype.__iterator=function(e,t){var n=this,a=0;return new _(function(){return a<n.size?C(e,a++,n._value):{value:void 0,done:!0}})},J.prototype.equals=function(e){return e instanceof J?$(this._value,e._value):Y(e)};var sn;e(Q,D),Q.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Q.prototype.get=function(e,t){return this.has(e)?this._start+m(this,e)*this._step:t},Q.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Q.prototype.slice=function(e,t){return y(e,t,this.size)?this:(e=g(e,this.size),(t=E(t,this.size))<=e?new Q(0,0):new Q(this.get(e,this._end),this.get(t,this._end),this._step))},Q.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Q.prototype.lastIndexOf=function(e){return this.indexOf(e)},Q.prototype.__iterate=function(e,t){for(var n=this.size-1,a=this._step,r=t?this._start+n*a:this._start,o=0;o<=n;o++){if(!1===e(r,o,this))return o+1;r+=t?-a:a}return o},Q.prototype.__iterator=function(e,t){var n=this.size-1,a=this._step,r=t?this._start+n*a:this._start,o=0;return new _(function(){var l=r;return r+=t?-a:a,o>n?{value:void 0,done:!0}:C(e,o++,l)})},Q.prototype.equals=function(e){return e instanceof Q?this._start===e._start&&this._end===e._end&&this._step===e._step:Y(this,e)};var un;e(Z,t),e(ee,Z),e(te,Z),e(ne,Z),Z.Keyed=ee,Z.Indexed=te,Z.Set=ne;var cn,dn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),a=65535&(t|=0);return n*a+((e>>>16)*a+n*(t>>>16)<<16>>>0)|0},fn=Object.isExtensible,pn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),hn="function"==typeof WeakMap;hn&&(cn=new WeakMap);var mn=0,vn="__immutablehash__";"function"==typeof Symbol&&(vn=Symbol(vn));var yn=16,gn=255,En=0,bn={};e(ie,ee),ie.prototype.toString=function(){return this.__toString("Map {","}")},ie.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},ie.prototype.set=function(e,t){return Ee(this,e,t)},ie.prototype.setIn=function(e,t){return this.updateIn(e,Jt,function(){return t})},ie.prototype.remove=function(e){return Ee(this,e,Jt)},ie.prototype.deleteIn=function(e){return this.updateIn(e,function(){return Jt})},ie.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},ie.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var a=Te(this,mt(e),t,n);return a===Jt?void 0:a},ie.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ge()},ie.prototype.merge=function(){return we(this,void 0,arguments)},ie.prototype.mergeWith=function(e){return we(this,e,qt.call(arguments,1))},ie.prototype.mergeIn=function(e){var t=qt.call(arguments,1);return this.updateIn(e,ge(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},ie.prototype.mergeDeep=function(){return we(this,ke,arguments)},ie.prototype.mergeDeepWith=function(e){var t=qt.call(arguments,1);return we(this,Se(e),t)},ie.prototype.mergeDeepIn=function(e){var t=qt.call(arguments,1);return this.updateIn(e,ge(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},ie.prototype.sort=function(e){return qe(rt(this,e))},ie.prototype.sortBy=function(e,t){return qe(rt(this,t,e))},ie.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},ie.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new f)},ie.prototype.asImmutable=function(){return this.__ensureOwner()},ie.prototype.wasAltered=function(){return this.__altered},ie.prototype.__iterator=function(e,t){return new he(this,e,t)},ie.prototype.__iterate=function(e,t){var n=this,a=0;return this._root&&this._root.iterate(function(t){return a++,e(t[1],t[0],n)},t),a},ie.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?ye(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},ie.isMap=se;var _n="@@__IMMUTABLE_MAP__@@",Cn=ie.prototype;Cn[_n]=!0,Cn.delete=Cn.remove,Cn.removeIn=Cn.deleteIn,ue.prototype.get=function(e,t,n,a){for(var r=this.entries,o=0,l=r.length;o<l;o++)if($(n,r[o][0]))return r[o][1];return a},ue.prototype.update=function(e,t,n,a,r,o,l){for(var i=r===Jt,s=this.entries,u=0,c=s.length;u<c&&!$(a,s[u][0]);u++);var h=u<c;if(h?s[u][1]===r:i)return this;if(d(l),(i||!h)&&d(o),!i||1!==s.length){if(!h&&!i&&s.length>=kn)return function(e,t,n,a){e||(e=new f);for(var r=new pe(e,re(n),[n,a]),o=0;o<t.length;o++){var l=t[o];r=r.update(e,0,void 0,l[0],l[1])}return r}(e,s,a,r);var m=e&&e===this.ownerID,v=m?s:p(s);return h?i?u===c-1?v.pop():v[u]=v.pop():v[u]=[a,r]:v.push([a,r]),m?(this.entries=v,this):new ue(e,v)}},ce.prototype.get=function(e,t,n,a){void 0===t&&(t=re(n));var r=1<<((0===e?t:t>>>e)&Yt),o=this.bitmap;return 0==(o&r)?a:this.nodes[Pe(o&r-1)].get(e+Vt,t,n,a)},ce.prototype.update=function(e,t,n,a,r,o,l){void 0===n&&(n=re(a));var i=(0===t?n:n>>>t)&Yt,s=1<<i,u=this.bitmap,c=0!=(u&s);if(!c&&r===Jt)return this;var d=Pe(u&s-1),f=this.nodes,p=c?f[d]:void 0,h=be(p,e,t+Vt,n,a,r,o,l);if(h===p)return this;if(!c&&h&&f.length>=Sn)return function(e,t,n,a,r){for(var o=0,l=new Array($t),i=0;0!==n;i++,n>>>=1)l[i]=1&n?t[o++]:void 0;return l[a]=r,new de(e,o+1,l)}(e,f,u,i,h);if(c&&!h&&2===f.length&&_e(f[1^d]))return f[1^d];if(c&&h&&1===f.length&&_e(h))return h;var m=e&&e===this.ownerID,v=c?h?u:u^s:u|s,y=c?h?Re(f,d,h,m):function(e,t,n){var a=e.length-1;if(n&&t===a)return e.pop(),e;for(var r=new Array(a),o=0,l=0;l<a;l++)l===t&&(o=1),r[l]=e[l+o];return r}(f,d,m):function(e,t,n,a){var r=e.length+1;if(a&&t+1===r)return e[t]=n,e;for(var o=new Array(r),l=0,i=0;i<r;i++)i===t?(o[i]=n,l=-1):o[i]=e[i+l];return o}(f,d,h,m);return m?(this.bitmap=v,this.nodes=y,this):new ce(e,v,y)},de.prototype.get=function(e,t,n,a){void 0===t&&(t=re(n));var r=(0===e?t:t>>>e)&Yt,o=this.nodes[r];return o?o.get(e+Vt,t,n,a):a},de.prototype.update=function(e,t,n,a,r,o,l){void 0===n&&(n=re(a));var i=(0===t?n:n>>>t)&Yt,s=r===Jt,u=this.nodes,c=u[i];if(s&&!c)return this;var d=be(c,e,t+Vt,n,a,r,o,l);if(d===c)return this;var f=this.count;if(c){if(!d&&--f<xn)return function(e,t,n,a){for(var r=0,o=0,l=new Array(n),i=0,s=1,u=t.length;i<u;i++,s<<=1){var c=t[i];void 0!==c&&i!==a&&(r|=s,l[o++]=c)}return new ce(e,r,l)}(e,u,f,i)}else f++;var p=e&&e===this.ownerID,h=Re(u,i,d,p);return p?(this.count=f,this.nodes=h,this):new de(e,f,h)},fe.prototype.get=function(e,t,n,a){for(var r=this.entries,o=0,l=r.length;o<l;o++)if($(n,r[o][0]))return r[o][1];return a},fe.prototype.update=function(e,t,n,a,r,o,l){void 0===n&&(n=re(a));var i=r===Jt;if(n!==this.keyHash)return i?this:(d(l),d(o),Ce(this,e,t,n,[a,r]));for(var s=this.entries,u=0,c=s.length;u<c&&!$(a,s[u][0]);u++);var f=u<c;if(f?s[u][1]===r:i)return this;if(d(l),(i||!f)&&d(o),i&&2===c)return new pe(e,this.keyHash,s[1^u]);var h=e&&e===this.ownerID,m=h?s:p(s);return f?i?u===c-1?m.pop():m[u]=m.pop():m[u]=[a,r]:m.push([a,r]),h?(this.entries=m,this):new fe(e,this.keyHash,m)},pe.prototype.get=function(e,t,n,a){return $(n,this.entry[0])?this.entry[1]:a},pe.prototype.update=function(e,t,n,a,r,o,l){var i=r===Jt,s=$(a,this.entry[0]);return(s?r===this.entry[1]:i)?this:(d(l),i?void d(o):s?e&&e===this.ownerID?(this.entry[1]=r,this):new pe(e,this.keyHash,[a,r]):(d(o),Ce(this,e,t,re(a),[a,r])))},ue.prototype.iterate=fe.prototype.iterate=function(e,t){for(var n=this.entries,a=0,r=n.length-1;a<=r;a++)if(!1===e(n[t?r-a:a]))return!1},ce.prototype.iterate=de.prototype.iterate=function(e,t){for(var n=this.nodes,a=0,r=n.length-1;a<=r;a++){var o=n[t?r-a:a];if(o&&!1===o.iterate(e,t))return!1}},pe.prototype.iterate=function(e,t){return e(this.entry)},e(he,_),he.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,a=t.node,r=t.index++;if(a.entry){if(0===r)return me(e,a.entry)}else if(a.entries){if(n=a.entries.length-1,r<=n)return me(e,a.entries[this._reverse?n-r:r])}else if(n=a.nodes.length-1,r<=n){var o=a.nodes[this._reverse?n-r:r];if(o){if(o.entry)return me(e,o.entry);t=this._stack=ve(o,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var wn,kn=$t/4,Sn=$t/2,xn=$t/4;e(Oe,te),Oe.of=function(){return this(arguments)},Oe.prototype.toString=function(){return this.__toString("List [","]")},Oe.prototype.get=function(e,t){if((e=m(this,e))>=0&&e<this.size){var n=je(this,e+=this._origin);return n&&n.array[e&Yt]}return t},Oe.prototype.set=function(e,t){return function(e,t,n){if((t=m(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Be(e,t).set(0,n):Be(e,0,t+1).set(t,n)});t+=e._origin;var a=e._tail,r=e._root,o=c(Qt);return t>=He(e._capacity)?a=Fe(a,e.__ownerID,0,t,n,o):r=Fe(r,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=r,e._tail=a,e.__hash=void 0,e.__altered=!0,e):Me(e._origin,e._capacity,e._level,r,a):e}(this,e,t)},Oe.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},Oe.prototype.insert=function(e,t){return this.splice(e,0,t)},Oe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Vt,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ae()},Oe.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Be(n,0,t+e.length);for(var a=0;a<e.length;a++)n.set(t+a,e[a])})},Oe.prototype.pop=function(){return Be(this,0,-1)},Oe.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Be(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},Oe.prototype.shift=function(){return Be(this,1)},Oe.prototype.merge=function(){return Ue(this,void 0,arguments)},Oe.prototype.mergeWith=function(e){return Ue(this,e,qt.call(arguments,1))},Oe.prototype.mergeDeep=function(){return Ue(this,ke,arguments)},Oe.prototype.mergeDeepWith=function(e){var t=qt.call(arguments,1);return Ue(this,Se(e),t)},Oe.prototype.setSize=function(e){return Be(this,0,e)},Oe.prototype.slice=function(e,t){var n=this.size;return y(e,t,n)?this:Be(this,g(e,n),E(t,n))},Oe.prototype.__iterator=function(e,t){var n=0,a=Ie(this,t);return new _(function(){var t=a();return t===On?{value:void 0,done:!0}:C(e,n++,t)})},Oe.prototype.__iterate=function(e,t){for(var n,a=0,r=Ie(this,t);(n=r())!==On&&!1!==e(n,a++,this););return a},Oe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Me(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},Oe.isList=De;var Tn="@@__IMMUTABLE_LIST__@@",Pn=Oe.prototype;Pn[Tn]=!0,Pn.delete=Pn.remove,Pn.setIn=Cn.setIn,Pn.deleteIn=Pn.removeIn=Cn.removeIn,Pn.update=Cn.update,Pn.updateIn=Cn.updateIn,Pn.mergeIn=Cn.mergeIn,Pn.mergeDeepIn=Cn.mergeDeepIn,Pn.withMutations=Cn.withMutations,Pn.asMutable=Cn.asMutable,Pn.asImmutable=Cn.asImmutable,Pn.wasAltered=Cn.wasAltered,Ne.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var a=n>>>t&Yt;if(a>=this.array.length)return new Ne([],e);var r,o=0===a;if(t>0){var l=this.array[a];if((r=l&&l.removeBefore(e,t-Vt,n))===l&&o)return this}if(o&&!r)return this;var i=Le(this,e);if(!o)for(var s=0;s<a;s++)i.array[s]=void 0;return r&&(i.array[a]=r),i},Ne.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var a=n-1>>>t&Yt;if(a>=this.array.length)return this;var r;if(t>0){var o=this.array[a];if((r=o&&o.removeAfter(e,t-Vt,n))===o&&a===this.array.length-1)return this}var l=Le(this,e);return l.array.splice(a+1),r&&(l.array[a]=r),l};var Rn,On={};e(qe,ie),qe.of=function(){return this(arguments)},qe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},qe.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ze()},qe.prototype.set=function(e,t){return Ge(this,e,t)},qe.prototype.remove=function(e){return Ge(this,e,Jt)},qe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},qe.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},qe.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},qe.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?We(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},qe.isOrderedMap=Ke,qe.prototype[Gt]=!0,qe.prototype.delete=qe.prototype.remove;var Dn;e(Ve,O),Ve.prototype.get=function(e,t){return this._iter.get(e,t)},Ve.prototype.has=function(e){return this._iter.has(e)},Ve.prototype.valueSeq=function(){return this._iter.valueSeq()},Ve.prototype.reverse=function(){var e=this,t=Ze(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},Ve.prototype.map=function(e,t){var n=this,a=Qe(this,e,t);return this._useKeys||(a.valueSeq=function(){return n._iter.toSeq().map(e,t)}),a},Ve.prototype.__iterate=function(e,t){var n,a=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,a)}:(n=t?ct(this):0,function(r){return e(r,t?--n:n++,a)}),t)},Ve.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(en,t),a=t?ct(this):0;return new _(function(){var r=n.next();return r.done?r:C(e,t?--a:a++,r.value,r)})},Ve.prototype[Gt]=!0,e($e,D),$e.prototype.includes=function(e){return this._iter.includes(e)},$e.prototype.__iterate=function(e,t){var n=this,a=0;return this._iter.__iterate(function(t){return e(t,a++,n)},t)},$e.prototype.__iterator=function(e,t){var n=this._iter.__iterator(en,t),a=0;return new _(function(){var t=n.next();return t.done?t:C(e,a++,t.value,t)})},e(Ye,N),Ye.prototype.has=function(e){return this._iter.includes(e)},Ye.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},Ye.prototype.__iterator=function(e,t){var n=this._iter.__iterator(en,t);return new _(function(){var t=n.next();return t.done?t:C(e,t.value,t.value,t)})},e(Je,O),Je.prototype.entrySeq=function(){return this._iter.toSeq()},Je.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){ut(t);var a=o(t);return e(a?t.get(1):t[1],a?t.get(0):t[0],n)}},t)},Je.prototype.__iterator=function(e,t){var n=this._iter.__iterator(en,t);return new _(function(){for(;;){var t=n.next();if(t.done)return t;var a=t.value;if(a){ut(a);var r=o(a);return C(e,r?a.get(0):a[0],r?a.get(1):a[1],t)}}})},$e.prototype.cacheResult=Ve.prototype.cacheResult=Ye.prototype.cacheResult=Je.prototype.cacheResult=pt,e(vt,ee),vt.prototype.toString=function(){return this.__toString(gt(this)+" {","}")},vt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},vt.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},vt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=yt(this,ge()))},vt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+gt(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:yt(this,n)},vt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:yt(this,t)},vt.prototype.wasAltered=function(){return this._map.wasAltered()},vt.prototype.__iterator=function(e,t){var a=this;return n(this._defaultValues).map(function(e,t){return a.get(t)}).__iterator(e,t)},vt.prototype.__iterate=function(e,t){var a=this;return n(this._defaultValues).map(function(e,t){return a.get(t)}).__iterate(e,t)},vt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?yt(this,t,e):(this.__ownerID=e,this._map=t,this)};var Nn=vt.prototype;Nn.delete=Nn.remove,Nn.deleteIn=Nn.removeIn=Cn.removeIn,Nn.merge=Cn.merge,Nn.mergeWith=Cn.mergeWith,Nn.mergeIn=Cn.mergeIn,Nn.mergeDeep=Cn.mergeDeep,Nn.mergeDeepWith=Cn.mergeDeepWith,Nn.mergeDeepIn=Cn.mergeDeepIn,Nn.setIn=Cn.setIn,Nn.update=Cn.update,Nn.updateIn=Cn.updateIn,Nn.withMutations=Cn.withMutations,Nn.asMutable=Cn.asMutable,Nn.asImmutable=Cn.asImmutable,e(Et,ne),Et.of=function(){return this(arguments)},Et.fromKeys=function(e){return this(n(e).keySeq())},Et.prototype.toString=function(){return this.__toString("Set {","}")},Et.prototype.has=function(e){return this._map.has(e)},Et.prototype.add=function(e){return _t(this,this._map.set(e,!0))},Et.prototype.remove=function(e){return _t(this,this._map.remove(e))},Et.prototype.clear=function(){return _t(this,this._map.clear())},Et.prototype.union=function(){var e=qt.call(arguments,0);return 0===(e=e.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)r(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Et.prototype.intersect=function(){var e=qt.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return r(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Et.prototype.subtract=function(){var e=qt.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return r(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Et.prototype.merge=function(){return this.union.apply(this,arguments)},Et.prototype.mergeWith=function(e){var t=qt.call(arguments,1);return this.union.apply(this,t)},Et.prototype.sort=function(e){return kt(rt(this,e))},Et.prototype.sortBy=function(e,t){return kt(rt(this,t,e))},Et.prototype.wasAltered=function(){return this._map.wasAltered()},Et.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,a){return e(a,a,n)},t)},Et.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Et.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Et.isSet=bt;var In="@@__IMMUTABLE_SET__@@",Mn=Et.prototype;Mn[In]=!0,Mn.delete=Mn.remove,Mn.mergeDeep=Mn.merge,Mn.mergeDeepWith=Mn.mergeWith,Mn.withMutations=Cn.withMutations,Mn.asMutable=Cn.asMutable,Mn.asImmutable=Cn.asImmutable,Mn.__empty=wt,Mn.__make=Ct;var An;e(kt,Et),kt.of=function(){return this(arguments)},kt.fromKeys=function(e){return this(n(e).keySeq())},kt.prototype.toString=function(){return this.__toString("OrderedSet {","}")},kt.isOrderedSet=St;var Fn=kt.prototype;Fn[Gt]=!0,Fn.__empty=Tt,Fn.__make=xt;var Ln;e(Pt,te),Pt.of=function(){return this(arguments)},Pt.prototype.toString=function(){return this.__toString("Stack [","]")},Pt.prototype.get=function(e,t){var n=this._head;for(e=m(this,e);n&&e--;)n=n.next;return n?n.value:t},Pt.prototype.peek=function(){return this._head&&this._head.value},Pt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Ot(e,t)},Pt.prototype.pushAll=function(e){if(0===(e=a(e)).size)return this;le(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ot(t,n)},Pt.prototype.pop=function(){return this.slice(1)},Pt.prototype.unshift=function(){return this.push.apply(this,arguments)},Pt.prototype.unshiftAll=function(e){return this.pushAll(e)},Pt.prototype.shift=function(){return this.pop.apply(this,arguments)},Pt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Dt()},Pt.prototype.slice=function(e,t){if(y(e,t,this.size))return this;var n=g(e,this.size);if(E(t,this.size)!==this.size)return te.prototype.slice.call(this,e,t);for(var a=this.size-n,r=this._head;n--;)r=r.next;return this.__ownerID?(this.size=a,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ot(a,r)},Pt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ot(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Pt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,a=this._head;a&&!1!==e(a.value,n++,this);)a=a.next;return n},Pt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,a=this._head;return new _(function(){if(a){var t=a.value;return a=a.next,C(e,n++,t)}return{value:void 0,done:!0}})},Pt.isStack=Rt;var jn="@@__IMMUTABLE_STACK__@@",Bn=Pt.prototype;Bn[jn]=!0,Bn.withMutations=Cn.withMutations,Bn.asMutable=Cn.asMutable,Bn.asImmutable=Cn.asImmutable,Bn.wasAltered=Cn.wasAltered;var Un;t.Iterator=_,Nt(t,{toArray:function(){le(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new $e(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new Ve(this,!0)},toMap:function(){return ie(this.toKeyedSeq())},toObject:function(){le(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return qe(this.toKeyedSeq())},toOrderedSet:function(){return kt(l(this)?this.valueSeq():this)},toSet:function(){return Et(l(this)?this.valueSeq():this)},toSetSeq:function(){return new Ye(this)},toSeq:function(){return i(this)?this.toIndexedSeq():l(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Pt(l(this)?this.valueSeq():this)},toList:function(){return Oe(l(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return st(this,function(e,t){var a=l(e),r=[e].concat(t).map(function(e){return o(e)?a&&(e=n(e)):e=a?B(e):U(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===r.length)return e;if(1===r.length){var s=r[0];if(s===e||a&&l(s)||i(e)&&i(s))return s}var u=new I(r);return a?u=u.toKeyedSeq():i(e)||(u=u.toSetSeq()),u=u.flatten(!0),u.size=r.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),u}(this,qt.call(arguments,0)))},includes:function(e){return this.some(function(t){return $(t,e)})},entries:function(){return this.__iterator(tn)},every:function(e,t){le(this.size);var n=!0;return this.__iterate(function(a,r,o){if(!e.call(t,a,r,o))return n=!1,!1}),n},filter:function(e,t){return st(this,et(this,e,t,!0))},find:function(e,t,n){var a=this.findEntry(e,t);return a?a[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(a,r,o){if(e.call(t,a,r,o))return n=[r,a],!1}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return le(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){le(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(a){n?n=!1:t+=e,t+=null!==a&&void 0!==a?a.toString():""}),t},keys:function(){return this.__iterator(Zt)},map:function(e,t){return st(this,Qe(this,e,t))},reduce:function(e,t,n){le(this.size);var a,r;return arguments.length<2?r=!0:a=t,this.__iterate(function(t,o,l){r?(r=!1,a=t):a=e.call(n,a,t,o,l)}),a},reduceRight:function(e,t,n){var a=this.toKeyedSeq().reverse();return a.reduce.apply(a,arguments)},reverse:function(){return st(this,Ze(this,!0))},slice:function(e,t){return st(this,tt(this,e,t,!0))},some:function(e,t){return!this.every(At(e),t)},sort:function(e){return st(this,rt(this,e))},values:function(){return this.__iterator(en)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return h(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var a=ie().asMutable();return e.__iterate(function(r,o){a.update(t.call(n,r,o,e),0,function(e){return e+1})}),a.asImmutable()}(this,e,t)},equals:function(e){return Y(this,e)},entrySeq:function(){var e=this;if(e._cache)return new I(e._cache);var t=e.toSeq().map(Mt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(At(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(v)},flatMap:function(e,t){return st(this,function(e,t,n){var a=dt(e);return e.toSeq().map(function(r,o){return a(t.call(n,r,o,e))}).flatten(!0)}(this,e,t))},flatten:function(e){return st(this,at(this,e,!0))},fromEntrySeq:function(){return new Je(this)},get:function(e,t){return this.find(function(t,n){return $(n,e)},void 0,t)},getIn:function(e,t){for(var n,a=this,r=mt(e);!(n=r.next()).done;){var o=n.value;if((a=a&&a.get?a.get(o,Jt):Jt)===Jt)return t}return a},groupBy:function(e,t){return function(e,t,n){var a=l(e),r=(u(e)?qe():ie()).asMutable();e.__iterate(function(o,l){r.update(t.call(n,o,l,e),function(e){return(e=e||[]).push(a?[l,o]:o),e})});var o=dt(e);return r.map(function(t){return st(e,o(t))})}(this,e,t)},has:function(e){return this.get(e,Jt)!==Jt},hasIn:function(e){return this.getIn(e,Jt)!==Jt},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:t(e)).isSubset(this)},keySeq:function(){return this.toSeq().map(It).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return ot(this,e)},maxBy:function(e,t){return ot(this,t,e)},min:function(e){return ot(this,e?Ft(e):Bt)},minBy:function(e,t){return ot(this,t?Ft(t):Bt,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return st(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return st(this,nt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(At(e),t)},sortBy:function(e,t){return st(this,rt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return st(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return st(this,function(e,t,n){var a=ft(e);return a.__iterateUncached=function(a,r){var o=this;if(r)return this.cacheResult().__iterate(a,r);var l=0;return e.__iterate(function(e,r,i){return t.call(n,e,r,i)&&++l&&a(e,r,o)}),l},a.__iteratorUncached=function(a,r){var o=this;if(r)return this.cacheResult().__iterator(a,r);var l=e.__iterator(tn,r),i=!0;return new _(function(){if(!i)return{value:void 0,done:!0};var e=l.next();if(e.done)return e;var r=e.value,s=r[0],u=r[1];return t.call(n,u,s,o)?a===tn?e:C(a,s,u,e):(i=!1,{value:void 0,done:!0})})},a}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(At(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Ut(this))}});var Hn=t.prototype;Hn[Kt]=!0,Hn[rn]=Hn.values,Hn.__toJS=Hn.toArray,Hn.__toStringMapper=Lt,Hn.inspect=Hn.toSource=function(){return this.toString()},Hn.chain=Hn.flatMap,Hn.contains=Hn.includes,function(){try{Object.defineProperty(Hn,"length",{get:function(){if(!t.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Nt(n,{flip:function(){return st(this,Xe(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return $(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return $(t,e)})},mapEntries:function(e,t){var n=this,a=0;return st(this,this.toSeq().map(function(r,o){return e.call(t,[o,r],a++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return st(this,this.toSeq().flip().map(function(a,r){return e.call(t,a,r,n)}).flip())}});var qn=n.prototype;return qn[Wt]=!0,qn[rn]=Hn.entries,qn.__toJS=Hn.toObject,qn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Lt(e)},Nt(a,{toKeyedSeq:function(){return new Ve(this,!1)},filter:function(e,t){return st(this,et(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return st(this,Ze(this,!1))},slice:function(e,t){return st(this,tt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=g(e,e<0?this.count():this.size);var a=this.slice(0,e);return st(this,1===n?a:a.concat(p(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return st(this,at(this,e,!1))},get:function(e,t){return(e=m(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return(e=m(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return st(this,function(e,t){var n=ft(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,a){var r=this,o=0;return e.__iterate(function(e,a){return(!o||!1!==n(t,o++,r))&&!1!==n(e,o++,r)},a),o},n.__iteratorUncached=function(n,a){var r,o=e.__iterator(en,a),l=0;return new _(function(){return(!r||l%2)&&(r=o.next()).done?r:l%2?C(n,l++,t):C(n,l++,r.value,r)})},n}(this,e))},interleave:function(){var e=[this].concat(p(arguments)),t=it(this.toSeq(),D.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),st(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return st(this,nt(this,e,t,!1))},zip:function(){return st(this,it(this,jt,[this].concat(p(arguments))))},zipWith:function(e){var t=p(arguments);return t[0]=this,st(this,it(this,e,t))}}),a.prototype[zt]=!0,a.prototype[Gt]=!0,Nt(r,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),r.prototype.has=Hn.includes,Nt(O,n.prototype),Nt(D,a.prototype),Nt(N,r.prototype),Nt(ee,n.prototype),Nt(te,a.prototype),Nt(ne,r.prototype),{Iterable:t,Seq:R,Collection:Z,Map:ie,OrderedMap:qe,List:Oe,Stack:Pt,Set:Et,OrderedSet:kt,Record:vt,Range:Q,Repeat:J,is:$,fromJS:W}}()}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(59)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=a(n(71)),f=a(n(31)),p=a(n(15)),h=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.$obj=null,a.state={data:null},a.dataLoadPromise=null,a.isLoaded=!1,a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,d.default)(function(){e.updateOptions(e.props)})}},{key:"componentWillReceiveProps",value:function(e){(0,r.default)(this.props.params)!==(0,r.default)(e.params)&&this.updateOptions(e)}},{key:"componentWillUnmount",value:function(){this.dataLoadPromise&&this.dataLoadPromise.cancel()}},{key:"render",value:function(){var e=!1;if(this.props.optimisticLoad&&this.props.value&&(e=c.default.createElement("option",null,f.default.ucFirst(this.props.value))),!this.props.id)return console.log("SourceSelect: id not set"),!1;if(-1!==this.props.id.indexOf("."))return console.log("Wrong id"),!1;var t=this.state.data,n=this.props,a=n.optionPredicate,r=n.defaultOption,o=n.className,l=n.name,i=n.id,s=n.value,u=n.onChange,d=n.children,p=n.style;return c.default.createElement("select",{className:o,name:l,id:i,value:s,onChange:u,style:p},r?c.default.createElement("option",{value:""},r):d,!!t&&t.map(function(e,t){return!(a&&!a(e))&&c.default.createElement("option",{key:t,value:e.value},e.label)}),e)}},{key:"updateOptions",value:function(e){var t=this;this.dataLoadPromise=p.default.ajax({type:"get",url:e.url,data:e.params}),this.dataLoadPromise.then(function(n){e.onLoad&&e.onLoad(n),t.setState({data:n})},function(e){return console.log(e)})}}]),t}(c.default.Component);t.default=h},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(945));t.IndexLinkContainer=r.default;var o=a(n(431));t.LinkContainer=o.default},function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(23));t.default=a.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}},,function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=u("autosize:destroy");e.dispatchEvent(t)}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=u("autosize:update");e.dispatchEvent(t)}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(50)),i=a(n(952)),s="function"==typeof i.default?new i.default:function(){var e=[];return{has:function(t){return Boolean(e.indexOf(t)>-1)},add:function(t){e.push(t)},delete:function(t){e.splice(e.indexOf(t),1)}}}(),u=function(e){return new Event(e)};try{new Event("test")}catch(e){u=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(e){function t(t){var a=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=a,p=t,d&&(e.style.overflowY=t),n()}function n(){var t=window.pageYOffset,n=document.body.scrollTop,a=e.style.height;e.style.height="auto";var r=e.scrollHeight+f;0!==e.scrollHeight?(e.style.height=r+"px",h=e.clientWidth,document.documentElement.scrollTop=t,document.body.scrollTop=n):e.style.height=a}function a(){var a=e.style.height;if(n(),window.getComputedStyle(e,null).height!==e.style.height?"visible"!==p&&t("visible"):"hidden"!==p&&t("hidden"),a!==e.style.height){var r=u("autosize:resized");e.dispatchEvent(r)}}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.setOverflowX,i=void 0===o||o,c=r.setOverflowY,d=void 0===c||c;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var f=null,p=null,h=e.clientWidth,m=function(){e.clientWidth!==h&&a()},v=function(t){window.removeEventListener("resize",m,!1),e.removeEventListener("input",a,!1),e.removeEventListener("keyup",a,!1),e.removeEventListener("autosize:destroy",v,!1),e.removeEventListener("autosize:update",a,!1),s.delete(e),(0,l.default)(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",v,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",a,!1),window.addEventListener("resize",m,!1),e.addEventListener("input",a,!1),e.addEventListener("autosize:update",a,!1),s.add(e),i&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),function(){var t=window.getComputedStyle(e,null);p=t.overflowY,"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),f="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(f)&&(f=0),a()}()}}(e,t)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=n(12),h=a(n(43)),m=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={reason:""},a.close=a.close.bind(a),a.confirm=a.confirm.bind(a),a.onChange=a.onChange.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({},n,a))}},{key:"close",value:function(){var e=this.props.onClose;this.setState({reason:""}),e()}},{key:"confirm",value:function(){(0,this.props.onConfirm)(this.state.reason),this.close()}},{key:"componentDidMount",value:function(){$(function(){return(0,h.default)($("textarea"))})}},{key:"render",value:function(){var e=this.props,t=e.headerText,n=e.show,a=e.noReason,r=this.state.reason;return d.default.createElement(f.Modal,{show:n,onHide:this.close},d.default.createElement(f.Modal.Dialog,null,d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement("p",{style:{textAlign:"center",fontSize:"14pt"}},t||"Are you sure?")),d.default.createElement(f.Modal.Body,{style:a?{display:"none"}:{}},d.default.createElement(p.FormField,{label:"Reason",width:12},d.default.createElement("textarea",{className:"form-control",rows:"2",name:"reason",onChange:this.onChange,value:r}))),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{onClick:this.close},"No"),d.default.createElement(f.Button,{onClick:this.confirm,style:{marginLeft:"15px"}},"Yes"))))}}]),t}(c.Component);t.default=m,m.propTypes={headerText:c.PropTypes.string,onConfirm:c.PropTypes.func.isRequired,onClose:c.PropTypes.func.isRequired,show:c.PropTypes.bool}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(-1!==t.indexOf("deprecated")){if(r[t])return;r[t]=!0}t="[react-router] "+t;for(var n=arguments.length,o=Array(n>2?n-2:0),l=2;l<n;l++)o[l-2]=arguments[l];a.default.apply(void 0,[e,t].concat(o))},t._resetWarned=function(){r={}};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(718)),r={}},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(99)),p=n(38),h=n(9),m=a(n(16)),v=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.activeKeyValues=["/courses","/classes","/depts","/classrooms","/debtors"],a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.selectedTab,t=window.location.pathname,n=[];for(var a in this.activeKeyValues){var r=this.activeKeyValues[a];if(e){var o=e===r;if(n.push(o),o)break}else n.push(-1!==t.indexOf(r))}var l=[h.ROLES.REGISTRAR,h.ROLES.ADMIN,h.ROLES.SUPER_ADMIN],i=[h.ROLES.ADMIN,h.ROLES.SUPER_ADMIN];return c.default.createElement("div",{className:"admin-nav-secondary"},c.default.createElement("div",{className:"container"},c.default.createElement(f.default,null,c.default.createElement(y,{to:{pathname:"/courses"},roles:l},c.default.createElement(d.NavItem,{className:n[0]?"active":""},"Course List")),c.default.createElement(y,{to:{pathname:"/classes"},roles:l},c.default.createElement(d.NavItem,{className:n[1]?"active":""},"Class list")),c.default.createElement(y,{to:{pathname:"/depts"},roles:i},c.default.createElement(d.NavItem,{className:n[2]?"active":""},"Dept list")),c.default.createElement(y,{to:{pathname:"/classrooms"},roles:i},c.default.createElement(d.NavItem,{className:n[3]?"active":""},"Classrooms")),c.default.createElement(y,{to:{pathname:"/debtors"},roles:i},c.default.createElement(d.NavItem,{className:n[4]?"active":""},"Debtors")))))}}]),t}(c.default.Component);t.default=v;var y=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.roles,n=e.to,a=e.children;return!!t.includes(m.default.getIfExists(this,"context.user.role.roleName","None"))&&c.default.createElement(p.LinkContainer,{to:n},a)}}]),t}(u.Component);y.contextTypes={user:u.PropTypes.object.isRequired}},,,function(e,t,n){e.exports={default:n(791),__esModule:!0}},,,,function(e,t,n){var a=n(55),r=n(41),o=n(82),l=n(83),i="prototype",s=function(e,t,n){var u,c,d,f=e&s.F,p=e&s.G,h=e&s.S,m=e&s.P,v=e&s.B,y=e&s.W,g=p?r:r[t]||(r[t]={}),E=g[i],b=p?a:h?a[t]:(a[t]||{})[i];p&&(n=t);for(u in n)(c=!f&&b&&void 0!==b[u])&&u in g||(d=c?b[u]:n[u],g[u]=p&&"function"!=typeof b[u]?n[u]:v&&c?o(d,a):y&&b[u]==d?function(e){var t=function(t,n,a){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,a)}return e.apply(this,arguments)};return t[i]=e[i],t}(d):m&&"function"==typeof d?o(Function.call,d):d,m&&((g.virtual||(g.virtual={}))[u]=d,e&s.R&&E&&!E[u]&&l(E,u,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var a=n(231)("wks"),r=n(156),o=n(55).Symbol,l="function"==typeof o;(e.exports=function(e){return a[e]||(a[e]=l&&o[e]||(l?o:r)("Symbol."+e))}).store=a},function(e,t,n){"use strict";var a=n(65),r=n(1312),o=n(611),l=n(35),i=n(1314),s=n(1316),u=n(195),c=n(1319),d=n(1320),f=n(30),p=n(1321),h=n(612),m=n(1322),v=n(1323),y=l.OrderedSet,g={replaceText:function(e,t,n,r,o){var l=h(e,t),i=m(l,t),s=a.create({style:r||y(),entity:o||null});return d(i,i.getSelectionAfter(),n,s)},insertText:function(e,t,n,a,r){return t.isCollapsed()||f(!1),g.replaceText(e,t,n,a,r)},moveText:function(e,t,n){var a=u(e,t),r=g.removeRange(e,t,"backward");return g.replaceWithFragment(r,n,a)},replaceWithFragment:function(e,t,n){var a=h(e,t),r=m(a,t);return c(r,r.getSelectionAfter(),n)},removeRange:function(e,t,n){var a=void 0,r=void 0,l=void 0,i=void 0;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),a=t.getAnchorKey(),r=t.getFocusKey(),l=e.getBlockForKey(a),i=e.getBlockForKey(r);var u=t.getStartOffset(),c=t.getEndOffset(),d=l.getEntityAt(u),f=i.getEntityAt(c-1);if(a===r&&d&&d===f){var p=s(e.getEntityMap(),l,i,t,n);return m(e,p)}var v=t;o.draft_segmented_entities_behavior&&(v=s(e.getEntityMap(),l,i,t,n));var y=h(e,v);return m(y,v)},splitBlock:function(e,t){var n=h(e,t),a=m(n,t);return v(a,a.getSelectionAfter())},applyInlineStyle:function(e,t,n){return r.add(e,t,n)},removeInlineStyle:function(e,t,n){return r.remove(e,t,n)},setBlockType:function(e,t,n){return p(e,t,function(e){return e.merge({type:n,depth:0})})},setBlockData:function(e,t,n){return p(e,t,function(e){return e.merge({data:n})})},mergeBlockData:function(e,t,n){return p(e,t,function(e){return e.merge({data:e.getData().merge(n)})})},applyEntity:function(e,t,n){var a=h(e,t);return i(a,t,n)}};e.exports=g},,function(e,t,n){e.exports={default:n(951),__esModule:!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={currentPage:1},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.createPagination();return c.default.createElement("div",{id:"pagination"},e)}},{key:"createPagination",value:function(){var e=this;if(!this.props.totalCount)return!1;var t=this.props.totalCount,n=Math.ceil(t/parseInt(this.props.rowsPerPage)),a=1;return this.state.currentPage&&(a=this.state.currentPage),0===n?c.default.createElement("div",null):c.default.createElement(d.Pager,null,c.default.createElement(d.PageItem,{onClick:function(){return e.turnPage(a-1)},disabled:1==a}," Prev")," ",c.default.createElement(d.PageItem,{onClick:function(){return e.turnPage(a+1)},disabled:a==n},"Next "),c.default.createElement("p",{style:{marginTop:"10px"}},a," / ",n))}},{key:"turnPage",value:function(e){e=parseInt(e),this.setState({currentPage:e}),this.props.onPageChange&&this.props.onPageChange(e)}},{key:"componentDidMount",value:function(){var e=this;this.props.currentPage&&this.props.currentPage>0&&this.setState({currentPage:this.props.currentPage}),$(function(){e.$paginationContainer=$("#pagination")})}},{key:"componentWillReceiveProps",value:function(e){e&&e.currentPage&&this.setState({currentPage:e.currentPage})}}]),t}(u.Component);t.default=f,f.PropTypes={totalCount:u.PropTypes.number.isRequired,rowsPerPage:u.PropTypes.number.isRequired,currentPage:u.PropTypes.number.isRequired,onPageChange:u.PropTypes.func}},function(e,t,n){"use strict";e.exports=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")}},,,function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var a=n(35),r=a.Map,o=a.OrderedSet,l=a.Record,i=o(),s={style:i,entity:null},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getStyle=function(){return this.get("style")},t.prototype.getEntity=function(){return this.get("entity")},t.prototype.hasStyle=function(e){return this.getStyle().includes(e)},t.applyStyle=function(e,n){var a=e.set("style",e.getStyle().add(n));return t.create(a)},t.removeStyle=function(e,n){var a=e.set("style",e.getStyle().remove(n));return t.create(a)},t.applyEntity=function(e,n){var a=e.getEntity()===n?e:e.set("entity",n);return t.create(a)},t.create=function(e){if(!e)return c;var n=r({style:i,entity:null}).merge(e),a=d.get(n);if(a)return a;var o=new t(n);return d=d.set(n,o),o},t}(l(s)),c=new u,d=r([[r(s),c]]);u.EMPTY=c,e.exports=u},,function(e,t,n){var a=n(68),r=n(356),o=n(225),l=Object.defineProperty;t.f=n(69)?Object.defineProperty:function(e,t,n){if(a(e),t=o(t,!0),a(n),r)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var a=n(64);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(94)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(761)),o=a(n(768)),l="function"==typeof o.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};t.default="function"==typeof o.default&&"symbol"===l(r.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":l(e)}},,,function(e,t,n){"use strict";var a={},r=Math.pow(2,24);e.exports=function(){for(var e=void 0;void 0===e||a.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*r).toString(32);return a[e]=!0,e}},function(e,t,n){"use strict";function a(e,t,n,a){if(e===n)return!0;if(!n.startsWith(e))return!1;var r=n.slice(e.length);return!!t&&(r=a?a(r):r,l.contains(r,t))}function r(e){return"Windows"===o.platformName?e.replace(/^\s*NT/,""):e}var o=n(1333),l=n(1336),i=n(1337),s=n(1338),u={isBrowser:function(e){return a(o.browserName,o.browserFullVersion,e)},isBrowserArchitecture:function(e){return a(o.browserArchitecture,null,e)},isDevice:function(e){return a(o.deviceName,null,e)},isEngine:function(e){return a(o.engineName,o.engineVersion,e)},isPlatform:function(e){return a(o.platformName,o.platformFullVersion,e,r)},isPlatformArchitecture:function(e){return a(o.platformArchitecture,null,e)}};e.exports=i(u,s)},,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(70)),o=a(n(1)),l=a(n(2)),i=a(n(7)),s=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,null,[{key:"extractValues",value:function(e){var t=e.toLocaleDateString().split(/[.\/]+/),n=function(e){return(e=parseInt(e))>=10?e:"0"+e},a=n(t[1]),r=n(t[0]),o=t[2];return{date:e,day:a,month:r,year:o,toString:function(e){return e||(e=" "),[o,r,a].join(e)}}}},{key:"parse",value:function(e){var t=this,n=new Date(e),a=n.toDateString().split(" ");return{date:n,day:a[2],month:a[1],year:a[3],toString:function(){return[t.day,t.month,t.year].join(" ")}}}},{key:"parseLocale",value:function(e){var t=new Date(e),n=t.toLocaleDateString().split(/[.\/]+/),a=n[0],r=n[1],o=n[2];return{date:t,day:a,month:r,year:o,toString:function(e){return[a,r,o].join(e)}}}},{key:"dateToStr",value:function(e){var t=function(e){return(e=parseInt(e))>=10?e:"0"+e},n=parseInt(e.getMonth())+1;return n>12&&(n=1),e.getFullYear()+"-"+t(n)+"-"+t(e.getDate())}},{key:"parseMoment",value:function(e){var t=function(e){return e.split(/[^0-9]+/g)}(e);if(1===t.length){if(8!==t[0].length)return e;t=[e.substr(0,2),e.substr(2,2),e.substr(4)]}return 4===t[0].length?(0,i.default)(e,"YYYY-MM-DD"):(0,i.default)(e,"DD-MM-YYYY")}},{key:"format",value:function(t){var n=e.parseMoment(t);return"object"!==(void 0===n?"undefined":(0,r.default)(n))?n:n.format("YYYY-MM-DD")}},{key:"years",value:function(t,n){if(!t)return t;var a=e.parseMoment(t);if("object"!==(void 0===a?"undefined":(0,r.default)(a)))return a;var o=n?e.parseMoment(n):(0,i.default)();return Math.abs(a.diff(o,"years"))}}]),e}();t.default=s},,,function(e,t,n){"use strict";var a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,l,i=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var u in n)r.call(n,u)&&(i[u]=n[u]);if(a){l=a(n);for(var c=0;c<l.length;c++)o.call(n,l[c])&&(i[l[c]]=n[l[c]])}}return i}},function(e,t,n){"use strict";function a(e){return null==e||s.default.isValidElement(e)}function r(e){return a(e)||Array.isArray(e)&&e.every(a)}function o(e){var t=function(e,t){return i({},e,t)}(e.type.defaultProps,e.props);if(t.children){var n=l(t.children,t);n.length&&(t.childRoutes=n),delete t.children}return t}function l(e,t){var n=[];return s.default.Children.forEach(e,function(e){if(s.default.isValidElement(e))if(e.type.createRouteFromReactElement){var a=e.type.createRouteFromReactElement(e,t);a&&n.push(a)}else n.push(o(e))}),n}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.isReactChildren=r,t.createRouteFromReactElement=o,t.createRoutesFromReactChildren=l,t.createRoutes=function(e){return r(e)?e=l(e):e&&!Array.isArray(e)&&(e=[e]),e};var s=function(e){return e&&e.__esModule?e:{default:e}}(n(0))},function(e,t,n){var a=n(119);e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,r){return e.call(t,n,a,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var a=n(67),r=n(155);e.exports=n(69)?function(e,t,n){return a.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(4)),l=a(n(5)),i=a(n(1)),s=a(n(2)),u=function(){function e(t,n){(0,i.default)(this,e),this.path=t,this.root=n||"head"}return(0,s.default)(e,[{key:"load",value:function(){}},{key:"unload",value:function(){}}]),e}(),c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,s.default)(t,[{key:"load",value:function(){var e=this;$(function(){var t='<link rel="stylesheet" type="text/css" href="'+e.path+'" />';$(e.root).append(t)})}},{key:"unload",value:function(){$(this.root+' link[href="'+this.path+'"]').remove()}}]),t}(u),d=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,s.default)(t,[{key:"load",value:function(e){var t=this;$(function(){if($('script[src="'+t.path+'"]').length>0)e();else{var n='<script type="application/javascript" src="'+t.path+'" />';$(t.root).append(n);var a=10;t.waitingForLoad=setInterval(function(){if($('script[src="'+t.path+'"]').length>0&&(e(),clearInterval(t.waitingForLoad)),0==--a)throw clearInterval(t.waitingForLoad),new Error("Resource "+t.path+" was not loaded")},500)}})}},{key:"unload",value:function(){$(this.root+' link[href="'+this.path+'"]').remove()}}]),t}(u),f=function(){function e(){(0,i.default)(this,e),this.loaded=[]}return(0,s.default)(e,[{key:"assetLoaded",value:function(e){for(var t in this.loaded)if(this.loaded[t].path==e)return!0;return!1}},{key:"loadCss",value:function(e){if(!this.assetLoaded(e)){var t=new c(e);t.load(),this.loaded.push(t)}}},{key:"loadJs",value:function(e,t){if(this.assetLoaded(e))t&&t();else{var n=new d(e);n.load(t),this.loaded.push(n)}}},{key:"unloadAll",value:function(){this.loaded.forEach(function(e){return e.unload()})}}]),e}();t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return{md:e,sm:e,xs:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(39)),l=a(n(17)),i=a(n(3)),s=a(n(1)),u=a(n(2)),c=a(n(4)),d=a(n(5)),f=n(0),p=a(f),h=n(6),m=a(n(11)),v=a(n(88)),y=(n(9),a(n(19))),g=a(n(172)),E=a(n(173)),b=a(n(439)),_=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={method:"stripe",otherPaymentMethod:"",creditCard:{},processing:!1,isLoading:!1,availableMethods:["stripe","paypal"]},a.assetManager=new v.default,a.onChange=a.onChange.bind(a),a.next=a.next.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"next",value:function(){var e=this;if(!this.state.processing){var t=this.context.router,n=this.state,a=n.creditCard,r=n.otherPaymentMethod,o=this.props,l=o.type,i=o.url,s=o.params,u=this.state.method;if("stripe"==u){var c=E.default.validate(a);if(!c.isValid)return void c.errors.forEach(function(e){return m.default.error(e)})}this.setState({processing:!0}),"other"===u&&(u=r),b.default.processPayment(u,{method:u,type:l,url:i,params:s,creditCard:a},function(){t.push("/payment/success"),e.props.onClose&&e.props.onClose(),e.setState({processing:!1})},function(){m.default.error("Payment has failed, please check the details and try again"),e.setState({processing:!1})})}}},{key:"onChange",value:function(){var e=void 0,t=void 0;switch(arguments.length){case 1:var n=arguments[0];e=n.target.name,t=n.target.value;break;case 2:e=arguments[0],t=arguments[1]}this.setState((0,l.default)({},e,t))}},{key:"componentWillUnmount",value:function(){this.assetManager.unloadAll()}},{key:"componentWillMount",value:function(){var e=this;this.assetManager.loadJs("https://js.stripe.com/v2/",function(){g.default.loadPublishableKey()}),this.props.checkAvailableMethods&&(this.setState({isLoading:!0}),$.ajax({type:"get",url:"/api/settings/get-allowed-payment-methods",success:function(t){var n=t.includes(e.state.method)?e.state.method:t.length>0?t[0]:"";e.setState({availableMethods:t,isLoading:!1,method:n})},error:function(e){m.default.error("Unable to load available payment methods"),console.error(e)}}))}},{key:"renderPaymentMethod",value:function(e){var t=e.img,n=e.currMethod,a=e.method,l=e.size;return e.show?p.default.createElement(h.Col,(0,o.default)({},r(l),{style:{textAlign:"center"}}),p.default.createElement("input",{type:"radio",name:"method",checked:n==a,value:a,onChange:this.onChange}),p.default.createElement("img",{src:t,style:{width:"50%",marginLeft:10}})):""}},{key:"render",value:function(){var e=this,t=this.state,n=t.method,a=t.otherPaymentMethod,l=t.creditCard,i=t.processing,s=t.isLoading,u=t.availableMethods,c=this.props.otherMethods;if(c||(c=[]),s)return p.default.createElement(y.default,null);var d=12/(u.length+(c&&c.length>0?1:0));return p.default.createElement(C,null,p.default.createElement("div",{id:"notifications"}),p.default.createElement("h2",{style:{textAlign:"center",marginBottom:"40px"}},"Payment"),p.default.createElement(h.Row,{style:{marginBottom:"50px"}},this.renderPaymentMethod({img:"/src/images/cc_logo.png",currMethod:n,method:"stripe",size:d,show:u.includes("stripe")}),this.renderPaymentMethod({img:"/src/images/paypal_logo.png",currMethod:n,method:"paypal",size:d,show:u.includes("paypal")}),c.length>0?p.default.createElement(h.Col,(0,o.default)({},r(d),{style:{textAlign:"center"}}),p.default.createElement("input",{type:"radio",name:"method",checked:"other"==n,value:"other",onChange:this.onChange}),p.default.createElement("span",null,"Other")):""),p.default.createElement(h.Panel,{collapsible:!0,expanded:"stripe"===n,style:"stripe"!==n?{border:"0"}:{}},p.default.createElement(E.default,{onChange:this.onChange,name:"creditCard",value:l})),p.default.createElement(h.Panel,{collapsible:!0,expanded:"other"===n,style:"other"!==n?{border:"0"}:{}},p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:6,mdOffset:4},c.map(function(t,n){return p.default.createElement("div",{key:n},p.default.createElement("input",{type:"radio",name:"otherPaymentMethod",checked:a==t,value:t,onChange:e.onChange}),p.default.createElement("span",{style:{display:"inline-block",marginTop:"-15px",verticalAlign:"middle"}},t))})))),p.default.createElement(y.default,{show:i}),p.default.createElement(h.Row,null,p.default.createElement(h.Col,(0,o.default)({},r(4),function(e){return{mdOffset:4,smOffset:4,xsOffset:4}}()),p.default.createElement(h.Button,{style:{width:"100%"},onClick:this.next},"Next"))))}}]),t}(f.Component);t.default=_,_.propTypes={url:f.PropTypes.string.isRequired,type:f.PropTypes.string,params:f.PropTypes.object,otherMethods:f.PropTypes.array,onClose:f.PropTypes.func,checkAvailableMethods:f.PropTypes.bool},_.contextTypes={router:f.PropTypes.object.isRequired};var C=function(e){var t=e.children;return p.default.createElement("div",{style:{backgroundColor:"white",padding:"1px 30px 10px 30px",marginTop:"20px",border:"2px solid #dad9d8",borderRadius:"3px",width:"580px",maxWidth:"100%",marginLeft:"auto",marginRight:"auto"}},t)}},,,function(e,t,n){"use strict";t.__esModule=!0,t.routes=t.route=t.components=t.component=t.history=void 0,t.falsy=function(e,t,n){if(e[t])return new Error("<"+n+'> should not have a "'+t+'" prop')};var a=n(0),r=a.PropTypes.func,o=a.PropTypes.object,l=a.PropTypes.arrayOf,i=a.PropTypes.oneOfType,s=a.PropTypes.element,u=a.PropTypes.shape,c=a.PropTypes.string,d=(t.history=u({listen:r.isRequired,push:r.isRequired,replace:r.isRequired,go:r.isRequired,goBack:r.isRequired,goForward:r.isRequired}),t.component=i([r,c])),f=(t.components=i([d,o]),t.route=i([o,s]));t.routes=i([f,l(f)])},function(e,t,n){"use strict";function a(e){var t=e.match(/^https?:\/\/[^\/]*/);return null==t?e:e.substring(t[0].length)}t.__esModule=!0,t.extractPath=a,t.parsePath=function(e){var t=a(e),n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substring(o),t=t.substring(0,o));var l=t.indexOf("?");return-1!==l&&(n=t.substring(l),t=t.substring(0,l)),""===t&&(t="/"),{pathname:t,search:n,hash:r}},function(e){e&&e.__esModule}(n(49))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(162)),o=a(n(1)),l=a(n(2)),i=a(n(163)),s=a(n(16)),u=a(n(15)),c=null,d=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,null,[{key:"login",value:function(e,t){return r.default.resolve($.ajax({type:"post",url:"/api/auth/login",dataType:"json",data:{userName:e,password:t}}))}},{key:"logout",value:function(){return r.default.resolve($.ajax({type:"post",url:"/api/auth/logout",dataType:"json"}))}},{key:"requestUser",value:function(e,t){c&&c.cancel(),c=u.default.ajax({type:"get",url:"/api/auth/user",data:{fields:["id","userName","userFullname","userEmailAddress","userPassword","userStatus","userUniqueId","role","profile","attendance"]},dataType:"json",success:function(t){if(e){var n=new i.default;s.default.assignExisting(n,t),e(n)}},error:function(e,n,a){console.error(e),t&&t(e,n,a.toString())}})}}]),e}();t.default=d},,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=function(e){function t(e){(0,l.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={collapsible:!1,hidden:!1},n.handleNavbarToggleClick=n.handleNavbarToggleClick.bind(n),n.hideNavbar=n.hideNavbar.bind(n),n}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){window.innerWidth<768&&this.setState({collapsible:!0,hidden:!0})}},{key:"handleNavbarToggleClick",value:function(e){e.preventDefault();var t=this.state.hidden;this.setState({hidden:!t})}},{key:"hideNavbar",value:function(){this.state.hidden||this.setState({hidden:!0})}},{key:"renderNavbarToggle",value:function(){return this.state.collapsible?d.default.createElement("button",{type:"button",className:"navbar-toggle",style:{float:"none"},onClick:this.handleNavbarToggleClick},d.default.createElement("span",{className:"sr-only"},"Toggle navigation"),d.default.createElement("span",{className:"icon-bar"}),d.default.createElement("span",{className:"icon-bar"}),d.default.createElement("span",{className:"icon-bar"})):null}},{key:"manageChildren",value:function(){var e=this,t=this.props.children;return d.default.Children.map(t,function(t){return d.default.cloneElement(t,(0,r.default)({},t.props,{onMouseUp:function(){console.debug("test"),e.handleNavbarToggleClick()}}))})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.activeKey,a=e.className,r=this.state,o=r.collapsible,l=r.hidden,i=null;return o&&l||(i=d.default.createElement(f.Nav,{bsStyle:"tabs",justified:!0,activeKey:n,className:a,onClick:this.hideNavbar},t)),d.default.createElement("div",null,this.renderNavbarToggle(),i)}}]),t}(c.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=n(12),p=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.headerText,n=e.confirmText,a=e.onYes,r=e.onNo,o=e.yesText,l=e.noText,i=e.rawHTML,s=e.show,u=e.height,p=e.style,h=p||(u?{height:u,overflowY:"auto"}:null);return c.default.createElement(d.Modal,{show:s,onHide:r},c.default.createElement(d.Modal.Dialog,null,c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement("p",null,t)),c.default.createElement(d.Modal.Body,{style:h},n?i?c.default.createElement(f.Html,null,n):c.default.createElement("p",null,n):c.default.createElement("p",null,"Are you sure?")),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{onClick:r},l||"No"),c.default.createElement(d.Button,{onClick:a,style:{marginLeft:"15px"}},o||"Yes"))))}}]),t}(u.Component);t.default=p,p.propTypes={headerText:u.PropTypes.string,confirmText:u.PropTypes.string,onYes:u.PropTypes.func.isRequired,onNo:u.PropTypes.func.isRequired,rawHTM:u.PropTypes.bool,yesText:u.PropTypes.string,noText:u.PropTypes.string,height:u.PropTypes.number,show:u.PropTypes.bool,style:u.PropTypes.object}},function(e,t,n){"use strict";function a(e,t){return e.getStyle()===t.getStyle()}function r(e,t){return e.getEntity()===t.getEntity()}var o=n(35),l=n(194),i=o.List,s=o.Map,u=o.OrderedSet,c=o.Record,d=u(),f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getType=function(){return this.get("type")},t.prototype.getText=function(){return this.get("text")},t.prototype.getCharacterList=function(){return this.get("characterList")},t.prototype.getLength=function(){return this.getText().length},t.prototype.getDepth=function(){return this.get("depth")},t.prototype.getData=function(){return this.get("data")},t.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():d},t.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},t.prototype.findStyleRanges=function(e,t){l(this.getCharacterList(),a,e,t)},t.prototype.findEntityRanges=function(e,t){l(this.getCharacterList(),r,e,t)},t}(c({key:"",type:"unstyled",text:"",characterList:i(),depth:0,data:s()}));e.exports=f},function(e,t,n){"use strict";function a(e){return s<=e&&e<=u}function r(e){return c.test(e)}function o(e,t){return 1+a(e.charCodeAt(t))}function l(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!r(e))return e.substr(t,n);var a=e.length;if(a<=0||t>a||n<=0)return"";var l=0;if(t>0){for(;t>0&&l<a;t--)l+=o(e,l);if(l>=a)return""}else if(t<0){for(l=a;t<0&&0<l;t++)l-=o(e,l-1);l<0&&(l=0)}var i=a;if(n<a)for(i=l;n>0&&i<a;n--)i+=o(e,i);return e.substring(l,i)}var i=n(30),s=55296,u=57343,c=/[\uD800-\uDFFF]/,d={getCodePoints:function(e){for(var t=[],n=0;n<e.length;n+=o(e,n))t.push(e.codePointAt(n));return t},getUTF16Length:o,hasSurrogateUnit:r,isCodeUnitInSurrogateRange:a,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||i(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),a=e.charCodeAt(t+1);return s<=n&&n<=56319&&56320<=a&&a<=u},strlen:function(e){if(!r(e))return e.length;for(var t=0,n=0;n<e.length;n+=o(e,n))t++;return t},substring:function(e,t,n){t=t||0,n=void 0===n?1/0:n||0,t<0&&(t=0),n<0&&(n=0);var a=Math.abs(n-t);return t=t<n?t:n,l(e,t,a)},substr:l};e.exports=d},,,function(e,t,n){"use strict";function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){return i[e]||(i[e]=function(e){for(var t="",n=[],r=[],o=void 0,l=0,i=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;o=i.exec(e);)o.index!==l&&(r.push(e.slice(l,o.index)),t+=a(e.slice(l,o.index))),o[1]?(t+="([^/]+)",n.push(o[1])):"**"===o[0]?(t+="(.*)",n.push("splat")):"*"===o[0]?(t+="(.*?)",n.push("splat")):"("===o[0]?t+="(?:":")"===o[0]&&(t+=")?"),r.push(o[0]),l=i.lastIndex;return l!==e.length&&(r.push(e.slice(l,e.length)),t+=a(e.slice(l,e.length))),{pattern:e,regexpSource:t,paramNames:n,tokens:r}}(e)),i[e]}function o(e,t){"/"!==e.charAt(0)&&(e="/"+e);var n=r(e),a=n.regexpSource,o=n.paramNames,l=n.tokens;"/"!==e.charAt(e.length-1)&&(a+="/?"),"*"===l[l.length-1]&&(a+="$");var i=t.match(new RegExp("^"+a,"i"));if(null==i)return null;var s=i[0],u=t.substr(s.length);if(u){if("/"!==s.charAt(s.length-1))return null;u="/"+u}return{remainingPathname:u,paramNames:o,paramValues:i.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}t.__esModule=!0,t.compilePattern=r,t.matchPattern=o,t.getParamNames=function(e){return r(e).paramNames},t.getParams=function(e,t){var n=o(e,t);if(!n)return null;var a=n.paramNames,r=n.paramValues,l={};return a.forEach(function(e,t){l[e]=r[t]}),l},t.formatPattern=function(e,t){t=t||{};for(var n=r(e).tokens,a=0,o="",i=0,s=void 0,u=void 0,c=0,d=n.length;c<d;++c)"*"===(s=n[c])||"**"===s?(null!=(u=Array.isArray(t.splat)?t.splat[i++]:t.splat)||a>0||(0,l.default)(!1),null!=u&&(o+=encodeURI(u))):"("===s?a+=1:")"===s?a-=1:":"===s.charAt(0)?(null!=(u=t[s.substring(1)])||a>0||(0,l.default)(!1),null!=u&&(o+=encodeURIComponent(u))):o+=s;return o.replace(/\/+/g,"/")};var l=function(e){return e&&e.__esModule?e:{default:e}}(n(25)),i=Object.create(null)},function(e,t,n){"use strict";t.__esModule=!0,t.PUSH="PUSH",t.REPLACE="REPLACE",t.POP="POP",t.default={PUSH:"PUSH",REPLACE:"REPLACE",POP:"POP"}},function(e,t,n){var a=n(226),r=n(227);e.exports=function(e){return a(r(e))}},,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(967)),f=a(n(977)),p=a(n(15)),h="",m={Institute:d.default,Events:f.default},v=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,website:null},a.promises={load:null},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(){var e=this;this.promises.load&&this.promises.load.cancel(),this.setState({isLoading:!0}),this.promises.load=p.default.ajax({type:"get",url:"/api/website"}),this.promises.load.then(function(t){t.name&&$("title").text(t.name),e.setState({isLoading:!1,website:t})},function(e){return console.log(e)})}},{key:"componentWillMount",value:function(){h=this.context.website.folder}},{key:"render",value:function(){if(!h in m)return c.default.createElement("p",null,"Template folder was not found for this site");var e=m[h];return e?c.default.createElement(e,this.props):c.default.createElement("p",null,"Template folder was not found for this site")}}],[{key:"getTemplatedComponent",value:function(e,t){var n=m[h],a="get"+e;return n&&n[a]?n[a](t):null}},{key:"renderTemplatedComponent",value:function(e){var n=t.getTemplatedComponent(e);return n?c.default.createElement(n,null):c.default.createElement("p",null,"Component was not found")}}]),t}(u.Component);t.default=v,v.contextTypes={website:u.PropTypes.object}},function(e,t,n){var a=n(1093),r=n(1098),o=n(1100),l=Function.prototype,i=Object.prototype,s=l.toString,u=i.hasOwnProperty,c=s.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=a(e))return!1;var t=r(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==c}},,,,,,function(e,t,n){e.exports=n(710)()},function(e,t,n){"use strict";function a(e){return function(){return e}}var r=function(){};r.thatReturns=a,r.thatReturnsFalse=a(!1),r.thatReturnsTrue=a(!0),r.thatReturnsNull=a(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var a=n(357),r=n(232);e.exports=Object.keys||function(e){return a(e,r)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var a=n(227);e.exports=function(e){return Object(a(e))}},function(e,t){e.exports={}},function(e,t,n){var a=n(67).f,r=n(95),o=n(56)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&a(e,o,{configurable:!0,value:t})}},function(e,t,n){var a=n(82),r=n(784),o=n(785),l=n(68),i=n(228),s=n(367),u={},c={};(t=e.exports=function(e,t,n,d,f){var p,h,m,v,y=f?function(){return e}:s(e),g=a(n,d,t?2:1),E=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(p=i(e.length);p>E;E++)if((v=t?g(l(h=e[E])[0],h[1]):g(e[E]))===u||v===c)return v}else for(m=y.call(e);!(h=m.next()).done;)if((v=r(m,g,h.value,t))===u||v===c)return v}).BREAK=u,t.RETURN=c},,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(37));t.default=function(e,t){return function(n){function a(e,t){(0,o.default)(this,a);var n=(0,i.default)(this,(a.__proto__||(0,r.default)(a)).call(this,e,t));return n.state={isActive:!1},n.onClick=n.onClick.bind(n),n}return(0,s.default)(a,n),(0,l.default)(a,[{key:"onClick",value:function(e){var t=!d.default.findDOMNode(this).contains(e.target);this.setState({isActive:!t})}},{key:"componentWillMount",value:function(){document.addEventListener("click",this.onClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onClick,!1)}},{key:"render",value:function(){var n=this.state.isActive,a=this.props,r=a.activeProps,o=a.passiveProps;return n?c.default.createElement(e,r):c.default.createElement(t,o)}}]),a}(u.Component)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var a=n(589),r="object"==typeof self&&self&&self.Object===Object&&self,o=a||r||Function("return this")();e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(14)),p=(n(12),a(n(28)),n(9),function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={checkedRows:e.value?e.value:[]},a.onChange=a.onChange.bind(a),a.props.onSendClearCallback&&a.props.onSendClearCallback(function(){return a.setState({checkedRows:[]})}),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onChange",value:function(e){var t=this.state.checkedRows,n=this.props.onChange,a=parseInt(e.target.value),r=t.indexOf(a);-1===r?t.push(a):t.splice(r,1),this.setState({checkedRows:t}),n&&(e.target.value=t,n(e))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.name,a=e.label,r=(e.onlySelected,e.readOnly,this.state.checkedRows);if(!t||0==t.length)return d.default.createElement("p",null,"No branches.");var o=[];for(var l in t){var i=t[l],s=r.includes(i.value);o.push(d.default.createElement("div",{key:l},d.default.createElement("input",{type:"checkbox",name:n,value:i.value,checked:s,onChange:this.onChange}),d.default.createElement("span",{style:{verticalAlign:"top",display:"inline-block",marginLeft:8,marginTop:4}},i.label)))}return d.default.createElement("div",{style:{margin:"15px 0 15px 0"}},a?d.default.createElement("p",{className:"detail-field-label"},a):"",d.default.createElement("div",{style:{marginLeft:"10px"}},o))}}]),t}(c.Component));p.propTypes={name:c.PropTypes.string.isRequired,value:c.PropTypes.array,label:c.PropTypes.string,onChange:c.PropTypes.func,listedOnly:c.PropTypes.bool};var h=(0,f.default)(p);t.default=function(e){return d.default.createElement("div",null,d.default.createElement(h,(0,r.default)({},e,{ajaxOperations:{load:{type:"get",url:"/api/branches-associated/list",data:{listedOnly:e.listedOnly}}}})))}},function(e,t,n){"use strict";var a=n(35).OrderedMap,r={createFromArray:function(e){return a(e.map(function(e){return[e.getKey(),e]}))}};e.exports=r},function(e,t,n){"use strict";var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},t.prototype.getAnchorKey=function(){return this.get("anchorKey")},t.prototype.getAnchorOffset=function(){return this.get("anchorOffset")},t.prototype.getFocusKey=function(){return this.get("focusKey")},t.prototype.getFocusOffset=function(){return this.get("focusOffset")},t.prototype.getIsBackward=function(){return this.get("isBackward")},t.prototype.getHasFocus=function(){return this.get("hasFocus")},t.prototype.hasEdgeWithin=function(e,t,n){var a=this.getAnchorKey(),r=this.getFocusKey();if(a===r&&a===e){var o=this.getStartOffset();return t<=this.getEndOffset()&&o<=n}if(e!==a&&e!==r)return!1;var l=e===a?this.getAnchorOffset():this.getFocusOffset();return t<=l&&n>=l},t.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},t.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},t.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},t.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},t.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},t.createEmpty=function(e){return new t({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},t}((0,n(35).Record)({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1}));e.exports=a},function(e,t,n){"use strict";function a(e){return e.replace(/\//g,"-")}e.exports=function(e){return"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).map(a).join(" "):Array.prototype.map.call(arguments,a).join(" ")}},function(e,t,n){"use strict";var a=n(57);e.exports=function(e,t,n){var r=e.getSelection(),o=e.getCurrentContent(),l=r;if(r.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return o}else if(e.isSelectionAtStartOfContent())return o;if((l=t(e))===r)return o}return a.removeRange(o,l,n)}},,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.canUseMembrane=void 0,function(e){e&&e.__esModule}(n(45)),t.canUseMembrane=!1;var a=function(e){return e};t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var a=!("undefined"==typeof window||!window.document||!window.document.createElement);t.canUseDOM=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return l.stringify(e).replace(/%20/g,"+")}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=(a(n(49)),n(725)),i=a(n(220)),s=n(93),u=a(n(221)),c="$searchBase",d=l.parse;t.default=function(e){return function(){function t(e){if(null==e.query){var t=e.search;e.query=m(t.substring(1)),e[c]={search:t,searchBase:""}}return e}function n(e,t){var n,a=e[c],r=t?h(t):"";if(!a&&!r)return e;"string"==typeof e&&(e=s.parsePath(e));var l=void 0,i=l=a&&e.search===a.search?a.searchBase:e.search||"";return r&&(i+=(i?"&":"?")+r),o({},e,(n={search:i},n[c]={search:i,searchBase:l},n))}function a(e){p.push(n(e,e.query))}function l(e){p.replace(n(e,e.query))}var f=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],p=e(f),h=f.stringifyQuery,m=f.parseQueryString;return"function"!=typeof h&&(h=r),"function"!=typeof m&&(m=d),o({},p,{listenBefore:function(e){return p.listenBefore(function(n,a){i.default(e,t(n),a)})},listen:function(e){return p.listen(function(n){e(t(n))})},push:a,replace:l,createPath:function(e,t){return p.createPath(n(e,t||e.query))},createHref:function(e,t){return p.createHref(n(e,t||e.query))},createLocation:function(e){for(var a=arguments.length,r=Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];var l=p.createLocation.apply(p,[n(e,e.query)].concat(r));return e.query&&(l.query=e.query),t(l)},pushState:u.default(function(e,t,n){"string"==typeof t&&(t=s.parsePath(t)),a(o({state:e},t,{query:n}))},"pushState is deprecated; use push instead"),replaceState:u.default(function(e,t,n){"string"==typeof t&&(t=s.parsePath(t)),l(o({state:e},t,{query:n}))},"replaceState is deprecated; use replace instead")})}},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=a(n(25)),i=a(n(0)),s=(a(n(151)),a(n(732))),u=n(81),c=(a(n(45)),i.default.PropTypes),d=c.array,f=c.func,p=c.object,h=i.default.createClass({displayName:"RouterContext",propTypes:{history:p,router:p.isRequired,location:p.isRequired,routes:d.isRequired,params:p.isRequired,components:d.isRequired,createElement:f.isRequired},getDefaultProps:function(){return{createElement:i.default.createElement}},childContextTypes:{history:p,location:p.isRequired,router:p.isRequired},getChildContext:function(){var e=this.props,t=e.router,n=e.history,a=e.location;return t||delete(t=o({},n,{setRouteLeaveHook:n.listenBeforeLeavingRoute})).listenBeforeLeavingRoute,{history:n,location:a,router:t}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var e=this,t=this.props,n=t.history,a=t.location,c=t.routes,d=t.params,f=t.components,p=null;return f&&(p=f.reduceRight(function(t,l,i){if(null==l)return t;var f=c[i],p=(0,s.default)(f,d),h={history:n,location:a,params:d,route:f,routeParams:p,routes:c};if((0,u.isReactChildren)(t))h.children=t;else if(t)for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&(h[m]=t[m]);if("object"===(void 0===l?"undefined":r(l))){var v={};for(var y in l)Object.prototype.hasOwnProperty.call(l,y)&&(v[y]=e.createElement(l[y],o({key:y},h)));return v}return e.createElement(l,h)},p)),null===p||!1===p||i.default.isValidElement(p)||(0,l.default)(!1),p}});t.default=h,e.exports=t.default},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var a=n(763)(!0);n(234)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=a(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){e.exports=!0},function(e,t,n){var a=n(68),r=n(765),o=n(232),l=n(230)("IE_PROTO"),i=function(){},s=function(){var e,t=n(224)("iframe"),a=o.length;for(t.style.display="none",n(362).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;a--;)delete s.prototype[o[a]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(i.prototype=a(e),n=new i,i.prototype=null,n[l]=e):n=s(),void 0===t?n:r(n,t)}},function(e,t,n){n(766);for(var a=n(55),r=n(83),o=n(123),l=n(56)("toStringTag"),i="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<i.length;s++){var u=i[s],c=a[u],d=c&&c.prototype;d&&!d[l]&&r(d,l,u),o[u]=o.Array}},function(e,t,n){e.exports={default:n(782),__esModule:!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(162)),o=a(n(1)),l=a(n(2)),i=(a(n(0)),a(n(71))),s=a(n(16)),u=function(){function e(){(0,o.default)(this,e),this.id=-1,this.userEmailAddress="",this.userPassword="",this.userStatus="",this.userUniqueId="",this.userName="",this.userFullname="",this.role={roleName:""},this.profile={profileForname:"",profileSurname:"",profileAddress:"",profileAddress2:"",profilePostcode:"",profileTelephone:"",profileMobile:"",profileGender:"",age:"",studentNotes:"",emergencyContact1Name:"",emergencyContact1Address:"",emergencyContact1Contact:"",emergencyContact2Name:"",emergencyContact2Address:"",emergencyContact2Contact:""},this.attendance={attended:null,absentDays:null,absentDaysInTwoWeeks:null}}return(0,l.default)(e,[{key:"validate",value:function(){return!0}},{key:"save",value:function(){i.default.ajax({type:"put",url:"/api/users/"+this.id,data:this.getDbAttributes(),success:function(e){return console.log(e)},error:function(e,t,n){return console.log(e,t,n)}})}},{key:"getDbAttributes",value:function(){return{userEmailAddress:this.userEmailAddress,userPassword:this.userPassword,userStatus:this.userStatus,userUniqueId:this.userUniqueId,profile:this.profile}}},{key:"getSourceUrl",value:function(){return this.id?"/api/users/"+this.id:""}},{key:"loadAttendance",value:function(e,t){var n=this;t=t||!1;var a=!0;for(var r in this.attendance)if(null===this.attendance[r]){a=!1;break}t||!a?i.default.ajax({type:"get",url:"/api/users/"+this.id+"/attendance",dataType:"json",success:function(t){s.default.assignExisting(n.attendance,t),e&&e(n.attendance)}}):e(this.attendance)}}],[{key:"findById",value:function(t,n,a,o){return r.default.resolve(i.default.ajax({type:"get",url:"/api/users/"+t,data:{fields:n},dataType:"json",success:function(t){var n=new e;s.default.assignExisting(n,t),a&&a(n)},error:function(){o&&o()}}))}}]),e}();t.default=u},,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=n(18),p=a(n(14)),h=a(n(37)),m=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={searchQuery:e.searchQuery?e.searchQuery:null,showResults:!1,focused:!1,data:null},a.onChange=a.onChange.bind(a),a.onFocus=a.onFocus.bind(a),a.onClick=a.onClick.bind(a),a.onSelectResult=a.onSelectResult.bind(a),a.delayedSearch=null,a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"onChange",value:function(e){var t=this,n=this.props.execute,a=e.target.value;this.setState({searchQuery:a,data:null}),this.delayedSearch&&clearTimeout(this.delayedSearch),(a=a.trim()).length>0&&(this.delayedSearch=setTimeout(function(){n("search",{query:a},function(e){t.state.focused&&e&&e.length>0&&t.setState({showResults:!0,data:e})})},1e3))}},{key:"onFocus",value:function(){this.setState({focused:!0,showResults:!0})}},{key:"onSelectResult",value:function(e){var t=e.userData.split(" "),n=t.length>2?t[0]+" "+t[1]:t[0];this.props.onSelectResult(e.id,n),this.setState({showResults:!1,searchQuery:e.userData.split(" ").slice(0,2).join(" ")})}},{key:"onClick",value:function(e){var t=!h.default.findDOMNode(this).contains(e.target);this.setState({showResults:!t&&this.state.showResults})}},{key:"componentWillReceiveProps",value:function(e){this.props.receiveUpdates&&this.state.searchQuery!=e.searchQuery&&e.searchQuery&&this.setState({searchQuery:e.searchQuery})}},{key:"componentWillMount",value:function(){document.addEventListener("click",this.onClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onClick,!1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchQuery,a=t.showResults,r=t.data,o=this.props.elemId;return c.default.createElement("div",null,c.default.createElement("input",{type:"text",placeholder:"Zip Code, Student Name, Telephone or Email",fontStyle:"italic",className:"form-control",onChange:this.onChange,onFocus:this.onFocus,value:n}),c.default.createElement(v,{elemId:o,isShown:a,data:r,query:n,onClick:this.onSelectResult,onClose:function(){return e.setState({showResults:!1})}}))}}]),t}(u.Component);m.propTypes={onSelectResult:u.PropTypes.func.isRequired,elemId:u.PropTypes.string};var v=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.textStyle={width:"90%",paddingLeft:"10%",textAlign:"center",wordBreak:"break-word"},a.onClick=a.onClick.bind(a),a.onRightClick=a.onRightClick.bind(a),a.elemId=e.elemId?e.elemId:"searchResults",a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;$(function(){e.$searchResults=$("#"+e.elemId)})}},{key:"componentWillReceiveProps",value:function(e){this.props.isShown!==e.isShown&&this.$searchResults.slideToggle("500")}},{key:"onClick",value:function(e,t){if(this.defaultClick)return!0;this.props.onClick(t),e.preventDefault()}},{key:"onRightClick",value:function(e,t){e.preventDefault(),this.defaultClick=!0,$(e.target)[0].click(),this.defaultClick=!1}},{key:"renderRows",value:function(){var e=this,t=this.props.data;if(t&&0!==t.length){var n={wordBreak:"break-word",width:"90%",marginBottom:"10px"},a=[];e:for(var r=0;r<t.length;r++)switch(function(r){var o=t[r];return o.userData?a.length>500?"break":void a.push(c.default.createElement("li",{key:r,value:o.id,className:"highlighted",style:n},c.default.createElement(f.Link,{to:"/users/"+o.id,onClick:function(t){return e.onClick(t,o)},onContextMenu:function(t){return e.onRightClick(t,o.id)},target:"_blank",style:{color:"inherit"}},o.userData))):"continue"}(r)){case"continue":continue;case"break":break e}return a}}},{key:"renderResults",value:function(){var e=this.props,t=e.query,n=e.data,a=n?n.length:0;return c.default.createElement("div",null,t&&t.length>0?c.default.createElement("h5",{style:this.textStyle},'Search results for "',t,'"'):"",c.default.createElement("h4",{style:this.textStyle},"Found ",a," records",a>500?c.default.createElement("p",null,c.default.createElement("br",null)," Showing first 500+"):""),c.default.createElement("hr",null),c.default.createElement("ul",{className:"search-bar"},this.renderRows()))}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{style:{display:"none",position:"absolute",zIndex:"2",border:"1px solid #A9A9A9",borderWidth:"0 1px 1px 1px",WebkitBoxShadow:"5px 5px 5px rgba(0, 0, 0, 0.3)",MozBoxShadow:"5px 5px 5px rgba(0, 0, 0, 0.3)",boxShadow:"5px 5px 5px rgba(0, 0, 0, 0.3)",backgroundColor:"#fff",width:"92%"},id:this.elemId},c.default.createElement("div",{style:{height:"400px",overflow:"auto"}},this.renderResults()),c.default.createElement("div",null,c.default.createElement(d.Button,{style:{margin:"10px",width:"calc(100% - 20px)"},className:"custom btn-success",onClick:function(){e.context.router.push("/new-user"),e.props.onClose()}},"Add new students")))}}]),t}(u.Component);v.contextTypes={router:u.PropTypes.object.isRequired},t.default=(0,p.default)(m,{search:{type:"get",url:"/api/users/quick-search"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(1)),l=a(n(2)),i=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,null,[{key:"processPayment",value:function(e){var t=e.creditCard,n=e.onCardFail;Stripe.card.createToken({number:t.cardNumber,cvc:t.cvc,exp_month:t.expireMonth,exp_year:t.expireYear,address_zip:t.zipOrPostcode},function(a,o){if(o.error)n&&n();else{var l=e.paymentUrl,i=e.requestType,s=e.params,u=e.onSuccess,c=e.onError,d={token:o,method:"stripe",cardHolderName:t.cardHolderName};s&&(0,r.default)(d,s),$.ajax({type:i||"get",url:l,data:d,success:u,error:c})}})}},{key:"loadPublishableKey",value:function(){$.ajax({get:"get",url:"/api/settings/stripe-key",success:function(e){return Stripe.setPublishableKey(e)},error:function(e){return console.error(e)}})}}]),e}();t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return{md:e,sm:e,xs:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(3)),l=a(n(1)),i=a(n(4)),s=a(n(2)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.onChange=a.onChange.bind(a),a.removePlaceholder=a.removePlaceholder.bind(a),a.setPlaceHolder=a.setPlaceHolder.bind(a),a}return(0,u.default)(t,e),(0,s.default)(t,null,[{key:"validate",value:function(e){var t=[],n=[{prop:"cardNumber",label:"Card Number",length:16,isNumber:!0},{prop:"expireMonth",label:"Expire Month",maxLength:2,isNumber:!0,range:[0,12]},{prop:"expireYear",label:"Expire Year",length:4,isNumber:!0},{prop:"cvc",label:"CVC",length:3,isNumber:!0}];for(var a in n){var r=n[a];e[r.prop]?r.length&&e[r.prop].length!=r.length?t.push(r.label+" should consist of "+r.length+" characters"):r.maxLength&&e[r.prop].length>r.maxLength?t.push(r.label+" cannot be bigger then "+r.maxLength+" characters"):r.isNumber&&isNaN(e[r.prop])?t.push(r.label+" should be a number"):r.range&&(e[r.prop]<r.range[0]||e[r.prop]>r.range[1])&&t.push(r.label+" should be in range "+r.range[0]+".."+r.range[1]):t.push(r.label+" should not be empty")}return{errors:t,isValid:0==t.length}}}]),(0,s.default)(t,[{key:"onChange",value:function(e){var t=this.props,n=t.name,a=t.value,r=t.onChange;a[e.target.name]=e.target.value,r(n,a)}},{key:"removePlaceholder",value:function(e){$(e.target).attr("placeholder")==e.target.value&&(e.target.value="")}},{key:"setPlaceHolder",value:function(e){""==e.target.value&&(e.target.value=$(e.target).attr("placeholder"))}},{key:"render",value:function(){var e=this.props.value,t={paddingLeft:10,paddingRight:10,marginBottom:10};return d.default.createElement("div",null,d.default.createElement(f.Row,{style:{marginBottom:"10px"}},d.default.createElement(f.Col,r(12),d.default.createElement("input",{name:"cardNumber",type:"text",className:"form-control",placeholder:"Card Number (16 digits)",maxLength:"16",style:{color:e.cardNumber?"black":"#A8A8A8"},onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:this.onChange}))),d.default.createElement(f.Row,{style:{marginLeft:-10,marginRight:-10}},d.default.createElement(f.Col,{xs:4,sm:2,style:t},d.default.createElement("input",{name:"expireMonth",type:"text",className:"form-control",placeholder:"MM",maxLength:"2",style:{color:e.expireMonth?"black":"#A8A8A8",width:"100%",display:"inline-block"},onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:this.onChange})),d.default.createElement(f.Col,{xs:4,sm:2,style:t},d.default.createElement("input",{name:"expireYear",type:"text",className:"form-control",placeholder:"YYYY",maxLength:"4",style:{color:e.expireYear?"black":"#A8A8A8",width:"100%",display:"inline-block"},onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:this.onChange})),d.default.createElement(f.Col,{xs:4,sm:2,style:t},d.default.createElement("input",{name:"cvc",type:"text",className:"form-control",placeholder:"CVC",maxLength:"3",style:{color:e.cvc?"black":"#A8A8A8",width:"100%",display:"inline-block"},onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:this.onChange})),d.default.createElement(f.Col,{sm:6,style:t},d.default.createElement("input",{name:"zipOrPostcode",type:"text",className:"form-control",placeholder:"Zip / Postal Code",style:{color:e.zipOrPostcode?"black":"#A8A8A8",width:"100%",display:"inline-block"},onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:this.onChange}))),d.default.createElement(f.Row,null,d.default.createElement(f.Col,r(12),d.default.createElement("input",{name:"cardHolderName",type:"text",className:"form-control",placeholder:"Card holder name",maxLength:"16",style:{color:e.cardHolderName?"black":"#A8A8A8"},onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:this.onChange}))))}}]),t}(c.Component);t.default=p,p.propTypes={onChange:c.PropTypes.func.isRequired,value:c.PropTypes.object.isRequired,name:c.PropTypes.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"renderData",value:function(){var e=[],t=this.props.data;console.log(t);for(var n in t)e.push(c.default.createElement(d.Row,{key:n},c.default.createElement(d.Col,{md:4},c.default.createElement("p",null,n)),c.default.createElement(d.Col,{md:8},c.default.createElement("p",null,t[n]))));return c.default.createElement("div",null,e)}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.onClose;return e.data?c.default.createElement("div",null,c.default.createElement(d.Modal,{show:t,onHide:n},c.default.createElement(d.Modal.Header,{closeButton:!0},this.props.heading),c.default.createElement(d.Modal.Body,{style:{height:"600px",overflowY:"auto"}},this.renderData()),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{onClick:n},"Close")))):c.default.createElement("div",null)}}]),t}(u.Component);t.default=f,f.propTypes={heading:u.PropTypes.string,show:u.PropTypes.bool,data:u.PropTypes.object,onClose:u.PropTypes.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(567);Object.defineProperty(t,"DragDropContext",{enumerable:!0,get:function(){return a(r).default}});var o=n(1091);Object.defineProperty(t,"DragDropContextProvider",{enumerable:!0,get:function(){return a(o).default}});var l=n(1092);Object.defineProperty(t,"DragLayer",{enumerable:!0,get:function(){return a(l).default}});var i=n(1101);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return a(i).default}});var s=n(1112);Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return a(s).default}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.END_DRAG=t.DROP=t.HOVER=t.PUBLISH_DRAG_SOURCE=t.BEGIN_DRAG=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.beginDrag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0,clientOffset:null},n=t.publishSource,a=t.clientOffset,r=t.getSourceClientOffset;(0,o.default)((0,l.default)(e),"Expected sourceIds to be an array.");var s=this.getMonitor(),c=this.getRegistry();(0,o.default)(!s.isDragging(),"Cannot call beginDrag while dragging.");for(var d=0;d<e.length;d++)(0,o.default)(c.getSource(e[d]),"Expected sourceIds to be registered.");for(var f=null,p=e.length-1;p>=0;p--)if(s.canDragSource(e[p])){f=e[p];break}if(null!==f){var h=null;a&&((0,o.default)("function"==typeof r,"When clientOffset is provided, getSourceClientOffset must be a function."),h=r(f));var m=c.getSource(f).beginDrag(s,f);(0,o.default)((0,i.default)(m),"Item must be an object."),c.pinSource(f);var v=c.getSourceType(f);return{type:u,itemType:v,item:m,sourceId:f,clientOffset:a,sourceClientOffset:h,isSourcePublic:n}}},t.publishDragSource=function(){if(this.getMonitor().isDragging())return{type:c}},t.hover=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientOffset,n=void 0===t?null:t;(0,o.default)((0,l.default)(e),"Expected targetIds to be an array.");var a=e.slice(0),r=this.getMonitor(),i=this.getRegistry();(0,o.default)(r.isDragging(),"Cannot call hover while not dragging."),(0,o.default)(!r.didDrop(),"Cannot call hover after drop.");for(var u=0;u<a.length;u++){var c=a[u];(0,o.default)(a.lastIndexOf(c)===u,"Expected targetIds to be unique in the passed array.");var f=i.getTarget(c);(0,o.default)(f,"Expected targetIds to be registered.")}for(var p=r.getItemType(),h=a.length-1;h>=0;h--){var m=a[h],v=i.getTargetType(m);(0,s.default)(v,p)||a.splice(h,1)}for(var y=0;y<a.length;y++){var g=a[y];i.getTarget(g).hover(r,g)}return{type:d,targetIds:a,clientOffset:n}},t.drop=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getMonitor(),a=this.getRegistry();(0,o.default)(n.isDragging(),"Cannot call drop while not dragging."),(0,o.default)(!n.didDrop(),"Cannot call drop twice during one drag operation.");var l=n.getTargetIds().filter(n.canDropOnTarget,n);l.reverse(),l.forEach(function(l,s){var u=a.getTarget(l).drop(n,l);(0,o.default)(void 0===u||(0,i.default)(u),"Drop result must either be an object or undefined."),void 0===u&&(u=0===s?{}:n.getDropResult()),e.store.dispatch({type:f,dropResult:r({},t,u)})})},t.endDrag=function(){var e=this.getMonitor(),t=this.getRegistry();(0,o.default)(e.isDragging(),"Cannot call endDrag while not dragging.");var n=e.getSourceId();return t.getSource(n,!0).endDrag(e,n),t.unpinSource(),{type:p}};var o=a(n(25)),l=a(n(135)),i=a(n(270)),s=a(n(570)),u=t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",c=t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",d=t.HOVER="dnd-core/HOVER",f=t.DROP="dnd-core/DROP",p=t.END_DRAG="dnd-core/END_DRAG"},function(e,t,n){var a=n(178)(Object,"create");e.exports=a},function(e,t,n){var a=n(1027),r=n(1034);e.exports=function(e,t){var n=r(e,t);return a(n)?n:void 0}},function(e,t,n){var a=n(1028),r="object"==typeof self&&self&&self.Object===Object&&self,o=a||r||Function("return this")();e.exports=o},function(e,t,n){var a=n(1042);e.exports=function(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}},function(e,t,n){var a=n(1048);e.exports=function(e,t){var n=e.__data__;return a(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSource=function(e){return{type:a,sourceId:e}},t.addTarget=function(e){return{type:r,targetId:e}},t.removeSource=function(e){return{type:o,sourceId:e}},t.removeTarget=function(e){return{type:l,targetId:e}};var a=t.ADD_SOURCE="dnd-core/ADD_SOURCE",r=t.ADD_TARGET="dnd-core/ADD_TARGET",o=t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",l=t.REMOVE_TARGET="dnd-core/REMOVE_TARGET"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){}},function(e,t,n){var a=n(1122),r=n(1128);e.exports=function(e,t){var n=r(e,t);return a(n)?n:void 0}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var a=n(590),r=n(1130),o=n(1131);e.exports=function(e,t){return o(r(e,t,a),e+"")}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var a=n(184)(Object,"create");e.exports=a},function(e,t,n){var a=n(186);e.exports=function(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}},function(e,t,n){var a=n(1171);e.exports=function(e,t){var n=e.__data__;return a(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=(n(12),a(n(28))),p=n(9),h=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={checkedRows:a.unserialize(e.value)},a.onChange=a.onChange.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"onChange",value:function(e){var t=this.state.checkedRows,n=this.props.onChange,a=parseInt(e.target.value),r=t.indexOf(a);-1===r?t.push(a):t.splice(r,1),this.setState({checkedRows:t}),n&&(e.target.value=this.serialize(t),n(e))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.name,a=this.state.checkedRows;if(!t||0==t.length)return c.default.createElement("p",null,"No branches.");var r=[];for(var o in t){var l=t[o];r.push(c.default.createElement("div",{key:o},c.default.createElement("input",{type:"checkbox",name:n,value:l.value,checked:a.includes(l.value),onChange:this.onChange}),c.default.createElement("span",null," ",l.label)))}return c.default.createElement("div",{style:{margin:"15px 0 15px 0"}},c.default.createElement("p",{className:"detail-field-label"},"Select branches"),c.default.createElement("div",{style:{marginLeft:"10px"}},r))}},{key:"unserialize",value:function(e){if(!e||0==e.length)return[];for(var t=e.split("_"),n=0;n<t.length;n++)t[n]=parseInt(t[n]);return t}},{key:"serialize",value:function(e){return e.join("_")}}]),t}(u.Component);h.PropTypes={url:u.PropTypes.string.isRequired,name:u.PropTypes.string.isRequired,value:u.PropTypes.string,onChange:u.PropTypes.func},t.default=(0,f.default)((0,d.default)(h),[p.ROLES.SUPER_ADMIN,p.ROLES.ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(15)),p=a(n(37)),h=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={postcode:e.value?e.value:"",showResults:!1,results:[],inputFocused:!1},a.id="postcode-query-input",a.onChange=a.onChange.bind(a),a.onClick=a.onClick.bind(a),a.search=a.search.bind(a),a.onFocus=a.onFocus.bind(a),a.removePlaceholder=a.removePlaceholder.bind(a),a.setPlaceholder=a.setPlaceholder.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"parseData",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=[],n=e.line1?e.line1.length:0;if(e.line1)for(var a=0;a<n;a++){var r={line1:e.line1[a][0],postcode:e.postcode[0],town:e.town[0]},o=function(e,t){return e&&t>=0&&t<e.length?e[t]:null}(e.line2,a)[0];o&&(r.line2=o),t.push(r)}return t}},{key:"search",value:function(){var e=this,t=this.state.postcode;this.searchP&&this.searchP.cancel(),this.searchP=f.default.ajax({type:"get",url:"/api/users/get-postcode-data",data:{postcode:t}}),this.searchP.then(function(t){e.setState({results:e.parseData(t)}),e.setState({showResults:!0})},function(e){return console.error(e)})}},{key:"onFocus",value:function(){this.state.results&&this.state.results.length>0&&this.setState({showResults:!0})}},{key:"onChange",value:function(e){this.setState({postcode:e.target.value}),this.searchDelay&&(clearInterval(this.searchDelay),this.searchDelay=null),this.searchDelay=setTimeout(this.search,1e3)}},{key:"onSelect",value:function(e){this.props.onSelect(e),this.setState({showResults:!1})}},{key:"setPlaceholder",value:function(){""==this.$input.val()&&this.$input.val(this.$input.attr("placeholder"))}},{key:"removePlaceholder",value:function(){this.$input.attr("placeholder")==this.$input.val()&&this.$input.val("")}},{key:"onClick",value:function(e){var t=!p.default.findDOMNode(this).contains(e.target);this.setState({showResults:!t&&this.state.showResults})}},{key:"componentDidMount",value:function(){var e=this;$(function(){return e.$input=$("#"+e.id)})}},{key:"componentWillMount",value:function(){document.addEventListener("click",this.onClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onClick,!1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.showResults,a=t.results,r=t.postcode,o=t.inputFocused,l=!r&&!o;return c.default.createElement("div",{onFocus:this.onFocus,style:{position:"relative"}},c.default.createElement("input",{type:"text",id:this.id,className:"form-control",name:"postcode",onChange:this.onChange,onFocus:function(){return e.setState({inputFocused:!0},e.removePlaceholder)},onBlur:function(){return e.setState({inputFocused:!1},e.setPlaceholder)},placeholder:"Postcode",value:l?"Postcode":r,style:{color:l?"#A8A8A8":"black"}}),c.default.createElement(d.Panel,{collapsible:!0,expanded:n,style:{border:"0",maxHeight:"220px",overflowY:"auto",position:"absolute",left:"0",top:"35px",width:"100%",zIndex:"2"}},c.default.createElement("ul",{className:"postcode-select"},a.map(function(t,n){return c.default.createElement("li",{key:n,style:{cursor:"pointer",minHeight:"20px",lineHeight:"20px",zIndex:"3"},onClick:function(){return e.onSelect(t)},className:"highlighted"},function(e){if(e){for(var t=0;t<e.length;t++)null!==e[t]&&e[t]||(e.splice(t,1),t--);return e}}([t.postcode,t.line1,t.line2,t.town]).join(", "))}))))}}]),t}(u.Component);t.default=h,h.propTypes={onSelect:u.PropTypes.func.isRequired,value:u.PropTypes.string,limit:u.PropTypes.number}},function(e,t,n){"use strict";e.exports=function(e,t,n,a){if(e.size){var r=0;e.reduce(function(e,o,l){return t(e,o)||(n(e)&&a(r,l),r=l),o}),n(e.last())&&a(r,e.count())}}},function(e,t,n){"use strict";var a=n(73),r=n(612);e.exports=function(e,t){var n=t.getStartKey(),o=t.getStartOffset(),l=t.getEndKey(),i=t.getEndOffset(),s=r(e,t).getBlockMap(),u=s.keySeq(),c=u.indexOf(n),d=u.indexOf(l)+1;return s.slice(c,d).map(function(e,t){var r=a(),s=e.getText(),u=e.getCharacterList();return n===l?e.merge({key:r,text:s.slice(o,i),characterList:u.slice(o,i)}):t===n?e.merge({key:r,text:s.slice(o),characterList:u.slice(o)}):t===l?e.merge({key:r,text:s.slice(0,i),characterList:u.slice(0,i)}):e.set("key",r)}).toOrderedMap()}},function(e,t,n){"use strict";function a(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var r=n(80)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(615),l=n(35),i=n(30),s=(0,l.Map)(),u=0,c={getLastCreatedEntityKey:function(){return a("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),c.__getLastCreatedEntityKey()},create:function(e,t,n){return a("DraftEntity.create","contentState.createEntity"),c.__create(e,t,n)},add:function(e){return a("DraftEntity.add","contentState.addEntity"),c.__add(e)},get:function(e){return a("DraftEntity.get","contentState.getEntity"),c.__get(e)},mergeData:function(e,t){return a("DraftEntity.mergeData","contentState.mergeEntityData"),c.__mergeData(e,t)},replaceData:function(e,t){return a("DraftEntity.replaceData","contentState.replaceEntityData"),c.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return""+u},__create:function(e,t,n){return c.__add(new o({type:e,mutability:t,data:n||{}}))},__add:function(e){var t=""+ ++u;return s=s.set(t,e),t},__get:function(e){var t=s.get(e);return t||i(!1),t},__mergeData:function(e,t){var n=c.__get(e),a=r({},n.getData(),t),o=n.set("data",a);return s=s.set(e,o),o},__replaceData:function(e,t){var n=c.__get(e).set("data",t);return s=s.set(e,n),n}};e.exports=c},function(e,t,n){"use strict";var a={encode:function(e,t,n){return e+"-"+t+"-"+n},decode:function(e){var t=e.split("-"),n=t[0],a=t[1],r=t[2];return{blockKey:n,decoratorKey:parseInt(a,10),leafKey:parseInt(r,10)}}};e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return"handled"===e||!0===e}},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.router=t.routes=t.route=t.components=t.component=t.location=t.history=t.falsy=t.locationShape=t.routerShape=void 0;var r=n(0),o=(a(n(151)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(92))),l=(a(n(45)),r.PropTypes.func),i=r.PropTypes.object,s=r.PropTypes.shape,u=r.PropTypes.string,c=t.routerShape=s({push:l.isRequired,replace:l.isRequired,go:l.isRequired,goBack:l.isRequired,goForward:l.isRequired,setRouteLeaveHook:l.isRequired,isActive:l.isRequired}),d=t.locationShape=s({pathname:u.isRequired,search:u.isRequired,state:i,action:u.isRequired,key:u}),f=t.falsy=o.falsy,p=t.history=o.history,h=t.location=d,m=t.component=o.component,v=t.components=o.components,y=t.route=o.route,g=(t.routes=o.routes,t.router=c),E={falsy:f,history:p,location:h,component:m,components:v,route:y,router:g};t.default=E},function(e,t,n){"use strict";t.__esModule=!0,t.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getHashPath=function(){return window.location.href.split("#")[1]||""},t.replaceHashPath=function(e){window.location.replace(window.location.pathname+window.location.search+"#"+e)},t.getWindowPath=function(){return window.location.pathname+window.location.search+window.location.hash},t.go=function(e){e&&window.history.go(e)},t.getUserConfirmation=function(e,t){t(window.confirm(e))},t.supportsHistory=function(){var e=navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},t.supportsGoWithoutReloadUsingHash=function(){return-1===navigator.userAgent.indexOf("Firefox")}},function(e,t,n){"use strict";t.__esModule=!0,function(e){e&&e.__esModule}(n(49)),t.default=function(e,t,n){var a=e(t,n);e.length<2&&n(a)},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,function(e){e&&e.__esModule}(n(49)),t.default=function(e,t){return function(){return e.apply(this,arguments)}},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e,t){function n(e,n){y&&y.location===e?a(y,n):(0,c.default)(t,e,function(t,r){t?n(t):r?a(o({},r,{location:e}),n):n()})}function a(e,t){function n(n,r){if(n||r)return a(n,r);(0,u.default)(e,function(n,a){n?t(n):t(null,null,v=o({},e,{components:a}))})}function a(e,n){e?t(e):t(null,n)}var r=(0,l.default)(v,e),s=r.leaveRoutes,c=r.changeRoutes,d=r.enterRoutes;(0,i.runLeaveHooks)(s,v),s.filter(function(e){return-1===d.indexOf(e)}).forEach(m),(0,i.runChangeHooks)(c,v,e,function(t,r){if(t||r)return a(t,r);(0,i.runEnterHooks)(d,e,n)})}function d(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];return e.__id__||t&&(e.__id__=g++)}function f(e){return e.reduce(function(e,t){return e.push.apply(e,E[d(t)]),e},[])}function p(e,n){(0,c.default)(t,e,function(t,a){if(null!=a){y=o({},a,{location:e});for(var r=f((0,l.default)(v,y).leaveRoutes),i=void 0,s=0,u=r.length;null==i&&s<u;++s)i=r[s](e);n(i)}else n()})}function h(){if(v.routes){for(var e=f(v.routes),t=void 0,n=0,a=e.length;"string"!=typeof t&&n<a;++n)t=e[n]();return t}}function m(e){var t=d(e,!1);t&&(delete E[t],r(E)||(b&&(b(),b=null),_&&(_(),_=null)))}var v={},y=void 0,g=1,E=Object.create(null),b=void 0,_=void 0;return{isActive:function(t){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],a=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=void 0;return n&&!0!==n||null!==a?(t={pathname:t,query:n},r=a||!1):(t=e.createLocation(t),r=n),(0,s.default)(t,r,v.location,v.routes,v.params)},match:n,listenBeforeLeavingRoute:function(t,n){var a=d(t),o=E[a];if(o)-1===o.indexOf(n)&&o.push(n);else{var l=!r(E);E[a]=[n],l&&(b=e.listenBefore(p),e.listenBeforeUnload&&(_=e.listenBeforeUnload(h)))}return function(){var e=E[a];if(e){var r=e.filter(function(e){return e!==n});0===r.length?m(t):E[a]=r}}},listen:function(t){return e.listen(function(a){v.location===a?t(null,v):n(a,function(n,a,r){n?t(n):a?e.replace(a):r&&t(null,r)})})}}},a(n(45));var l=a(n(727)),i=n(728),s=a(n(729)),u=a(n(730)),c=a(n(731));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.loopAsync=function(e,t,n){function a(){l=!0,i?u=[].concat(Array.prototype.slice.call(arguments)):n.apply(this,arguments)}function r(){if(!l&&(s=!0,!i)){for(i=!0;!l&&o<e&&s;)s=!1,t.call(this,o++,r,a);i=!1,l?n.apply(this,u):o>=e&&s&&(l=!0,n())}}var o=0,l=!1,i=!1,s=!1,u=void 0;r()},t.mapAsync=function(e,t,n){var a=e.length,r=[];if(0===a)return n(null,r);var o=!1,l=0;e.forEach(function(e,i){t(e,i,function(e,t){!function(e,t,i){o||(t?(o=!0,n(t)):(r[e]=i,(o=++l===a)&&n(null,r)))}(i,e,t)})})}},function(e,t,n){var a=n(64),r=n(55).document,o=a(r)&&a(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var a=n(64);e.exports=function(e,t){if(!a(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!a(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var a=n(121);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var a=n(229),r=Math.min;e.exports=function(e){return e>0?r(a(e),9007199254740991):0}},function(e,t){var n=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},function(e,t,n){var a=n(231)("keys"),r=n(156);e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t,n){var a=n(55),r="__core-js_shared__",o=a[r]||(a[r]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var a=n(159),r=n(54),o=n(361),l=n(83),i=n(95),s=n(123),u=n(764),c=n(124),d=n(359),f=n(56)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,m,v,y,g){u(n,t,m);var E,b,_,C=function(e){if(!p&&e in x)return x[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",k="values"==v,S=!1,x=e.prototype,T=x[f]||x["@@iterator"]||v&&x[v],P=!p&&T||C(v),R=v?k?C("entries"):P:void 0,O="Array"==t?x.entries||T:T;if(O&&(_=d(O.call(new e)))!==Object.prototype&&_.next&&(c(_,w,!0),a||i(_,f)||l(_,f,h)),k&&T&&"values"!==T.name&&(S=!0,P=function(){return T.call(this)}),a&&!g||!p&&!S&&x[f]||l(x,f,P),s[t]=P,s[w]=h,v)if(E={values:k?P:C("values"),keys:y?P:C("keys"),entries:R},g)for(b in E)b in x||o(x,b,E[b]);else r(r.P+r.F*(p||S),t,E);return E}},function(e,t,n){t.f=n(56)},function(e,t,n){var a=n(156)("meta"),r=n(64),o=n(95),l=n(67).f,i=0,s=Object.isExtensible||function(){return!0},u=!n(94)(function(){return s(Object.preventExtensions({}))}),c=function(e){l(e,a,{value:{i:"O"+ ++i,w:{}}})},d=e.exports={KEY:a,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,a)){if(!s(e))return"F";if(!t)return"E";c(e)}return e[a].i},getWeak:function(e,t){if(!o(e,a)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[a].w},onFreeze:function(e){return u&&d.NEED&&s(e)&&!o(e,a)&&c(e),e}}},function(e,t,n){var a=n(55),r=n(41),o=n(159),l=n(235),i=n(67).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:a.Symbol||{});"_"==e.charAt(0)||e in t||i(t,e,{value:l.f(e)})}},function(e,t){},function(e,t,n){var a=n(121),r=n(56)("toStringTag"),o="Arguments"==a(function(){return arguments}());e.exports=function(e){var t,n,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:o?a(t):"Object"==(l=a(t))&&"function"==typeof t.callee?"Arguments":l}},function(e,t){e.exports=function(e,t,n,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var a=n(119);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,a){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=a}),this.resolve=a(t),this.reject=a(n)}(e)}},function(e,t,n){var a=n(83);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:a(e,r,t[r]);return e}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(14)),p=(n(12),function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={selectedBranch:localStorage.getItem("branchId")},a.state.selectedBranch&&e.onChange(a.state.selectedBranch),a.onChange=a.onChange.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onChange",value:function(e){var t=this.props.onChange,n=e.target.value;this.setState({selectedBranch:n}),localStorage.setItem("branchId",n),t(n)}},{key:"render",value:function(){var e=this.state.selectedBranch,t=this.props.data;return d.default.createElement("select",{className:"form-control",value:e,onChange:this.onChange},d.default.createElement("option",{value:""},"-- All branches --"),t.map(function(e,t){return d.default.createElement("option",{key:t,value:e.value},e.label)}))}}]),t}(c.Component));p.propTypes={onChange:c.PropTypes.func.isRequired};var h=(0,f.default)(p);t.default=function(e){return d.default.createElement(h,(0,r.default)({},e,{ajaxOperations:{load:{type:"get",url:"/api/branches-associated/list",data:{allowedOnly:!0}}}}))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(2)),l=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"toggleValue",value:function(e,t){var n=e.indexOf(t);-1==n?e.push(t):e.splice(n,1)}},{key:"createIfNotExists",value:function(e,t,n){n||(n=function(e,t){return e.id==t.id});var a=!1;for(var r in e)if(n(e[r],t)){a=!0;break}a||e.push(t)}}]),e}();t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(2)),l=a(n(15)),i=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"getActive",value:function(e){l.default.ajax({type:"get",url:"/api/terms/active"}).then(function(t){return e(t)})}}]),e}();t.default=i},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}var r=n(1023),o=n(1052),l=n(1053);a.prototype.add=a.prototype.push=o,a.prototype.has=l,e.exports=a},function(e,t,n){var a=n(179).Symbol;e.exports=a},function(e,t,n){var a=n(1054);e.exports=function(e,t){return!(null==e||!e.length)&&a(e,t,0)>-1}},function(e,t){e.exports=function(e,t,n){for(var a=-1,r=null==e?0:e.length;++a<r;)if(n(t,e[a]))return!0;return!1}},function(e,t){e.exports=function(e,t){for(var n=-1,a=null==e?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var a=n(575),r=n(1058),o=n(1060);e.exports=function(e,t){return o(r(e,t,a),e+"")}},function(e,t,n){var a=n(1065),r=n(279);e.exports=function(e){return r(e)&&a(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var a={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,l=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,c=u&&u(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(c){var f=u(n);f&&f!==c&&e(t,f,d)}var p=l(n);i&&(p=p.concat(i(n)));for(var h=0;h<p.length;++h){var m=p[h];if(!(a[m]||r[m]||d&&d[m])){var v=s(n,m);try{o(t,m,v)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var r=Object.prototype.hasOwnProperty,o=0;o<n.length;o+=1){if(!r.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;if(e[n[o]]!==t[n[o]])return!1}return!0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return Boolean(e&&"function"==typeof e.dispose)},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyImage=t.NativeTypes=void 0,t.default=function(e){return new r.default(e)};var r=a(n(1117)),o=a(n(1191)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(287));t.NativeTypes=l,t.getEmptyImage=o.default},function(e,t,n){var a=n(285),r=n(1123),o=n(1124),l=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?r(e):o(e)}},function(e,t,n){var a=n(136).Symbol;e.exports=a},function(e,t,n){var a=n(588),r=n(591);e.exports=function(e){return null!=e&&r(e.length)&&!a(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},function(e,t,n){(function(t){function n(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e}function a(e,t,o,l,i){var s=-1,u=e.length;for(o||(o=r),i||(i=[]);++s<u;){var c=e[s];t>0&&o(c)?t>1?a(c,t-1,o,l,i):n(i,c):l||(i[i.length]=c)}return i}function r(e){return E(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?h.call(e):"";return t==i||t==s}(e)}(e)}(e)&&p.call(e,"callee")&&(!v.call(e,"callee")||h.call(e)==l)}(e)||!!(y&&e&&e[y])}var o=9007199254740991,l="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]",u="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=u||c||Function("return this")(),f=Object.prototype,p=f.hasOwnProperty,h=f.toString,m=d.Symbol,v=f.propertyIsEnumerable,y=m?m.isConcatSpreadable:void 0,g=Math.max,E=Array.isArray,b=function(e){return function(e,t){return t=g(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,r=g(n.length-t,0),o=Array(r);++a<r;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=o,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,l)}}(function(e){var t=(e=a(e,1)).length,n=t;for(void 0;n--;)if("function"!=typeof e[n])throw new TypeError("Expected a function");return function(){for(var n=0,a=t?e[n].apply(this,arguments):arguments[0];++n<t;)a=e[n].call(this,a);return a}})}();e.exports=b}).call(t,n(40))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(2)),l=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"toBool",value:function(e){switch(e){case 1:case"1":case"true":case!0:return!0;default:return!1}}}]),e}();t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(23)),c=n(0),d=a(c),f=(a(n(22)),n(6)),p=a(n(15)),h=a(n(289)),m=a(n(11)),v=a(n(44)),y={input:{width:"250px",display:"inline-block",marginLeft:"10px"},buttonAdd:{marginLeft:"10px",verticalAlign:"top"}};window.innerWidth<768?y={input:{width:"100%",display:"inline-block",marginBottom:10},buttonAdd:{width:"100%",marginTop:10}}:window.innerWidth<1025&&(y=(0,u.default)({},y,{input:{width:"50%",display:"inline-block",marginLeft:"10px"},buttonAdd:{width:"calc(50% - 86px)",marginLeft:"10px",verticalAlign:"top"}}));var g=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={examName:"",isLoading:!0,exams:[],classObj:null,examToDelete:null,showConfirmDelete:!1},a.promises={load:null},a.deleteExam=a.deleteExam.bind(a),a.add=a.add.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.loadData(),this.setState({classObj:this.props.classObj})}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.examName,a=t.classObj;if(a&&null===a.id)return!1;var r=this.props.label;return d.default.createElement("div",{style:{marginTop:"40px",marginBottom:"40px"}},r?d.default.createElement("h4",null,r):"",this.renderExams(),d.default.createElement("label",{htmlFor:"examName"},"New exam"),d.default.createElement("input",{className:"form-control",style:y.input,type:"text",name:"examName",value:n,onChange:function(t){return e.onTextChange(t)}}),d.default.createElement(f.Button,{bsStyle:"success",className:"custom",style:y.buttonAdd,onClick:this.add},"Add"))}},{key:"loadData",value:function(){var e=this,t=this.props.classObj;t&&t.id&&(this.setState({isLoading:!0}),this.promises.load=p.default.ajax({type:"get",url:"/api/classes/"+t.id+"/exams"}),this.promises.load.then(function(t){return e.setState({isLoading:!1,exams:t})},function(e){return console.log(e)}))}},{key:"renderExams",value:function(){var e=this,t=this.state,n=t.classObj,a=t.exams,r=t.showConfirmDelete;if(t.examToDelete,!n||!n.id)return!1;var o=h.default.toBool(n.submitted),l=a.map(function(t){return d.default.createElement(b,{key:t.id,title:t.title,isSubmitted:h.default.toBool(t.submitted),onToggle:function(){return e.toggleExamSubmitted(t)},onSave:function(n){return e.renameExam(t,n)},onDelete:function(){return e.setState({examToDelete:t,showConfirmDelete:!0})}})});return d.default.createElement("div",null,d.default.createElement(b,{title:"Final Grade",isSubmitted:o,toggleOnly:!0,onToggle:function(){return e.toggleClassSubmitted()}}),l,d.default.createElement(v.default,{show:r,onConfirm:this.deleteExam,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}},{key:"add",value:function(){var e=this,t=this.state.examName,n=this.props,a=n.classesIds,r=n.classObj,o=[];r?o=[r.id]:a&&(o=a.slice()),t.length>0&&o.length>0&&$.ajax({type:"post",url:"/api/exams",data:{title:t,courseClassIds:o},success:function(t){if(m.default.success("Saved successfully"),r&&r.id){var n=e.state.exams;n=n.concat(t),e.setState({exams:n})}},error:function(e){m.default.error("Save failed"),console.log(e)}})}},{key:"toggleClassSubmitted",value:function(){var e=this.props.classObj;e&&e.id&&(e.submitted="1"==e.submitted?"0":"1",console.log(e.submitted),this.updateClass(e))}},{key:"toggleExamSubmitted",value:function(e){e.submitted="1"==e.submitted?"0":"1",this.updateExam(e)}},{key:"renameExam",value:function(e,t){e.title=t,this.updateExam(e)}},{key:"deleteExam",value:function(e){for(var t=this.state,n=t.exams,a=t.examToDelete,r=0;r<n.length;r++)if(a.id==n[r].id){n.splice(r,1);break}this.setState({exams:n}),$.ajax({type:"delete",url:"/api/exams/"+a.id,data:{reason:e},success:function(){return m.default.success("Deleted successfully")},error:function(){return m.default.error("Deletion failed")}})}},{key:"updateExam",value:function(e){for(var t=this.state.exams,n=0;n<t.length;n++)if(e.id==t[n].id){t[n]=e;break}this.setState({exams:t}),$.ajax({type:"put",url:"/api/exams/"+e.id,data:e,success:function(){return m.default.success("Updated")},error:function(){return m.default.error("Update failed")}})}},{key:"updateClass",value:function(e){this.setState({classObj:e}),$.ajax({type:"put",url:"/api/classes/"+e.id,data:{submitted:e.submitted},success:function(){return m.default.success("Updated")},error:function(){return m.default.error("Update failed")}})}},{key:"onTextChange",value:function(e){this.setState({examName:e.target.value})}}]),t}(c.Component);t.default=g,g.propTypes={classesIds:c.PropTypes.array,classObj:c.PropTypes.object,label:c.PropTypes.string};var E={input:{width:"75%",display:"inline-block",marginRight:"10px"},button:{marginRight:"10px"}};window.innerWidth<768?E={input:{width:"100%",marginBottom:10},button:{width:"100%",marginBottom:10}}:window.innerWidth<1025&&(E={input:{width:"100%",marginBottom:10},button:{width:"calc(33% - 10px)",marginBottom:10,marginRight:5,marginLeft:5},buttonWrap:{marginLeft:-5,marginRight:-5}});var b=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={title:""},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.setState({title:this.props.title})}},{key:"render",value:function(){var e=this,t=this.state.title,n=this.props,a=n.toggleOnly,r=n.onSave,o=n.onDelete,l=n.onToggle,i=n.isSubmitted;return d.default.createElement("div",{style:{marginBottom:"10px"}},d.default.createElement("div",{style:E.input},d.default.createElement("input",{type:"text",value:t,className:"form-control",readOnly:a,onChange:function(t){e.setState({title:t.target.value})}})),d.default.createElement("div",{style:E.buttonWrap},d.default.createElement(f.Button,{style:E.button,disabled:a,onClick:function(){r&&r(t)}},"Save"),d.default.createElement(f.Button,{style:E.button,disabled:a,onClick:function(){o&&o()}},"Delete"),d.default.createElement(f.Button,{style:E.button,bsStyle:"primary",onClick:function(){return l()}},i?"Open":"Close")))}}]),t}(c.Component);b.PropTypes={title:c.PropTypes.string.isRequired,toggleOnly:c.PropTypes.bool.isRequired,isSubmitted:c.PropTypes.bool.isRequired,onSave:c.PropTypes.func,onDelete:c.PropTypes.func,onToggle:c.PropTypes.func.isRequired}},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(4)),i=a(n(2)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=n(12),p=a(n(22)),h=a(n(15)),m=a(n(16)),v=(a(n(36)),n(6)),y=(n(38),a(n(192)),a(n(11))),g=a(n(44)),E={buttonAfter:{marginLeft:20}};window.innerWidth<768&&(E={buttonAfter:{}});var b=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={user:{},userPasswordRepeat:"",id:a.props.id,isLoading:!1,showConfirmDelete:!1},a.promises={load:null,save:null},a.requestFields=["id","userName","userEmailAddress","userFullname","allowedBranches"],a.submit=a.submit.bind(a),a.onFieldChange=a.onFieldChange.bind(a),a.save=a.save.bind(a),a.deleteUser=a.deleteUser.bind(a),a.back=a.back.bind(a),a}return(0,s.default)(t,e),(0,i.default)(t,null,[{key:"allowedRoles",value:function(){return[d.ROLES.SUPER_ADMIN]}}]),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"submit",value:function(e){e.preventDefault()}},{key:"load",value:function(){var e=this,t=this.props.id;t&&(this.setState({isLoading:!0}),this.promises.load&&this.promises.load.cancel(),this.promises.load=h.default.ajax({type:"get",url:"/api/users/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){console.log(t),e.setState({isLoading:!1,user:t})},function(e){return console.log(e)}))}},{key:"beforeSave",value:function(){var e=this.state,t=e.id,n=e.user;t||(n.userMainRole=d.ROLE_IDS[d.ROLES.SUPER_ADMIN])}},{key:"save",value:function(){var e=this;this.beforeSave();var t=this.state,n=t.id,a=t.user,r=t.userPasswordRepeat;if(a.userPassword&&a.userPassword!=r)alert("passwords should match");else{var o={};n?(a.userPassword&&0!=a.userPassword.length||delete a.userPassword,o={type:"put",url:"/api/users/"+n,data:a}):o={type:"post",url:"/api/users",data:a},this.promises.save=h.default.ajax(o),this.promises.save.then(function(t){y.default.success("Saved successfully"),e.back()},function(e){y.default.error("Save failed"),console.log(e)})}}},{key:"deleteUser",value:function(e){var t=this,n=this.state.id;n&&$.ajax({type:"delete",url:"/api/users/"+n,data:{reason:e},success:function(e){y.default.success("Deleted successfully"),t.back()},error:function(e){y.default.error("Deletion failed"),console.log(e)}})}},{key:"back",value:function(){this.context.router.push("/users/role/staff")}},{key:"onFieldChange",value:function(e){var t=this.state.user;m.default.accessObjByPath(t,e.target.name,function(t){return e.target.value}),this.setState({user:t})}},{key:"renderFormButtons",value:function(){var e=this,t=!1;return this.state.id&&(t=c.default.createElement(v.Button,{className:"custom btn-danger",onClick:function(){return e.setState({showConfirmDelete:!0})},style:E.buttonAfter},"Delete user")),c.default.createElement("div",{style:{marginTop:"20px"}},c.default.createElement(p.default,null,c.default.createElement(v.Button,{className:"custom btn-success",onClick:this.save},"Save"),c.default.createElement(v.Button,{className:"custom",style:E.buttonAfter,onClick:this.back},"Cancel"),t))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.user,r=t.userPasswordRepeat,o=t.showConfirmDelete,l={color:"grey"},i=function(e){var t=e.style,n=e.children;return c.default.createElement("p",{className:"detail-field-label",style:t},n)};return n?c.default.createElement("p",null,"Loading..."):c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Super Admin Profile"),c.default.createElement("hr",null),c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},a.id?c.default.createElement(f.LabeledValue,{width:12,label:"Username",value:a.userName}):c.default.createElement("div",null,c.default.createElement(i,null,"Username"),c.default.createElement("input",{type:"text",name:"userName",className:"form-control",value:a.userName,onChange:this.onFieldChange}))),c.default.createElement(v.Col,{md:6},a.id?c.default.createElement(f.LabeledValue,{width:12,label:"Email Address",value:a.userEmailAddress}):c.default.createElement("div",null,c.default.createElement(i,null,"Email address"),c.default.createElement("input",{type:"text",name:"userEmailAddress",className:"form-control",value:a.userEmailAddress,onChange:this.onFieldChange}),c.default.createElement("p",{style:l},"(optional)")))),c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},c.default.createElement(i,null,"Password"),c.default.createElement("input",{type:"text",name:"userPassword",className:"form-control",value:a.userPassword,onChange:this.onFieldChange}),a.id?c.default.createElement("p",{style:l},"Leave blank to keep old password!"):"",c.default.createElement(i,{style:{marginTop:"5px"}},"Confirm Password"),c.default.createElement("input",{type:"text",name:"userPasswordRepeat",className:"form-control",value:r,onChange:function(t){return e.setState({userPasswordRepeat:t.target.value})}})),c.default.createElement(v.Col,{md:6},c.default.createElement(i,null,"Fullname"),c.default.createElement("input",{type:"text",name:"userFullname",className:"form-control",value:a.userFullname,onChange:this.onFieldChange}))),this.renderFormButtons()),c.default.createElement(g.default,{show:o,onConfirm:this.deleteUser,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(u.Component);t.default=b,b.propTypes={id:u.PropTypes.number},b.contextTypes={router:c.default.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(4)),i=a(n(2)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=n(12),p=a(n(22)),h=a(n(15)),m=a(n(16)),v=(a(n(36)),n(6)),y=(n(38),a(n(192)),a(n(11))),g=a(n(44)),E=a(n(19)),b=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={user:{},userPasswordRepeat:null,id:a.props.id,isLoading:!1,showConfirmDelete:!1},a.promises={load:null,save:null},a.requestFields=["id","userName","userEmailAddress","userFullname","userStatus","allowedBranches"],a.submit=a.submit.bind(a),a.onFieldChange=a.onFieldChange.bind(a),a.save=a.save.bind(a),a.deleteUser=a.deleteUser.bind(a),a.back=a.back.bind(a),a}return(0,s.default)(t,e),(0,i.default)(t,null,[{key:"allowedRoles",value:function(){return[d.ROLES.SUPER_ADMIN]}}]),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"submit",value:function(e){e.preventDefault()}},{key:"load",value:function(){var e=this,t=this.props.id;t&&(this.setState({isLoading:!0}),this.promises.load&&this.promises.load.cancel(),this.promises.load=h.default.ajax({type:"get",url:"/api/users/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){console.log(t),e.setState({isLoading:!1,user:t})},function(e){return console.log(e)}))}},{key:"beforeSave",value:function(){var e=this.state,t=e.id,n=e.user;t||(n.userMainRole=d.ROLE_IDS[d.ROLES.ADMIN])}},{key:"save",value:function(){var e=this;this.beforeSave();var t=this.state,n=t.id,a=t.user,r=t.userPasswordRepeat;if(a.userPassword&&a.userPassword!=r)alert("passwords should match");else{var o={};n?(a.userPassword&&0!=a.userPassword.length||delete a.userPassword,o={type:"put",url:"/api/users/"+n,data:a}):o={type:"post",url:"/api/users",data:a},this.promises.save=h.default.ajax(o),this.promises.save.then(function(t){y.default.success("Saved successfully"),e.back()},function(e){y.default.error("Save failed"),console.log(e)})}}},{key:"deleteUser",value:function(e){var t=this,n=this.state.id;n&&$.ajax({type:"delete",url:"/api/users/"+n,data:{reason:e},success:function(e){y.default.success("Deleted successfully"),t.back()},error:function(e){y.default.error("Deletion failed"),console.log(e)}})}},{key:"back",value:function(){this.context.router.push("/users/role/staff")}},{key:"onFieldChange",value:function(e){var t=this.state.user;m.default.accessObjByPath(t,e.target.name,function(t){return e.target.value}),this.setState({user:t})}},{key:"renderFormButtons",value:function(){var e=this,t=this.state.id,n={marginLeft:20};window.innerWidth<768&&(n={});var a=!1;return t&&(a=c.default.createElement(v.Button,{className:"custom btn-danger",onClick:function(){return e.setState({showConfirmDelete:!0})},style:n},"Delete user")),c.default.createElement("div",{style:{marginTop:"20px"}},c.default.createElement(p.default,null,c.default.createElement(v.Button,{className:"custom btn-success",onClick:this.save},"Save"),c.default.createElement(v.Button,{className:"custom",style:n,onClick:this.back},"Cancel"),a))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.user,r=t.userPasswordRepeat,o=t.showConfirmDelete,l={color:"grey"},i=function(e){var t=e.style,n=e.children;return c.default.createElement("p",{style:t,className:"detail-field-label"},n)};return n?c.default.createElement("div",null,c.default.createElement(E.default,null)):c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Admin Profile"),c.default.createElement("hr",null),c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},a.id?c.default.createElement(f.LabeledValue,{width:12,label:"Username",value:a.userName}):c.default.createElement("div",null,c.default.createElement(i,null,"Username"),c.default.createElement("input",{type:"text",name:"userName",className:"form-control",value:a.userName,onChange:this.onFieldChange}))),c.default.createElement(v.Col,{md:6},a.id?c.default.createElement(f.LabeledValue,{width:12,label:"Email Address",value:a.userEmailAddress}):c.default.createElement("div",null,c.default.createElement(i,null,"Email Address"),c.default.createElement("input",{type:"text",name:"userEmailAddress",className:"form-control",value:a.userEmailAddress,onChange:this.onFieldChange}),c.default.createElement("p",{style:l},"(optional)")))),c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},c.default.createElement("div",null,c.default.createElement(i,null,"Password"),c.default.createElement("input",{type:"text",name:"userPassword",className:"form-control",value:a.userPassword,onChange:this.onFieldChange}),a.id?c.default.createElement("p",{style:l},"Leave blank to keep old password!"):""),c.default.createElement("div",{style:{marginTop:"5px"}},c.default.createElement(i,null,"Confirm Password"),c.default.createElement("input",{type:"text",name:"userPasswordRepeat",className:"form-control",value:r,onChange:function(t){return e.setState({userPasswordRepeat:t.target.value})}}))),c.default.createElement(v.Col,{md:6},c.default.createElement("div",null,c.default.createElement(i,null,"Fullname"),c.default.createElement("input",{type:"text",name:"userFullname",className:"form-control",value:a.userFullname,onChange:this.onFieldChange})))),this.renderFormButtons()),c.default.createElement(g.default,{show:o,onConfirm:this.deleteUser,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(u.Component);t.default=b,b.PropTypes={id:u.PropTypes.number},b.contextTypes={router:c.default.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(4)),i=a(n(2)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=n(12),p=a(n(22)),h=a(n(15)),m=a(n(16)),v=(a(n(36)),n(6)),y=(n(38),a(n(192))),g=a(n(11)),E=a(n(44)),b=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={user:{},userPasswordRepeat:null,id:a.props.id,isLoading:!1},a.promises={load:null,save:null},a.requestFields=["id","userName","userEmailAddress","userFullname","userStatus","allowedBranches"],a.submit=a.submit.bind(a),a.onFieldChange=a.onFieldChange.bind(a),a.save=a.save.bind(a),a.deleteUser=a.deleteUser.bind(a),a.back=a.back.bind(a),a}return(0,s.default)(t,e),(0,i.default)(t,null,[{key:"allowedRoles",value:function(){return[d.ROLES.ADMIN,d.ROLES.SUPER_ADMIN]}}]),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"submit",value:function(e){e.preventDefault()}},{key:"load",value:function(){var e=this,t=this.props.id;t&&(this.setState({isLoading:!0}),this.promises.load&&this.promises.load.cancel(),this.promises.load=h.default.ajax({type:"get",url:"/api/users/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){console.log(t),e.setState({isLoading:!1,user:t})},function(e){return console.log(e)}))}},{key:"beforeSave",value:function(){var e=this.state,t=e.id,n=e.user;t||(n.userMainRole=d.ROLE_IDS[d.ROLES.REGISTRAR])}},{key:"save",value:function(){var e=this;this.beforeSave();var t=this.state,n=t.id,a=t.user,r=t.userPasswordRepeat;if(a.userPassword&&a.userPassword!=r)alert("passwords should match");else{var o={};n?(a.userPassword&&0!=a.userPassword.length||delete a.userPassword,o={type:"put",url:"/api/users/"+n,data:a}):o={type:"post",url:"/api/users",data:a},this.promises.save=h.default.ajax(o),this.promises.save.then(function(t){g.default.success("Saved successfully"),e.back()},function(e){g.default.error("Save failed"),console.log(e)})}}},{key:"deleteUser",value:function(e){var t=this,n=this.state.id;n&&$.ajax({type:"delete",url:"/api/users/"+n,data:{reason:e},success:function(e){g.default.success("Deleted successfully"),t.back()},error:function(e){g.default.error("Deletion failed"),console.log(e)}})}},{key:"back",value:function(){var e=this;setTimeout(function(){return e.context.router.goBack()},1e3)}},{key:"onFieldChange",value:function(e){var t=this.state.user;m.default.accessObjByPath(t,e.target.name,function(t){return e.target.value}),this.setState({user:t})}},{key:"renderFormButtons",value:function(){var e=this,t=!1;return this.state.id&&(t=c.default.createElement(v.Button,{className:"custom btn-danger",onClick:function(){return e.setState({showConfirmDelete:!0})},style:{marginLeft:"20px"}},"Delete user")),c.default.createElement("div",{style:{marginTop:"20px"}},c.default.createElement(p.default,null,c.default.createElement(v.Button,{className:"custom btn-success",onClick:this.save},"Save"),c.default.createElement(v.Button,{className:"custom",style:{marginLeft:"20px"},onClick:this.back},"Cancel"),t))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.user,r=t.userPasswordRepeat,o=t.showConfirmDelete,l={color:"grey"},i=this.props.appTypeKey,s=function(e){var t=e.style,n=e.children;return c.default.createElement("p",{style:t,className:"detail-field-label"},n)};return n?c.default.createElement("p",null,"Loading..."):c.default.createElement("div",{className:"content-block"},c.default.createElement("div",{id:"notifications"}),c.default.createElement("h2",{className:"block-heading"},"Registrar Profile"),c.default.createElement("hr",null),c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},a.id?c.default.createElement(f.LabeledValue,{width:12,label:"Username",value:a.userName}):c.default.createElement("div",null,c.default.createElement(s,null,"Username"),c.default.createElement("input",{type:"text",name:"userName",className:"form-control",value:a.userName,onChange:this.onFieldChange}))),c.default.createElement(v.Col,{md:6},a.id?c.default.createElement(f.LabeledValue,{width:12,label:"Email Address",value:a.userEmailAddress}):c.default.createElement("div",null,c.default.createElement(s,null,"Email Address"),c.default.createElement("input",{type:"text",name:"userEmailAddress",className:"form-control",value:a.userEmailAddress,onChange:this.onFieldChange}),c.default.createElement("p",{style:l},"(optional)")))),c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},c.default.createElement("div",null,c.default.createElement(s,null,"Password"),c.default.createElement("input",{type:"text",name:"userPassword",className:"form-control",value:a.userPassword,onChange:this.onFieldChange}),a.id?c.default.createElement("p",{style:l},"Leave blank to keep old password!"):""),c.default.createElement("div",{style:{marginTop:"5px"}},c.default.createElement(s,null,"Confirm Password"),c.default.createElement("input",{type:"text",name:"userPasswordRepeat",className:"form-control",value:r,onChange:function(t){return e.setState({userPasswordRepeat:t.target.value})}}))),c.default.createElement(v.Col,{md:6},c.default.createElement("div",null,c.default.createElement(s,null,"Fullname"),c.default.createElement("input",{type:"text",name:"userFullname",className:"form-control",value:a.userFullname,onChange:this.onFieldChange})))),c.default.createElement(y.default,{ajaxOperations:{load:{type:"get",url:"/api/branches-associated/list"}},name:"allowedBranches",value:a.allowedBranches,onChange:this.onFieldChange,appTypeKey:i}),this.renderFormButtons()),c.default.createElement(E.default,{show:o,onConfirm:this.deleteUser,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(u.Component);t.default=b,b.propTypes={id:u.PropTypes.number,appTypeKey:u.PropTypes.string.isRequired},b.contextTypes={router:c.default.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(289)),p=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.add=a.add.bind(a),a.deleteRow=a.deleteRow.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"change",value:function(e,t,n){var a=this.props,r=a.payments,o=a.onChange;r[e][t]=n,o(r)}},{key:"deleteRow",value:function(e){var t=this.props,n=t.payments,a=t.onChange;n[e].id?n[e].isDeleted=!0:n.splice(e,1),a(n)}},{key:"add",value:function(){var e=this.props,t=e.payments,n=e.onChange;t.push({paidAmount:0,paidBy:"",payDate:"",payName:"",submitted:!1,workedHours:0}),n(t)}},{key:"getPaymentsCount",value:function(){var e=this.props.payments,t=0;return e&&e.forEach(function(e){e.isDeleted||t++}),t}},{key:"renderRows",value:function(){var e=this,t=this.props,n=t.payments,a=t.displayNames,r=t.editBtn,o=t.onEdit;return n.map(function(t,n){return!t.isDeleted&&c.default.createElement(h,{editBtn:r,displayName:a,key:n,payment:t,onChange:function(t,a){return e.change(n,t,a)},onDelete:function(){return e.deleteRow(n)},onEdit:o})})}},{key:"renderTable",value:function(){if(0===this.getPaymentsCount())return c.default.createElement("p",null,"No payments yet");var e=this.props.displayNames;return c.default.createElement("div",{className:"table-responsive"},c.default.createElement("table",{className:"table table-striped results-table"},c.default.createElement("thead",null,c.default.createElement("tr",null,!!e&&c.default.createElement("td",null,"Teacher Name"),c.default.createElement("td",null,"Pay Name"),c.default.createElement("td",null,"Pay Date"),c.default.createElement("td",null,"Paid By"),c.default.createElement("td",null,"Hours Worked"),c.default.createElement("td",null,"Amount Paid"),c.default.createElement("td",null,"Paid"),c.default.createElement("td",null),c.default.createElement("td",null))),c.default.createElement("tbody",null,this.renderRows())))}},{key:"renderLabel",value:function(){var e=this.props.label;return!!e&&c.default.createElement("p",{className:"detail-field-label"},e)}},{key:"render",value:function(){var e=this,t=this.props.onAdd;return c.default.createElement("div",{style:{marginBottom:"20px"}},this.renderLabel(),this.renderTable(),c.default.createElement(d.Button,{className:"custom btn-success",onClick:function(){t?t():e.add()}},"Add New Payment"))}}]),t}(u.Component);t.default=p,p.PropTypes={editBtn:u.PropTypes.bool,label:u.PropTypes.string,payments:u.PropTypes.arrayOf(u.PropTypes.object).isRequired,onChange:u.PropTypes.func.isRequired,onAdd:u.PropTypes.func,onEdit:u.PropTypes.func};var h=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.change=a.change.bind(a),a.deleteRow=a.deleteRow.bind(a),a.onEdit=a.onEdit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"change",value:function(){var e=this.props.onChange,t=void 0,n=void 0;switch(arguments.length){case 1:var a=arguments[0];t=a.target.name,n=a.target.value,"checkbox"==a.target.type&&(n=a.target.checked);break;case 2:t=arguments[0],n=arguments[1]}e(t,n)}},{key:"onEdit",value:function(){var e=this.props,t=e.onEdit,n=e.payment;t&&t(n)}},{key:"deleteRow",value:function(){(0,this.props.onDelete)()}},{key:"componentDidMount",value:function(){var e=this;$(function(){$(".datepicker").datepicker({dateFormat:"dd-mm-yy",onSelect:function(t,n){n.inline=!1;var a=t.split("-"),r=[a[2],a[1],a[0]].join("-");e.change($(this).attr("name"),r)}})})}},{key:"render",value:function(){var e=this.props,t=e.payment,n=e.displayName,a=e.editBtn;return c.default.createElement("tr",null,!!n&&c.default.createElement("td",{style:{width:"260px"}},c.default.createElement("input",{type:"text",value:t.teacherName?t.teacherName:"",className:"form-control"})),c.default.createElement("td",null,c.default.createElement("input",{type:"text",value:t.payName,name:"payName",className:"form-control",onChange:this.change})),c.default.createElement("td",null,c.default.createElement("input",{value:t.payDate,name:"payDate",className:"form-control datepicker",onChange:this.change})),c.default.createElement("td",null,c.default.createElement("input",{type:"text",value:t.paidBy,name:"paidBy",className:"form-control",onChange:this.change})),c.default.createElement("td",null,c.default.createElement("input",{type:"text",value:t.workedHours,name:"workedHours",className:"form-control",onChange:this.change})),c.default.createElement("td",null,c.default.createElement("input",{type:"text",value:t.paidAmount,name:"paidAmount",className:"form-control",onChange:this.change})),c.default.createElement("td",{style:{verticalAlign:"middle"}},c.default.createElement("input",{type:"checkbox",checked:f.default.toBool(t.submitted),name:"submitted",onChange:this.change})),a?c.default.createElement("td",null,c.default.createElement(d.Button,{onClick:this.onEdit},"Edit")):c.default.createElement("td",null,""),c.default.createElement("td",null,c.default.createElement(d.Button,{bsStyle:"danger",onClick:this.deleteRow},"Delete")))}}]),t}(u.Component);h.PropTypes={payment:u.PropTypes.shape({id:u.PropTypes.number,paidAmount:u.PropTypes.number,paidBy:u.PropTypes.string,payDate:u.PropTypes.string,payName:u.PropTypes.string,submitted:u.PropTypes.bool,workedHours:u.PropTypes.number}),onChange:u.PropTypes.func.isRequired,onDelete:u.PropTypes.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(16)),f=a(n(15)),p=n(6),h=a(n(193)),m=(a(n(36)),n(12)),v=a(n(137)),y=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={postcodeAddresses:null,postcodeTown:null,hearPlaces:[]},a.getPostcodePromise=null,a.changeField=a.changeField.bind(a),a.onChange=a.onChange.bind(a),a.searchAddress=a.searchAddress.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"searchAddress",value:function(){var e=this,t=this.props.user,n=d.default.getIfExists(t,"profile.profilePostcode","");0!==n.length&&(this.getPostcodePromise&&this.getPostcodePromise.cancel(),this.getPostcodePromise=f.default.ajax({type:"get",url:"/api/users/get-postcode-data",data:{postcode:n}}),this.getPostcodePromise.then(function(t){var n=d.default.getIfExists,a=JSON.parse(t);e.setState({postcodeAddresses:n(a,"line1",null),postcodeTown:n(a,"town",null)})},function(e){return console.error(e)}))}},{key:"renderPostcodeAddressSelect",value:function(){var e=this,t=this.props.user,n=this.state,a=n.postcodeAddresses,r=n.postcodeTown,o=d.default.getIfExists;return a&&0!==a.length?c.default.createElement("div",{style:{marginTop:"10px"}},c.default.createElement("select",{className:"form-control",type:"text",name:"profile.profileAddress",onChange:function(t){e.onChange(t);var n=d.default.concatProps(r," ");n&&n.length>0&&e.changeField("profile.city",n)},value:o(t,"profile.profileAddress","")},c.default.createElement("option",{value:""},"Select address"),a.map(function(e,t){return e=d.default.concatProps(e," "),c.default.createElement("option",{key:t,value:e},e)}))):""}},{key:"changeField",value:function(e,t){var n=this.props,a=n.user,r=n.onChange,o=!1;d.default.accessObjByPath(a,e,function(e){return e!==t&&(o=!0),t}),o&&r&&r(a)}},{key:"nameFilter",value:function(e){return e&&0!==e.length?e[0].toUpperCase()+e.slice(1).toLowerCase():e}},{key:"onChange",value:function(e,t){var n=e.target,a=n.name,r=n.value;this.changeField(a,t?t(r):r)}},{key:"loadHearPlaces",value:function(){var e=this;$.ajax({type:"get",url:"/api/hear-places/list",success:function(t){e.setState({hearPlaces:t});var n=e.props.user;if(n.hearPlaceId)for(var a in t)if(t[a].value==n.hearPlaceId){if(t[a].isVisible)break;$("#otherHearPlaceInput").slideToggle("fast"),$("#otherHearPlaceInput input").val(t[a].label),e.changeField("hearPlaceId",-1);break}}})}},{key:"componentDidMount",value:function(){m.DatePicker.init(this.changeField),this.loadHearPlaces()}},{key:"render",value:function(){var e=this,t=this.state.hearPlaces,n=this.props,a=n.user,r=n.excludePasswords,o=d.default.getIfExists,l=function(e){return void 0!==e&&null!==e};return l(this.props.colWidth)&&this.props.colWidth,l(this.props.colOffset)&&this.props.colOffset,c.default.createElement("div",null,c.default.createElement(p.Row,null,c.default.createElement(p.Col,{md:8},c.default.createElement(p.Row,{style:{margin:"0 0 10px 0"}},c.default.createElement(p.Col,{md:6,xs:6,style:{padding:"0 5px 0 0"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileForname",onChange:function(t){return e.onChange(t,e.nameFilter)},value:o(a,"profile.profileForname",""),placeholder:"First Name"})),c.default.createElement(p.Col,{md:6,xs:6,style:{padding:"0 0 0 5px",float:"right"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileSurname",onChange:function(t){return e.onChange(t,e.nameFilter)},value:o(a,"profile.profileSurname",""),placeholder:"Last Name"}))),c.default.createElement(p.Row,{style:{margin:"0 0 10px 0"}},c.default.createElement("input",{className:"form-control",type:"email",name:"userEmailAddress",onChange:this.onChange,value:o(a,"userEmailAddress",""),placeholder:"Email",style:{width:"100%"}})),c.default.createElement(p.Row,{style:{margin:"0 0 10px 0"}},c.default.createElement(p.Col,{md:6,xs:6,style:{padding:"0 5px 0 0"}},c.default.createElement("select",{className:"form-control",name:"profile.profileGender",id:"profile.profileGender",value:o(a,"profile.profileGender",""),onChange:this.onChange},c.default.createElement("option",{value:""},"Select Gender"),c.default.createElement("option",{value:"male"},"Male"),c.default.createElement("option",{value:"female"},"Female"))),c.default.createElement(p.Col,{md:6,xs:6,style:{padding:"0 0 0 5px",float:"right"}},c.default.createElement("input",{className:"form-control datepicker",name:"age",value:o(a,"age",""),onChange:this.onChange,placeholder:"Birth date"}))),r?"":c.default.createElement(p.Row,{style:{margin:"0 0 10px 0"}},c.default.createElement(p.Col,{md:6,xs:6,style:{padding:"0 5px 0 0"}},c.default.createElement("input",{className:"form-control",type:"password",name:"userPassword",value:o(a,"userPassword",""),onChange:this.onChange,placeholder:"Password"})),c.default.createElement(p.Col,{md:6,xs:6,style:{padding:"0 0 0 5px",float:"right"}},c.default.createElement("input",{className:"form-control",type:"password",name:"userPasswordConfirm",value:o(a,"userPasswordConfirm",""),onChange:this.onChange,placeholder:"Re-enter password"}))),c.default.createElement(p.Row,{style:{margin:"0 0 10px 0"}},c.default.createElement(p.Col,{md:6,xs:6,style:{padding:"0 5px 0 0"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileTelephone",value:o(a,"profile.profileTelephone",""),onChange:this.onChange,placeholder:"Telephone"})),c.default.createElement(p.Col,{md:6,xs:6,style:{padding:"0 0 0 5px",float:"right"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileMobile",value:o(a,"profile.profileMobile",""),onChange:this.onChange,placeholder:"Mobile"}))),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement(h.default,{onSelect:function(t){e.changeField("profile.profileAddress",t.line1),e.changeField("profile.profileAddress2",t.line2),e.changeField("profile.profilePostcode",t.postcode),e.changeField("profile.city",t.town)},value:o(a,"profile.profilePostcode","")})),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileAddress",value:o(a,"profile.profileAddress",""),onChange:this.onChange,placeholder:"Building name/No"})),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileAddress2",value:o(a,"profile.profileAddress2",""),onChange:this.onChange,placeholder:"Street Name"})),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.city",value:o(a,"profile.city",""),onChange:this.onChange,placeholder:"City or town"})),c.default.createElement(p.Row,null,c.default.createElement(p.Col,{md:12},c.default.createElement(m.Select,{options:t?t.filter(function(e){return e.isVisible}):[],className:"form-control",name:"hearPlaceId",value:o(a,"hearPlaceId",""),onChange:function(t){var n=t.target.value;"-1"==o(a,"hearPlaceId","")!=("-1"==n)&&$("#otherHearPlaceInput").slideToggle("fast"),e.onChange(t)}},c.default.createElement("option",{value:""},"Where did ",this.context.user&&this.context.user.id==a.id?"you":"he/she"," hear about us?")))),c.default.createElement(p.Row,{id:"otherHearPlaceInput",style:{display:"none"}},c.default.createElement(p.Col,{md:12},c.default.createElement("input",{type:"text",className:"form-control",name:"otherHearPlace",onChange:this.onChange}))),c.default.createElement(p.Row,{style:{marginTop:"10px",display:"none"}},c.default.createElement(p.Col,{md:12},c.default.createElement(p.Button,{className:"custom",onClick:function(){return e.setState({showBranchSelector:!e.state.showBranchSelector})},style:{width:"100%"}},"Select Closest Branches"),c.default.createElement(p.Panel,{style:{width:"100%"},collapsible:!0,expanded:this.state.showBranchSelector})))),c.default.createElement(p.Col,{md:4},c.default.createElement("div",null,c.default.createElement(v.default,{name:"closestBranches",value:a.closestBranches,label:"Select Closest Branches",onChange:function(t){return e.onChange(t)}})))))}}]),t}(u.Component);t.default=y,y.propTypes={user:u.PropTypes.object,onChange:u.PropTypes.func.isRequired,colWidth:u.PropTypes.number,colOffset:u.PropTypes.number,excludePasswords:u.PropTypes.bool},y.contextTypes={user:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";var a=n(138),r=n(65),o=n(101),l=n(196),i=n(35),s=n(139),u=n(73),c=n(298),d=i.List,f=i.Record,p=i.Repeat,h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getEntityMap=function(){return l},t.prototype.getBlockMap=function(){return this.get("blockMap")},t.prototype.getSelectionBefore=function(){return this.get("selectionBefore")},t.prototype.getSelectionAfter=function(){return this.get("selectionAfter")},t.prototype.getBlockForKey=function(e){return this.getBlockMap().get(e)},t.prototype.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil(function(t){return t===e}).skip(1).first()},t.prototype.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil(function(t){return t===e}).skip(1).first()},t.prototype.getBlockAfter=function(e){return this.getBlockMap().skipUntil(function(t,n){return n===e}).skip(1).first()},t.prototype.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil(function(t,n){return n===e}).skip(1).first()},t.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()},t.prototype.getFirstBlock=function(){return this.getBlockMap().first()},t.prototype.getLastBlock=function(){return this.getBlockMap().last()},t.prototype.getPlainText=function(e){return this.getBlockMap().map(function(e){return e?e.getText():""}).join(e||"\n")},t.prototype.getLastCreatedEntityKey=function(){return l.__getLastCreatedEntityKey()},t.prototype.hasText=function(){var e=this.getBlockMap();return e.size>1||e.first().getLength()>0},t.prototype.createEntity=function(e,t,n){return l.__create(e,t,n),this},t.prototype.mergeEntityData=function(e,t){return l.__mergeData(e,t),this},t.prototype.replaceEntityData=function(e,t){return l.__replaceData(e,t),this},t.prototype.addEntity=function(e){return l.__add(e),this},t.prototype.getEntity=function(e){return l.__get(e)},t.createFromBlockArray=function(e,n){var r=Array.isArray(e)?e:e.contentBlocks,o=a.createFromArray(r),i=o.isEmpty()?new s:s.createEmpty(o.first().getKey());return new t({blockMap:o,entityMap:n||l,selectionBefore:i,selectionAfter:i})},t.createFromText=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,a=e.split(n).map(function(e){return e=c(e),new o({key:u(),text:e,type:"unstyled",characterList:d(p(r.EMPTY,e.length))})});return t.createFromBlockArray(a)},t}(f({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null}));e.exports=h},function(e,t,n){"use strict";var a=new RegExp("\r","g");e.exports=function(e){return e.replace(a,"")}},function(e,t,n){"use strict";function a(e){return e===i||e===s}function r(e){return a(e)||l(!1),e===i?"ltr":"rtl"}function o(e){u=e}var l=n(30),i="LTR",s="RTL",u=null,c={NEUTRAL:"NEUTRAL",LTR:i,RTL:s,isStrong:a,getHTMLDir:r,getHTMLDirIfDifferent:function(e,t){return a(e)||l(!1),a(t)||l(!1),e===t?null:r(e)},setGlobalDir:o,initGlobalDir:function(){o(i)},getGlobalDir:function(){return u||this.initGlobalDir(),u||l(!1),u}};e.exports=c},function(e,t,n){"use strict";var a=n(35).Map,r=n(0),o=n(140),l=a({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:r.createElement("ul",{className:o("public/DraftStyleDefault/ul")})},"ordered-list-item":{element:"li",wrapper:r.createElement("ol",{className:o("public/DraftStyleDefault/ol")})},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:r.createElement("pre",{className:o("public/DraftStyleDefault/pre")})},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=l},function(e,t,n){"use strict";e.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105}},function(e,t,n){"use strict";function a(e,t){return t&&"MUTABLE"===e.__get(t).getMutability()?t:null}e.exports=function(e,t){var n;if(t.isCollapsed()){var r=t.getAnchorKey(),o=t.getAnchorOffset();return o>0?(n=e.getBlockForKey(r).getEntityAt(o-1),a(e.getEntityMap(),n)):null}var l=t.getStartKey(),i=t.getStartOffset(),s=e.getBlockForKey(l);return n=i===s.getLength()?null:s.getEntityAt(i),a(e.getEntityMap(),n)}},function(e,t,n){"use strict";function a(e,t){return!(!e||!t)&&(e===t||!r(e)&&(r(t)?a(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var r=n(1341);e.exports=a},function(e,t,n){"use strict";function a(e,t){var n=r.get(e,t);return"auto"===n||"scroll"===n}var r={get:n(1343),getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(a(e,"overflow")||a(e,"overflowY")||a(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}};e.exports=r},function(e,t,n){"use strict";var a=n(1348),r=n(1349);e.exports=function(e){var t=a(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var n=r(e),o=e===t?e.ownerDocument.documentElement:e,l=e.scrollWidth-o.clientWidth,i=e.scrollHeight-o.clientHeight;return n.x=Math.max(0,Math.min(n.x,l)),n.y=Math.max(0,Math.min(n.y,i)),n}},function(e,t,n){"use strict";var a=n(623);e.exports=function(e){for(var t=e;t&&t!==document.documentElement;){var n=a(t);if(null!=n)return n;t=t.parentNode}return null}},function(e,t,n){"use strict";var a=n(74).isPlatform("Mac OS X"),r={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return a&&e.altKey},hasCommandModifier:function(e){return a?!!e.metaKey&&!e.altKey:r.isCtrlKeyCommand(e)}};e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.getSelection(),a=e.getCurrentContent(),r=n.getStartKey(),o=n.getStartOffset(),l=r,i=0;if(t>o){var s=a.getKeyBefore(r);null==s?l=r:(l=s,i=a.getBlockForKey(s).getText().length)}else i=o-t;return n.merge({focusKey:l,focusOffset:i,isBackward:!0})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=t===n,r=e.getBlockForKey(t);if(!r)return[];var o=[r];if(!a)for(var l=t;l!==n;){var i=e.getBlockAfter(l);if(!i){o=[];break}o.push(i),l=i.getKey()}return o}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){var e=d.getHashPath();return!!function(e){return"string"==typeof e&&"/"===e.charAt(0)}(e)||(d.replaceHashPath("/"+e),!1)}function o(e,t,n){return e+(-1===e.indexOf("?")?"?":"&")+t+"="+n}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=(a(n(49)),a(n(25))),s=n(106),u=n(93),c=n(152),d=n(219),f=n(345),p=a(n(346));t.default=function(){function e(){var e=d.getHashPath(),t=void 0,n=void 0;a?(t=function(e,t){var n=e.match(new RegExp("\\?.*?\\b"+t+"=(.+?)\\b"));return n&&n[1]}(e,a),e=function(e,t){return e.replace(new RegExp("[?&]?"+t+"=[a-zA-Z0-9]+"),"")}(e,a),t?n=f.readState(t):(n=null,t=h.createKey(),d.replaceHashPath(o(e,a,t)))):t=n=null;var r=u.parsePath(e);return h.createLocation(l({},r,{state:n}),void 0,t)}function t(t){function n(){r()&&a(e())}var a=t.transitionTo;return r(),d.addEventListener(window,"hashchange",n),function(){d.removeEventListener(window,"hashchange",n)}}var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];c.canUseDOM||i.default(!1);var a=n.queryKey;(void 0===a||a)&&(a="string"==typeof a?a:"_k");var h=p.default(l({},n,{getCurrentLocation:e,finishTransition:function(e){var t=e.basename,n=e.pathname,r=e.search,l=e.state,i=e.action,u=e.key;if(i!==s.POP){var c=(t||"")+n+r;a?(c=o(c,a,u),f.saveState(u,l)):e.key=e.state=null;var p=d.getHashPath();i===s.PUSH?p!==c&&(window.location.hash=c):p!==c&&d.replaceHashPath(c)}},saveState:f.saveState})),m=0,v=void 0;return d.supportsGoWithoutReloadUsingHash(),l({},h,{listenBefore:function(e){1==++m&&(v=t(h));var n=h.listenBefore(e);return function(){n(),0==--m&&v()}},listen:function(e){1==++m&&(v=t(h));var n=h.listen(e);return function(){n(),0==--m&&v()}},push:function(e){h.push(e)},replace:function(e){h.replace(e)},go:function(e){h.go(e)},createHref:function(e){return"#"+h.createHref(e)},registerTransitionHook:function(e){1==++m&&(v=t(h)),h.registerTransitionHook(e)},unregisterTransitionHook:function(e){h.unregisterTransitionHook(e),0==--m&&v()},pushState:function(e,t){h.pushState(e,t)},replaceState:function(e,t){h.replaceState(e,t)}})},e.exports=t.default},function(e,t,n){"use strict";function a(e){return r+e}t.__esModule=!0,t.saveState=function(e,t){try{null==t?window.sessionStorage.removeItem(a(e)):window.sessionStorage.setItem(a(e),JSON.stringify(t))}catch(e){if(e.name===l)return;if(o.indexOf(e.name)>=0&&0===window.sessionStorage.length)return;throw e}},t.readState=function(e){var t=void 0;try{t=window.sessionStorage.getItem(a(e))}catch(e){if(e.name===l)return null}if(t)try{return JSON.parse(t)}catch(e){}return null},function(e){e&&e.__esModule}(n(49));var r="@@History/",o=["QuotaExceededError","QUOTA_EXCEEDED_ERR"],l="SecurityError"},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=a(n(25)),l=n(152),i=n(219),s=a(n(347));t.default=function(e){var t=s.default(r({getUserConfirmation:i.getUserConfirmation},e,{go:i.go}));return r({},t,{listen:function(e){return l.canUseDOM||o.default(!1),t.listen(e)}})},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=(a(n(49)),a(n(720))),l=n(93),i=n(723),s=n(106),u=a(n(724)),c=a(n(220)),d=a(n(221));t.default=function(){function e(e){var t=T&&T.action===s.POP?k.indexOf(T.key):x?k.indexOf(x.key):-1;(x=e).action===s.PUSH?k=[].concat(k.slice(0,t+1),[x.key]):x.action===s.REPLACE&&(k[t]=x.key),S.forEach(function(e){e(x)})}function t(t){x&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.key===t.key&&o.default(e.state,t.state)}(x,t)||(T=t,function(e,t){i.loopAsync(w.length,function(t,n,a){c.default(w[t],e,function(e){null!=e?a(e):n()})},function(e){_&&"string"==typeof e?_(e,function(e){t(!1!==e)}):t(!1!==e)})}(t,function(n){if(T===t)if(n){if(t.action===s.PUSH){var a=p(x);p(t)===a&&o.default(x.state,t.state)&&(t.action=s.REPLACE)}!1!==g(t)&&e(t)}else if(x&&t.action===s.POP){var r=k.indexOf(x.key),l=k.indexOf(t.key);-1!==r&&-1!==l&&b(r-l)}}))}function n(e){t(h(e,s.PUSH,f()))}function a(e){t(h(e,s.REPLACE,f()))}function f(){return function(e){return Math.random().toString(36).substr(2,e)}(C)}function p(e){if(null==e||"string"==typeof e)return e;var t=e.pathname,n=e.search,a=e.hash,r=t;return n&&(r+=n),a&&(r+=a),r}function h(e,t){var n=arguments.length<=2||void 0===arguments[2]?f():arguments[2];return"object"==typeof t&&("string"==typeof e&&(e=l.parsePath(e)),e=r({},e,{state:t}),t=n,n=arguments[3]||f()),u.default(e,t,n)}function m(e,t){e.state=r({},e.state,t),E(e.key,e.state)}var v=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],y=v.getCurrentLocation,g=v.finishTransition,E=v.saveState,b=v.go,_=v.getUserConfirmation,C=v.keyLength;"number"!=typeof C&&(C=6);var w=[],k=[],S=[],x=void 0,T=void 0;return{listenBefore:function(e){return w.push(e),function(){w=w.filter(function(t){return t!==e})}},listen:function(t){if(S.push(t),x)t(x);else{var n=y();k=[n.key],e(n)}return function(){S=S.filter(function(e){return e!==t})}},transitionTo:t,push:n,replace:a,go:b,goBack:function(){b(-1)},goForward:function(){b(1)},createKey:f,createPath:p,createHref:function(e){return p(e)},createLocation:h,setState:d.default(function(t){x?(m(x,t),e(x)):m(y(),t)},"setState is deprecated; use location.key to save state instead"),registerTransitionHook:d.default(function(e){-1===w.indexOf(e)&&w.push(e)},"registerTransitionHook is deprecated; use listenBefore instead"),unregisterTransitionHook:d.default(function(e){w=w.filter(function(t){return t!==e})},"unregisterTransitionHook is deprecated; use the callback returned from listenBefore instead"),pushState:d.default(function(e,t){"string"==typeof t&&(t=l.parsePath(t)),n(r({state:e},t))},"pushState is deprecated; use push instead"),replaceState:d.default(function(e,t){"string"==typeof t&&(t=l.parsePath(t)),a(r({state:e},t))},"replaceState is deprecated; use replace instead")}},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e,t){return a({},e,t)},n(151),function(e){e&&e.__esModule}(n(45)),e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.createRouterObject=function(e,t){return a({},e,{setRouteLeaveHook:t.listenBeforeLeavingRoute,isActive:t.isActive})},t.createRoutingHistory=function(e,t){return e=a({},e,t)},function(e){e&&e.__esModule}(n(151))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t.query,a=t.hash,r=t.state;return n||a||r?{pathname:e,query:n,hash:a,state:r}:e}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=a(n(0)),i=(a(n(45)),a(n(25))),s=n(218),u=l.default.PropTypes,c=u.bool,d=u.object,f=u.string,p=u.func,h=u.oneOfType,m=l.default.createClass({displayName:"Link",contextTypes:{router:s.routerShape},propTypes:{to:h([f,d]),query:d,hash:f,state:d,activeStyle:d,activeClassName:f,onlyActiveOnIndex:c.isRequired,onClick:p,target:f},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(e){if(this.props.onClick&&this.props.onClick(e),!e.defaultPrevented&&(this.context.router||(0,i.default)(!1),!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)&&function(e){return 0===e.button}(e)&&!this.props.target)){e.preventDefault();var t=this.props,n=r(t.to,{query:t.query,hash:t.hash,state:t.state});this.context.router.push(n)}},render:function(){var e=this.props,t=e.to,n=e.query,a=e.hash,i=e.state,s=e.activeClassName,u=e.activeStyle,c=e.onlyActiveOnIndex,d=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["to","query","hash","state","activeClassName","activeStyle","onlyActiveOnIndex"]),f=this.context.router;if(f){if(null==t)return l.default.createElement("a",d);var p=r(t,{query:n,hash:a,state:i});d.href=f.createHref(p),(s||null!=u&&!function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(u))&&f.isActive(p,c)&&(s&&(d.className?d.className+=" "+s:d.className=s),u&&(d.style=o({},d.style,u)))}return l.default.createElement("a",o({},d,{onClick:this.handleClick}))}});t.default=m,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(0)),o=a(n(25)),l=n(81),i=n(105),s=n(92),u=r.default.PropTypes,c=u.string,d=u.object,f=r.default.createClass({displayName:"Redirect",statics:{createRouteFromReactElement:function(e){var t=(0,l.createRouteFromReactElement)(e);return t.from&&(t.path=t.from),t.onEnter=function(e,n){var a=e.location,r=e.params,o=void 0;if("/"===t.to.charAt(0))o=(0,i.formatPattern)(t.to,r);else if(t.to){var l=e.routes.indexOf(t),s=f.getRoutePattern(e.routes,l-1).replace(/\/*$/,"/")+t.to;o=(0,i.formatPattern)(s,r)}else o=a.pathname;n({pathname:o,query:t.query||a.query,state:t.state||a.state})},t},getRoutePattern:function(e,t){for(var n="",a=t;a>=0;a--){var r=e[a].path||"";if(n=r.replace(/\/*$/,"/")+n,0===r.indexOf("/"))break}return"/"+n}},propTypes:{path:c,from:c,to:c.isRequired,query:d,state:d,onEnter:s.falsy,children:s.falsy},render:function(){(0,o.default)(!1)}});t.default=f,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e){var t=(0,l.default)(e),n=(0,r.default)((0,o.default)(function(){return t}))(e);return n.__v2_compatible__=!0,n};var r=a(n(153)),o=a(n(353)),l=a(n(745));e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=(a(n(49)),n(152)),l=n(93),i=a(n(220)),s=a(n(221));t.default=function(e){return function(){function t(){if(!h){if(null==p&&o.canUseDOM){var e=document.getElementsByTagName("base")[0],t=e&&e.getAttribute("href");null!=t&&(p=t)}h=!0}}function n(e){return t(),p&&null==e.basename&&(0===e.pathname.indexOf(p)?(e.pathname=e.pathname.substring(p.length),e.basename=p,""===e.pathname&&(e.pathname="/")):e.basename=""),e}function a(e){if(t(),!p)return e;"string"==typeof e&&(e=l.parsePath(e));var n=e.pathname,a="/"===p.slice(-1)?p:p+"/",o="/"===n.charAt(0)?n.slice(1):n;return r({},e,{pathname:a+o})}function u(e){f.push(a(e))}function c(e){f.replace(a(e))}var d=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],f=e(d),p=d.basename,h=!1;return r({},f,{listenBefore:function(e){return f.listenBefore(function(t,a){i.default(e,n(t),a)})},listen:function(e){return f.listen(function(t){e(n(t))})},push:u,replace:c,createPath:function(e){return f.createPath(a(e))},createHref:function(e){return f.createHref(a(e))},createLocation:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n(f.createLocation.apply(f,[a(e)].concat(r)))},pushState:s.default(function(e,t){"string"==typeof t&&(t=l.parsePath(t)),u(r({state:e},t))},"pushState is deprecated; use push instead"),replaceState:s.default(function(e,t){"string"==typeof t&&(t=l.parsePath(t)),c(r({state:e},t))},"replaceState is deprecated; use replace instead")})}},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e){return function(t){var n=(0,r.default)((0,o.default)(e))(t);return n.__v2_compatible__=!0,n}};var r=a(n(153)),o=a(n(353));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0;return r&&(t=(0,a.default)(e)()),t};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(354)),r=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=t.default},function(e,t,n){e.exports=!n(69)&&!n(94)(function(){return 7!=Object.defineProperty(n(224)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var a=n(95),r=n(107),o=n(755)(!1),l=n(230)("IE_PROTO");e.exports=function(e,t){var n,i=r(e),s=0,u=[];for(n in i)n!=l&&a(i,n)&&u.push(n);for(;t.length>s;)a(i,n=t[s++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){e.exports={default:n(757),__esModule:!0}},function(e,t,n){var a=n(95),r=n(122),o=n(230)("IE_PROTO"),l=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),a(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t,n){var a=n(54),r=n(41),o=n(94);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],l={};l[e]=t(n),a(a.S+a.F*o(function(){n(1)}),"Object",l)}},function(e,t,n){e.exports=n(83)},function(e,t,n){var a=n(55).document;e.exports=a&&a.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var a=n(121);e.exports=Array.isArray||function(e){return"Array"==a(e)}},function(e,t,n){var a=n(357),r=n(232).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,r)}},function(e,t,n){var a=n(157),r=n(155),o=n(107),l=n(225),i=n(95),s=n(356),u=Object.getOwnPropertyDescriptor;t.f=n(69)?u:function(e,t){if(e=o(e),t=l(t,!0),s)try{return u(e,t)}catch(e){}if(i(e,t))return r(!a.f.call(e,t),e[t])}},function(e,t,n){var a=n(239),r=n(56)("iterator"),o=n(123);e.exports=n(41).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[a(e)]}},function(e,t,n){var a=n(68),r=n(119),o=n(56)("species");e.exports=function(e,t){var n,l=a(e).constructor;return void 0===l||void 0==(n=a(l)[o])?t:r(n)}},function(e,t,n){var a,r,o,l=n(82),i=n(786),s=n(362),u=n(224),c=n(55),d=c.process,f=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,m=c.Dispatch,v=0,y={},g="onreadystatechange",E=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){E.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){i("function"==typeof e?e:Function(e),t)},a(v),v},p=function(e){delete y[e]},"process"==n(121)(d)?a=function(e){d.nextTick(l(E,e,1))}:m&&m.now?a=function(e){m.now(l(E,e,1))}:h?(o=(r=new h).port2,r.port1.onmessage=b,a=l(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(a=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):a=g in u("script")?function(e){s.appendChild(u("script"))[g]=function(){s.removeChild(this),E.call(e)}}:function(e){setTimeout(l(E,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var a=n(68),r=n(64),o=n(241);e.exports=function(e,t){if(a(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var a=n(55),r=n(41),o=n(67),l=n(69),i=n(56)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:a[e];l&&t&&!t[i]&&o.f(t,i,{configurable:!0,get:function(){return this}})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e,t,n){for(var a=!0;a;){var r=e,o=t,l=n;a=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=l,a=!0,i=u=void 0}},o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),l=n(18),i=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.onClick=this.onClick.bind(this)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"onClick",value:function(e){this.props.disabled?e.preventDefault():(this.props.children.props.onClick&&this.props.children.props.onClick(e),l.Link.prototype.handleClick.call(this,e))}},{key:"render",value:function(){var e=this.context.router,t=this.props,n=t.onlyActiveOnIndex,a=t.to,r=t.children,l=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["onlyActiveOnIndex","to","children"]);return l.onClick=this.onClick,e&&(l.href=e.createHref(a),null==l.active&&(l.active=e.isActive(a,n))),o.default.cloneElement(o.default.Children.only(r),l)}}]),t}();t.default=i,i.propTypes={onlyActiveOnIndex:o.default.PropTypes.bool.isRequired,to:o.default.PropTypes.oneOfType([o.default.PropTypes.string,o.default.PropTypes.object]).isRequired,onClick:o.default.PropTypes.func,active:o.default.PropTypes.bool,disabled:o.default.PropTypes.bool.isRequired,children:o.default.PropTypes.node.isRequired},i.contextTypes={router:o.default.PropTypes.object},i.defaultProps={onlyActiveOnIndex:!1,disabled:!1},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(96)),p=n(18),h=a(n(11)),m=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.isLogged,a=e.onUpdate,r=n?y:v;return c.default.createElement("div",{style:t},c.default.createElement(r,{onUpdate:a}))}}]),t}(c.default.Component);t.default=m;var v=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this;return c.default.createElement("div",{style:{height:"35px"}},c.default.createElement(d.Button,{bsStyle:"success",style:{width:"100%"},onClick:function(){return e.login()}},"Login"))}},{key:"login",value:function(){var e=this;f.default.login().then(function(){e.props.onUpdate(),e.context.router.push("/")},function(e){return h.default.error("Authentication failed",e)})}}]),t}(u.Component);v.contextTypes={router:u.PropTypes.object.isRequired};var y=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.logout=a.logout.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"logout",value:function(){var e=this;f.default.logout().then(function(){e.props.onUpdate("")},function(t){console.log("Logout failed",t),e.props.onUpdate()})}},{key:"render",value:function(){var e=this.context.user,t=e?e.userFullname?e.userFullname:e.userName:"";return c.default.createElement(d.Row,{style:{height:"35px"},className:"row-sm-10"},c.default.createElement(d.Col,{md:3,sm:3,xs:3},c.default.createElement(p.Link,{to:"/profile"},c.default.createElement("img",{className:"icon-highlight",src:"src/images/admin/profile_icon.png"}))),c.default.createElement(d.Col,{md:5,sm:6,xs:6},c.default.createElement("p",{style:{fontFamily:"Lato",fontSize:"12pt",color:"white",fontWeight:"bold",marginBottom:"0px"}},"Logged in as"),c.default.createElement("p",{style:{fontFamily:"Lato",fontSize:"12pt",color:"#f0a300",fontWeight:"bold"}},t||"")),c.default.createElement(d.Col,{md:3,sm:3,xs:3},c.default.createElement("img",{className:"icon-highlight",src:"src/images/admin/log_icon.png",onClick:this.logout})))}}]),t}(u.Component);y.contextTypes={user:u.PropTypes.object,router:u.PropTypes.object.isRequired}},function(e,t,n){var a=n(64);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){e.exports={default:n(970),__esModule:!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(59)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=n(6),h=(n(12),a(n(14))),m=a(n(11)),v=a(n(16)),y={formLabel:{textAlign:"right"}};window.innerWidth<1025&&(y={formLabel:{textAlign:"left"}});var g=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={classId:null,classFees:{feeForEmployed:-1,feeForUnemployed:-1},studentStatus:null},a.onChange=a.onChange.bind(a),a.onRegister=a.onRegister.bind(a),a.close=a.close.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"close",value:function(){var e=this.props.onClose;this.setState({classId:null,studentStatus:null}),e()}},{key:"onRegister",value:function(){var e=this,t=this.context,n=t.router,a=t.user,r=this.props.execute,l=this.state,i=l.classId,s=l.studentStatus;if(console.log(s),console.log(r),null!=i)if(null!=s){if(!a){var u=localStorage.getItem("registeredClasses");return(u=null==u?[]:JSON.parse(u)).push({classId:i,studentStatus:s}),localStorage.setItem("registeredClasses",(0,o.default)(u)),void n.push("/login")}r("addClassToCart",{classId:i,studentStatus:s},function(){m.default.success("Class added to cart"),e.close(),n.push("/cart")},function(t){m.default.error(t.responseText.replace(/"/g,"")),console.error(t),e.close()})}else m.default.error("Employment was not selected");else m.default.error("Class time as not selected")}},{key:"onChange",value:function(e){this.setState((0,r.default)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this,t=this.props,n=t.course,a=t.gender,r=t.course.genderSplit,o=this.state,l=o.classId,i=o.classFees,s=o.studentStatus,u=r[a].classes,c=this.context.website;return f.default.createElement("div",{className:"static-modal modal-container"},f.default.createElement(p.Modal.Dialog,null,f.default.createElement(p.Modal.Header,null,"Register online"),f.default.createElement(p.Modal.Body,null,f.default.createElement(p.Row,{style:{marginBottom:"20px"}},f.default.createElement(p.Col,{mdOffset:2,md:3,style:y.formLabel},f.default.createElement("span",{style:{lineHeight:"35px"}},"Course")),f.default.createElement(p.Col,{md:6},f.default.createElement("span",{style:{lineHeight:"35px"}},n.courseTitle))),f.default.createElement(p.Row,{style:{marginBottom:"20px"}},f.default.createElement(p.Col,{mdOffset:2,md:3,style:y.formLabel},f.default.createElement("span",{style:{lineHeight:"35px"}},"Class time")),f.default.createElement(p.Col,{md:6},f.default.createElement("select",{name:"classId",value:l,onChange:function(t){for(var n=t.target.value,a={},r=0;r<u.length;r++)if(u[r].id==n){a.feeForEmployed=u[r].feeForEmployed,a.feeForUnemployed=u[r].feeForUnemployed;break}e.setState({classId:n,classFees:a})},className:"form-control"},f.default.createElement("option",{value:"-1"},"Choose Day & Time"),u.map(function(e,t){return f.default.createElement("option",{key:t,value:e.id},e.classTime)})))),f.default.createElement(p.Row,{style:{marginBottom:"20px"}},f.default.createElement(p.Col,{mdOffset:2,md:3,style:y.formLabel},f.default.createElement("span",{style:{lineHeight:"35px"}},"Fee")),f.default.createElement(p.Col,{md:6},f.default.createElement("select",{name:"studentStatus",value:s,onChange:this.onChange,className:"form-control"},f.default.createElement("option",{value:"0"},v.default.getIfExists(c,"paymentHeading","Choose Fees")),f.default.createElement("option",{value:"employed"},v.default.getIfExists(c,"paymentField1","employed")," ",i.feeForEmployed>=0?i.feeForEmployed:n.feeForEmployed),"yes"==n.isEarlyBirdOn&&f.default.createElement("option",{value:"unemployed"},v.default.getIfExists(c,"paymentField2","unemployed")," ",i.feeForUnemployed>=0?i.feeForUnemployed:n.feeForUnemployed))))),f.default.createElement(p.Modal.Footer,null,f.default.createElement(p.Button,{onClick:this.onRegister,style:{marginRight:"15px"},bsStyle:"primary"},"Register"),f.default.createElement(p.Button,{onClick:this.close},"Cancel"))))}}]),t}(d.Component);g.propTypes={course:d.PropTypes.object.isRequired,onClose:d.PropTypes.func.isRequired},g.contextTypes={user:d.PropTypes.object,router:d.PropTypes.object.isRequired,website:d.PropTypes.object.isRequired},t.default=(0,h.default)(g,{addClassToCart:{type:"post",url:"/api/cart/add"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=e?document.getElementById(e):document.body;(0,c.default)(n,"Cannot find element: #"+e),function(e,t){function n(e){var t=e+s,a=o(null,t,l,i,r);(0,d.setScrollTop)(a),t<r&&setTimeout(function(){n(t)},s)}var a=t.offset,r=t.duration,o=t.easing,l=(0,d.getScrollTop)(),i=(0,d.getOffsetTop)(e)+a-l,s=20;n(0)}(n,t)}function o(e,t,n,a,r){return-a*(t/=r)*(t-2)+n}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=a(n(437)),d=n(972),f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleClick=function(e){n._beforeAnimate(e),e.preventDefault(),r(n._to,n._animate),n._afterAnimate(e)},n._to=e.to&&e.to.replace(/^#/,"")||"";var a=e.animate||{},l=a.offset,i=void 0===l?0:l,s=a.duration,u=void 0===s?400:s,c=a.easing,d=void 0===c?o:c;return n._animate={offset:i,duration:u,easing:d},n._beforeAnimate=e.beforeAnimate||function(){},n._afterAnimate=e.afterAnimate||function(){},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=(e.to,e.animate,e.beforeAnimate,e.afterAnimate,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["to","animate","beforeAnimate","afterAnimate"]));return u.default.createElement("a",l({},t,{href:"#"+this._to,onClick:this.handleClick}))}}]),t}();f.propTypes={to:s.PropTypes.string.isRequired,animate:s.PropTypes.shape({offset:s.PropTypes.number,duration:s.PropTypes.number,easing:s.PropTypes.func}),beforeAnimate:s.PropTypes.func,afterAnimate:s.PropTypes.func},t.default=f},function(e,t,n){"use strict";var a=n(118);e.exports=a},function(e,t,n){"use strict";function a(){return document.documentElement.scrollTop||document.body.scrollTop}function r(e,t,n,a,r){return-a*(t/=r)*(t-2)+n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e?document.getElementById(e):document.body;(0,o.default)(n,"Cannot find element: #"+e),function(e){function t(e){var n=e+p,a=c(null,n,d,f,s);!function(e){document.documentElement.scrollTop=document.body.scrollTop=e}(a),n<s&&setTimeout(function(){t(n)},p)}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.offset,l=void 0===o?0:o,i=n.duration,s=void 0===i?400:i,u=n.easing,c=void 0===u?r:u,d=a(),f=function(e){return e.getBoundingClientRect().top+a()}(e)+l-d,p=20;t(0)}(n,t)};var o=function(e){return e&&e.__esModule?e:{default:e}}(n(437))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(1)),l=a(n(2)),i=a(n(31)),s=a(n(173)),u=a(n(11)),c=a(n(172)),d=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,[{key:"processStripePayment",value:function(e,t,n){var a=e.url,r=e.type,o=e.params,l=e.creditCard,i=s.default.validate(l);u.default.clear(),i.isValid?c.default.processPayment({creditCard:l,paymentUrl:a,requestType:r,params:o,onCardFail:function(){u.default.error("Invalid data"),n&&n()},onSuccess:function(e){u.default.success("Payment completed"),t&&t(e)},onError:function(e){u.default.error("Payment has failed, please check the details and try again"),n&&n(e)}}):i.errors.forEach(function(e){return u.default.error(e)})}},{key:"processPaypalPayment",value:function(e,t,n){var a=e.url,o=e.type,l=e.params,i={method:"paypal"};l&&(0,r.default)(i,l),$.ajax({type:o||"get",url:a,data:i,success:function(e){if(e.paypalForm){var t=$("<div />").html(e.paypalForm).text();$("body").append(t),$("form[name='paypal_form']").submit()}},error:function(e){n&&n(e),u.default.error(e.responseText.replace(/"/g,""))}})}},{key:"processOtherPayment",value:function(e,t,n){var a=e.type,r=e.url,o=e.params;$.ajax({type:a,url:r,data:o,success:function(e){t&&t(e)},error:function(e){n&&n(e)}})}}],[{key:"processPayment",value:function(t,n,a,r){var o=-1===["stripe","paypal"].indexOf(t),l="process"+i.default.ucFirst(t)+"Payment";o&&(l="processOtherPayment",n.params||(n.params={}),n.params.method=t),(new e)[l](n,a,r)}}]),e}();t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(14)),h=n(6),m=n(12),v=a(n(11)),y=a(n(43)),g=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.onChange=a.onChange.bind(a),a.state={moneySource:"my money"},a.save=a.save.bind(a),a.close=a.close.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"changeState",value:function(e,t){this.setState((0,o.default)({},e,t))}},{key:"onChange",value:function(e){this.changeState(e.target.name,e.target.value)}},{key:"close",value:function(){this.clearState(),this.props.onClose()}},{key:"submit",value:function(e){this.clearState(),this.props.onSubmit(e),this.props.onClose()}},{key:"clearState",value:function(){for(var e in this.state)this.setState((0,o.default)({},e,""))}},{key:"save",value:function(){var e=this,t=this.context.user,n=this.props,a=n.save,o=n.donationAmount,l=this.state;l.name||(l.name="Anonymous"),(0,r.default)(l,{userId:t.id,isReceived:0,isCalled:0,donationAmount:parseFloat(o)}),a({data:l},function(t){e.submit(t)},function(e){v.default.error("Error submitting donation"),console.error(e)})}},{key:"componentDidMount",value:function(){$(function(){return(0,y.default)($("textarea"))})}},{key:"render",value:function(){var e=this.state,t=e.notes,n=e.name,a=e.isUkTaxPayer,r=e.moneySource,o=e.isNotGettingTicket,l=this.props,i=l.show,s=l.donationAmount,u=l.style;return f.default.createElement(h.Modal,{show:i,onHide:this.close},f.default.createElement(h.Modal.Dialog,null,f.default.createElement(h.Modal.Header,{closeButton:!0},f.default.createElement(h.Modal.Title,null,f.default.createElement("p",null,"One Off Donation"),f.default.createElement("h2",null,f.default.createElement("b",null,"Your donation amount:  ",parseFloat(s).toFixed(2))))),f.default.createElement(h.Modal.Body,{style:u},f.default.createElement(h.Row,null,f.default.createElement(h.Col,{md:12},f.default.createElement("p",null,"Your name (leave blank to be displayed as Anonymous)"))),f.default.createElement(m.FormField,{width:5},f.default.createElement("input",{type:"text",className:"form-control",name:"name",onChange:this.onChange,value:n})),f.default.createElement(m.FormField,{width:12,label:"Leave a friendly comment"},f.default.createElement("textarea",{name:"notes",rows:"10",className:"form-control",onChange:this.onChange,style:{height:"50px"},value:t})),f.default.createElement("input",{type:"radio",name:"isUkTaxPayer",onChange:this.onChange,value:"1",checked:"1"==a}),f.default.createElement("span",null,"I am a UK taxpayer - please reclaim Gift Aid on my donation"),f.default.createElement("div",{style:{marginLeft:"10px"}},f.default.createElement("input",{type:"radio",name:"moneySource",onChange:this.onChange,value:"my money",checked:"my money"==r}),f.default.createElement("span",null,"This is my money"),f.default.createElement("br",null),f.default.createElement("input",{type:"radio",name:"moneySource",onChange:this.onChange,value:"other",checked:"other"==r}),f.default.createElement("span",null,"I'm donating on behalf of a group, company, or someone else"),f.default.createElement("br",null),f.default.createElement("input",{type:"checkbox",name:"isNotGettingTicket",checked:!o,onChange:this.onChange}),f.default.createElement("span",null,"I'm getting a ticket, product, or service in return for my donation")),f.default.createElement("input",{type:"radio",name:"isUkTaxPayer",onChange:this.onChange,value:"0",checked:"1"!=a}),f.default.createElement("span",null,"I am not a UK taxpayer")),f.default.createElement(h.Modal.Footer,null,f.default.createElement(h.Button,{onClick:this.close},"Cancel"),f.default.createElement(h.Button,{onClick:this.save,bsStyle:"success"},"Save"))))}}]),t}(d.Component);g.propTypes={onClose:d.PropTypes.func.isRequired,onSubmit:d.PropTypes.func.isRequired,donationAmount:d.PropTypes.any.isRequired,style:d.PropTypes.object},g.contextTypes={user:d.PropTypes.object.isRequired},t.default=(0,p.default)(g,{save:{type:"post",url:"/api/donation-records"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebsiteComponent=void 0;var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(71));(t.WebsiteComponent=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={html:{__html:""}},a.getHtml=a.getHtml.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.id,t=this.state.html;return c.default.createElement("div",{id:e,dangerouslySetInnerHTML:t})}},{key:"loadHtml",value:function(){var e=this,t=this.props.template;setTimeout(function(){return e.setState({html:{__html:t}})},0)}},{key:"getHtml",value:function(){return{__html:this.state.html}}},{key:"componentWillMount",value:function(){this.loadHtml()}},{key:"bindLinksToRouter",value:function(){var e=this.context.router,t=this.props.id;(0,d.default)(function(){(0,d.default)("#"+t+" a").each(function(t,n){var a=(0,d.default)(n),r=a.attr("href");if(!r||a.attr("href").endsWith(".html"))return!0;var o=d.default._data(n,"events");o&&o.click||a.click(function(t){t.preventDefault(),e.push({pathname:r})})})})}},{key:"componentDidMount",value:function(){this.bindLinksToRouter()}},{key:"componentDidUpdate",value:function(){this.bindLinksToRouter()}}]),t}(u.Component)).contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(89)),f=(a(n(15)),function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={payment:0,courseClassId:null},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(e){this.setState({payment:e.amount,courseClassId:e.id})}},{key:"componentWillMount",value:function(){this.load(this.props.params),localStorage.removeItem("pay-"+this.props.params.id)}},{key:"render",value:function(){var e=this.state,t=e.payment,n=e.courseClassId;return c.default.createElement("div",null,c.default.createElement("div",{style:{width:"580px",marginLeft:"auto",marginRight:"auto",padding:"30px"}},c.default.createElement("p",null,"Total :  ",t)),c.default.createElement(d.default,{url:"/api/student-payment-checkout/"+t+"/"+n,checkAvailableMethods:!0}))}}]),t}(u.Component));t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(444)),p=a(n(446)),h=n(6),m=n(9),v=a(n(47)),y=a(n(16)).default.getIfExists,g=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={selectedTab:e.selectedTab?e.selectedTab:0},a.headerTypes=(0,r.default)({},m.ROLES.ADMIN,v.default),a.allowedRoles=[m.ROLES.ADMIN,m.ROLES.SUPER_ADMIN,m.ROLES.TEACHER,m.ROLES.REGISTRAR],a.close=a.close.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"isAllowed",value:function(){return this.allowedRoles.includes(this.props.appTypeKey)}},{key:"getSelectedTabFromQuery",value:function(){var e=y(this.props,"location.query.tab",null);if(e){var t={"Exam results":0,"Attendance records":1};e in t&&this.setState({selectedTab:t[e]})}}},{key:"close",value:function(){var e=this.props.onClose;this.setState({reason:""}),e()}},{key:"componentWillMount",value:function(){this.getSelectedTabFromQuery()}},{key:"render",value:function(){var e=this;if(!this.isAllowed())return console.error("You are not allowed to view this page."),d.default.createElement("div",null,"You are not allowed to view this page.");var t=this.state.selectedTab,n=this.props,a=n.appTypeKey,r=n.params.id,o=n.show;return d.default.createElement("div",null,d.default.createElement(h.Modal,{show:o,onHide:this.close,dialogClassName:"big-modal"},d.default.createElement(h.Modal.Header,{closeButton:!0},d.default.createElement("p",{style:{textAlign:"center",fontSize:"14pt"}},"Class Students")),d.default.createElement(h.Modal.Body,{style:{height:"500px",overflowY:"auto"}},d.default.createElement(h.Tabs,{className:"content-tabs",activeKey:t,onSelect:function(t){return e.setState({selectedTab:t})}},d.default.createElement(h.Tab,{eventKey:0,title:"Exam results"},d.default.createElement(f.default,{id:r,appTypeKey:a})),d.default.createElement(h.Tab,{eventKey:1,title:"Attendance records"},d.default.createElement(p.default,{id:r,appTypeKey:a})))),d.default.createElement(h.Modal.Footer,null,d.default.createElement(h.Button,{onClick:this.close},"Close"))))}}]),t}(c.Component);t.default=g},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(39)),d=n(0),f=a(d),p=a(n(28)),h=a(n(14)),m=n(9),v=a(n(16)),y=a(n(31)),g=(a(n(445)),a(n(990))),E=n(6);t.default=function(e){var t=e.id;return f.default.createElement(_,(0,c.default)({ajaxOperations:{load:{type:"get",url:"/api/classes/"+t+"/exam-results"},save:{type:"put",url:"/api/classes/"+t+"/exam-results"},loadCommentTypes:{type:"get",url:"/api/lookup/get-attendance-level"},loadBank:{type:"get",url:"/api/bank"}}},e))};var b=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={data:e.data,commentTypes:[],bank:[]},a.onFieldChange=a.onFieldChange.bind(a),a.onCommentTypeChange=a.onCommentTypeChange.bind(a),a.save=a.save.bind(a),a.populateComments=a.populateComments.bind(a),e.execute("loadCommentTypes",null,function(e){return a.setState({commentTypes:e})}),e.execute("loadBank",null,function(e){return a.setState({bank:e})}),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"getCommentByType",value:function(e){if(-1!==e){var t=this.state.bank.filter(function(t){return t.feedbackCode==e});return t[g.default.getInt(0,t.length)].feedbackDescription}}},{key:"onCommentTypeChange",value:function(e,t,n){var a=e.value,r=this.getCommentByType(a);this.onFieldChange({name:"comment",value:r},t,n)}},{key:"onFieldChange",value:function(e,t,n){var a=e.name,o=e.value,l=this.state,i=l.data,s=l.data.students,u=l.data.examResults,c=v.default.getIfExists(s[t],"studentInfo.id",-1);if(void 0!==n){var d=u[n].scores,f=!1;for(var p in d)if(parseInt(d[p].idCourseStudent)===c){d[p][a]=o,f=!0;break}f||d.push((0,r.default)({idCourseStudent:c,idAdditionalExam:v.default.getIfExists(u[n],"exam.id",-1)},a,o)),u[n].scores=d}else null===s[t].finalGrade?s[t].finalGrade=(0,r.default)({courseStudentId:c},a,o):s[t].finalGrade[a]=o;this.setState({data:i})}},{key:"save",value:function(){var e=this;(0,this.props.save)({data:this.state.data},function(t){return e.setState({data:t})})}},{key:"populateComments",value:function(){for(var e=this.state,t=e.data,n=e.data.students,a=e.data.examResults,r=0;r<n.length;r++)if(n[r].finalGrade&&!(n[r].finalGrade.comment&&n[r].finalGrade.comment.length>0)){var o=parseInt(n[r].finalGrade.attendanceCode);n[r].finalGrade.comment=this.getCommentByType(o)}for(var l=0;l<a.length;l++)for(var i=a[l].scores,s=0;s<i.length;s++)if(!(i[s].comment&&i[s].comment.length>0)){var u=parseInt(i[s].attendanceCode);i[s].comment=this.getCommentByType(u)}this.setState({data:t})}},{key:"renderBody",value:function(){var e=this,t=this.state.data,n=t.students,a=t.examResults,r=this.state.commentTypes,o=v.default.getIfExists,l=[[]];a.forEach(function(e,t){return l.push([])}),n.forEach(function(t,n){var i=parseInt(o(t,"studentInfo.id",0)),s=o(t,"studentInfo.name",""),u=o(t,"finalGrade.score",0),c=o(t,"finalGrade.attendanceCode",-1),d=o(t,"finalGrade.comment","");l[0].push(f.default.createElement("tr",{key:n},f.default.createElement("td",null,s),f.default.createElement("td",null,"Final Grade"),f.default.createElement("td",null,f.default.createElement("input",{name:"score",type:"text",value:u,className:"form-control",onChange:function(t){return e.onFieldChange(t.target,n)}})),f.default.createElement("td",null,f.default.createElement(C,{name:"attendanceCode",options:r,value:c,onChange:function(t){e.onFieldChange(t.target,n),e.onCommentTypeChange(t.target,n)}})),f.default.createElement("td",null,f.default.createElement("input",{name:"comment",type:"text",value:d,className:"form-control",onChange:function(t){return e.onFieldChange(t.target,n)}})))),a.forEach(function(t,a){for(var o=0,u=-1,c="",d=(t.exam.id,0);d<t.scores.length;d++){var p=t.scores[d];if(parseInt(p.idCourseStudent)===i){o=p.score?p.score:o,u=p.attendanceCode?p.attendanceCode:u,c=p.comment?p.comment:c;break}}l[a+1].push(f.default.createElement("tr",{key:n+"-"+a},f.default.createElement("td",null,s),f.default.createElement("td",null,t.exam.title),f.default.createElement("td",null,f.default.createElement("input",{name:"score",type:"text",value:o,className:"form-control",onChange:function(t){return e.onFieldChange(t.target,n,a)}})),f.default.createElement("td",null,f.default.createElement(C,{name:"attendanceCode",options:r,value:u,onChange:function(t){e.onFieldChange(t.target,n,a),e.onCommentTypeChange(t.target,n,a)}})),f.default.createElement("td",null,f.default.createElement("input",{name:"comment",type:"text",value:c,className:"form-control",onChange:function(t){return e.onFieldChange(t.target,n,a)}}))))})});var i=[];for(var s in l)i=i.concat(l[s]);return i}},{key:"renderTable",value:function(){return f.default.createElement("table",{className:"table table-striped results-table"},f.default.createElement("thead",null,f.default.createElement("tr",null,f.default.createElement("td",null,"Student"),f.default.createElement("td",null,"Exam"),f.default.createElement("td",null,"Score"),f.default.createElement("td",null,"Comment Type"),f.default.createElement("td",null,"Comment"))),f.default.createElement("tbody",null,this.renderBody()))}},{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement("div",{id:"notifications"}),this.renderTable(),f.default.createElement(E.Button,{onClick:this.save,className:"custom btn-success",style:{marginRight:"15px"}},"Save"))}}]),t}(d.Component),_=(0,p.default)((0,h.default)(b),[m.ROLES.ADMIN,m.ROLES.SUPER_ADMIN,m.ROLES.TEACHER,m.ROLES.REGISTRAR]),C=function(e){var t=e.options,n=e.value,a=e.onChange,r=e.name;return f.default.createElement("select",{name:r,value:n,className:"form-control",onChange:a},f.default.createElement("option",{value:-1},"Custom comment"),t.map(function(e,t){return f.default.createElement("option",{key:t,value:e.value},y.default.ucFirst(e.label))}))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(2)),l=function(){function e(t){(0,r.default)(this,e),this.startTime=(new Date).getTime(),this.timerName=t}return(0,o.default)(e,[{key:"stop",value:function(){var e=(new Date).getTime()-this.startTime;console.log('Finished "',this.timerName,'" finished in ',e)}}]),e}();t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(39)),c=n(0),d=a(c),f=a(n(28)),p=a(n(14)),h=n(9),m=a(n(29)),v=n(6),y=n(18),g=a(n(77)),E=a(n(992));t.default=function(e){var t=e.id;return d.default.createElement(_,(0,u.default)({ajaxOperations:{load:{type:"get",url:"/api/classes/"+t+"/attendance"}}},e))};var b=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.createRow=a.createRow.bind(a),a.createHead=a.createHead.bind(a),a.createTotalRow=a.createTotalRow.bind(a),a.state={showRegAttendanceWnd:!1,classDates:[],studentsAttendance:[]},a.reload=a.reload.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"reload",value:function(){this.props.load()}},{key:"componentDidMount",value:function(){this.parseData()}},{key:"componentDidUpdate",value:function(){}},{key:"parseData",value:function(){var e=this.props.data,t=[],n=[];for(var a in e){for(var r=e[a],o=0;o<r.length;o++)t.includes(r[o].date)||t.push(r[o].date);n.push({studentName:a,attendance:r})}this.setState({classDates:t,studentsAttendance:n})}},{key:"createHead",value:function(){var e=this.state.classDates,t={transform:"translate(-18px, 6px) rotate(290deg)",width:"50px",height:"75px",marginTop:"-6px",fontSize:"9pt",paddingLeft:"5px"},n={textAlign:"center"},a=[],r=0,o=function(e,t){return a.push(d.default.createElement("th",{key:r++,style:t},e))};return o("Student",{width:"370px"}),e.forEach(function(e){var n=g.default.parseLocale(e).toString("/");o(d.default.createElement("div",null,d.default.createElement("span",null,n)),t)}),o("#",n),o("%",n),a}},{key:"createRow",value:function(e){var t=this.state.classDates,n=[],a={textAlign:"center",verticalAlign:"middle"},r={textAlign:"center",verticalAlign:"middle",color:"green"},o={textAlign:"center",verticalAlign:"middle",color:"red"},l=0,i=function(e,t){return n.push(d.default.createElement("td",{key:l++,style:t},e))};i(d.default.createElement("p",null,e.studentName));for(var s=0,u=0;u<t.length;u++){for(var c=!1,f=0;f<e.attendance.length;f++)if(e.attendance[f].date===t[u]&&"present"===e.attendance[f].attendance){c=!0,s++;break}c?i("",r):i("X",o)}return i(s,a),i((s/t.length*100).toFixed(1)+"%",a),n}},{key:"createTotalRow",value:function(){var e=this.state,t=e.classDates,n=e.studentsAttendance,a=[],r=0,o=function(e,t){return a.push(d.default.createElement("td",{key:r++,style:t},e))};o("N in Attendance:");for(var l={textAlign:"center"},i=0;i<t.length;i++){for(var s=0,u=0;u<n.length;u++)for(var c=n[u].attendance,f=0;f<c.length;f++)c[f].date==t[i]&&"present"==c[f].attendance&&s++;o(s,l)}return o(""),o(""),d.default.createElement("tr",{key:"total"},a)}},{key:"renderTable",value:function(){var e=this.state,t=e.classDates,n=e.studentsAttendance;return t&&0!==t.length?d.default.createElement(m.default,{style:{tableLayout:"fixed"},data:n,createHead:this.createHead,createRow:this.createRow,additionalRows:this.createTotalRow()}):d.default.createElement("h2",null,"No attendance records yet")}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.appTypeKey,r=this.state.showRegAttendanceWnd;return d.default.createElement("div",{className:"content-block"},d.default.createElement(y.Link,{target:"_blank",to:"/classes/"+n+"/register-attendance"},d.default.createElement(v.Button,{className:"custom btn-success",style:{margin:"20px 0px 20px 0px"}},"Take todays attendance")),this.renderTable(),d.default.createElement(E.default,{id:n,appTypeKey:a,show:r,onClose:function(){return e.setState({showRegAttendanceWnd:!1})},onUpdate:function(){e.reload(),e.setState({showRegAttendanceWnd:!1})}}))}}]),t}(c.Component);b.contextTypes={router:c.PropTypes.object};var _=(0,f.default)((0,p.default)(b),[h.ROLES.ADMIN,h.ROLES.SUPER_ADMIN,h.ROLES.TEACHER,h.ROLES.REGISTRAR])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f={input:{width:"300px",display:"inline-block",marginBottom:10},button:{marginLeft:"15px",verticalAlign:"top",marginBottom:10}};window.innerWidth<768&&(f={input:{width:"100%",marginBottom:10},button:{width:"100%",marginBottom:10}});var p=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={txnId:""},a.submit=a.submit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this;return c.default.createElement("div",null,c.default.createElement("form",{id:"filterForm",onSubmit:this.submit,style:{marginTop:"35px"}},c.default.createElement("p",{className:"detail-field-label"},"TXN ID"),c.default.createElement("input",{className:"form-control",type:"text",id:"txnId",name:"txnId",value:this.state.txnId,onChange:function(t){return e.setState({txnId:t.target.value})},style:f.input}),c.default.createElement(d.Button,{style:f.button,className:"custom btn-success",type:"submit"},"Filter")))}},{key:"submit",value:function(e){e.preventDefault(),this.props.onSubmit&&this.props.onSubmit(this.state.txnId)}}]),t}(u.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.unpackBackendForEs5Users=t.createChildContext=t.CHILD_CONTEXT_TYPES=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){p.default.apply(void 0,["DragDropContext","backend"].concat(Array.prototype.slice.call(arguments)));var t=v(e),n=m(t);return function(e){var t,a,l=e.displayName||e.name||"Component",u=(a=t=function(t){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.Component),o(a,[{key:"getDecoratedComponentInstance",value:function(){return(0,d.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"getManager",value:function(){return n.dragDropManager}},{key:"getChildContext",value:function(){return n}},{key:"render",value:function(){var t=this;return s.default.createElement(e,r({},this.props,{ref:function(e){t.child=e}}))}}]),a}(),t.DecoratedComponent=e,t.displayName="DragDropContext("+l+")",t.childContextTypes=h,a);return(0,f.default)(u,e)}};var i=n(0),s=a(i),u=a(n(117)),c=n(1005),d=a(n(25)),f=a(n(280)),p=a(n(183)),h=t.CHILD_CONTEXT_TYPES={dragDropManager:u.default.object.isRequired},m=t.createChildContext=function(e,t){return{dragDropManager:new c.DragDropManager(e,t)}},v=t.unpackBackendForEs5Users=function(e){var t=e;return"object"===(void 0===t?"undefined":l(t))&&"function"==typeof t.default&&(t=t.default),(0,d.default)("function"==typeof t,"Expected the backend to be a function or an ES6 module exporting a default function. Read more: http://react-dnd.github.io/react-dnd/docs-drag-drop-context.html"),t}},function(e,t,n){var a=n(1010).Symbol;e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case r.BEGIN_DRAG:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case r.HOVER:return function(e,t){return e===t||e&&t&&e.x===t.x&&e.y===t.y}(e.clientOffset,t.clientOffset)?e:a({},e,{clientOffset:t.clientOffset});case r.END_DRAG:case r.DROP:return o;default:return e}},t.getSourceClientOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset,a=e.initialSourceClientOffset;return t&&n&&a?{x:t.x+a.x-n.x,y:t.y+a.y-n.y}:null},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset;return t&&n?{x:t.x-n.x,y:t.y-n.y}:null};var r=n(176),o={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e)?e.some(function(e){return e===t}):e===t};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(135))},function(e,t,n){var a=n(271),r=n(273),o=n(274),l=n(275),i=n(574),s=n(276);e.exports=function(e,t,n,u){var c=-1,d=r,f=!0,p=e.length,h=[],m=t.length;if(!p)return h;n&&(t=l(t,i(n))),u?(d=o,f=!1):t.length>=200&&(d=s,f=!1,t=new a(t));e:for(;++c<p;){var v=e[c],y=null==n?v:n(v);if(v=u||0!==v?v:0,f&&y==y){for(var g=m;g--;)if(t[g]===y)continue e;h.push(v)}else d(t,y,u)||h.push(v)}return h}},function(e,t,n){var a=n(573),r=n(270);e.exports=function(e){if(!r(e))return!1;var t=a(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var a=n(272),r=n(1029),o=n(1030),l=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?r(e):o(e)}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){e.exports=function(e){return e}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments[1],t=arguments[2];switch(e.type){case l.HOVER:break;case i.ADD_SOURCE:case i.ADD_TARGET:case i.REMOVE_TARGET:case i.REMOVE_SOURCE:return s;case l.BEGIN_DRAG:case l.PUBLISH_DRAG_SOURCE:case l.END_DRAG:case l.DROP:default:return u}var n=e.targetIds,a=t.targetIds,o=(0,r.default)(n,a),c=!1;if(0===o.length){for(var d=0;d<n.length;d++)if(n[d]!==a[d]){c=!0;break}}else c=!0;if(!c)return s;var f=a[a.length-1],p=n[n.length-1];return f!==p&&(f&&o.push(f),p&&o.push(p)),o},t.areDirty=function(e,t){return e!==s&&(e===u||void 0===t||(0,o.default)(t,e).length>0)};var r=a(n(1068)),o=a(n(1079)),l=n(176),i=n(182),s=[],u=[]},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var a=n(1094).Symbol;e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":a(e))||null===e||"object"!==(void 0===t?"undefined":a(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,l=0;l<n.length;l+=1){if(!o.call(t,n[l]))return!1;var i=e[n[l]],s=t[n[l]];if(i!==s||"object"===(void 0===i?"undefined":a(i))||"object"===(void 0===s?"undefined":a(s)))return!1}return!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e){var t,n,a=e.DecoratedComponent,v=e.createHandler,y=e.createMonitor,g=e.createConnector,E=e.registerHandler,b=e.containerDisplayName,_=e.getType,C=e.collect,w=e.options.arePropsEqual,k=void 0===w?h.default:w,S=a.displayName||a.name||"Component",x=(n=t=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.handleChange=a.handleChange.bind(a),a.handleChildRef=a.handleChildRef.bind(a),(0,d.default)("object"===o(a.context.dragDropManager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",S,S),a.manager=a.context.dragDropManager,a.handlerMonitor=y(a.manager),a.handlerConnector=g(a.manager.getBackend()),a.handler=v(a.handlerMonitor),a.disposable=new c.SerialDisposable,a.receiveProps(e),a.state=a.getCurrentState(),a.dispose(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),l(t,[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return this.decoratedComponentInstance}},{key:"shouldComponentUpdate",value:function(e,t){return!k(e,this.props)||!(0,p.default)(t,this.state)}}]),l(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.disposable=new c.SerialDisposable,this.currentType=null,this.receiveProps(this.props),this.handleChange()}},{key:"componentWillReceiveProps",value:function(e){k(e,this.props)||(this.receiveProps(e),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose(),this.isCurrentlyMounted=!1}},{key:"receiveProps",value:function(e){this.handler.receiveProps(e),this.receiveType(_(e))}},{key:"receiveType",value:function(e){if(e!==this.currentType){this.currentType=e;var t=E(e,this.handler,this.manager),n=t.handlerId,a=t.unregister;this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var r=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new c.CompositeDisposable(new c.Disposable(r),new c.Disposable(a)))}}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,p.default)(e,this.state)||this.setState(e)}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector.receiveHandlerId(null)}},{key:"handleChildRef",value:function(e){this.decoratedComponentInstance=e,this.handler.receiveComponent(e)}},{key:"getCurrentState",value:function(){return C(this.handlerConnector.hooks,this.handlerMonitor)}},{key:"render",value:function(){return s.default.createElement(a,r({},this.props,this.state,{ref:m(a)?this.handleChildRef:null}))}}]),t}(),t.DecoratedComponent=a,t.displayName=b+"("+S+")",t.contextTypes={dragDropManager:u.default.object.isRequired},n);return(0,f.default)(x,a)};var i=n(0),s=a(i),u=a(n(117)),c=n(1102),d=(a(n(111)),a(n(25))),f=a(n(280)),p=a(n(281)),h=a(n(580)),m=function(e){return Boolean(e&&e.prototype&&"function"==typeof e.prototype.render)}},function(e,t,n){"use strict";function a(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((0,r.isValidElement)(t)){var a=t;!function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}(a);var l=n?function(t){return e(t,n)}:e;return(0,o.default)(a,l)}e(t,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return Object.keys(e).forEach(function(n){var r=a(e[n]);t[n]=function(){return r}}),t};var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n(1110))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t===e||null!==t&&null!==e&&(0,a.default)(t,e)};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(281))},function(e,t,n){"use strict";function a(e,t){return"string"==typeof e||"symbol"===(void 0===e?"undefined":r(e))||t&&(0,o.default)(e)&&e.every(function(e){return a(e,!1)})}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=a;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(1111))},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var a=n(587);e.exports=function(e,t,n){"__proto__"==t&&a?a(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var a=n(184),r=function(){try{var e=a(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,t,n){var a=n(284),r=n(185);e.exports=function(e){if(!r(e))return!1;var t=a(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(40))},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var a=n(1139),r=n(188),o=Object.prototype,l=o.hasOwnProperty,i=o.propertyIsEnumerable,s=a(function(){return arguments}())?a:function(e){return r(e)&&l.call(e,"callee")&&!i.call(e,"callee")};e.exports=s},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}var r=n(597),o=n(1175),l=n(1176);a.prototype.add=a.prototype.push=o,a.prototype.has=l,e.exports=a},function(e,t,n){function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var r=n(1156),o=n(1170),l=n(1172),i=n(1173),s=n(1174);a.prototype.clear=r,a.prototype.delete=o,a.prototype.get=l,a.prototype.has=i,a.prototype.set=s,e.exports=a},function(e,t,n){var a=n(1177);e.exports=function(e,t){return!(null==e||!e.length)&&a(e,t,0)>-1}},function(e,t){e.exports=function(e,t,n){for(var a=-1,r=null==e?0:e.length;++a<r;)if(n(t,e[a]))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var a=n(286),r=n(188);e.exports=function(e){return r(e)&&a(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafari=t.isFirefox=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1187));t.isFirefox=(0,a.default)(function(){return/firefox/i.test(navigator.userAgent)}),t.isSafari=(0,a.default)(function(){return Boolean(window.safari)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(1193)),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"sortCourses",value:function(e){return e.sort(function(e,t){var n=parseInt(e.deptWeight),a=parseInt(t.deptWeight);if(n<a)return-1;if(n>a)return 1;var r=parseInt(e.weight),o=parseInt(t.weight);return r<o?-1:r>o?1:0})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.data,a=e.onRowCheck,r=e.checkedRows,o=e.onCoursesSwap,l=null!==this.props.groupId?parseInt(this.props.groupId):0,i=this.sortCourses(n);return c.default.createElement("div",null,i.map(function(e,n){var i=e.classes,s=e.courseTitle,u=e.deptName,f=e.id,p=e.maleCount,h=e.femaleCount,m=e.weight,v=e.feeForEmployed,y=e.feeForUnemployed;f=f?parseInt(f):null,m=m?parseInt(m):null;var g=0!=i.length,E=n%2==0;return c.default.createElement(d.default,{groupId:l,groupTitle:t,weight:m,maleCount:p,femaleCount:h,feeForEmployed:v,feeForUnemployed:y,key:n,title:s,deptName:u,id:f,onCheck:function(e){return a(f,e)},odd:E,classes:i,checked:-1!==r.indexOf(f),disabled:g,onCoursesSwap:function(e,t){return o(e,t)}})}))}}]),t}(u.Component);t.default=f,f.propTypes={title:u.PropTypes.string,data:u.PropTypes.array.isRequired,onRowCheck:u.PropTypes.func,checkedRows:u.PropTypes.array,onCoursesSwap:u.PropTypes.func}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=n(6),p=a(n(22)),h={addButton:{},saveButton:{marginLeft:15}};window.innerWidth<768&&(h={addButton:{width:"100%",marginBottom:10},saveButton:{width:"100%"}}),t.default=(0,d.default)(function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:a.props.data},a.save=a.save.bind(a),a.add=a.add.bind(a),a.delete=a.delete.bind(a),a.handleGroupChange=a.handleGroupChange.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.sort()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"componentWillReceiveProps",value:function(e){this.sort(e.data)}},{key:"sort",value:function(e){(e=e||this.state.data).sort(function(e,t){return parseInt(e.weight)<parseInt(t.weight)}),this.setState({data:e})}},{key:"save",value:function(){var e=this.props,t=e.save,n=e.load;t({data:this.state.data},function(){n()})}},{key:"add",value:function(){var e=this.state.data;e.push({name:"",weight:0}),this.setState({data:e})}},{key:"delete",value:function(e){var t=this.state.data,n=t[e];n&&(n.id?n.isDeleted=!0:t.splice(e,1),this.setState({data:t}))}},{key:"handleGroupChange",value:function(e,t){var n=this.state.data,a=e.target,r=a.name,o=a.value;n[t]&&(n[t][r]=o,this.setState({data:n}))}},{key:"renderGroup",value:function(e,t,n,a){return!e.isDeleted&&c.default.createElement("tr",{key:t},c.default.createElement("td",null,c.default.createElement("input",{className:"form-control",type:"text",name:"name",value:e.name,onChange:function(e){return a(e,t)}})),c.default.createElement("td",null,c.default.createElement("input",{className:"form-control",type:"text",name:"weight",value:e.weight,onChange:function(e){return a(e,t)}})),c.default.createElement("td",null,c.default.createElement(f.Button,{className:"custom",style:{width:"100%"},onClick:function(){return n(t)}},"Delete")))}},{key:"renderTable",value:function(){var e=this,t=this.state.data;return!(!t||0===t.length)&&c.default.createElement("div",null,c.default.createElement("table",{className:"table table-striped results-table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("td",null,"Name"),c.default.createElement("td",null,"Weight"),c.default.createElement("td",null))),c.default.createElement("tbody",null,t.map(function(t,n){return e.renderGroup(t,n,e.delete,e.handleGroupChange)}))))}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,this.renderTable(),c.default.createElement(p.default,null,c.default.createElement(f.Button,{className:"custom",bsStyle:"success",style:h.addButton,onClick:this.add},"Add"),c.default.createElement(f.Button,{className:"custom",bsStyle:"success",style:h.saveButton,onClick:function(){e.save(),e.sort()}},"Save")))}}]),t}(u.Component))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(4)),s=a(n(2)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=n(12),h=a(n(22)),m=a(n(15)),v=a(n(16)),y=(a(n(1234)),a(n(36)),n(6)),g=(n(38),a(n(295))),E=(a(n(192)),a(n(11))),b=a(n(134)),_=a(n(31)),C=a(n(14)),w=a(n(28)),k=a(n(44)),S=a(n(19)),x=a(n(193)),T=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={teacher:{userName:"",userPassword:"",profile:{}},id:a.props.id,isLoading:!1,teacherTitleOptopns:[],teacherStatusOptions:[],showConfirmDelete:!1},a.promises={load:null,save:null,loadTeacherTitles:null,loadTeacherStatus:null},a.requestFields=["id","age","userEmailAddress","userStatus","userUniqueId","allowedBranches","profile.profileTeacherTitle","profile.teacherNotes","profile.teacherHourlyRate","profile.teacherStatusCode","profile.profileForname","profile.profileSurname","profile.profilePostcode","profile.profileAddress","profile.profileAddress2","profile.city","profile.profileTelephone","profile.profileMobile","profile.profileGender","profile.employmentField","teacherPayments","teacherCourseClasses"],a.submit=a.submit.bind(a),a.onFieldChange=a.onFieldChange.bind(a),a.changeField=a.changeField.bind(a),a.save=a.save.bind(a),a.deleteUser=a.deleteUser.bind(a),a.back=a.back.bind(a),a}return(0,u.default)(t,e),(0,s.default)(t,null,[{key:"allowedRoles",value:function(){return[f.ROLES.SUPER_ADMIN,f.ROLES.ADMIN]}}]),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"submit",value:function(e){e.preventDefault()}},{key:"load",value:function(){var e=this;this.loadOptions();var t=this.props.id;t&&(this.setState({isLoading:!0}),this.promises.load&&this.promises.load.cancel(),this.promises.load=m.default.ajax({type:"get",url:"/api/users/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){e.setState({isLoading:!1,teacher:t})},function(e){return console.log(e)}))}},{key:"loadOptions",value:function(){var e=this,t=this.promises,n=function(n,a,o){t[n]=m.default.ajax({type:"get",url:a}),t[n].then(function(t){return e.setState((0,r.default)({},o,t))},function(e){return console.log(e)})};n("loadTeacherTitles","/api/profiles/get-profile-teacher-title-enum","teacherTitleOptions"),n("loadTeacherStatus","/api/lookup/get-teacher-status","teacherStatusOptions")}},{key:"beforeSave",value:function(){var e=this.state,t=e.id,n=e.teacher;t||(n.userMainRole=f.ROLE_IDS[f.ROLES.TEACHER]);var a=v.default.accessObjByPath(n,"profile.profileForname"),r=v.default.accessObjByPath(n,"profile.profileSurname");n.userFullname=[a,r].join(" ").trim(),n.profile.age=n.age,n.profile.allowedBranches=n.allowedBranches,this.setState({teacher:n})}},{key:"save",value:function(){var e=this;this.beforeSave();var t=this.state,n=t.id,a=t.teacher,r={};r=n?{type:"put",url:"/api/users/"+n,data:a}:{type:"post",url:"/api/users",data:a},this.promises.save=m.default.ajax(r),this.promises.save.then(function(t){E.default.success("Saved successfully"),e.back()},function(e){E.default.error("Save failed"),console.log(e)})}},{key:"deleteUser",value:function(e){var t=this.state.id;t&&($.ajax({type:"delete",url:"/api/users/"+t,data:{reason:e},success:function(e){E.default.success("Deleted successfully"),console.log(e)},error:function(e){E.default.error("Deletion failed"),console.log(e)}}),this.back())}},{key:"back",value:function(){this.context.router.push("/users/role/teachers")}},{key:"onFieldChange",value:function(e){this.changeField(e.target.name,e.target.value)}},{key:"changeField",value:function(e,t){var n=this.state.teacher;v.default.accessObjByPath(n,e,function(){return t}),this.setState({teacher:n})}},{key:"renderFormButtons",value:function(){var e=this,t=!1;return this.state.id&&(t=d.default.createElement(y.Button,{className:"custom btn-danger",onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete user")),d.default.createElement("div",null,d.default.createElement(h.default,null,d.default.createElement(y.Button,{style:{marginRight:"15px"},className:"custom btn-success",onClick:this.save},"Save"),d.default.createElement(y.Button,{style:{marginRight:"15px"},className:"custom",onClick:this.back},"Cancel"),t))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.teacher,r=t.teacherTitleOptions,o=(t.teacherStatusOptions,t.showConfirmDelete);if(n)return d.default.createElement(S.default,null);var l=v.default.accessObjByPath;return d.default.createElement("div",null,d.default.createElement("div",{id:"notifications"}),d.default.createElement("form",{onSubmit:this.submit},d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Teacher profile"),d.default.createElement("hr",null),d.default.createElement(y.Row,null,d.default.createElement(y.Col,{md:6},d.default.createElement(y.Row,null,d.default.createElement(p.FormField,{width:12,label:"Title"},d.default.createElement(R,{activeProps:{options:r,name:"profile.profileTeacherTitle",value:l(a,"profile.profileTeacherTitle"),onChange:this.onFieldChange},passiveProps:{value:l(a,"profile.profileTeacherTitle")}})),d.default.createElement(p.FormField,{width:12,label:"Forname"},d.default.createElement(O,{passiveProps:{value:l(a,"profile.profileForname")},activeProps:{type:"text",name:"profile.profileForname",className:"form-control",value:l(a,"profile.profileForname"),onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Surname"},d.default.createElement(O,{passiveProps:{value:l(a,"profile.profileSurname")},activeProps:{type:"text",name:"profile.profileSurname",className:"form-control",value:l(a,"profile.profileSurname"),onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Age"},d.default.createElement(O,{passiveProps:{value:a.age},activeProps:{type:"date",name:"age",className:"form-control",value:a.age,onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Email Address"},d.default.createElement(O,{passiveProps:{value:a.userEmailAddress},activeProps:{type:"text",name:"userEmailAddress",className:"form-control",value:a.userEmailAddress,onChange:this.onFieldChange}}))),d.default.createElement(y.Row,{style:{marginBottom:"15px"}},d.default.createElement(y.Col,{md:12},d.default.createElement("p",{className:"detail-field-label"},"Postcode"),d.default.createElement(x.default,{value:a.profile.profilePostcode,onSelect:function(t){var n=function(e){return e||""};e.changeField("profile.profileAddress",n(t.line1)),e.changeField("profile.profileAddress2",n(t.line2)),e.changeField("profile.profilePostcode",n(t.postcode)),e.changeField("profile.city",n(t.town))}}))),d.default.createElement(y.Row,null,d.default.createElement(p.FormField,{width:12,label:"Address"},d.default.createElement(O,{passiveProps:{value:l(a,"profile.profileAddress")},activeProps:{type:"text",name:"profile.profileAddress",className:"form-control",value:l(a,"profile.profileAddress"),onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Address 2"},d.default.createElement(O,{passiveProps:{value:l(a,"profile.profileAddress2")},activeProps:{type:"text",name:"profile.profileAddress2",className:"form-control",value:l(a,"profile.profileAddress2"),onChange:this.onFieldChange}})))),d.default.createElement(y.Col,{md:6},d.default.createElement(y.Row,null,d.default.createElement(p.FormField,{width:12,label:"City"},d.default.createElement(O,{passiveProps:{value:l(a,"profile.city")},activeProps:{type:"text",name:"profile.city",className:"form-control",value:l(a,"profile.city"),onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Telephone"},d.default.createElement(O,{passiveProps:{value:l(a,"profile.profileTelephone")},activeProps:{type:"text",name:"profile.profileTelephone",className:"form-control",value:l(a,"profile.profileTelephone"),onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Mobile"},d.default.createElement(O,{passiveProps:{value:l(a,"profile.profileMobile")},activeProps:{type:"text",name:"profile.profileMobile",className:"form-control",value:l(a,"profile.profileMobile"),onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Unique ID"},d.default.createElement(O,{passiveProps:{value:a.userUniqueId},activeProps:{type:"text",name:"userUniqueId",className:"form-control",value:a.userUniqueId,onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Male/Female"},d.default.createElement(p.EditableValue,{value:l(a,"profile.profileGender"),onFieldChange:this.changeField},d.default.createElement("select",{name:"profile.profileGender",className:"form-control"},d.default.createElement("option",{value:"none"},"Select Gender"),d.default.createElement("option",{value:"male"},"Male"),d.default.createElement("option",{value:"female"},"Female")))),d.default.createElement(p.FormField,{width:12,label:"CRB"},d.default.createElement(O,{passiveProps:{value:l(a,"profile.teacherCrb")},activeProps:{style:{display:"block"},type:"checkbox",name:"profile.teacherCrb",value:l(a,"profile.teacherCrb"),onChange:this.onFieldChange}})),d.default.createElement(p.FormField,{width:12,label:"Teacher Status"},d.default.createElement(p.EditableValue,{value:l(a,"profile.teacherStatusCode"),onFieldChange:this.changeField},d.default.createElement("select",{name:"profile.teacherStatusCode",className:"form-control"},d.default.createElement("option",{value:"0"},"None")))),d.default.createElement(p.FormField,{width:12,label:"Teacher Hourly Rate"},d.default.createElement(p.EditableValue,{value:l(a,"profile.teacherHourlyRate"),onFieldChange:this.changeField},d.default.createElement("input",{type:"text",name:"profile.teacherHourlyRate",className:"form-control"})))))),d.default.createElement(N,null,"Teacher Notes"),d.default.createElement(p.EditableHTML,{value:l(a,"profile.teacherNotes"),name:"profile.teacherNotes",onChange:this.onFieldChange,onlyEdit:!0}),d.default.createElement("h2",{className:"block-heading"},"Payments"),d.default.createElement("hr",null),d.default.createElement(g.default,{payments:a.teacherPayments,onChange:function(t){return e.changeField("teacherPayments",t)}}),d.default.createElement("h2",{className:"block-heading"},"Assigned Classes"),d.default.createElement("hr",null),d.default.createElement(y.Row,null,d.default.createElement(p.FormField,{width:5},d.default.createElement(D,{classes:a.teacherCourseClasses}))),this.renderFormButtons())),d.default.createElement(k.default,{show:o,onConfirm:this.deleteUser,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(c.Component);T.PropTypes={id:c.PropTypes.number},T.contextTypes={router:d.default.PropTypes.object.isRequired};var P=function(e){var t=e.value;return t=t&&t.length>0?_.default.ucFirst(t):"----------------------------",d.default.createElement("p",{className:"detail-field-value highlighted"},t)},R=(0,b.default)(p.RadioInputs,P),O=(0,b.default)(function(e){var t=e.type,n=e.value,a=e.name,r=e.checked,o=e.onChange,l=e.className;return d.default.createElement("input",{type:t,value:n,name:a,checked:r,onChange:o,className:l})},P),D=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));a.termOptions=e.data;for(var r=null,s=0;s<a.termOptions.length;s++)if("1"==a.termOptions[s].isActive){r=a.termOptions[s].value;break}return a.state={selectedTerm:r},a.selectClass=a.selectClass.bind(a),a}return(0,u.default)(t,e),(0,s.default)(t,[{key:"selectClass",value:function(e){this.context.router.push("/classes/"+e)}},{key:"renderClasses",value:function(){var e=this,t=this.props.classes,n=this.state.selectedTerm,a=[];return t&&t.forEach(function(t,r){t.termId==n&&a.push(d.default.createElement(y.ListGroupItem,{key:r,onClick:function(){return e.selectClass(t.id)}},t.classTime+" ("+t.courseTitle+")"))}),d.default.createElement(y.ListGroup,null,a)}},{key:"render",value:function(){var e=this,t=this.state.selectedTerm;return d.default.createElement("div",null,d.default.createElement("select",{className:"form-control",value:t,onChange:function(t){return e.setState({selectedTerm:t.target.value})}},this.termOptions.map(function(e){return d.default.createElement("option",{key:e.value,value:e.value},e.label)})),this.renderClasses())}}]),t}(c.Component);D.contextTypes={router:c.PropTypes.object.isRequired},D=(0,C.default)(D,{load:{type:"get",url:"/api/terms/list"}}),t.default=(0,w.default)(T,T.allowedRoles());var N=function(e){var t=e.children;return d.default.createElement("p",{className:"detail-field-label"},t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=a(n(173)),h=a(n(172)),m=a(n(19)),v=a(n(11)),y=a(n(88)),g=(n(9),{modalContentInner:{padding:40}});window.innerWidth<1024&&(g={modalContentInner:{padding:10}});var E=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={creditCard:{},processing:!1,amount:0},a.onChange=a.onChange.bind(a),a.close=a.close.bind(a),a.submit=a.submit.bind(a),a.assetManager=new y.default,a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onChange",value:function(){var e=void 0,t=void 0;switch(arguments.length){case 1:var n=arguments[0];e=n.target.name,t=n.target.value;break;case 2:e=arguments[0],t=arguments[1]}this.setState((0,r.default)({},e,t))}},{key:"close",value:function(e){this.setState({creditCard:{}}),this.props.onClose(e)}},{key:"submit",value:function(){var e=this,t=this.state,n=t.creditCard,a=t.amount,r=this.props.studentId,o=p.default.validate(n);if(o.isValid){this.setState({processing:!0});var l=function(){return e.setState({processing:!1})};h.default.processPayment({creditCard:n,requestType:"post",paymentUrl:"/api/student-payments/create",params:{amount:a,studentId:r},onCardFail:function(){v.default.error("Invalid card",{boxId:"paymentNotifications"}),l()},onSuccess:function(){e.close(!0),v.default.success("Payment completed"),l()},onError:function(e){console.error(e),v.default.error("Payment has failed, please check the details and try again",{boxId:"paymentNotifications"}),l()}})}else o.errors.forEach(function(e){return v.default.error(e,{boxId:"paymentNotifications"})})}},{key:"componentWillUnmount",value:function(){this.assetManager.unloadAll()}},{key:"componentWillMount",value:function(){this.assetManager.loadJs("https://js.stripe.com/v2/",function(){h.default.loadPublishableKey()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.creditCard,a=t.processing,r=t.amount,o=this.props.show;return d.default.createElement(f.Modal,{show:o,onHide:function(){return e.close()}},d.default.createElement(f.Modal.Dialog,null,d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement("p",{style:{textAlign:"center",fontSize:"14pt"}},"Complete Card Details")),d.default.createElement(f.Modal.Body,null,d.default.createElement("div",{id:"paymentNotifications"}),d.default.createElement("div",{style:g.modalContentInner},d.default.createElement(f.Row,{style:{marginBottom:"10px"}},d.default.createElement(f.Col,{md:6,sm:6,xs:4,style:{textAlign:"center",margin:"0",height:"34px",lineHeight:"34px"}},d.default.createElement("p",null,"Amount: ")),d.default.createElement(f.Col,{md:6,sm:6,xs:8},d.default.createElement("input",{type:"text",className:"form-control",name:"amount",onChange:this.onChange,value:r}))),d.default.createElement(p.default,{name:"creditCard",value:n,onChange:this.onChange})),d.default.createElement(m.default,{show:a})),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{style:{marginRight:"15px"},onClick:this.submit,bsStyle:"success"},"Submit"),d.default.createElement(f.Button,{onClick:function(){return e.close()}},"Cancel"))))}}]),t}(c.Component);t.default=E,E.propTypes={show:c.PropTypes.bool.isRequired,onClose:c.PropTypes.func.isRequired,studentId:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.number]).isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=a(n(29)),f=a(n(15)),p=n(18),h=a(n(60)),m=a(n(16)),v=a(n(31)),y=n(9),g=a(n(19)),E=n(12),b=n(6),_=a(n(36)),C=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={data:null,isLoading:!0,totalCount:0,filters:{userFullname:"",createdAtStart:"",createdAtEnd:"",action:""},submittedFilters:{}},a.allowedRoles=[y.ROLES.SUPER_ADMIN],a.loadPromise=null,a.rowsPerPage=100,a.currentPage=1,a.fields=["id","user.userName","action","module","moduleId","actionTime","actionIp","loggingData"],a.intervalId=null,a.submitFilters=a.submitFilters.bind(a),a.updateFilters=a.updateFilters.bind(a),a.handleChangeEvent=a.handleChangeEvent.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return this.allowedRoles.includes(e)}},{key:"updateFilters",value:function(e,t){var n=this.state.filters;n[e]=t,this.setState({filters:n})}},{key:"handleChangeEvent",value:function(e){this.updateFilters(e.target.name,e.target.value)}},{key:"submitFilters",value:function(){this.setState({submittedFilters:this.state.filters})}},{key:"formatDate",value:function(e,t){if(!e)return e;var n=e.split("-");switch(t){case"dd-mm-yyyy":4===n[0].length&&n.reverse();break;case"yyyy-mm-dd":4===n[2].length&&n.reverse()}return n.join("-")}},{key:"componentDidMount",value:function(){var e=this;this.isAllowed()&&(this.loadData(),this.intervalId=setInterval(function(){return e.loadData()},2e3),E.DatePicker.init(function(t,n){return e.updateFilters(t,e.formatDate(n,"yyyy-mm-dd"))}))}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel(),this.intervalId&&clearInterval(this.intervalId)}},{key:"render",value:function(){return this.isAllowed()?c.default.createElement("div",null,this.props.noFilterForm?"":c.default.createElement("div",{className:"content-block"},this.renderFilters()),c.default.createElement("div",{className:"content-block",style:{paddingTop:"35px"}},this.renderTable(),this.renderPaginator())):c.default.createElement("div",null)}},{key:"renderFilters",value:function(){var e=this.state.filters;return c.default.createElement("div",{style:{margin:"20px 0 10px 0"}},c.default.createElement(b.Row,null,c.default.createElement(b.Col,{md:3,style:{marginBottom:"10px"}},c.default.createElement("input",{type:"text",className:"form-control",name:"userFullname",value:e.userFullname,placeholder:"user name",onChange:this.handleChangeEvent})),c.default.createElement(b.Col,{md:3,style:{marginBottom:"10px"}},c.default.createElement(_.default,{url:"/api/logs/log-actions",className:"form-control",id:"action",name:"action",value:e.action,placeholder:"action",onChange:this.handleChangeEvent},c.default.createElement("option",{value:""},"Select Action"))),c.default.createElement(b.Col,{md:3,style:{marginBottom:"10px"}},c.default.createElement("input",{type:"text",className:"form-control datepicker",name:"createdAtStart",value:e.createdAtStart,placeholder:"after date"})),c.default.createElement(b.Col,{md:3,style:{marginBottom:"10px"}},c.default.createElement("input",{type:"text",className:"form-control datepicker",name:"createdAtEnd",value:e.createdAtEnd,placeholder:"before date"}))),c.default.createElement(b.Row,null,c.default.createElement(b.Col,{md:3},c.default.createElement(b.Button,{className:"custom",bsStyle:"success",onClick:this.submitFilters},"Filter"))))}},{key:"renderTable",value:function(){var e=this,t=this.state,n=t.data;return t.isLoading?c.default.createElement(g.default,null):n&&0!=n.length?c.default.createElement(d.default,{data:n,headers:["Staff Username","Action","Module","Action Time","Action IP Address","ISP","Log data"],createHead:function(t){return e.createHead(t)},createRow:function(t,n){return e.createRow(t,n)}}):c.default.createElement("div",null,c.default.createElement("p",null,"No data."))}},{key:"renderPaginator",value:function(){var e=this;return c.default.createElement(h.default,{totalCount:this.state.totalCount,rowsPerPage:this.rowsPerPage,currentPage:this.currentPage,onPageChange:function(t){e.currentPage=t,e.setState({isLoading:!0}),e.loadData()}})}},{key:"loadData",value:function(){var e=this,t=this.state.submittedFilters;this.props.params&&(0,r.default)(t,this.props.params);var n={rowsPerPage:this.rowsPerPage,page:this.currentPage,fields:this.fields,filters:t};this.loadPromise=f.default.makeCancelableAjax($.ajax({type:"get",url:"/api/logs",data:n})),this.loadPromise.promise.then(function(t){return e.setState({isLoading:!1,data:t.rows,totalCount:t.info.totalCount})},function(e){return console.log(e)})}},{key:"createHead",value:function(e){var t=d.default.createHeadBase(e);return t.push(c.default.createElement("td",{key:"controls"})),t}},{key:"createRow",value:function(e){var t=[];t.push(c.default.createElement("td",{key:"username"},v.default.ucWords(m.default.accessObjByPath(e,"user.userName")))),t.push(c.default.createElement("td",{key:"action"},v.default.ucWords(e.action)));var n=v.default.ucWords(e.module);return t.push(c.default.createElement("td",{key:"module"},n)),t.push(c.default.createElement("td",{key:"actionTime"},e.actionTime)),t.push(c.default.createElement("td",{key:"actionIp"},e.actionIp)),t.push(c.default.createElement("td",{key:"loggingData"},m.default.getIfExists(e,"loggingData.isp","")+" / "+m.default.getIfExists(e,"loggingData.city",""))),t.push(c.default.createElement("td",{key:"userFullname"},m.default.getIfExists(e,"loggingData.Fullname",m.default.getIfExists(e,"loggingData.student","")),e.loggingData.courseTitle?e.loggingData.courseTitle+" - "+e.loggingData.classTime:"")),t.push(c.default.createElement("td",{key:"controls"},c.default.createElement(p.Link,{to:"/logs/"+e.id},"Log"))),t}}]),t}(c.default.Component);t.default=C},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(31)),f=n(18),p=a(n(29)),h=a(n(28)),m=a(n(16)),v=n(9),y=m.default.getIfExists,g=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={logs:[]},a.load=a.load.bind(a),a.createRow=a.createRow.bind(a),a.createHead=a.createHead.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(){var e=this,t=this.props.params;$.ajax({type:"get",url:"/api/logs/payments",data:{fields:["id","user.userName","action","module","moduleId","actionTime","actionIp","loggingData"],params:t},success:function(t){return e.setState({logs:t})},error:function(){}})}},{key:"componentDidMount",value:function(){this.load(),setInterval(this.load,1e4)}},{key:"createHead",value:function(e){var t=p.default.createHeadBase(e);return t.push(c.default.createElement("td",{key:"controls"})),t}},{key:"createRow",value:function(e){var t=[];t.push(c.default.createElement("td",{key:"username"},d.default.ucWords(y(e,"user.userName","")))),t.push(c.default.createElement("td",{key:"action"},d.default.ucWords(e.action)));var n=d.default.ucWords(e.module);return t.push(c.default.createElement("td",{key:"module"},n)),t.push(c.default.createElement("td",{key:"actionTime"},e.actionTime)),t.push(c.default.createElement("td",{key:"actionIp"},e.actionIp)),t.push(c.default.createElement("td",{key:"loggingData"},y(e,"loggingData.isp","")+" / "+y(e,"loggingData.city",""))),t.push(c.default.createElement("td",{key:"userFullname"},y(e,"loggingData.Fullname",""))),t.push(c.default.createElement("td",{key:"controls"},c.default.createElement(f.Link,{to:"/logs/"+e.id},"Log"))),t}},{key:"render",value:function(){var e=this,t=this.state.logs;return t&&0!=t.length?c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Payments log"),c.default.createElement("hr",null),c.default.createElement(p.default,{data:t,headers:["Staff Username","Action","Module","Action Time","Action IP Address","ISP","Student Name"],createHead:function(t){return e.createHead(t)},createRow:function(t,n){return e.createRow(t,n)}})):c.default.createElement("div",null)}}]),t}(u.Component);t.default=(0,h.default)(g,[v.ROLES.ADMIN,v.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";var a=n(1311),r=n(138),o=n(65),l=n(1327),i=n(101),s=n(297),u=n(300),c=n(617),d=n(1328),f=n(619),p=n(196),h=n(57),m=n(615),v=n(34),y=n(307),g=n(633),E=n(139),b=n(1390),_={Editor:d,EditorBlock:f,EditorState:v,CompositeDecorator:l,Entity:p,EntityInstance:m,BlockMapBuilder:r,CharacterMetadata:o,ContentBlock:i,ContentState:s,SelectionState:E,AtomicBlockUtils:a,KeyBindingUtil:y,Modifier:h,RichUtils:g,DefaultDraftBlockRenderMap:u,DefaultDraftInlineStyle:c,convertFromHTML:n(631),convertFromRaw:n(1393),convertToRaw:b,genKey:n(73),getDefaultKeyBinding:n(634),getVisibleSelectionRect:n(1397)};e.exports=_},function(e,t,n){"use strict";var a=n(1313);e.exports=a},function(e,t,n){"use strict";function a(e,t,n){var a=t.getCharacterList(),i=n>0?a.get(n-1):void 0,s=n<a.count()?a.get(n):void 0,u=i?i.getEntity():void 0,c=s?s.getEntity():void 0;if(c&&c===u&&"MUTABLE"!==e.__get(c).getMutability()){for(var d,f=function(e,t,n){var a;return o(e,function(e,t){return e.getEntity()===t.getEntity()},function(e){return e.getEntity()===t},function(e,t){e<=n&&t>=n&&(a={start:e,end:t})}),"object"!=typeof a&&l(!1),a}(a,c,n),p=f.start,h=f.end;p<h;)d=a.get(p),a=a.set(p,r.applyEntity(d,null)),p++;return t.set("characterList",a)}return t}var r=n(65),o=n(194),l=n(30);e.exports=function(e,t){var n=e.getBlockMap(),r=e.getEntityMap(),o={},l=t.getStartKey(),i=t.getStartOffset(),s=n.get(l),u=a(r,s,i);u!==s&&(o[l]=u);var c=t.getEndKey(),d=t.getEndOffset(),f=n.get(c);l===c&&(f=u);var p=a(r,f,d);return p!==f&&(o[c]=p),Object.keys(o).length?e.merge({blockMap:n.merge(o),selectionAfter:t}):e.set("selectionAfter",t)}},function(e,t,n){"use strict";e.exports=function(e,t,n){if(n===e.count())t.forEach(function(t){e=e.push(t)});else if(0===n)t.reverse().forEach(function(t){e=e.unshift(t)});else{var a=e.slice(0,n),r=e.slice(n);e=a.concat(t,r).toList()}return e}},function(e,t,n){"use strict";function a(e,t){return e===t}var r=n(35),o=n(118),l=n(194),i=r.List,s=r.Repeat,u=r.Record,c=o.thatReturnsTrue,d=u({start:null,end:null}),f=u({start:null,end:null,decoratorKey:null,leaves:null}),p={generate:function(e,t,n){var r=t.getLength();if(!r)return i.of(new f({start:0,end:0,decoratorKey:null,leaves:i.of(new d({start:0,end:0}))}));var o=[],u=n?n.getDecorations(t,e):i(s(null,r)),p=t.getCharacterList();return l(u,a,c,function(e,t){o.push(new f({start:e,end:t,decoratorKey:u.get(e),leaves:function(e,t){var n=[],r=e.map(function(e){return e.getStyle()}).toList();return l(r,a,c,function(e,a){n.push(new d({start:e+t,end:a+t}))}),i(n)}(p.slice(e,t).toList(),e)}))}),i(o)},getFingerprint:function(e){return e.map(function(e){var t=e.get("decoratorKey");return(null!==t?t+"."+(e.get("end")-e.get("start")):"")+"."+e.get("leaves").size}).join("-")}};e.exports=p},function(e,t,n){"use strict";var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getType=function(){return this.get("type")},t.prototype.getMutability=function(){return this.get("mutability")},t.prototype.getData=function(){return this.get("data")},t}((0,n(35).Record)({type:"TOKEN",mutability:"IMMUTABLE",data:Object}));e.exports=a},function(e,t,n){"use strict";function a(e){var t=d.exec(e);return null==t?null:t[0]}function r(e){var t=a(e);return null==t?i.NEUTRAL:f.exec(t)?i.RTL:i.LTR}function o(e,t){if(t=t||i.NEUTRAL,!e.length)return t;var n=r(e);return n===i.NEUTRAL?t:n}function l(e,t){return t||(t=i.getGlobalDir()),i.isStrong(t)||s(!1),o(e,t)}var i=n(299),s=n(30),u="----------------------",c="------------------------------",d=new RegExp("[A-Za-z-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"+u+c+"]"),f=new RegExp("["+u+c+"]"),p={firstStrongChar:a,firstStrongCharDir:r,resolveBlockDir:o,getDirection:l,isDirectionLTR:function(e,t){return l(e,t)===i.LTR},isDirectionRTL:function(e,t){return l(e,t)===i.RTL}};e.exports=p},function(e,t,n){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}},function(e,t,n){"use strict";e.exports=function(e){var t=e.getSelection(),n=t.getAnchorKey(),a=e.getBlockTree(n),r=t.getStartOffset(),o=!1;return a.some(function(e){return r===e.get("start")?(o=!0,!0):r<e.get("end")&&e.get("leaves").some(function(e){var t=e.get("start");return r===t&&(o=!0,!0)})}),o}},function(e,t,n){"use strict";function a(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t}var r=n(80)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(1331),l=n(197),i=n(0),s=n(37),u=n(621),c=n(304),d=n(616),f=n(299),p=n(140),h=n(1346),m=n(305),v=n(1350),y=n(30),g=n(61),E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||a(e.selection,e.block.getKey())&&e.forceSelection},t.prototype.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n,a=s.findDOMNode(this),r=c.getScrollParent(a),o=m(r);if(r===window){var l=h(a);(n=l.y+l.height-v().height)>0&&window.scrollTo(o.x,o.y+n+10)}else a instanceof HTMLElement||y(!1),(n=a.offsetHeight+a.offsetTop-(r.offsetHeight+o.y))>0&&u.setTop(r,u.getTop(r)+n+10)}},t.prototype._renderChildren=function(){var e=this,t=this.props.block,n=t.getKey(),s=t.getText(),u=this.props.tree.size-1,c=a(this.props.selection,n);return this.props.tree.map(function(a,p){var h=a.get("leaves"),m=h.size-1,v=h.map(function(a,r){var d=l.encode(n,p,r),f=a.get("start"),h=a.get("end");return i.createElement(o,{key:d,offsetKey:d,block:t,start:f,selection:c?e.props.selection:void 0,forceSelection:e.props.forceSelection,text:s.slice(f,h),styleSet:t.getInlineStyleAt(f),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:p===u&&r===m})}).toArray(),y=a.get("decoratorKey");if(null==y)return v;if(!e.props.decorator)return v;var E=g(e.props.decorator),b=E.getComponentForKey(y);if(!b)return v;var _=E.getPropsForKey(y),C=l.encode(n,p,0),w=s.slice(h.first().get("start"),h.last().get("end")),k=f.getHTMLDirIfDifferent(d.getDirection(w),e.props.direction);return i.createElement(b,r({},_,{contentState:e.props.contentState,decoratedText:w,dir:k,key:C,entityKey:t.getEntityAt(a.get("start")),offsetKey:C}),v)}).toArray()},t.prototype.render=function(){var e=this.props,t=e.direction,n=e.offsetKey,a=p({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===t,"public/DraftStyleDefault/rtl":"RTL"===t});return i.createElement("div",{"data-offset-key":n,className:a},this._renderChildren())},t}(i.Component);e.exports=E},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";function a(e,t){return!!t&&(e===t.documentElement||e===t.body)}var r={getTop:function(e){var t=e.ownerDocument;return a(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var n=e.ownerDocument;a(e,n)?n.body.scrollTop=n.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return a(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var n=e.ownerDocument;a(e,n)?n.body.scrollLeft=n.documentElement.scrollLeft=t:e.scrollLeft=t}};e.exports=r},function(e,t,n){"use strict";function a(e){if("file"==e.kind)return e.getAsFile()}var r=n(1353),o=n(1354),l=n(118),i=new RegExp("\r\n","g"),s={"text/rtf":1,"text/html":1},u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.types=t.types?o(t.types):[]}return e.prototype.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some(function(e){return s[e]})},e.prototype.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(i,"\n"):null},e.prototype.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},e.prototype.isLink=function(){return this.types.some(function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")})},e.prototype.getLink=function(){return this.data.getData?-1!=this.types.indexOf("text/x-moz-url")?this.data.getData("text/x-moz-url").split("\n")[0]:-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url"):null},e.prototype.isImage=function(){if(this.types.some(function(e){return-1!=e.indexOf("application/x-moz-file")}))return!0;for(var e=this.getFiles(),t=0;t<e.length;t++){var n=e[t].type;if(!r.isImage(n))return!1}return!0},e.prototype.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},e.prototype.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(a).filter(l.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},e.prototype.hasFiles=function(){return this.getFiles().length>0},e}();e.exports=u},function(e,t,n){"use strict";function a(e){if(e instanceof Element){var t=e.getAttribute("data-offset-key");if(t)return t;for(var n=0;n<e.childNodes.length;n++){var r=a(e.childNodes[n]);if(r)return r}}return null}e.exports=a},function(e,t,n){"use strict";(function(t){var a=n(30),r=/\.textClipping$/,o={"text/plain":!0,"text/html":!0,"text/rtf":!0};e.exports=function(e,n){var l=0,i=[];e.forEach(function(s){!function(e,n){if(t.FileReader&&(!e.type||e.type in o)){if(""===e.type){var l="";return r.test(e.name)&&(l=e.name.replace(r,"")),void n(l)}var i=new FileReader;i.onload=function(){var e=i.result;"string"!=typeof e&&a(!1),n(e)},i.onerror=function(){n("")},i.readAsText(e)}else n("")}(s,function(t){l++,t&&i.push(t.slice(0,5e3)),l==e.length&&n(i.join("\r"))})})}}).call(t,n(40))},function(e,t,n){"use strict";var a=n(197),r=n(61);e.exports=function(e,t,n,o,l){var i=r(e.getSelection()),s=a.decode(t),u=s.blockKey,c=e.getBlockTree(u).getIn([s.decoratorKey,"leaves",s.leafKey]),d=a.decode(o),f=d.blockKey,p=e.getBlockTree(f).getIn([d.decoratorKey,"leaves",d.leafKey]),h=c.get("start"),m=p.get("start"),v=c?h+n:null,y=p?m+l:null;if(i.getAnchorKey()===u&&i.getAnchorOffset()===v&&i.getFocusKey()===f&&i.getFocusOffset()===y)return i;var g=!1;if(u===f){var E=c.get("end"),b=p.get("end");g=m===h&&b===E?l<n:m<h}else g=e.getCurrentContent().getBlockMap().keySeq().skipUntil(function(e){return e===u||e===f}).first()===f;return i.merge({anchorKey:u,anchorOffset:v,focusKey:f,focusOffset:y,isBackward:g})}},function(e,t,n){"use strict";var a=n(195);e.exports=function(e){var t=e.getSelection();return t.isCollapsed()?null:a(e.getCurrentContent(),t)}},function(e,t,n){"use strict";var a=n(74),r=n(30),o=a.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),n=[],a=e.endContainer;null!=a;a=a.parentNode){var o=a===e.commonAncestorContainer;o?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var l=Array.from(t.getClientRects());if(n.push(l),o){var i;return n.reverse(),(i=[]).concat.apply(i,n)}t.setEndBefore(a)}r(!1)}:function(e){return Array.from(e.getClientRects())};e.exports=o},function(e,t,n){"use strict";function a(e,t,n){var a=t,i=o(a);if(null!=i||e&&(e===a||e.firstChild===a)||s(!1),e===a&&((a=a.firstChild)instanceof Element&&"true"===a.getAttribute("data-contents")||s(!1),n>0&&(n=a.childNodes.length)),0===n){var c=null;if(null!=i)c=i;else{var d=function(e){for(;e.firstChild&&l(e.firstChild);)e=e.firstChild;return e}(a);c=u(l(d))}return{key:c,offset:0}}var f=a.childNodes[n-1],p=null,h=null;if(l(f)){var m=function(e){for(;e.lastChild&&l(e.lastChild);)e=e.lastChild;return e}(f);p=u(l(m)),h=r(m)}else p=u(i),h=r(f);return{key:p,offset:h}}function r(e){var t=e.textContent;return"\n"===t?0:t.length}var o=n(306),l=n(623),i=n(625),s=n(30),u=n(61);e.exports=function(e,t,n,r,l,s){var c=n.nodeType===Node.TEXT_NODE,d=l.nodeType===Node.TEXT_NODE;if(c&&d)return{selectionState:i(e,u(o(n)),r,u(o(l)),s),needsRecovery:!1};var f=null,p=null,h=!0;return c?(f={key:u(o(n)),offset:r},p=a(t,l,s)):d?(p={key:u(o(l)),offset:s},f=a(t,n,r)):(f=a(t,n,r),p=a(t,l,s),n===l&&r===s&&(h=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:i(e,f.key,f.offset,p.key,p.offset),needsRecovery:h}}},function(e,t,n){"use strict";function a(e,t){var n=t?s.exec(e):l.exec(e);return n?n[0]:e}var r="\\s|(?![_])"+n(1373).getPunctuation(),o="^(?:"+r+")*(?:[']|(?!"+r+").)*(?:(?!"+r+").)",l=new RegExp(o),i="(?:(?!"+r+").)(?:[']|(?!"+r+").)*(?:"+r+")*$",s=new RegExp(i),u={getBackward:function(e){return a(e,!0)},getForward:function(e){return a(e,!1)}};e.exports=u},function(e,t,n){"use strict";e.exports=function(e,t){var n,a=e.getSelection(),r=a.getStartKey(),o=a.getStartOffset(),l=e.getCurrentContent(),i=r;return t>l.getBlockForKey(r).getText().length-o?(i=l.getKeyAfter(r),n=0):n=o+t,a.merge({focusKey:i,focusOffset:n})}},function(e,t,n){"use strict";function a(){return{text:"\n",inlines:[S()],entities:new Array(1),blocks:[]}}function r(e,t){return{text:"\r",inlines:[S()],entities:new Array(1),blocks:[{type:e,depth:Math.max(0,Math.min(T,t))}]}}function o(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null}function l(e,t,n){var a=n.filter(function(t){return t.element===e||t.wrapper===e||t.aliasedElements&&t.aliasedElements.some(function(t){return t===e})}).keySeq().toSet().toArray().sort();switch(a.length){case 0:return"unstyled";case 1:return a[0];default:return function(e,t,n){for(var a=0;a<n.length;a++){var r=n[a](e,t);if(r)return r}return null}(e,t,[o])||"unstyled"}}function i(e,t){var n=e.text.slice(-1),a=t.text.slice(0,1);if("\r"===n&&"\r"===a&&(e.text=e.text.slice(0,-1),e.inlines.pop(),e.entities.pop(),e.blocks.pop()),"\r"===n){if(t.text===x||"\n"===t.text)return e;a!==x&&"\n"!==a||(t.text=t.text.slice(1),t.inlines.shift(),t.entities.shift())}return{text:e.text+t.text,inlines:e.inlines.concat(t.inlines),entities:e.entities.concat(t.entities),blocks:e.blocks.concat(t.blocks)}}function s(e){e instanceof HTMLAnchorElement||_(!1);var t=e.protocol;return"http:"===t||"https:"===t||"mailto:"===t}function u(e,t,n,o,c,f,p,h,v){var y=t.nodeName.toLowerCase(),E=!1,b="unstyled",_=d,C=e;if("#text"===y){var w=t.textContent;return""===w.trim()&&"pre"!==c?{chunk:function(e){var t=new Array(1);return e&&(t[0]=e),{text:x,inlines:[S()],entities:t,blocks:[]}}(v),entityMap:e}:("pre"!==c&&(w=w.replace(R,x)),d=y,{chunk:{text:w,inlines:Array(w.length).fill(n),entities:Array(w.length).fill(v),blocks:[]},entityMap:e})}if(d=y,"br"===y)return"br"!==_||c&&"unstyled"!==l(c,o,h)?{chunk:a(),entityMap:e}:{chunk:r("unstyled",p),entityMap:e};if("img"===y&&t instanceof HTMLImageElement&&t.attributes.getNamedItem("src")&&t.attributes.getNamedItem("src").value){var k=t,T={};L.forEach(function(e){var t=k.getAttribute(e);t&&(T[e]=t)}),t.textContent="",v=m.__create("IMAGE","MUTABLE",T||{})}var P={text:"",inlines:[],entities:[],blocks:[]};n=function(e,t,n){var a=A[e];if(a)n=n.add(a).toOrderedSet();else if(t instanceof HTMLElement){var r=t;n=n.withMutations(function(e){var t=r.style.fontWeight,n=r.style.fontStyle,a=r.style.textDecoration;I.indexOf(t)>=0?e.add("BOLD"):M.indexOf(t)>=0&&e.remove("BOLD"),"italic"===n?e.add("ITALIC"):"normal"===n&&e.remove("ITALIC"),"underline"===a&&e.add("UNDERLINE"),"line-through"===a&&e.add("STRIKETHROUGH"),"none"===a&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}).toOrderedSet()}return n}(y,t,n),"ul"!==y&&"ol"!==y||(o&&(p+=1),o=y),c||-1===f.indexOf(y)?o&&"li"===c&&"li"===y&&(P=r(l(y,o,h),p),c=y,E=!0,b="ul"===o?"unordered-list-item":"ordered-list-item"):(P=r(l(y,o,h),p),c=y,E=!0);var O=t.firstChild;null!=O&&(y=O.nodeName.toLowerCase());for(var D=null;O;){O instanceof HTMLAnchorElement&&O.href&&s(O)?function(){var e=O,t={};F.forEach(function(n){var a=e.getAttribute(n);a&&(t[n]=a)}),t.url=new g(e.href).toString(),D=m.__create("LINK","MUTABLE",t||{})}():D=void 0;var N=u(C,O,n,o,c,f,p,h,D||v),j=N.chunk;C=N.entityMap,P=i(P,j);var B=O.nextSibling;B&&f.indexOf(y)>=0&&c&&(P=i(P,a())),B&&(y=B.nodeName.toLowerCase()),O=B}return E&&(P=i(P,r(b,p))),{chunk:P,entityMap:C}}function c(e,t,n,a){e=e.trim().replace(P,"").replace(O,x).replace(D,"").replace(N,"");var r=function(e){var t=e.get("unstyled").element,n=y([]);return e.forEach(function(e){e.aliasedElements&&e.aliasedElements.forEach(function(e){n=n.add(e)}),n=n.add(e.element)}),n.filter(function(e){return e&&e!==t}).toArray().sort()}(n),o=t(e);if(!o)return null;d=null;var l=function(e,t){return t.some(function(t){return-1!==e.indexOf("<"+t)})}(e,r)?r:["div"],i=u(a,o,S(),"ul",null,l,-1,n),s=i.chunk,c=i.entityMap;return 0===s.text.indexOf("\r")&&(s={text:s.text.slice(1),inlines:s.inlines.slice(1),entities:s.entities.slice(1),blocks:s.blocks}),"\r"===s.text.slice(-1)&&(s.text=s.text.slice(0,-1),s.inlines=s.inlines.slice(0,-1),s.entities=s.entities.slice(0,-1),s.blocks.pop()),0===s.blocks.length&&s.blocks.push({type:"unstyled",depth:0}),s.text.split("\r").length===s.blocks.length+1&&s.blocks.unshift({type:"unstyled",depth:0}),{chunk:s,entityMap:c}}var d,f=n(65),p=n(101),h=n(300),m=n(196),v=n(35),y=n(35).Set,g=n(1384),E=n(73),b=n(632),_=n(30),C=n(61),w=n(298),k=v.List,S=v.OrderedSet,x=" ",T=4,P=new RegExp("\r","g"),R=new RegExp("\n","g"),O=new RegExp("&nbsp;","g"),D=new RegExp("&#13;?","g"),N=new RegExp("&#8203;?","g"),I=["bold","bolder","500","600","700","800","900"],M=["light","lighter","100","200","300","400"],A={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},F=["className","href","rel","target","title"],L=["alt","className","height","src","width"];e.exports=function(e){var t=c(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,m);if(null==t)return null;var n=t.chunk,a=t.entityMap,r=0;return{contentBlocks:n.text.split("\r").map(function(e,t){e=w(e);var a=r+e.length,o=C(n).inlines.slice(r,a),l=C(n).entities.slice(r,a),i=k(o.map(function(e,t){var n={style:e,entity:null};return l[t]&&(n.entity=l[t]),f.create(n)}));return r=a+1,new p({key:E(),type:C(n).blocks[t].type,depth:C(n).blocks[t].depth,text:e,characterList:i})}),entityMap:a}}},function(e,t,n){"use strict";var a=n(74),r=n(30),o=a.isBrowser("IE <= 9");e.exports=function(e){var t,n=null;return!o&&document.implementation&&document.implementation.createHTMLDocument&&((t=document.implementation.createHTMLDocument("foo")).documentElement||r(!1),t.documentElement.innerHTML=e,n=t.getElementsByTagName("body")[0]),n}},function(e,t,n){"use strict";var a=n(57),r=n(34),o=(n(139),n(1385)),l=n(61),i={currentBlockContainsLink:function(e){var t=e.getSelection(),n=e.getCurrentContent(),a=n.getEntityMap();return n.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some(function(e){var t=e.getEntity();return!!t&&"LINK"===a.__get(t).getType()})},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t){switch(t){case"bold":return i.toggleInlineStyle(e,"BOLD");case"italic":return i.toggleInlineStyle(e,"ITALIC");case"underline":return i.toggleInlineStyle(e,"UNDERLINE");case"code":return i.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return i.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return i.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=a.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=r.push(e,t,"insert-characters");return r.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),a=t.getStartKey(),o=n.getBlockBefore(a);if(o&&"atomic"===o.getType()){var l=n.getBlockMap().delete(o.getKey()),s=n.merge({blockMap:l,selectionAfter:t});if(s!==n)return r.push(e,s,"remove-range")}var u=i.tryToRemoveBlockStyle(e);return u?r.push(e,u,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),o=t.getStartKey(),l=n.getBlockForKey(o).getLength();if(t.getStartOffset()<l)return null;var i=n.getBlockAfter(o);if(!i||"atomic"!==i.getType())return null;var s=t.merge({focusKey:i.getKey(),focusOffset:i.getLength()}),u=a.removeRange(n,s,"forward");return u!==n?r.push(e,u,"remove-range"):null},onTab:function(e,t,n){var a=t.getSelection(),l=a.getAnchorKey();if(l!==a.getFocusKey())return t;var i=t.getCurrentContent(),s=i.getBlockForKey(l),u=s.getType();if("unordered-list-item"!==u&&"ordered-list-item"!==u)return t;e.preventDefault();var c=i.getBlockBefore(l);if(!c)return t;var d=c.getType();if("unordered-list-item"!==d&&"ordered-list-item"!==d)return t;var f=s.getDepth();if(!e.shiftKey&&f===n)return t;n=Math.min(c.getDepth()+1,n);var p=o(i,a,e.shiftKey?-1:1,n);return r.push(t,p,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),o=n.getStartKey(),i=n.getEndKey(),s=e.getCurrentContent(),u=n;if(o!==i&&0===n.getEndOffset()){var c=l(s.getBlockBefore(i));i=c.getKey(),u=u.merge({anchorKey:o,anchorOffset:n.getStartOffset(),focusKey:i,focusOffset:c.getLength(),isBackward:!1})}if(s.getBlockMap().skipWhile(function(e,t){return t!==o}).reverse().skipWhile(function(e,t){return t!==i}).some(function(e){return"atomic"===e.getType()}))return e;var d=s.getBlockForKey(o).getType()===t?"unstyled":t;return r.push(e,a.setBlockType(s,u,d),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),a=t.getFocusKey();return t.isCollapsed()||n!==a?i.toggleBlockType(e,"code-block"):i.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),o=e.getCurrentInlineStyle();if(n.isCollapsed())return r.setInlineStyleOverride(e,o.has(t)?o.remove(t):o.add(t));var l,i=e.getCurrentContent();return l=o.has(t)?a.removeInlineStyle(i,n,t):a.applyInlineStyle(i,n,t),r.push(e,l,"change-inline-style")},toggleLink:function(e,t,n){var o=a.applyEntity(e.getCurrentContent(),t,n);return r.push(e,o,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var r=t.getAnchorKey(),o=e.getCurrentContent(),l=o.getBlockForKey(r),i=o.getFirstBlock();if(l.getLength()>0&&l!==i)return null;var s=l.getType(),u=o.getBlockBefore(r);if("code-block"===s&&u&&"code-block"===u.getType())return null;if("unstyled"!==s)return a.setBlockType(o,t,"unstyled")}return null}};e.exports=i},function(e,t,n){"use strict";function a(e){return i&&e.altKey||d(e)}var r=n(307),o=n(301),l=n(74),i=l.isPlatform("Mac OS X"),s=l.isPlatform("Windows"),u=i&&l.isBrowser("Firefox < 29"),c=r.hasCommandModifier,d=r.isCtrlKeyCommand;e.exports=function(e){switch(e.keyCode){case 66:return c(e)?"bold":null;case 68:return d(e)?"delete":null;case 72:return d(e)?"backspace":null;case 73:return c(e)?"italic":null;case 74:return c(e)?"code":null;case 75:return!s&&d(e)?"secondary-cut":null;case 77:case 79:return d(e)?"split-block":null;case 84:return i&&d(e)?"transpose-characters":null;case 85:return c(e)?"underline":null;case 87:return i&&d(e)?"backspace-word":null;case 89:return d(e)?s?"redo":"secondary-paste":null;case 90:return function(e){return c(e)?e.shiftKey?"redo":"undo":null}(e)||null;case o.RETURN:return"split-block";case o.DELETE:return function(e){return s&&e.shiftKey?null:a(e)?"delete-word":"delete"}(e);case o.BACKSPACE:return function(e){return c(e)&&i?"backspace-to-start-of-line":a(e)?"backspace-word":"backspace"}(e);case o.LEFT:return u&&c(e)?"move-selection-to-start-of-block":null;case o.RIGHT:return u&&c(e)?"move-selection-to-end-of-block":null;default:return null}}},function(e,t,n){"use strict";var a={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}};e.exports=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=a(n(0)),o=a(n(37)),l=n(704),i=a(n(709)),s=a(n(717)),u=function(e){var t=e.error;return r.default.createElement(i.default,{error:t})};u.propTypes={error:r.default.PropTypes.instanceOf(Error).isRequired},function(e){o.default.render(r.default.createElement(l.AppContainer,{errorReporter:u},r.default.createElement(e,null)),document.getElementById("react"))}(s.default)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(705)},function(e,t,n){"use strict";e.exports=n(706)},function(e,t,n){"use strict";e.exports.AppContainer=n(707)},function(e,t,n){"use strict";e.exports=n(708)},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=r.Component,l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),a(t,[{key:"render",value:function(){return this.props.component?r.createElement(this.props.component,this.props.props):r.Children.only(this.props.children)}}]),t}();e.exports=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){if(void 0===x||void 0===x[e])return function(e){switch(e){case"PropTypes":return m.default;case"mapStackTrace":return w.mapStackTrace;case"assign":return _.default;case"style":return E.default;case"isFilenameAbsolute":return C.isFilenameAbsolute;case"makeUrl":return C.makeUrl;case"makeLinkText":return C.makeLinkText;case"ErrorStackParser":return b.default;case"Component":return v.Component;case"ReactDOM":return g.default;case"React":return y.default;case"RedBoxError":return k}}(e);var t=x[e];return t===T?void 0:t}function s(e,t){if("object"!==(void 0===e?"undefined":f(e)))return x[e]=void 0===t?T:t,function(){u(e)};Object.keys(e).forEach(function(t){x[t]=e[t]})}function u(e){delete x[e]}function c(e){function t(){n.forEach(function(e){x[e]=a[e]})}var n=Object.keys(e),a={};return function(r){n.forEach(function(t){a[t]=x[t],x[t]=e[t]});var o=r();return o&&"function"==typeof o.then?o.then(t).catch(t):t(),o}}function d(e,t){Object.defineProperty(S,e,{value:t,enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),t.__RewireAPI__=t.__ResetDependency__=t.__set__=t.__Rewire__=t.__GetDependency__=t.__get__=t.RedBoxError=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=a(n(117)),v=n(0),y=a(v),g=a(n(37)),E=a(n(712)),b=a(n(713)),_=a(n(80)),C=n(715),w=n(716),k=t.RedBoxError=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={error:null,mapped:!1},n.mapOnConstruction(e.error),n}return l(t,i("Component")),h(t,[{key:"componentDidMount",value:function(){this.state.mapped||this.mapError(this.props.error)}},{key:"mapOnConstruction",value:function(e){var t=e.stack.split("\n");if(t.length<2)this.state={error:e,mapped:!0};else if(-1!==t[1].search(/\(webpack:\/{3}/))this.state={error:e,mapped:!0};else if(-1!==t[1].search(/\(eval at/)){var n=[t.shift()],a=!0,r=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value,u=s.match(/(.+)\(eval at (.+) \(.+?\), .+(\:[0-9]+\:[0-9]+)\)/);if(u){var c=p(u,4),d=c[1],f=c[2],h=c[3];n.push(d+" ("+f+h+")")}else n.push(s)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}e.stack=n.join("\n"),this.state={error:e,mapped:!0}}else this.state={error:e,mapped:!1}}},{key:"mapError",value:function(e){var t=this;i("mapStackTrace")(e.stack,function(n){e.stack=n.join("\n"),t.setState({error:e,mapped:!0})})}},{key:"renderFrames",value:function(e){var t=this.props,n=t.filename,a=t.editorScheme,r=t.useLines,o=t.useColumns,l=i("assign")({},i("style"),this.props.style),s=l.frame,u=l.file,c=l.linkToFile;return e.map(function(e,t){var l=void 0,d=void 0;if(0===t&&n&&!i("isFilenameAbsolute")(e.fileName))d=i("makeUrl")(n,a),l=i("makeLinkText")(n);else{var f=r?e.lineNumber:null,p=o?e.columnNumber:null;d=i("makeUrl")(e.fileName,a,f,p),l=i("makeLinkText")(e.fileName,f,p)}return i("React").createElement("div",{style:s,key:t},i("React").createElement("div",null,e.functionName),i("React").createElement("div",{style:u},i("React").createElement("a",{href:d,style:c},l)))})}},{key:"render",value:function(){var e=this.state.error,t=this.props.className,n=i("assign")({},i("style"),this.props.style),a=n.redbox,r=n.message,o=n.stack,l=n.frame,s=void 0,u=void 0;try{s=i("ErrorStackParser").parse(e)}catch(e){u=new Error("Failed to parse stack trace. Stack trace information unavailable.")}return s=u?i("React").createElement("div",{style:l,key:0},i("React").createElement("div",null,u.message)):this.renderFrames(s),i("React").createElement("div",{style:a,className:t},i("React").createElement("div",{style:r},e.name,": ",e.message),i("React").createElement("div",{style:o},s))}}]),t}();k.propTypes={error:i("PropTypes").instanceOf(Error).isRequired,filename:i("PropTypes").string,editorScheme:i("PropTypes").string,useLines:i("PropTypes").bool,useColumns:i("PropTypes").bool,style:i("PropTypes").object,className:i("PropTypes").string},k.displayName="RedBoxError",k.defaultProps={useLines:!0,useColumns:!0};var S=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,i("Component")),h(t,[{key:"componentDidMount",value:function(){this.el=document.createElement("div"),document.body.appendChild(this.el),this.renderRedBoxError()}},{key:"componentDidUpdate",value:function(){this.renderRedBoxError()}},{key:"componentWillUnmount",value:function(){i("ReactDOM").unmountComponentAtNode(this.el),document.body.removeChild(this.el),this.el=null}},{key:"renderRedBoxError",value:function(){i("ReactDOM").render(i("React").createElement(i("RedBoxError"),this.props),this.el)}},{key:"render",value:function(){return null}}]),t}();S.propTypes={error:i("PropTypes").instanceOf(Error).isRequired},S.displayName="RedBox",t.default=S;var x=Object.create(null),T="__INTENTIONAL_UNDEFINED__",P={};!function(){function e(e,t){Object.defineProperty(P,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",i),e("__GetDependency__",i),e("__Rewire__",s),e("__set__",s),e("__reset__",u),e("__ResetDependency__",u),e("__with__",c)}();var R=void 0===S?"undefined":f(S);"object"!==R&&"function"!==R||!Object.isExtensible(S)||(d("__get__",i),d("__GetDependency__",i),d("__Rewire__",s),d("__set__",s),d("__reset__",u),d("__ResetDependency__",u),d("__with__",c),d("__RewireAPI__",P)),t.__get__=i,t.__GetDependency__=i,t.__Rewire__=s,t.__set__=s,t.__ResetDependency__=u,t.__RewireAPI__=P},function(e,t,n){"use strict";var a=n(118),r=n(30),o=n(711);e.exports=function(){function e(e,t,n,a,l,i){i!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={redbox:{boxSizing:"border-box",fontFamily:"sans-serif",position:"fixed",padding:10,top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%",background:"rgb(204, 0, 0)",color:"white",zIndex:2147483647,textAlign:"left",fontSize:"16px",lineHeight:1.2,overflow:"auto"},message:{fontWeight:"bold"},stack:{fontFamily:"monospace",marginTop:"2em"},frame:{marginTop:"1em"},file:{fontSize:"0.8em",color:"rgba(255, 255, 255, 0.7)"},linkToFile:{textDecoration:"none",color:"rgba(255, 255, 255, 0.7)"}}},function(e,t,n){var a,r,o;!function(l,i){"use strict";r=[n(714)],void 0===(o="function"==typeof(a=i)?a.apply(t,r):a)||(e.exports=o)}(0,function(e){"use strict";function t(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var a=new Array(e.length),r=0;r<e.length;r++)a[r]=t.call(n,e[r]);return a}function n(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var a=[],r=0;r<e.length;r++)t.call(n,e[r])&&a.push(e[r]);return a}var a=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,o=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(a){return t(n(a.stack.split("\n"),function(e){return!!e.match(r)},this),function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),a=this.extractLocation(n.pop()),r=n.join(" ")||void 0,o=function(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}(["eval","<anonymous>"],a[0])>-1?void 0:a[0];return new e(r,void 0,o,a[1],a[2],t)},this)},parseFFOrSafari:function(a){return t(n(a.stack.split("\n"),function(e){return!e.match(o)},this),function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var n=t.split("@"),a=this.extractLocation(n.pop()),r=n.join("@")||void 0;return new e(r,void 0,a[0],a[1],a[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,a=t.message.split("\n"),r=[],o=2,l=a.length;o<l;o+=2){var i=n.exec(a[o]);i&&r.push(new e(void 0,void 0,i[2],i[1],void 0,a[o]))}return r},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,a=t.stacktrace.split("\n"),r=[],o=0,l=a.length;o<l;o+=2){var i=n.exec(a[o]);i&&r.push(new e(i[3]||void 0,void 0,i[2],i[1],void 0,a[o]))}return r},parseOpera11:function(r){return t(n(r.stack.split("\n"),function(e){return!!e.match(a)&&!e.match(/^Error created at/)},this),function(t){var n,a=t.split("@"),r=this.extractLocation(a.pop()),o=a.shift()||"",l=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var i=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(l,i,r[0],r[1],r[2],t)},this)}}})},function(e,t,n){var a,r,o;!function(n,l){"use strict";r=[],void 0===(o="function"==typeof(a=l)?a.apply(t,r):a)||(e.exports=o)}(0,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,a,r,o){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==a&&this.setLineNumber(a),void 0!==r&&this.setColumnNumber(r),void 0!==o&&this.setSource(o)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})},function(e,t,n){"use strict";function a(e){if(void 0===c||void 0===c[e])return function(e){switch(e){case"filenameWithoutLoaders":return s;case"filenameHasSchema":return u}}(e);var t=c[e];return t===d?void 0:t}function r(e,t){if("object"!==(void 0===e?"undefined":i(e)))return c[e]=void 0===t?d:t,function(){o(e)};Object.keys(e).forEach(function(t){c[t]=e[t]})}function o(e){delete c[e]}function l(e){function t(){n.forEach(function(e){c[e]=a[e]})}var n=Object.keys(e),a={};return function(r){n.forEach(function(t){a[t]=c[t],c[t]=e[t]});var o=r();return o&&"function"==typeof o.then?o.then(t).catch(t):t(),o}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=t.filenameWithoutLoaders=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.lastIndexOf("!");return t<0?e:e.substr(t+1)},u=(t.filenameHasLoaders=function(e){return a("filenameWithoutLoaders")(e)!==e},t.filenameHasSchema=function(e){return/^[\w]+\:/.test(e)}),c=(t.isFilenameAbsolute=function(e){return 0===a("filenameWithoutLoaders")(e).indexOf("/")},t.makeUrl=function(e,t,n,r){var o=a("filenameWithoutLoaders")(e);if(a("filenameHasSchema")(e))return o;var l="file://"+o;return t&&(l=t+"://open?url="+l,n&&o===e&&(l=l+"&line="+n,r&&(l=l+"&column="+r))),l},t.makeLinkText=function(e,t,n){var r=a("filenameWithoutLoaders")(e);return t&&r===e&&(r=r+":"+t,n&&(r=r+":"+n)),r},Object.create(null)),d="__INTENTIONAL_UNDEFINED__",f={};!function(){function e(e,t){Object.defineProperty(f,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",a),e("__GetDependency__",a),e("__Rewire__",r),e("__set__",r),e("__reset__",o),e("__ResetDependency__",o),e("__with__",l)}(),t.__get__=a,t.__GetDependency__=a,t.__Rewire__=r,t.__set__=r,t.__ResetDependency__=o,t.__RewireAPI__=f,t.default=f},function(e,t,n){!function(t,n){e.exports=function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var a,r;a=[n(1)],void 0===(r=function(e){function t(e){var t=String(e).match(r()||i()?/ +at +([^ ]*).*/:/([^@]*)@.*/);return t&&t[1]}function n(){for(var e=!1,t=0;t<f.length;t++){try{e=f[t]()}catch(e){continue}break}return e}var a={},r=function(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1},o=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},l=function(){return navigator.userAgent.toLowerCase().indexOf("safari")>-1},i=function(){return document.documentMode&&document.documentMode>=11},s=function(e,t){this.sem=0,this.mapForUri=t&&t.cacheGlobally?a:{},this.done=e};s.prototype.fetchScript=function(e){if(!(e in this.mapForUri)){this.sem++,this.mapForUri[e]=null;var t=n(),a=this;t.onreadystatechange=function(t){a.onScriptLoad.call(a,t,e)},t.open("GET",e,!0),t.send()}};var u=new RegExp("^(?:[a-z]+:)?//","i");s.prototype.onScriptLoad=function(t,a){if(4===t.target.readyState){if(200===t.target.status||"file://"===a.slice(0,7)&&0===t.target.status){var r=t.target.responseText.match("//# [s]ourceMappingURL=(.*)[\\s]*$","m");if(r&&2===r.length){var o=r[1],l=o.match("data:application/json;(charset=[^;]+;)?base64,(.*)");if(l&&l[2])this.mapForUri[a]=new e.SourceMapConsumer(atob(l[2])),this.done(this.mapForUri);else{if(!u.test(o)){var i,s=a.lastIndexOf("/");-1!==s&&(i=a.slice(0,s+1),o=i+o)}var c=n(),d=this;c.onreadystatechange=function(){4===c.readyState&&(d.sem--,(200===c.status||"file://"===o.slice(0,7)&&0===c.status)&&(d.mapForUri[a]=new e.SourceMapConsumer(c.responseText)),0===d.sem&&d.done(d.mapForUri))},c.open("GET",o,!0),c.send()}}else this.sem--}else this.sem--;0===this.sem&&this.done(this.mapForUri)}};var c=function(e,n,a){for(var r,o=[],l=0;l<e.length;l++){var i=n[l];if(i){var s=i[1],u=parseInt(i[2],10),c=parseInt(i[3],10);if(r=a[s]){var f=r.originalPositionFor({line:u,column:c});o.push(d(f.source,f.line,f.column,f.name||t(e[l])))}else o.push(d(s,u,c,t(e[l])))}else o.push(e[l])}return o},d=function(e,t,n,a){return"    at "+(a||"(unknown)")+" ("+e+":"+t+":"+n+")"},f=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return{mapStackTrace:function(e,t,n){var a,u,d,f,p,h,m,v={},y=new s(function(){var e=c(a,v,y.mapForUri);t(e)},n);if(r()||i())h=/^ +at.+\((.*):([0-9]+):([0-9]+)/,p=4,m=1;else{if(!o()&&!l())throw new Error("unknown browser :(");h=/@(.*):([0-9]+):([0-9]+)/,p=4,m=0}a=e.split("\n").slice(m);for(var g=0;g<a.length;g++)u=a[g],n&&n.filter&&!n.filter(u)||(d=u.match(h))&&d.length===p&&(v[g]=d,(f=d[1]).match(/<anonymous>/)||y.fetchScript(f));0===y.sem&&y.done(y.mapForUri)}}}.apply(t,a))||(e.exports=r)},function(e,t,n){function a(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new l(t):new r(t)}function r(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=i.getArg(t,"version"),a=i.getArg(t,"sources"),r=i.getArg(t,"names",[]),o=i.getArg(t,"sourceRoot",null),l=i.getArg(t,"sourcesContent",null),s=i.getArg(t,"mappings"),c=i.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a=a.map(String).map(i.normalize).map(function(e){return o&&i.isAbsolute(o)&&i.isAbsolute(e)?i.relative(o,e):e}),this._names=u.fromArray(r.map(String),!0),this._sources=u.fromArray(a,!0),this.sourceRoot=o,this.sourcesContent=l,this._mappings=s,this.file=c}function o(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function l(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=i.getArg(t,"version"),r=i.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new u,this._names=new u;var o={line:-1,column:0};this._sections=r.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=i.getArg(e,"offset"),n=i.getArg(t,"line"),r=i.getArg(t,"column");if(n<o.line||n===o.line&&r<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=t,{generatedOffset:{generatedLine:n+1,generatedColumn:r+1},consumer:new a(i.getArg(e,"map"))}})}var i=n(2),s=n(3),u=n(4).ArraySet,c=n(5),d=n(7).quickSort;a.fromSourceMap=function(e){return r.fromSourceMap(e)},a.prototype._version=3,a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),a.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},a.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.GREATEST_LOWER_BOUND=1,a.LEAST_UPPER_BOUND=2,a.prototype.eachMapping=function(e,t,n){var r,o=t||null;switch(n||a.GENERATED_ORDER){case a.GENERATED_ORDER:r=this._generatedMappings;break;case a.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;r.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=l&&(t=i.join(l,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,o)},a.prototype.allGeneratedPositionsFor=function(e){var t=i.getArg(e,"line"),n={source:i.getArg(e,"source"),originalLine:t,originalColumn:i.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=i.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var a=[],r=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,s.LEAST_UPPER_BOUND);if(r>=0){var o=this._originalMappings[r];if(void 0===e.column)for(var l=o.originalLine;o&&o.originalLine===l;)a.push({line:i.getArg(o,"generatedLine",null),column:i.getArg(o,"generatedColumn",null),lastColumn:i.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++r];else for(var u=o.originalColumn;o&&o.originalLine===t&&o.originalColumn==u;)a.push({line:i.getArg(o,"generatedLine",null),column:i.getArg(o,"generatedColumn",null),lastColumn:i.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++r]}return a},t.SourceMapConsumer=a,(r.prototype=Object.create(a.prototype)).consumer=a,r.fromSourceMap=function(e){var t=Object.create(r.prototype),n=t._names=u.fromArray(e._names.toArray(),!0),a=t._sources=u.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var l=e._mappings.toArray().slice(),s=t.__generatedMappings=[],c=t.__originalMappings=[],f=0,p=l.length;f<p;f++){var h=l[f],m=new o;m.generatedLine=h.generatedLine,m.generatedColumn=h.generatedColumn,h.source&&(m.source=a.indexOf(h.source),m.originalLine=h.originalLine,m.originalColumn=h.originalColumn,h.name&&(m.name=n.indexOf(h.name)),c.push(m)),s.push(m)}return d(t.__originalMappings,i.compareByOriginalPositions),t},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?i.join(this.sourceRoot,e):e},this)}}),r.prototype._parseMappings=function(e,t){for(var n,a,r,l,s,u=1,f=0,p=0,h=0,m=0,v=0,y=e.length,g=0,E={},b={},_=[],C=[];g<y;)if(";"===e.charAt(g))u++,g++,f=0;else if(","===e.charAt(g))g++;else{for((n=new o).generatedLine=u,l=g;l<y&&!this._charIsMappingSeparator(e,l);l++);if(a=e.slice(g,l),r=E[a])g+=a.length;else{for(r=[];g<l;)c.decode(e,g,b),s=b.value,g=b.rest,r.push(s);if(2===r.length)throw new Error("Found a source, but no line and column");if(3===r.length)throw new Error("Found a source and line, but no column");E[a]=r}n.generatedColumn=f+r[0],f=n.generatedColumn,r.length>1&&(n.source=m+r[1],m+=r[1],n.originalLine=p+r[2],p=n.originalLine,n.originalLine+=1,n.originalColumn=h+r[3],h=n.originalColumn,r.length>4&&(n.name=v+r[4],v+=r[4])),C.push(n),"number"==typeof n.originalLine&&_.push(n)}d(C,i.compareByGeneratedPositionsDeflated),this.__generatedMappings=C,d(_,i.compareByOriginalPositions),this.__originalMappings=_},r.prototype._findMapping=function(e,t,n,a,r,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[a]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[a]);return s.search(e,t,r,o)},r.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},r.prototype.originalPositionFor=function(e){var t={generatedLine:i.getArg(e,"line"),generatedColumn:i.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",i.compareByGeneratedPositionsDeflated,i.getArg(e,"bias",a.GREATEST_LOWER_BOUND));if(n>=0){var r=this._generatedMappings[n];if(r.generatedLine===t.generatedLine){var o=i.getArg(r,"source",null);null!==o&&(o=this._sources.at(o),null!=this.sourceRoot&&(o=i.join(this.sourceRoot,o)));var l=i.getArg(r,"name",null);return null!==l&&(l=this._names.at(l)),{source:o,line:i.getArg(r,"originalLine",null),column:i.getArg(r,"originalColumn",null),name:l}}}return{source:null,line:null,column:null,name:null}},r.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},r.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=i.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=i.urlParse(this.sourceRoot))){var a=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(e){var t=i.getArg(e,"source");if(null!=this.sourceRoot&&(t=i.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var n={source:t=this._sources.indexOf(t),originalLine:i.getArg(e,"line"),originalColumn:i.getArg(e,"column")},r=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,i.getArg(e,"bias",a.GREATEST_LOWER_BOUND));if(r>=0){var o=this._originalMappings[r];if(o.source===n.source)return{line:i.getArg(o,"generatedLine",null),column:i.getArg(o,"generatedColumn",null),lastColumn:i.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},t.BasicSourceMapConsumer=r,(l.prototype=Object.create(a.prototype)).constructor=a,l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),l.prototype.originalPositionFor=function(e){var t={generatedLine:i.getArg(e,"line"),generatedColumn:i.getArg(e,"column")},n=s.search(t,this._sections,function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn}),a=this._sections[n];return a?a.consumer.originalPositionFor({line:t.generatedLine-(a.generatedOffset.generatedLine-1),column:t.generatedColumn-(a.generatedOffset.generatedLine===t.generatedLine?a.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},l.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var a=this._sections[n].consumer.sourceContentFor(e,!0);if(a)return a}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(i.getArg(e,"source"))){var a=n.consumer.generatedPositionFor(e);if(a)return{line:a.line+(n.generatedOffset.generatedLine-1),column:a.column+(n.generatedOffset.generatedLine===a.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},l.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var a=this._sections[n],r=a.consumer._generatedMappings,o=0;o<r.length;o++){var l=r[o],s=a.consumer._sources.at(l.source);null!==a.consumer.sourceRoot&&(s=i.join(a.consumer.sourceRoot,s)),this._sources.add(s),s=this._sources.indexOf(s);var u=a.consumer._names.at(l.name);this._names.add(u),u=this._names.indexOf(u);var c={source:s,generatedLine:l.generatedLine+(a.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(a.generatedOffset.generatedLine===l.generatedLine?a.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(c),"number"==typeof c.originalLine&&this.__originalMappings.push(c)}d(this.__generatedMappings,i.compareByGeneratedPositionsDeflated),d(this.__originalMappings,i.compareByOriginalPositions)},t.IndexedSourceMapConsumer=l},function(e,t){function n(e){var t=e.match(s);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function a(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function r(e){var r=e,o=n(e);if(o){if(!o.path)return e;r=o.path}for(var l,i=t.isAbsolute(r),s=r.split(/\/+/),u=0,c=s.length-1;c>=0;c--)"."===(l=s[c])?s.splice(c,1):".."===l?u++:u>0&&(""===l?(s.splice(c+1,u),u=0):(s.splice(c,2),u--));return""===(r=s.join("/"))&&(r=i?"/":"."),o?(o.path=r,a(o)):r}function o(e){return e}function l(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function i(e,t){return e===t?0:e>t?1:-1}t.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var s=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,u=/^data:.+\,.+$/;t.urlParse=n,t.urlGenerate=a,t.normalize=r,t.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var o=n(t),l=n(e);if(l&&(e=l.path||"/"),o&&!o.scheme)return l&&(o.scheme=l.scheme),a(o);if(o||t.match(u))return t;if(l&&!l.host&&!l.path)return l.host=t,a(l);var i="/"===t.charAt(0)?t:r(e.replace(/\/+$/,"")+"/"+t);return l?(l.path=i,a(l)):i},t.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(s)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var a=e.lastIndexOf("/");if(a<0)return t;if((e=e.slice(0,a)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var c=!("__proto__"in Object.create(null));t.toSetString=c?o:function(e){return l(e)?"$"+e:e},t.fromSetString=c?o:function(e){return l(e)?e.slice(1):e},t.compareByOriginalPositions=function(e,t,n){var a=e.source-t.source;return 0!==a?a:0!=(a=e.originalLine-t.originalLine)?a:0!=(a=e.originalColumn-t.originalColumn)||n?a:0!=(a=e.generatedColumn-t.generatedColumn)?a:0!=(a=e.generatedLine-t.generatedLine)?a:e.name-t.name},t.compareByGeneratedPositionsDeflated=function(e,t,n){var a=e.generatedLine-t.generatedLine;return 0!==a?a:0!=(a=e.generatedColumn-t.generatedColumn)||n?a:0!=(a=e.source-t.source)?a:0!=(a=e.originalLine-t.originalLine)?a:0!=(a=e.originalColumn-t.originalColumn)?a:e.name-t.name},t.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!=(n=e.generatedColumn-t.generatedColumn)?n:0!==(n=i(e.source,t.source))?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)?n:i(e.name,t.name)}},function(e,t){function n(e,a,r,o,l,i){var s=Math.floor((a-e)/2)+e,u=l(r,o[s],!0);return 0===u?s:u>0?a-s>1?n(s,a,r,o,l,i):i==t.LEAST_UPPER_BOUND?a<o.length?a:-1:s:s-e>1?n(e,s,r,o,l,i):i==t.LEAST_UPPER_BOUND?s:e<0?-1:e}t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,a,r,o){if(0===a.length)return-1;var l=n(-1,a.length,e,a,r,o||t.GREATEST_LOWER_BOUND);if(l<0)return-1;for(;l-1>=0&&0===r(a[l],a[l-1],!0);)--l;return l}},function(e,t,n){function a(){this._array=[],this._set=Object.create(null)}var r=n(2),o=Object.prototype.hasOwnProperty;a.fromArray=function(e,t){for(var n=new a,r=0,o=e.length;r<o;r++)n.add(e[r],t);return n},a.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},a.prototype.add=function(e,t){var n=r.toSetString(e),a=o.call(this._set,n),l=this._array.length;a&&!t||this._array.push(e),a||(this._set[n]=l)},a.prototype.has=function(e){var t=r.toSetString(e);return o.call(this._set,t)},a.prototype.indexOf=function(e){var t=r.toSetString(e);if(o.call(this._set,t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},a.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},a.prototype.toArray=function(){return this._array.slice()},t.ArraySet=a},function(e,t,n){var a=n(6);t.encode=function(e){var t,n="",r=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&r,(r>>>=5)>0&&(t|=32),n+=a.encode(t)}while(r>0);return n},t.decode=function(e,t,n){var r,o,l=e.length,i=0,s=0;do{if(t>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=a.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));r=!!(32&o),i+=(o&=31)<<s,s+=5}while(r);n.value=function(e){var t=e>>1;return 1==(1&e)?-t:t}(i),n.rest=t}},function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},function(e,t){function n(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function a(e,t,r,o){if(r<o){var l=r-1;n(e,function(e,t){return Math.round(e+Math.random()*(t-e))}(r,o),o);for(var i=e[o],s=r;s<o;s++)t(e[s],i)<=0&&n(e,l+=1,s);n(e,l+1,s);var u=l+1;a(e,t,r,u-1),a(e,t,u+1,o)}}t.quickSort=function(e,t){a(e,t,0,e.length-1)}}])}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(18),o=n(750);n(1412),n(1413),n(1414),t.default=function(){return a.default.createElement(r.Router,{history:r.browserHistory},o.routes)}},function(e,t,n){"use strict";var a=function(){};e.exports=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=a(n(344)),l=a(n(153)),i=a(n(25)),s=a(n(0)),u=a(n(222)),c=n(92),d=a(n(154)),f=n(81),p=n(349),h=(a(n(45)),s.default.PropTypes),m=h.func,v=h.object,y=s.default.createClass({displayName:"Router",propTypes:{history:v,children:c.routes,routes:c.routes,render:m,createElement:m,onError:m,onUpdate:m,parseQueryString:m,stringifyQuery:m,matchContext:v},getDefaultProps:function(){return{render:function(e){return s.default.createElement(d.default,e)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},componentWillMount:function(){var e=this,t=this.props,n=(t.parseQueryString,t.stringifyQuery,this.createRouterObjects()),a=n.history,r=n.transitionManager,o=n.router;this._unlisten=r.listen(function(t,n){t?e.handleError(t):e.setState(n,e.props.onUpdate)}),this.history=a,this.router=o},createRouterObjects:function(){var e=this.props.matchContext;if(e)return e;var t=this.props.history,n=this.props,a=n.routes,r=n.children;!function(e){return e&&e.getCurrentLocation}(t)||(0,i.default)(!1),function(e){return!e||!e.__v2_compatible__}(t)&&(t=this.wrapDeprecatedHistory(t));var o=(0,u.default)(t,(0,f.createRoutes)(a||r)),l=(0,p.createRouterObject)(t,o);return{history:(0,p.createRoutingHistory)(t,o),transitionManager:o,router:l}},wrapDeprecatedHistory:function(e){var t=this.props,n=t.parseQueryString,a=t.stringifyQuery,r=void 0;return r=e?function(){return e}:o.default,(0,l.default)(r)({parseQueryString:n,stringifyQuery:a})},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function(){var e=this.state,t=e.location,n=e.routes,a=e.params,o=e.components,l=this.props,i=l.createElement,s=l.render,u=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(l,["createElement","render"]);return null==t?null:(Object.keys(y.propTypes).forEach(function(e){return delete u[e]}),s(r({},u,{history:this.history,router:this.router,location:t,routes:n,params:a,components:o,createElement:i})))}});t.default=y,e.exports=t.default},function(e,t,n){function a(e){return null===e||void 0===e}function r(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}var o=Array.prototype.slice,l=n(721),i=n(722),s=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var u,c;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=o.call(e),t=o.call(t),s(e,t,n));if(r(e)){if(!r(t))return!1;if(e.length!==t.length)return!1;for(u=0;u<e.length;u++)if(e[u]!==t[u])return!1;return!0}try{var d=l(e),f=l(t)}catch(e){return!1}if(d.length!=f.length)return!1;for(d.sort(),f.sort(),u=d.length-1;u>=0;u--)if(d[u]!=f[u])return!1;for(u=d.length-1;u>=0;u--)if(c=d[u],!s(e[c],t[c],n))return!1;return typeof e==typeof t}(e,t,n))}},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function a(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(t=e.exports=r?n:a).supported=n,t.unsupported=a},function(e,t,n){"use strict";t.__esModule=!0;var a=Array.prototype.slice;t.loopAsync=function(e,t,n){function r(){i=!0,s?c=[].concat(a.call(arguments)):n.apply(this,arguments)}function o(){if(!i&&(u=!0,!s)){for(s=!0;!i&&l<e&&u;)u=!1,t.call(this,l++,o,r);s=!1,i?n.apply(this,c):l>=e&&u&&(i=!0,n())}}var l=0,i=!1,s=!1,u=!1,c=void 0;o()}},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=(function(e){e&&e.__esModule}(n(49)),n(106)),o=n(93);t.default=function(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],t=arguments.length<=1||void 0===arguments[1]?r.POP:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],l=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return"string"==typeof e&&(e=o.parsePath(e)),"object"==typeof t&&(e=a({},e,{state:t}),t=n||r.POP,n=l),{pathname:e.pathname||"/",search:e.search||"",hash:e.hash||"",state:e.state||null,action:t,key:n}},e.exports=t.default},function(e,t,n){"use strict";var a=n(726);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""))?e.split("&").reduce(function(e,t){var n=t.replace(/\+/g," ").split("="),a=n.shift(),r=n.length>0?n.join("="):void 0;return a=decodeURIComponent(a),r=void 0===r?null:decodeURIComponent(r),e.hasOwnProperty(a)?Array.isArray(e[a])?e[a].push(r):e[a]=[e[a],r]:e[a]=r,e},{}):{}},t.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var n=e[t];return void 0===n?"":null===n?t:Array.isArray(n)?n.slice().sort().map(function(e){return a(t)+"="+a(e)}).join("&"):a(t)+"="+a(n)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(105);t.default=function(e,t){var n=e&&e.routes,r=t.routes,o=void 0,l=void 0,i=void 0;return n?function(){var s=!1;(o=n.filter(function(n){if(s)return!0;var o=-1===r.indexOf(n)||function(e,t,n){return!!e.path&&(0,a.getParamNames)(e.path).some(function(e){return t.params[e]!==n.params[e]})}(n,e,t);return o&&(s=!0),o})).reverse(),i=[],l=[],r.forEach(function(e){var t=-1===n.indexOf(e),a=-1!==o.indexOf(e);t||a?i.push(e):l.push(e)})}():(o=[],l=[],i=r),{leaveRoutes:o,changeRoutes:l,enterRoutes:i}},e.exports=t.default},function(e,t,n){"use strict";function a(e,t,n){return function(){for(var a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];e.apply(t,r),e.length<n&&(0,r[r.length-1])()}}function r(e,t,n){function a(e,t,n){r=t?{pathname:t,query:n,state:e}:e}if(e){var r=void 0;(0,o.loopAsync)(e,function(e,n,o){t(e,a,function(e){e||r?o(e,r):n()})},n)}else n()}t.__esModule=!0,t.runEnterHooks=function(e,t,n){var o=function(e){return e.reduce(function(e,t){return t.onEnter&&e.push(a(t.onEnter,t,3)),e},[])}(e);return r(o.length,function(e,n,a){o[e](t,n,a)},n)},t.runChangeHooks=function(e,t,n,o){var l=function(e){return e.reduce(function(e,t){return t.onChange&&e.push(a(t.onChange,t,4)),e},[])}(e);return r(l.length,function(e,a,r){l[e](t,n,a,r)},o)},t.runLeaveHooks=function(e,t){for(var n=0,a=e.length;n<a;++n)e[n].onLeave&&e[n].onLeave.call(e[n],t)};var o=n(223);!function(e){e&&e.__esModule}(n(45))},function(e,t,n){"use strict";function a(e,t){if(e==t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return a(e,t[n])});if("object"===(void 0===e?"undefined":r(e))){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))if(void 0===e[n]){if(void 0!==t[n])return!1}else{if(!Object.prototype.hasOwnProperty.call(t,n))return!1;if(!a(e[n],t[n]))return!1}return!0}return String(e)===String(t)}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.default=function(e,t,n,r,l){var i=e.pathname,s=e.query;return null!=n&&("/"!==i.charAt(0)&&(i="/"+i),!!(function(e,t){return"/"!==t.charAt(0)&&(t="/"+t),"/"!==e.charAt(e.length-1)&&(e+="/"),"/"!==t.charAt(t.length-1)&&(t+="/"),t===e}(i,n.pathname)||!t&&function(e,t,n){for(var a=e,r=[],l=[],i=0,s=t.length;i<s;++i){var u=t[i].path||"";if("/"===u.charAt(0)&&(a=e,r=[],l=[]),null!==a&&u){var c=(0,o.matchPattern)(u,a);if(c?(a=c.remainingPathname,r=[].concat(r,c.paramNames),l=[].concat(l,c.paramValues)):a=null,""===a)return r.every(function(e,t){return String(l[t])===String(n[e])})}}return!1}(i,r,l))&&function(e,t){return null==t?null==e:null==e||a(e,t)}(s,n.query))};var o=n(105);e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var a=n(223),r=function(e){return e&&e.__esModule?e:{default:e}}(n(348));t.default=function(e,t){(0,a.mapAsync)(e.routes,function(t,n,a){!function(e,t,n){if(t.component||t.components)n(null,t.component||t.components);else{var a=t.getComponent||t.getComponents;if(a){var o=e.location,l=(0,r.default)(e,o);a.call(t,l,n)}else n()}}(e,t,a)},t)},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,l){if(e.indexRoute)l(null,e.indexRoute);else if(e.getIndexRoute){var i={location:t,params:o(n,a)},s=(0,d.default)(i,t);e.getIndexRoute(s,function(e,t){l(e,!e&&(0,p.createRoutes)(t)[0])})}else e.childRoutes?function(){var o=e.childRoutes.filter(function(e){return!e.path});(0,c.loopAsync)(o.length,function(e,l,i){r(o[e],t,n,a,function(t,n){if(t||n){var a=[o[e]].concat(Array.isArray(n)?n:[n]);i(t,a)}else l()})},function(e,t){l(null,t)})}():l()}function o(e,t){return function(e,t,n){return t.reduce(function(e,t,a){var r=n&&n[a];return Array.isArray(e[t])?e[t].push(r):e[t]=t in e?[e[t],r]:r,e},e)}({},e,t)}function l(e,t,n,a,l,s){var c=e.path||"";if("/"===c.charAt(0)&&(n=t.pathname,a=[],l=[]),null!==n&&c){try{var h=(0,f.matchPattern)(c,n);h?(n=h.remainingPathname,a=[].concat(a,h.paramNames),l=[].concat(l,h.paramValues)):n=null}catch(e){s(e)}if(""===n){var m=function(){var n={routes:[e],params:o(a,l)};return r(e,t,a,l,function(e,t){if(e)s(e);else{if(Array.isArray(t)){var a;(a=n.routes).push.apply(a,t)}else t&&n.routes.push(t);s(null,n)}}),{v:void 0}}();if("object"===(void 0===m?"undefined":u(m)))return m.v}}if(null!=n||e.childRoutes){var v=function(r,o){r?s(r):o?i(o,t,function(t,n){t?s(t):n?(n.routes.unshift(e),s(null,n)):s()},n,a,l):s()},y=function(e,t,n,a,r){if(e.childRoutes)return[null,e.childRoutes];if(!e.getChildRoutes)return[];var l=!0,i=void 0,s={location:t,params:o(n,a)},u=(0,d.default)(s,t);return e.getChildRoutes(u,function(e,t){t=!e&&(0,p.createRoutes)(t),l?i=[e,t]:r(e,t)}),l=!1,i}(e,t,a,l,v);y&&v.apply(void 0,y)}else s()}function i(e,t,n,a){var r=arguments.length<=4||void 0===arguments[4]?[]:arguments[4],o=arguments.length<=5||void 0===arguments[5]?[]:arguments[5];void 0===a&&("/"!==t.pathname.charAt(0)&&(t=s({},t,{pathname:"/"+t.pathname})),a=t.pathname),(0,c.loopAsync)(e.length,function(n,i,s){l(e[n],t,a,r,o,function(e,t){e||t?s(e,t):i()})},n)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.default=i;var c=n(223),d=a(n(348)),f=n(105),p=(a(n(45)),n(81));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var a=n(105);t.default=function(e,t){var n={};return e.path?((0,a.getParamNames)(e.path).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}),n):n},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=a(n(0)),l=a(n(350)),i=o.default.createClass({displayName:"IndexLink",render:function(){return o.default.createElement(l.default,r({},this.props,{onlyActiveOnIndex:!0}))}});t.default=i,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e,t){var n=t&&t.withRef,a=l.default.createClass({displayName:"WithRouter",contextTypes:{router:s.routerShape},propTypes:{router:s.routerShape},getWrappedInstance:function(){return n||(0,o.default)(!1),this.wrappedInstance},render:function(){var t=this,a=this.props.router||this.context.router,o=r({},this.props,{router:a});return n&&(o.ref=function(e){t.wrappedInstance=e}),l.default.createElement(e,o)}});return a.displayName="withRouter("+function(e){return e.displayName||e.name||"Component"}(e)+")",a.WrappedComponent=e,(0,i.default)(a,e)};var o=a(n(25)),l=a(n(0)),i=a(n(735)),s=n(218);e.exports=t.default},function(e,t,n){"use strict";var a={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var l=Object.getOwnPropertyNames(t);o&&(l=l.concat(Object.getOwnPropertySymbols(t)));for(var i=0;i<l.length;++i)if(!(a[l[i]]||r[l[i]]||n&&n[l[i]]))try{e[l[i]]=t[l[i]]}catch(e){}}return e}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(0)),o=(a(n(45)),a(n(25))),l=a(n(351)),i=n(92),s=r.default.PropTypes,u=s.string,c=s.object,d=r.default.createClass({displayName:"IndexRedirect",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=l.default.createRouteFromReactElement(e))}},propTypes:{to:u.isRequired,query:c,state:c,onEnter:i.falsy,children:i.falsy},render:function(){(0,o.default)(!1)}});t.default=d,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(0)),o=(a(n(45)),a(n(25))),l=n(81),i=n(92),s=r.default.PropTypes.func,u=r.default.createClass({displayName:"IndexRoute",statics:{createRouteFromReactElement:function(e,t){t&&(t.indexRoute=(0,l.createRouteFromReactElement)(e))}},propTypes:{path:i.falsy,component:i.component,components:i.components,getComponent:s,getComponents:s},render:function(){(0,o.default)(!1)}});t.default=u,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(0)),o=a(n(25)),l=n(81),i=n(92),s=r.default.PropTypes,u=s.string,c=s.func,d=r.default.createClass({displayName:"Route",statics:{createRouteFromReactElement:l.createRouteFromReactElement},propTypes:{path:u,component:i.component,components:i.components,getComponent:c,getComponents:c},render:function(){(0,o.default)(!1)}});t.default=d,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,function(e){e&&e.__esModule}(n(45));var a={contextTypes:{history:n(92).history},componentWillMount:function(){this.history=this.context.history}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,a(n(45));var r=a(n(0)),o=a(n(25)),l=r.default.PropTypes.object,i={contextTypes:{history:l.isRequired,route:l},propTypes:{route:l},componentDidMount:function(){this.routerWillLeave||(0,o.default)(!1);var e=this.props.route||this.context.route;e||(0,o.default)(!1),this._unlistenBeforeLeavingRoute=this.context.history.listenBeforeLeavingRoute(e,this.routerWillLeave)},componentWillUnmount:function(){this._unlistenBeforeLeavingRoute&&this._unlistenBeforeLeavingRoute()}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,a(n(45));var r=a(n(0)).default.PropTypes.object,o={propTypes:{route:r.isRequired},childContextTypes:{route:r.isRequired},getChildContext:function(){return{route:this.props.route}},componentWillMount:function(){}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=a(n(153)),l=a(n(222));a(n(45)),t.default=function(e){return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.routes,a=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["routes"]),i=(0,o.default)(e)(a),s=(0,l.default)(i,n);return r({},i,s)}},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(0)),o=a(n(154)),l=(a(n(45)),r.default.createClass({displayName:"RoutingContext",componentWillMount:function(){},render:function(){return r.default.createElement(o.default,this.props)}}));t.default=l,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(106),l=a(n(25)),i=a(n(352)),s=a(n(222)),u=n(81),c=n(349);t.default=function(e,t){var n=e.history,a=e.routes,d=e.location,f=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["history","routes","location"]);n||d||(0,l.default)(!1),n=n||(0,i.default)(f);var p=(0,s.default)(n,(0,u.createRoutes)(a)),h=void 0;d?d=n.createLocation(d):h=n.listen(function(e){d=e});var m=(0,c.createRouterObject)(n,p);n=(0,c.createRoutingHistory)(n,p),p.match(d,function(e,a,l){t(e,a&&m.createLocation(a,o.REPLACE),l&&r({},l,{history:n,router:m,matchContext:{history:n,transitionManager:p,router:m}})),h&&h()})},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=(a(n(49)),a(n(25))),l=n(93),i=n(106),s=a(n(347));t.default=function(){function e(e,t){f[e]=t}function t(){var e=c[d],t=e.basename,n=e.pathname,o=e.search,i=(t||"")+n+(o||""),s=void 0,u=void 0;e.key?u=function(e){return f[e]}(s=e.key):(s=a.createKey(),u=null,e.key=s);var p=l.parsePath(i);return a.createLocation(r({},p,{state:u}),void 0,s)}var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Array.isArray(n)?n={entries:n}:"string"==typeof n&&(n={entries:[n]});var a=s.default(r({},n,{getCurrentLocation:t,finishTransition:function(t){switch(t.action){case i.PUSH:(d+=1)<c.length&&c.splice(d),c.push(t),e(t.key,t.state);break;case i.REPLACE:c[d]=t,e(t.key,t.state)}},saveState:e,go:function(e){if(e){if(!function(e){var t=d+e;return t>=0&&t<c.length}(e))return;d+=e;var n=t();a.transitionTo(r({},n,{action:i.POP}))}}})),u=n,c=u.entries,d=u.current;"string"==typeof c?c=[c]:Array.isArray(c)||(c=["/"]),c=c.map(function(e){var t=a.createKey();return"string"==typeof e?{pathname:e,key:t}:"object"==typeof e&&e?r({},e,{key:t}):void o.default(!1)}),null==d?d=c.length-1:d>=0&&d<c.length||o.default(!1);var f=function(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})}(c);return a},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(0),l=a(o),i=a(n(154));a(n(45)),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.map(function(e){return e.renderRouterContext}).filter(Boolean),s=t.map(function(e){return e.renderRouteComponent}).filter(Boolean);return function(e){return a.reduceRight(function(t,n){return n(t,e)},l.default.createElement(i.default,r({},e,{createElement:function(){var e=arguments.length<=0||void 0===arguments[0]?o.createElement:arguments[0];return function(t,n){return s.reduceRight(function(e,t){return t(e,n)},e(t,n))}}(e.createElement)})))}},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(748)),o=a(n(355));t.default=(0,o.default)(r.default),e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=a(n(25)),l=n(106),i=n(93),s=n(152),u=n(219),c=n(345),d=a(n(346));t.default=function(){function e(e){try{e=e||window.history.state||{}}catch(t){e={}}var t=u.getWindowPath(),n=e.key,a=void 0;n?a=c.readState(n):(a=null,n=h.createKey(),f&&window.history.replaceState(r({},e,{key:n}),null));var o=i.parsePath(t);return h.createLocation(r({},o,{state:a}),void 0,n)}function t(t){function n(t){void 0!==t.state&&a(e(t.state))}var a=t.transitionTo;return u.addEventListener(window,"popstate",n),function(){u.removeEventListener(window,"popstate",n)}}var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s.canUseDOM||o.default(!1);var a=n.forceRefresh,f=u.supportsHistory(),p=!f||a,h=d.default(r({},n,{getCurrentLocation:e,finishTransition:function(e){var t=e.basename,n=e.pathname,a=e.search,r=e.hash,o=e.state,i=e.action,s=e.key;if(i!==l.POP){c.saveState(s,o);var u=(t||"")+n+a+r,d={key:s};if(i===l.PUSH){if(p)return window.location.href=u,!1;window.history.pushState(d,null,u)}else{if(p)return window.location.replace(u),!1;window.history.replaceState(d,null,u)}}},saveState:c.saveState})),m=0,v=void 0;return r({},h,{listenBefore:function(e){1==++m&&(v=t(h));var n=h.listenBefore(e);return function(){n(),0==--m&&v()}},listen:function(e){1==++m&&(v=t(h));var n=h.listen(e);return function(){n(),0==--m&&v()}},registerTransitionHook:function(e){1==++m&&(v=t(h)),h.registerTransitionHook(e)},unregisterTransitionHook:function(e){h.unregisterTransitionHook(e),0==--m&&v()}})},e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(n(344)),o=a(n(355));t.default=(0,o.default)(r.default),e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.routes=void 0;var r=n(18),o=a(n(0)),l=a(n(751)),i=a(n(986)),s=a(n(987)),u=a(n(994)),c=a(n(996)),d=a(n(997)),f=a(n(998)),p=a(n(999)),h=a(n(1e3)),m=a(n(1001)),v=a(n(1002)),y=a(n(1197)),g=a(n(1198)),E=a(n(1201)),b=a(n(1203)),_=a(n(442)),C=a(n(1205)),w=a(n(1206)),k=a(n(1207)),S=a(n(1208)),x=a(n(1209)),T=a(n(1210)),P=a(n(1212)),R=a(n(1213)),O=a(n(1215)),D=a(n(1216)),N=a(n(1218)),I=a(n(1220)),M=a(n(1222)),A=a(n(1232)),F=a(n(1235)),L=(a(n(1236)),a(n(1237))),j=a(n(1245)),B=a(n(1246)),U=a(n(1247)),H=(a(n(1252)),a(n(1253))),q=a(n(1254)),K=a(n(1255)),W=(a(n(1257)),a(n(1258))),z=(a(n(1260)),a(n(1261)),a(n(1262))),G=a(n(1265)),V=(a(n(1266)),a(n(1267))),$=a(n(1268)),Y=a(n(1269)),J=a(n(1270)),X=a(n(1271)),Q=a(n(1272)),Z=a(n(608)),ee=a(n(1273)),te=a(n(1274)),ne=a(n(1276)),ae=a(n(1277)),re=(a(n(96)),a(n(1278))),oe=a(n(1279)),le=a(n(1280)),ie=a(n(1281)),se=a(n(1282)),ue=a(n(1283)),ce=a(n(1284)),de=a(n(1285)),fe=a(n(1286)),pe=a(n(1287)),he=a(n(1288)),me=a(n(1291)),ve=a(n(1292)),ye=a(n(1294)),ge=a(n(1296)),Ee=a(n(1297)),be=a(n(1298)),_e=a(n(1299)),Ce=a(n(1300)),we=a(n(1301)),ke=a(n(1302)),Se=a(n(1308)),xe=a(n(1410)),Te=a(n(1411));t.routes=o.default.createElement(r.Route,{path:""},o.default.createElement(r.Route,{path:"/",component:l.default},o.default.createElement(r.IndexRoute,{component:i.default}),o.default.createElement(r.Route,{path:"/dashboard",component:s.default}),o.default.createElement(r.Route,{path:"/transactions",component:u.default},o.default.createElement(r.Route,{path:"/transactions/paypal"},o.default.createElement(r.IndexRoute,{component:c.default}),o.default.createElement(r.Route,{path:"/transactions/paypal/:id",component:f.default}),o.default.createElement(r.Route,{path:"/transactions/stripe/:id",component:p.default})),o.default.createElement(r.Route,{path:"/transactions/stripe",component:d.default}),o.default.createElement(r.Route,{path:"/transactions/all",component:m.default}),o.default.createElement(r.Route,{path:"/transactions/class-registers",component:h.default})),o.default.createElement(r.Route,{path:"/courses",component:v.default}),o.default.createElement(r.Route,{path:"/courses/dept/:deptId",component:v.default}),o.default.createElement(r.Route,{path:"/courses/dept/:deptId/add",component:y.default}),o.default.createElement(r.Route,{path:"/courses/add",component:y.default}),o.default.createElement(r.Route,{path:"/courses/:id",component:y.default}),o.default.createElement(r.Route,{path:"/courses/:courseId/classes",component:g.default}),o.default.createElement(r.Route,{path:"/classes",component:g.default}),o.default.createElement(r.Route,{path:"/classes/add",component:b.default}),o.default.createElement(r.Route,{path:"/classes/available",component:k.default}),o.default.createElement(r.Route,{path:"/classes/:id",component:E.default}),o.default.createElement(r.Route,{path:"/classes/:id/edit",component:b.default}),o.default.createElement(r.Route,{path:"/cart",component:pe.default}),o.default.createElement(r.Route,{path:"/pay-student/:amount/:id",component:_.default}),o.default.createElement(r.Route,{path:"/depts",component:T.default}),o.default.createElement(r.Route,{path:"/depts/add",component:P.default}),o.default.createElement(r.Route,{path:"/depts/:id/edit",component:P.default}),o.default.createElement(r.Route,{path:"/classrooms",component:R.default}),o.default.createElement(r.Route,{path:"/classrooms/add",component:O.default}),o.default.createElement(r.Route,{path:"/classrooms/:id/edit",component:O.default}),o.default.createElement(r.Route,{path:"/attendance",component:D.default}),o.default.createElement(r.Route,{path:"/debtors",component:N.default}),o.default.createElement(r.Route,{path:"/users",component:I.default},o.default.createElement(r.Route,{path:"/users/role/:role",component:M.default}),o.default.createElement(r.Route,{path:"/users/role/:role/add",component:A.default}),o.default.createElement(r.Route,{path:"/users/reconcile",component:j.default}),o.default.createElement(r.Route,{path:"/users/waiting",component:B.default}),o.default.createElement(r.Route,{path:"/users/:id",component:L.default}),o.default.createElement(r.Route,{path:"/users/:id/edit",component:A.default}),o.default.createElement(r.Route,{path:"/addpay/:PayNameId/:id",component:F.default}),o.default.createElement(r.Route,{path:"/teachers-register",component:ye.default})),o.default.createElement(r.Route,{path:"/new-user",component:ve.default}),o.default.createElement(r.Route,{path:"/profile",component:he.default}),o.default.createElement(r.Route,{path:"/students/:id",component:te.default}),o.default.createElement(r.Route,{path:"/students/:id/grades",component:ne.default}),o.default.createElement(r.Route,{path:"/donations",component:U.default}),o.default.createElement(r.Route,{path:"/donations/add",component:H.default}),o.default.createElement(r.Route,{path:"/donations/:id",component:H.default}),o.default.createElement(r.Route,{path:"/donation-records/:id",component:q.default}),o.default.createElement(r.Route,{path:"/complaints",component:we.default},o.default.createElement(r.IndexRoute,{component:ke.default}),o.default.createElement(r.Route,{path:"/complaints/list",component:ke.default}),o.default.createElement(r.Route,{path:"/complaints/add",component:Se.default}),o.default.createElement(r.Route,{path:"/complaints/:id",component:Se.default})),o.default.createElement(r.Route,{path:"/settings",component:K.default},o.default.createElement(r.Route,{path:"/settings/general",component:W.default}),o.default.createElement(r.Route,{path:"/settings/multi-branches",component:z.default}),o.default.createElement(r.Route,{path:"/settings/pages",component:G.default}),o.default.createElement(r.Route,{path:"/settings/terms",component:V.default}),o.default.createElement(r.Route,{path:"/settings/bank",component:$.default}),o.default.createElement(r.Route,{path:"/websites/add",component:J.default}),o.default.createElement(r.Route,{path:"/websites/:id",component:Y.default}),o.default.createElement(r.Route,{path:"/branches/add",component:X.default}),o.default.createElement(r.Route,{path:"/branches/:id",component:X.default}),o.default.createElement(r.Route,{path:"/terms/add",component:Q.default}),o.default.createElement(r.Route,{path:"/terms/:id",component:Q.default})),o.default.createElement(r.Route,{path:"/logs",component:Z.default}),o.default.createElement(r.Route,{path:"/logs/:id",component:ee.default}),o.default.createElement(r.Route,{path:"/test",component:ae.default}),o.default.createElement(r.Route,{path:"/login",component:ce.default}),o.default.createElement(r.Route,{path:"/forgot-password",component:de.default}),o.default.createElement(r.Route,{path:"/reset-password/:resetCode/:userId",component:fe.default}),o.default.createElement(r.Route,{path:"/registration",component:be.default}),o.default.createElement(r.Route,{path:"/registration-success",component:me.default}),o.default.createElement(r.Route,{path:"/payment/success(/:method/:invoice)",component:_e.default}),o.default.createElement(r.Route,{path:"/payment/cancel",component:Ce.default})),o.default.createElement(r.Route,{path:"/classes/:id/students",component:C.default}),o.default.createElement(r.Route,{path:"/classes/:id/register-attendance",component:w.default}),o.default.createElement(r.Route,{path:"/students/:id/print-receipt/:branchId",component:re.default}),o.default.createElement(r.Route,{path:"/students/print-receipt-rows/:students",component:oe.default}),o.default.createElement(r.Route,{path:"/students/:id/print-report",component:le.default}),o.default.createElement(r.Route,{path:"/students/:id/print-cert",component:ie.default}),o.default.createElement(r.Route,{path:"/students/print-debtors/:type/:filters",component:Ee.default}),o.default.createElement(r.Route,{path:"/classes/:id/print/:type",component:S.default}),o.default.createElement(r.Route,{path:"/classes/print/:type",component:x.default}),o.default.createElement(r.Route,{path:"/classes/print/:term/:type",component:x.default}),o.default.createElement(r.Route,{path:"/users/:role/print/:type",component:se.default}),o.default.createElement(r.Route,{path:"/payname/:payNameId/:branchId",component:ue.default}),o.default.createElement(r.Route,{path:"/users/:role/print/:type/filters/:filters",component:se.default}),o.default.createElement(r.Route,{path:"/transactions/print/:type/filters/:filters",component:ge.default}),o.default.createElement(r.Route,{path:"/transactions/print/:type/filters",component:ge.default}),o.default.createElement(r.Route,{path:"/transactions/print/:type/filters/",component:ge.default}),o.default.createElement(r.Route,{path:"/complaints/print/:filters",component:xe.default}),o.default.createElement(r.Route,{path:"/complaints/:id/print",component:Te.default}))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(96)),h=a(n(793)),m=a(n(110)),v=a(n(983)),y=a(n(15)),g=a(n(16)),E=n(9),b=a(n(19)),_=a(n(985)),C=function(e){function t(e,n){var a;(0,i.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return r.promises={},r.appTypes=(a={},(0,o.default)(a,E.ROLES.SUPER_ADMIN,h.default),(0,o.default)(a,E.ROLES.ADMIN,h.default),(0,o.default)(a,E.ROLES.GUEST,m.default),(0,o.default)(a,E.ROLES.STUDENT,m.default),(0,o.default)(a,E.ROLES.REGISTRAR,v.default),a),r.updateUserInfo=r.updateUserInfo.bind(r),r.loadWebsiteData=r.loadWebsiteData.bind(r),r.state={appTypeKey:null,contextData:{},loadings:[r.loadWebsiteData,r.updateUserInfo]},r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"replaceRouter",value:function(){var e=this.context.router,t={};(0,r.default)(t,e),["push","go","goBack","goForward"].forEach(function(n){t[n]=function(t){window.onReactNavigate&&!window.onReactNavigate()||e[n](t)}}),this.changeContext("router",t)}},{key:"getChildContext",value:function(){return this.state.contextData}},{key:"changeContext",value:function(e,t){var n=this.state.contextData;n[e]=t,this.setState({contextData:n})}},{key:"render",value:function(){var e=this.state,t=e.appTypeKey;if(e.loadings.length>0)return f.default.createElement(b.default,null);if(t in this.appTypes){var n=this.appTypes[t],a=this.props.children?f.default.cloneElement(this.props.children,{appTypeKey:t,onUserUpdate:this.updateUserInfo}):"";return f.default.createElement("div",null,f.default.createElement(_.default,null),f.default.createElement(n,{onUserUpdate:this.updateUserInfo,children:a}))}return!1}},{key:"componentWillMount",value:function(){this.load(),this.replaceRouter(),setInterval(this.updateUserInfo,6e4)}},{key:"load",value:function(){var e=this,t=this.state.loadings,n=[];t.forEach(function(a){a(function(r){!function(n){var a=t.indexOf(n);-1!==a&&(t.splice(a,1),e.setState({loadings:t}))}(a),r&&n.push(r)})}),n.forEach(function(e){return e()})}},{key:"loadWebsiteData",value:function(e){var t=this;this.promises.website=y.default.ajax({type:"get",url:"/api/website"}),this.promises.website.then(function(n){n.name&&$("title").text(n.name),n.set=function(e,a){n[e]=a,t.changeContext("website",n)},t.changeContext("website",n),e&&e()},function(t){console.log(t),e&&e()})}},{key:"updateUserInfo",value:function(e,t){var n=this,a=this.context.router;"function"!=typeof e||t||(t=e,e=null),p.default.requestUser(function(r){n.state.appTypeKey!=g.default.getIfExists(r,"role.roleName",E.ROLES.GUEST)&&(n.setState({appTypeKey:r.role.roleName}),n.changeContext("user",r),t?t(function(){e&&a.push(e)}):e&&a.push(e))},function(r,o,l){n.state.appTypeKey!=E.ROLES.GUEST&&(e="/login",401===r.status?(n.changeContext("user",null),n.setState({appTypeKey:E.ROLES.GUEST}),t?t(function(){return a.push(e)}):a.push(e)):console.error(r.responseText))})}}]),t}(d.Component);t.default=C,C.contextTypes={router:d.PropTypes.object.isRequired},C.childContextTypes={user:d.PropTypes.object,website:d.PropTypes.object,router:d.PropTypes.object}},function(e,t,n){n(753),e.exports=n(41).Object.assign},function(e,t,n){var a=n(54);a(a.S+a.F,"Object",{assign:n(754)})},function(e,t,n){"use strict";var a=n(120),r=n(233),o=n(157),l=n(122),i=n(226),s=Object.assign;e.exports=!s||n(94)(function(){var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach(function(e){t[e]=e}),7!=s({},e)[n]||Object.keys(s({},t)).join("")!=a})?function(e,t){for(var n=l(e),s=arguments.length,u=1,c=r.f,d=o.f;s>u;)for(var f,p=i(arguments[u++]),h=c?a(p).concat(c(p)):a(p),m=h.length,v=0;m>v;)d.call(p,f=h[v++])&&(n[f]=p[f]);return n}:s},function(e,t,n){var a=n(107),r=n(228),o=n(756);e.exports=function(e){return function(t,n,l){var i,s=a(t),u=r(s.length),c=o(l,u);if(e&&n!=n){for(;u>c;)if((i=s[c++])!=i)return!0}else for(;u>c;c++)if((e||c in s)&&s[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var a=n(229),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=a(e))<0?r(e+t,0):o(e,t)}},function(e,t,n){n(758);var a=n(41).Object;e.exports=function(e,t,n){return a.defineProperty(e,t,n)}},function(e,t,n){var a=n(54);a(a.S+a.F*!n(69),"Object",{defineProperty:n(67).f})},function(e,t,n){n(760),e.exports=n(41).Object.getPrototypeOf},function(e,t,n){var a=n(122),r=n(359);n(360)("getPrototypeOf",function(){return function(e){return r(a(e))}})},function(e,t,n){e.exports={default:n(762),__esModule:!0}},function(e,t,n){n(158),n(161),e.exports=n(235).f("iterator")},function(e,t,n){var a=n(229),r=n(227);e.exports=function(e){return function(t,n){var o,l,i=String(r(t)),s=a(n),u=i.length;return s<0||s>=u?e?"":void 0:(o=i.charCodeAt(s))<55296||o>56319||s+1===u||(l=i.charCodeAt(s+1))<56320||l>57343?e?i.charAt(s):o:e?i.slice(s,s+2):l-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var a=n(160),r=n(155),o=n(124),l={};n(83)(l,n(56)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=a(l,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var a=n(67),r=n(68),o=n(120);e.exports=n(69)?Object.defineProperties:function(e,t){r(e);for(var n,l=o(t),i=l.length,s=0;i>s;)a.f(e,n=l[s++],t[n]);return e}},function(e,t,n){"use strict";var a=n(767),r=n(363),o=n(123),l=n(107);e.exports=n(234)(Array,"Array",function(e,t){this._t=l(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(769),__esModule:!0}},function(e,t,n){n(770),n(238),n(773),n(774),e.exports=n(41).Symbol},function(e,t,n){"use strict";var a=n(55),r=n(95),o=n(69),l=n(54),i=n(361),s=n(236).KEY,u=n(94),c=n(231),d=n(124),f=n(156),p=n(56),h=n(235),m=n(237),v=n(771),y=n(364),g=n(68),E=n(64),b=n(107),_=n(225),C=n(155),w=n(160),k=n(772),S=n(366),x=n(67),T=n(120),P=S.f,R=x.f,O=k.f,D=a.Symbol,N=a.JSON,I=N&&N.stringify,M="prototype",A=p("_hidden"),F=p("toPrimitive"),L={}.propertyIsEnumerable,j=c("symbol-registry"),B=c("symbols"),U=c("op-symbols"),H=Object[M],q="function"==typeof D,K=a.QObject,W=!K||!K[M]||!K[M].findChild,z=o&&u(function(){return 7!=w(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,n){var a=P(H,t);a&&delete H[t],R(e,t,n),a&&e!==H&&R(H,t,a)}:R,G=function(e){var t=B[e]=w(D[M]);return t._k=e,t},V=q&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},$=function(e,t,n){return e===H&&$(U,t,n),g(e),t=_(t,!0),g(n),r(B,t)?(n.enumerable?(r(e,A)&&e[A][t]&&(e[A][t]=!1),n=w(n,{enumerable:C(0,!1)})):(r(e,A)||R(e,A,C(1,{})),e[A][t]=!0),z(e,t,n)):R(e,t,n)},Y=function(e,t){g(e);for(var n,a=v(t=b(t)),r=0,o=a.length;o>r;)$(e,n=a[r++],t[n]);return e},J=function(e){var t=L.call(this,e=_(e,!0));return!(this===H&&r(B,e)&&!r(U,e))&&(!(t||!r(this,e)||!r(B,e)||r(this,A)&&this[A][e])||t)},X=function(e,t){if(e=b(e),t=_(t,!0),e!==H||!r(B,t)||r(U,t)){var n=P(e,t);return!n||!r(B,t)||r(e,A)&&e[A][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=O(b(e)),a=[],o=0;n.length>o;)r(B,t=n[o++])||t==A||t==s||a.push(t);return a},Z=function(e){for(var t,n=e===H,a=O(n?U:b(e)),o=[],l=0;a.length>l;)!r(B,t=a[l++])||n&&!r(H,t)||o.push(B[t]);return o};q||(i((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(U,n),r(this,A)&&r(this[A],e)&&(this[A][e]=!1),z(this,e,C(1,n))};return o&&W&&z(H,e,{configurable:!0,set:t}),G(e)})[M],"toString",function(){return this._k}),S.f=X,x.f=$,n(365).f=k.f=Q,n(157).f=J,n(233).f=Z,o&&!n(159)&&i(H,"propertyIsEnumerable",J,!0),h.f=function(e){return G(p(e))}),l(l.G+l.W+l.F*!q,{Symbol:D});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ne=T(p.store),ae=0;ne.length>ae;)m(ne[ae++]);l(l.S+l.F*!q,"Symbol",{for:function(e){return r(j,e+="")?j[e]:j[e]=D(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),l(l.S+l.F*!q,"Object",{create:function(e,t){return void 0===t?w(e):Y(w(e),t)},defineProperty:$,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),N&&l(l.S+l.F*(!q||u(function(){var e=D();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){for(var t,n,a=[e],r=1;arguments.length>r;)a.push(arguments[r++]);if(n=t=a[1],(E(t)||void 0!==e)&&!V(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!V(t))return t}),a[1]=t,I.apply(N,a)}}),D[M][F]||n(83)(D[M],F,D[M].valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(a.JSON,"JSON",!0)},function(e,t,n){var a=n(120),r=n(233),o=n(157);e.exports=function(e){var t=a(e),n=r.f;if(n)for(var l,i=n(e),s=o.f,u=0;i.length>u;)s.call(e,l=i[u++])&&t.push(l);return t}},function(e,t,n){var a=n(107),r=n(365).f,o={}.toString,l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return l&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return l.slice()}}(e):r(a(e))}},function(e,t,n){n(237)("asyncIterator")},function(e,t,n){n(237)("observable")},function(e,t,n){e.exports={default:n(776),__esModule:!0}},function(e,t,n){n(777),e.exports=n(41).Object.setPrototypeOf},function(e,t,n){var a=n(54);a(a.S,"Object",{setPrototypeOf:n(778).set})},function(e,t,n){var a=n(64),r=n(68),o=function(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{(a=n(82)(Function.call,n(366).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(780),__esModule:!0}},function(e,t,n){n(781);var a=n(41).Object;e.exports=function(e,t){return a.create(e,t)}},function(e,t,n){var a=n(54);a(a.S,"Object",{create:n(160)})},function(e,t,n){n(238),n(158),n(161),n(783),n(789),n(790),e.exports=n(41).Promise},function(e,t,n){"use strict";var a,r,o,l,i=n(159),s=n(55),u=n(82),c=n(239),d=n(54),f=n(64),p=n(119),h=n(240),m=n(125),v=n(368),y=n(369).set,g=n(787)(),E=n(241),b=n(370),_=n(371),C="Promise",w=s.TypeError,k=s.process,S=s.Promise,x="process"==c(k),T=function(){},P=r=E.f,R=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[n(56)("species")]=function(e){e(T,T)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t}catch(e){}}(),O=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var a=e._v,r=1==e._s,o=0;n.length>o;)!function(t){var n,o,l=r?t.ok:t.fail,i=t.resolve,s=t.reject,u=t.domain;try{l?(r||(2==e._h&&M(e),e._h=1),!0===l?n=a:(u&&u.enter(),n=l(a),u&&u.exit()),n===t.promise?s(w("Promise-chain cycle")):(o=O(n))?o.call(n,i,s):i(n)):s(a)}catch(e){s(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){y.call(s,function(){var t,n,a,r=e._v,o=I(e);if(o&&(t=b(function(){x?k.emit("unhandledRejection",r,e):(n=s.onunhandledrejection)?n({promise:e,reason:r}):(a=s.console)&&a.error&&a.error("Unhandled promise rejection",r)}),e._h=x||I(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},I=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){y.call(s,function(){var t;x?k.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=O(e))?g(function(){var a={_w:n,_d:!1};try{t.call(e,u(F,a,1),u(A,a,1))}catch(e){A.call(a,e)}}):(n._v=e,n._s=1,D(n,!1))}catch(e){A.call({_w:n,_d:!1},e)}}};R||(S=function(e){h(this,S,C,"_h"),p(e),a.call(this);try{e(u(F,this,1),u(A,this,1))}catch(e){A.call(this,e)}},(a=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(242)(S.prototype,{then:function(e,t){var n=P(v(this,S));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new a;this.promise=e,this.resolve=u(F,e,1),this.reject=u(A,e,1)},E.f=P=function(e){return e===S||e===l?new o(e):r(e)}),d(d.G+d.W+d.F*!R,{Promise:S}),n(124)(S,C),n(372)(C),l=n(41).Promise,d(d.S+d.F*!R,C,{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(i||!R),C,{resolve:function(e){return _(i&&this===l?S:this,e)}}),d(d.S+d.F*!(R&&n(788)(function(e){S.all(e).catch(T)})),C,{all:function(e){var t=this,n=P(t),a=n.resolve,r=n.reject,o=b(function(){var n=[],o=0,l=1;m(e,!1,function(e){var i=o++,s=!1;n.push(void 0),l++,t.resolve(e).then(function(e){s||(s=!0,n[i]=e,--l||a(n))},r)}),--l||a(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=P(t),a=n.reject,r=b(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,a)})});return r.e&&a(r.v),n.promise}})},function(e,t,n){var a=n(68);e.exports=function(e,t,n,r){try{return r?t(a(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&a(o.call(e)),t}}},function(e,t,n){var a=n(123),r=n(56)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[r]===e)}},function(e,t){e.exports=function(e,t,n){var a=void 0===n;switch(t.length){case 0:return a?e():e.call(n);case 1:return a?e(t[0]):e.call(n,t[0]);case 2:return a?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var a=n(55),r=n(369).set,o=a.MutationObserver||a.WebKitMutationObserver,l=a.process,i=a.Promise,s="process"==n(121)(l);e.exports=function(){var e,t,n,u=function(){var a,r;for(s&&(a=l.domain)&&a.exit();e;){r=e.fn,e=e.next;try{r()}catch(a){throw e?n():t=void 0,a}}t=void 0,a&&a.enter()};if(s)n=function(){l.nextTick(u)};else if(!o||a.navigator&&a.navigator.standalone)if(i&&i.resolve){var c=i.resolve();n=function(){c.then(u)}}else n=function(){r.call(a,u)};else{var d=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(a){var r={fn:a,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){var a=n(56)("iterator"),r=!1;try{var o=[7][a]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],l=o[a]();l.next=function(){return{done:n=!0}},o[a]=function(){return l},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var a=n(54),r=n(41),o=n(55),l=n(368),i=n(371);a(a.P+a.R,"Promise",{finally:function(e){var t=l(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return i(t,e()).then(function(){return n})}:e,n?function(n){return i(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var a=n(54),r=n(241),o=n(370);a(a.S,"Promise",{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){n(792),e.exports=n(41).Object.keys},function(e,t,n){var a=n(122),r=n(120);n(360)("keys",function(){return function(e){return r(a(e))}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(794)),f=a(n(946)),p=a(n(432)),h=a(n(267)),m=n(6),v=a(n(171)),y=a(n(88)),g={authWrapper:{marginTop:"35px"},searchBar:{marginTop:80}};window.innerWidth<768&&(g={authWrapper:{marginTop:20},searchBar:{marginTop:15,marginBottom:10}});var E=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={contextData:{branchId:null}},a.assetManager=new y.default,a.changeContext=a.changeContext.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"getChildContext",value:function(){return this.state.contextData}},{key:"componentDidMount",value:function(){this.assetManager.loadCss("src/style/admin/styles.css")}},{key:"componentWillUnmount",value:function(){this.assetManager.unloadAll()}},{key:"changeContext",value:function(e,t){console.log(this.state.contextData);var n=this.state.contextData;n[e]=t,this.setState({contextData:n})}},{key:"renderHeader",value:function(){var e=this,t=this.context.router;return c.default.createElement("div",null,c.default.createElement("div",{className:"admin-header"},c.default.createElement("div",{className:"container"},c.default.createElement(m.Row,{className:"row-sm-10"},c.default.createElement(m.Col,{md:2,sm:3,xs:5},c.default.createElement("img",{src:"src/images/admin/logo.png",className:"logo img-responsive"})),c.default.createElement(m.Col,{md:3,mdPush:6,sm:4,smPush:5,xs:7},c.default.createElement("div",{style:{marginTop:"10px"}},c.default.createElement(h.default,{onChange:function(t){return e.changeContext("branchId",t)}})),c.default.createElement("div",null,c.default.createElement(p.default,{style:g.authWrapper,onUpdate:this.props.onUserUpdate,isLogged:!0}))),c.default.createElement(m.Col,{md:6,mdPull:3,sm:5,smPull:4,xs:12,style:g.searchBar},c.default.createElement(v.default,{onSelectResult:function(e){t.push("/users/"+e)}}))))),c.default.createElement(d.default,null))}},{key:"render",value:function(){return c.default.createElement("div",{className:"admin"},this.renderHeader(),c.default.createElement("div",{className:"container"},this.props.children,c.default.createElement(f.default,null)))}}]),t}(u.Component);t.default=E,E.childContextTypes={branchId:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.number])},E.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(50)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=(n(18),n(6)),p=a(n(99)),h=n(38),m=n(9),v=a(n(16)),y=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.tabRoutesMap={courses:["/courses","/classes","/depts","/classrooms","/attendance","/debtors"],course:["/courses","/classes","/depts","/classrooms","/attendance","/debtors"],donations:["/donations","/donation-records"],classes:"/classes",transactions:"/transactions",user:"/users",settings:"/settings",complaints:"/complaints"},a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=window.location.pathname,t=null,n=(0,r.default)(this.tabRoutesMap);for(var a in n){if(null!=t)break;var o=n[a],l=this.tabRoutesMap[o];Array.isArray(l)||(l=[l]);for(var i in l)if(e.includes(l[i])){t=o;break}}var s=[{route:"dashboard",label:"Dashboard"},{route:"transactions/all",label:"Transactions"},{route:"courses",label:"Course"},{route:"users/role/students",label:"User"},{route:"donations",label:"Donations"},{route:"complaints",label:"Complaints"},{route:"settings/general",label:"Settings"}],u=this.context.user;return v.default.getIfExists(u,"role.roleName","")==m.ROLES.SUPER_ADMIN&&s.push({route:"logs",label:"Logs"}),d.default.createElement("div",{className:"admin-nav"},d.default.createElement("div",{className:"container"},d.default.createElement(p.default,null,s.map(function(e,n){return d.default.createElement(h.LinkContainer,{key:n,to:{pathname:"/"+e.route}},d.default.createElement(f.NavItem,{className:t==e.route?"active":""},e.label))}))))}}]),t}(c.Component);t.default=y,y.contextTypes={user:c.PropTypes.object}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e,t,n){for(var a=!0;a;){var r=e,o=t,l=n;a=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,n=l,a=!0,i=u=void 0}},i=a(n(0)),s=a(n(431)),u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"render",value:function(){return i.default.createElement(s.default,r({},this.props,{onlyActiveOnIndex:!0}))}}]),t}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=a(n(947)),d=a(n(950)),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("div",{className:"content-block",style:{padding:"15px 30px 15px 30px",marginBottom:"20px"}},u.default.createElement("span",null,"Backend "),u.default.createElement(c.default,{style:{margin:"0",display:"inline-block"}}),u.default.createElement("p",{style:{margin:"10px 0 0 0"}},"Frontend Active Terms:"),u.default.createElement(d.default,null)))}}]),t}(u.default.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(14));t.default=(0,o.default)(function(e){var t=e.data,n=t.name,a=t.term,o=t.year,l=e.style;return r.default.createElement("p",{style:l},"Active Term: ",n," (term ",a," ",o,")")},{load:{type:"get",url:"/api/terms/active"}})},function(e,t,n){!function(t,n){e.exports=function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";function a(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t=t.split(" ");for(var r=0;r<t.length;r++)document.addEventListener?e.addEventListener(t[r],n,a):document.attachEvent&&e.attachEvent("on"+t[r],n)}function r(e,t){return("string"==typeof e?e:l(e)).indexOf(" "+t+" ")>=0}function o(e){e.parentNode&&e.parentNode.removeChild(e)}function l(e){return(" "+(e&&e.className||"")+" ").replace(/\s+/gi," ")}Object.defineProperty(t,"__esModule",{value:!0}),t.css=t.deepExtend=t.animationEndEvents=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.inArray=function(e,t,n){var a=void 0;if(n){for(a in t)if(t.hasOwnProperty(a)&&t[a]===e)return!0}else for(a in t)if(t.hasOwnProperty(a)&&t[a]===e)return!0;return!1},t.stopPropagation=function(e){void 0!==(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.generateID=function(){var e="noty_"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+"_";return e+="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.outerHeight=function(e){var t=e.offsetHeight,n=window.getComputedStyle(e);return t+=parseInt(n.marginTop)+parseInt(n.marginBottom)},t.addListener=a,t.hasClass=r,t.addClass=function(e,t){var n=l(e),a=n+t;r(n,t)||(e.className=a.substring(1))},t.removeClass=function(e,t){var n=l(e),a=void 0;r(e,t)&&(a=n.replace(" "+t+" "," "),e.className=a.substring(1,a.length-1))},t.remove=o,t.classList=l,t.visibilityChangeFlow=function(){function e(){s.PageHidden=document[n],t()}function t(){s.PageHidden?setTimeout(function(){Object.keys(s.Store).forEach(function(e){s.Store.hasOwnProperty(e)&&s.Store[e].options.visibilityControl&&s.Store[e].stop()})},100):setTimeout(function(){Object.keys(s.Store).forEach(function(e){s.Store.hasOwnProperty(e)&&s.Store[e].options.visibilityControl&&s.Store[e].resume()}),s.queueRenderAll()},100)}var n=void 0,r=void 0;void 0!==document.hidden?(n="hidden",r="visibilitychange"):void 0!==document.msHidden?(n="msHidden",r="msvisibilitychange"):void 0!==document.webkitHidden&&(n="webkitHidden",r="webkitvisibilitychange"),r&&a(document,r,e),a(window,"blur",function(){s.PageHidden=!0,t()}),a(window,"focus",function(){s.PageHidden=!1,t()})},t.createAudioElements=function(e){if(e.hasSound){var t=document.createElement("audio");e.options.sounds.sources.forEach(function(e){var n=document.createElement("source");n.src=e,n.type="audio/"+function(e){return e.match(/\.([^.]+)$/)[1]}(e),t.appendChild(n)}),e.barDom?e.barDom.appendChild(t):document.querySelector("body").appendChild(t),t.volume=e.options.sounds.volume,e.soundPlayed||(t.play(),e.soundPlayed=!0),t.onended=function(){o(t)}}};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));t.animationEndEvents="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",t.deepExtend=function e(t){t=t||{};for(var n=1;n<arguments.length;n++){var a=arguments[n];if(a)for(var r in a)a.hasOwnProperty(r)&&(Array.isArray(a[r])?t[r]=a[r]:"object"===i(a[r])&&null!==a[r]?t[r]=e(t[r],a[r]):t[r]=a[r])}return t},t.css=function(){function e(e){return e=function(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}(e),a[e]||(a[e]=function(e){var t=document.body.style;if(e in t)return e;for(var a=n.length,r=e.charAt(0).toUpperCase()+e.slice(1),o=void 0;a--;)if((o=n[a]+r)in t)return o;return e}(e))}function t(t,n,a){n=e(n),t.style[n]=a}var n=["Webkit","O","Moz","ms"],a={};return function(e,n){var a=arguments,r=void 0,o=void 0;if(2===a.length)for(r in n)n.hasOwnProperty(r)&&void 0!==(o=n[r])&&n.hasOwnProperty(r)&&t(e,r,o);else t(e,a[1],a[2])}}()},function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";if(p.hasOwnProperty(e)){var t=p[e].queue.shift();t&&t.show()}}function r(e){return!(!e.options.buttons||!Object.keys(e.options.buttons).length)}function o(e){e.options.timeout&&(e.options.progressBar&&e.progressDom&&s.css(e.progressDom,{transition:"width "+e.options.timeout+"ms linear",width:"0%"}),clearTimeout(e.closeTimer),e.closeTimer=setTimeout(function(){e.close()},e.options.timeout))}function l(e){e.options.timeout&&e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=-1,e.options.progressBar&&e.progressDom&&s.css(e.progressDom,{transition:"width 0ms linear",width:"100%"}))}function i(e,t){e.listeners.hasOwnProperty(t)&&e.listeners[t].forEach(function(t){"function"==typeof t&&t.apply(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=t.Store=t.Queues=t.DefaultMaxVisible=t.docTitle=t.DocModalCount=t.PageHidden=void 0,t.getQueueCounts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global",t=0,n=f;return p.hasOwnProperty(e)&&(n=p[e].maxVisible,Object.keys(h).forEach(function(n){h[n].options.queue!==e||h[n].closed||t++})),{current:t,maxVisible:n}},t.addToQueue=function(e){p.hasOwnProperty(e.options.queue)||(p[e.options.queue]={maxVisible:f,queue:[]}),p[e.options.queue].queue.push(e)},t.removeFromQueue=function(e){if(p.hasOwnProperty(e.options.queue)){var t=[];Object.keys(p[e.options.queue].queue).forEach(function(n){p[e.options.queue].queue[n].id!==e.id&&t.push(p[e.options.queue].queue[n])}),p[e.options.queue].queue=t}},t.queueRender=a,t.queueRenderAll=function(){Object.keys(p).forEach(function(e){a(e)})},t.ghostFix=function(e){var t=s.generateID("ghost"),n=document.createElement("div");n.setAttribute("id",t),s.css(n,{height:s.outerHeight(e.barDom)+"px"}),e.barDom.insertAdjacentHTML("afterend",n.outerHTML),s.remove(e.barDom),n=document.getElementById(t),s.addClass(n,"noty_fix_effects_height"),s.addListener(n,s.animationEndEvents,function(){s.remove(n)})},t.build=function(e){!function(e){if(e.options.container)e.layoutDom=document.querySelector(e.options.container);else{var t="noty_layout__"+e.options.layout;e.layoutDom=document.querySelector("div#"+t),e.layoutDom||(e.layoutDom=document.createElement("div"),e.layoutDom.setAttribute("id",t),e.layoutDom.setAttribute("role","alert"),e.layoutDom.setAttribute("aria-live","polite"),s.addClass(e.layoutDom,"noty_layout"),document.querySelector("body").appendChild(e.layoutDom))}}(e);var t='<div class="noty_body">'+e.options.text+"</div>"+function(e){if(r(e)){var t=document.createElement("div");return s.addClass(t,"noty_buttons"),Object.keys(e.options.buttons).forEach(function(n){t.appendChild(e.options.buttons[n].dom)}),e.options.buttons.forEach(function(e){t.appendChild(e.dom)}),t.outerHTML}return""}(e)+'<div class="noty_progressbar"></div>';e.barDom=document.createElement("div"),e.barDom.setAttribute("id",e.id),s.addClass(e.barDom,"noty_bar noty_type__"+e.options.type+" noty_theme__"+e.options.theme),e.barDom.innerHTML=t,i(e,"onTemplate")},t.hasButtons=r,t.handleModal=function(e){e.options.modal&&(0===u&&function(){var e=document.querySelector("body"),t=document.createElement("div");s.addClass(t,"noty_modal"),e.insertBefore(t,e.firstChild),s.addClass(t,"noty_modal_open"),s.addListener(t,s.animationEndEvents,function(){s.removeClass(t,"noty_modal_open")})}(),t.DocModalCount=u+=1)},t.handleModalClose=function(e){if(e.options.modal&&u>0&&(t.DocModalCount=u-=1,u<=0)){var n=document.querySelector(".noty_modal");n&&(s.removeClass(n,"noty_modal_open"),s.addClass(n,"noty_modal_close"),s.addListener(n,s.animationEndEvents,function(){s.remove(n)}))}},t.queueClose=o,t.dequeueClose=l,t.fire=i,t.openFlow=function(e){i(e,"afterShow"),o(e),s.addListener(e.barDom,"mouseenter",function(){l(e)}),s.addListener(e.barDom,"mouseleave",function(){o(e)})},t.closeFlow=function(e){delete h[e.id],e.closing=!1,i(e,"afterClose"),s.remove(e.barDom),0!==e.layoutDom.querySelectorAll(".noty_bar").length||e.options.container||s.remove(e.layoutDom),(s.inArray("docVisible",e.options.titleCount.conditions)||s.inArray("docHidden",e.options.titleCount.conditions))&&d.decrement(),a(e.options.queue)};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),u=(t.PageHidden=!1,t.DocModalCount=0),c={originalTitle:null,count:0,changed:!1,timer:-1},d=t.docTitle={increment:function(){c.count++,d._update()},decrement:function(){c.count--,c.count<=0?d._clear():d._update()},_update:function(){var e=document.title;c.changed?document.title="("+c.count+") "+c.originalTitle:(c.originalTitle=e,document.title="("+c.count+") "+e,c.changed=!0)},_clear:function(){c.changed&&(c.count=0,document.title=c.originalTitle,c.changed=!1)}},f=t.DefaultMaxVisible=5,p=t.Queues={global:{maxVisible:f,queue:[]}},h=t.Store={};t.Defaults={type:"alert",layout:"topRight",theme:"mint",text:"",timeout:!1,progressBar:!0,closeWith:["click"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:!1,force:!1,killer:!1,queue:"global",container:!1,buttons:[],callbacks:{beforeShow:null,onShow:null,afterShow:null,onClose:null,afterClose:null,onClick:null,onHover:null,onTemplate:null},sounds:{sources:[],volume:1,conditions:[]},titleCount:{conditions:[]},modal:!1,visibilityControl:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotyButton=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));t.NotyButton=function e(t,n,r){var o=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom=document.createElement("button"),this.dom.innerHTML=t,this.id=l.id=l.id||a.generateID("button"),this.cb=r,Object.keys(l).forEach(function(e){o.dom.setAttribute(e,l[e])}),a.addClass(this.dom,n||"noty_btn"),this}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.Push=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/service-worker.js";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subData={},this.workerPath=t,this.listeners={onPermissionGranted:[],onPermissionDenied:[],onSubscriptionSuccess:[],onSubscriptionCancel:[],onWorkerError:[],onWorkerSuccess:[],onWorkerNotSupported:[]},this}return a(e,[{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"function"==typeof t&&this.listeners.hasOwnProperty(e)&&this.listeners[e].push(t),this}},{key:"fire",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.listeners.hasOwnProperty(e)&&this.listeners[e].forEach(function(e){"function"==typeof e&&e.apply(t,n)})}},{key:"create",value:function(){console.log("NOT IMPLEMENTED YET")}},{key:"isSupported",value:function(){var e=!1;try{e=window.Notification||window.webkitNotifications||navigator.mozNotification||window.external&&void 0!==window.external.msIsSiteMode()}catch(e){}return e}},{key:"getPermissionStatus",value:function(){var e="default";if(window.Notification&&window.Notification.permissionLevel)e=window.Notification.permissionLevel;else if(window.webkitNotifications&&window.webkitNotifications.checkPermission)switch(window.webkitNotifications.checkPermission()){case 1:e="default";break;case 0:e="granted";break;default:e="denied"}else window.Notification&&window.Notification.permission?e=window.Notification.permission:navigator.mozNotification?e="granted":window.external&&void 0!==window.external.msIsSiteMode()&&(e=window.external.msIsSiteMode()?"granted":"default");return e.toString().toLowerCase()}},{key:"getEndpoint",value:function(e){var t=e.endpoint,n=e.subscriptionId;return n&&-1===t.indexOf(n)&&(t+="/"+n),t}},{key:"isSWRegistered",value:function(){try{return"activated"===navigator.serviceWorker.controller.state}catch(e){return!1}}},{key:"unregisterWorker",value:function(){var e=this;"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){var n=!0,a=!1,r=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)o.value.unregister(),e.fire("onSubscriptionCancel")}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}})}},{key:"requestSubscription",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this,a=this.getPermissionStatus(),r=function(a){"granted"===a?(e.fire("onPermissionGranted"),"serviceWorker"in navigator?navigator.serviceWorker.register(e.workerPath).then(function(){navigator.serviceWorker.ready.then(function(e){n.fire("onWorkerSuccess"),e.pushManager.subscribe({userVisibleOnly:t}).then(function(e){var t=e.getKey("p256dh"),a=e.getKey("auth");n.subData={endpoint:n.getEndpoint(e),p256dh:t?window.btoa(String.fromCharCode.apply(null,new Uint8Array(t))):null,auth:a?window.btoa(String.fromCharCode.apply(null,new Uint8Array(a))):null},n.fire("onSubscriptionSuccess",[n.subData])}).catch(function(e){n.fire("onWorkerError",[e])})})}):n.fire("onWorkerNotSupported")):"denied"===a&&(e.fire("onPermissionDenied"),e.unregisterWorker())};"default"===a?window.Notification&&window.Notification.requestPermission?window.Notification.requestPermission(r):window.webkitNotifications&&window.webkitNotifications.checkPermission&&window.webkitNotifications.requestPermission(r):r(a)}}]),e}()},function(e,t,n){(function(t,n){!function(t,a){e.exports=function(){"use strict";function e(e){return"function"==typeof e}function r(){var e=setTimeout;return function(){return e(o,1)}}function o(){for(var e=0;e<w;e+=2)(0,N[e])(N[e+1]),N[e]=void 0,N[e+1]=void 0;w=0}function l(e,t){var n=arguments,a=this,r=new this.constructor(s);void 0===r[M]&&E(r);var o=a._state;return o?function(){var e=n[o-1];x(function(){return g(o,r,e,a._result)})}():m(a,r,e,t),r}function i(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(s);return d(t,e),t}function s(){}function u(e){try{return e.then}catch(e){return j.error=e,j}}function c(t,n,a){n.constructor===t.constructor&&a===l&&n.constructor.resolve===i?function(e,t){t._state===F?p(e,t._result):t._state===L?h(e,t._result):m(t,void 0,function(t){return d(e,t)},function(t){return h(e,t)})}(t,n):a===j?(h(t,j.error),j.error=null):void 0===a?p(t,n):e(a)?function(e,t,n){x(function(e){var a=!1,r=function(e,t,n,a){try{e.call(t,n,a)}catch(e){return e}}(n,t,function(n){a||(a=!0,t!==n?d(e,n):p(e,n))},function(t){a||(a=!0,h(e,t))},e._label);!a&&r&&(a=!0,h(e,r))},e)}(t,n,a):p(t,n)}function d(e,t){e===t?h(e,new TypeError("You cannot resolve a promise with itself")):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?c(e,t,u(t)):p(e,t)}function f(e){e._onerror&&e._onerror(e._result),v(e)}function p(e,t){e._state===A&&(e._result=t,e._state=F,0!==e._subscribers.length&&x(v,e))}function h(e,t){e._state===A&&(e._state=L,e._result=t,x(f,e))}function m(e,t,n,a){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+F]=n,r[o+L]=a,0===o&&e._state&&x(v,e)}function v(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var a=void 0,r=void 0,o=e._result,l=0;l<t.length;l+=3)a=t[l],r=t[l+n],a?g(n,a,r,o):r(o);e._subscribers.length=0}}function y(){this.error=null}function g(t,n,a,r){var o=e(a),l=void 0,i=void 0,s=void 0,u=void 0;if(o){if((l=function(e,t){try{return e(t)}catch(e){return B.error=e,B}}(a,r))===B?(u=!0,i=l.error,l.error=null):s=!0,n===l)return void h(n,new TypeError("A promises callback cannot return that same promise."))}else l=r,s=!0;n._state!==A||(o&&s?d(n,l):u?h(n,i):t===F?p(n,l):t===L&&h(n,l))}function E(e){e[M]=U++,e._state=void 0,e._result=void 0,e._subscribers=[]}function b(e,t){this._instanceConstructor=e,this.promise=new e(s),this.promise[M]||E(this.promise),C(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&p(this.promise,this._result))):h(this.promise,new Error("Array Methods must be provided an Array"))}function _(e){this[M]=U++,this._result=this._state=void 0,this._subscribers=[],s!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof _?function(e,t){try{t(function(t){d(e,t)},function(t){h(e,t)})}catch(t){h(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var C=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},w=0,k=void 0,S=void 0,x=function(e,t){N[w]=e,N[w+1]=t,2===(w+=2)&&(S?S(o):I())},T="undefined"!=typeof window?window:void 0,P=T||{},R=P.MutationObserver||P.WebKitMutationObserver,O="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),D="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,N=new Array(1e3),I=void 0;I=O?function(){return t.nextTick(o)}:R?function(){var e=0,t=new R(o),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():D?function(){var e=new MessageChannel;return e.port1.onmessage=o,function(){return e.port2.postMessage(0)}}():void 0===T?function(){try{var e=a(9);return void 0!==(k=e.runOnLoop||e.runOnContext)?function(){k(o)}:r()}catch(e){return r()}}():r();var M=Math.random().toString(36).substring(16),A=void 0,F=1,L=2,j=new y,B=new y,U=0;return b.prototype._enumerate=function(e){for(var t=0;this._state===A&&t<e.length;t++)this._eachEntry(e[t],t)},b.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,a=n.resolve;if(a===i){var r=u(e);if(r===l&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===_){var o=new n(s);c(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(a(e),t)},b.prototype._settledAt=function(e,t,n){var a=this.promise;a._state===A&&(this._remaining--,e===L?h(a,n):this._result[t]=n),0===this._remaining&&p(a,this._result)},b.prototype._willSettleAt=function(e,t){var n=this;m(e,void 0,function(e){return n._settledAt(F,t,e)},function(e){return n._settledAt(L,t,e)})},_.all=function(e){return new b(this,e).promise},_.race=function(e){var t=this;return new t(C(e)?function(n,a){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,a)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},_.resolve=i,_.reject=function(e){var t=new this(s);return h(t,e),t},_._setScheduler=function(e){S=e},_._setAsap=function(e){x=e},_._asap=x,_.prototype={constructor:_,then:l,catch:function(e){return this.then(null,e)}},_.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var a=null;try{a=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===a&&!t.cast)return}e.Promise=_},_.Promise=_,_}()}()}).call(t,n(7),n(8))},function(e,t){},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(5);var o=function(e){return e&&e.__esModule?e:{default:e}}(n(4)),l=a(n(0)),i=a(n(1)),s=n(2),u=n(3),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=l.deepExtend({},i.Defaults,t),this.id=this.options.id||l.generateID("bar"),this.closeTimer=-1,this.barDom=null,this.layoutDom=null,this.progressDom=null,this.showing=!1,this.shown=!1,this.closed=!1,this.closing=!1,this.killable=this.options.timeout||this.options.closeWith.length>0,this.hasSound=this.options.sounds.sources.length>0,this.soundPlayed=!1,this.listeners={beforeShow:[],onShow:[],afterShow:[],onClose:[],afterClose:[],onClick:[],onHover:[],onTemplate:[]},this.promises={show:null,close:null},this.on("beforeShow",this.options.callbacks.beforeShow),this.on("onShow",this.options.callbacks.onShow),this.on("afterShow",this.options.callbacks.afterShow),this.on("onClose",this.options.callbacks.onClose),this.on("afterClose",this.options.callbacks.afterClose),this.on("onClick",this.options.callbacks.onClick),this.on("onHover",this.options.callbacks.onHover),this.on("onTemplate",this.options.callbacks.onTemplate),this}return r(e,[{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"function"==typeof t&&this.listeners.hasOwnProperty(e)&&this.listeners[e].push(t),this}},{key:"show",value:function(){var t=this;!0===this.options.killer?e.closeAll():"string"==typeof this.options.killer&&e.closeAll(this.options.killer);var n=i.getQueueCounts(this.options.queue);if(n.current>=n.maxVisible||i.PageHidden&&this.options.visibilityControl)return i.addToQueue(this),i.PageHidden&&this.hasSound&&l.inArray("docHidden",this.options.sounds.conditions)&&l.createAudioElements(this),i.PageHidden&&l.inArray("docHidden",this.options.titleCount.conditions)&&i.docTitle.increment(),this;if(i.Store[this.id]=this,i.fire(this,"beforeShow"),this.showing=!0,this.closing)return this.showing=!1,this;if(i.build(this),i.handleModal(this),this.options.force?this.layoutDom.insertBefore(this.barDom,this.layoutDom.firstChild):this.layoutDom.appendChild(this.barDom),this.hasSound&&!this.soundPlayed&&l.inArray("docVisible",this.options.sounds.conditions)&&l.createAudioElements(this),l.inArray("docVisible",this.options.titleCount.conditions)&&i.docTitle.increment(),this.shown=!0,this.closed=!1,i.hasButtons(this)&&Object.keys(this.options.buttons).forEach(function(e){var n=t.barDom.querySelector("#"+t.options.buttons[e].id);l.addListener(n,"click",function(n){l.stopPropagation(n),t.options.buttons[e].cb()})}),this.progressDom=this.barDom.querySelector(".noty_progressbar"),l.inArray("click",this.options.closeWith)&&(l.addClass(this.barDom,"noty_close_with_click"),l.addListener(this.barDom,"click",function(e){l.stopPropagation(e),i.fire(t,"onClick"),t.close()},!1)),l.addListener(this.barDom,"mouseenter",function(){i.fire(t,"onHover")},!1),this.options.timeout&&l.addClass(this.barDom,"noty_has_timeout"),this.options.progressBar&&l.addClass(this.barDom,"noty_has_progressbar"),l.inArray("button",this.options.closeWith)){l.addClass(this.barDom,"noty_close_with_button");var a=document.createElement("div");l.addClass(a,"noty_close_button"),a.innerHTML="",this.barDom.appendChild(a),l.addListener(a,"click",function(e){l.stopPropagation(e),t.close()},!1)}return i.fire(this,"onShow"),null===this.options.animation.open?this.promises.show=new o.default(function(e){e()}):"function"==typeof this.options.animation.open?this.promises.show=new o.default(this.options.animation.open.bind(this)):(l.addClass(this.barDom,this.options.animation.open),this.promises.show=new o.default(function(e){l.addListener(t.barDom,l.animationEndEvents,function(){l.removeClass(t.barDom,t.options.animation.open),e()})})),this.promises.show.then(function(){var e=t;setTimeout(function(){i.openFlow(e)},100)}),this}},{key:"stop",value:function(){return i.dequeueClose(this),this}},{key:"resume",value:function(){return i.queueClose(this),this}},{key:"setTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if(this.stop(),this.options.timeout=e,this.barDom){this.options.timeout?l.addClass(this.barDom,"noty_has_timeout"):l.removeClass(this.barDom,"noty_has_timeout");var t=this;setTimeout(function(){t.resume()},100)}return this})},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.barDom&&(this.barDom.querySelector(".noty_body").innerHTML=e),t&&(this.options.text=e),this}},{key:"setType",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.barDom&&(l.classList(this.barDom).split(" ").forEach(function(e){"noty_type__"===e.substring(0,11)&&l.removeClass(t.barDom,e)}),l.addClass(this.barDom,"noty_type__"+e)),n&&(this.options.type=e),this}},{key:"setTheme",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.barDom&&(l.classList(this.barDom).split(" ").forEach(function(e){"noty_theme__"===e.substring(0,12)&&l.removeClass(t.barDom,e)}),l.addClass(this.barDom,"noty_theme__"+e)),n&&(this.options.theme=e),this}},{key:"close",value:function(){var e=this;return this.closed?this:this.shown?(i.fire(this,"onClose"),this.closing=!0,null===this.options.animation.close?this.promises.close=new o.default(function(e){e()}):"function"==typeof this.options.animation.close?this.promises.close=new o.default(this.options.animation.close.bind(this)):(l.addClass(this.barDom,this.options.animation.close),this.promises.close=new o.default(function(t){l.addListener(e.barDom,l.animationEndEvents,function(){e.options.force?l.remove(e.barDom):i.ghostFix(e),t()})})),this.promises.close.then(function(){i.closeFlow(e),i.handleModalClose(e)}),this.closed=!0,this):(i.removeFromQueue(this),this)}}],[{key:"closeAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.keys(i.Store).forEach(function(t){e?i.Store[t].options.queue===e&&i.Store[t].killable&&i.Store[t].close():i.Store[t].killable&&i.Store[t].close()}),this}},{key:"overrideDefaults",value:function(e){return i.Defaults=l.deepExtend({},i.Defaults,e),this}},{key:"setMaxVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.DefaultMaxVisible,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";return i.Queues.hasOwnProperty(t)||(i.Queues[t]={maxVisible:e,queue:[]}),i.Queues[t].maxVisible=e,this}},{key:"button",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new s.NotyButton(e,t,n,a)}},{key:"version",value:function(){return"3.1.4"}},{key:"Push",value:function(e){return new u.Push(e)}}]),e}();t.default=c,l.visibilityChangeFlow(),e.exports=t.default},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(){h&&f&&(h=!1,f.length?p=f.concat(p):m=-1,p.length&&l())}function l(){if(!h){var e=r(o);h=!0;for(var t=p.length;t;){for(f=p,p=[];++m<t;)f&&f[m].run();m=-1,t=p.length}f=null,h=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===a||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var u,c,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{c="function"==typeof clearTimeout?clearTimeout:a}catch(e){c=a}}();var f,p=[],h=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new i(e,t)),1!==p.length||h||r(l)},i.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){}])}()}()},function(e,t){},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(15)),f=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:null},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(){var e=this;this.loadP=d.default.ajax({type:"get",url:"/api/terms/frontend"}),this.loadP.then(function(t){return e.setState({data:t})},function(e){return console.error(e)})}},{key:"componentWillMount",value:function(){this.load()}},{key:"render",value:function(){var e=this.state.data;return e?c.default.createElement("div",null,e.map(function(e,t){return c.default.createElement("div",{key:t},e.name," (term ",e.term," ",e.year,")")})):c.default.createElement("div",null)}}]),t}(u.Component);t.default=f},function(e,t,n){var a=n(41),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){e.exports={default:n(953),__esModule:!0}},function(e,t,n){n(238),n(158),n(161),n(954),n(960),n(963),n(965),e.exports=n(41).Set},function(e,t,n){"use strict";var a=n(955),r=n(433);e.exports=n(956)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return a.def(r(this,"Set"),e=0===e?0:e,e)}},a)},function(e,t,n){"use strict";var a=n(67).f,r=n(160),o=n(242),l=n(82),i=n(240),s=n(125),u=n(234),c=n(363),d=n(372),f=n(69),p=n(236).fastKey,h=n(433),m=f?"_s":"size",v=function(e,t){var n,a=p(t);if("F"!==a)return e._i[a];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var c=e(function(e,a){i(e,c,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=a&&s(a,n,e[u],e)});return o(c.prototype,{clear:function(){for(var e=h(this,t),n=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete n[a.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),a=v(n,e);if(a){var r=a.n,o=a.p;delete n._i[a.i],a.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==a&&(n._f=r),n._l==a&&(n._l=o),n[m]--}return!!a},forEach:function(e){h(this,t);for(var n,a=l(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(a(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),f&&a(c.prototype,"size",{get:function(){return h(this,t)[m]}}),c},def:function(e,t,n){var a,r,o=v(e,t);return o?o.v=n:(e._l=o={i:r=p(t,!0),k:t,v:n,p:a=e._l,n:void 0,r:!1},e._f||(e._f=o),a&&(a.n=o),e[m]++,"F"!==r&&(e._i[r]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var a=n(55),r=n(54),o=n(236),l=n(94),i=n(83),s=n(242),u=n(125),c=n(240),d=n(64),f=n(124),p=n(67).f,h=n(957)(0),m=n(69);e.exports=function(e,t,n,v,y,g){var E=a[e],b=E,_=y?"set":"add",C=b&&b.prototype,w={};return m&&"function"==typeof b&&(g||C.forEach&&!l(function(){(new b).entries().next()}))?(b=t(function(t,n){c(t,b,e,"_c"),t._c=new E,void 0!=n&&u(n,y,t[_],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in C&&(!g||"clear"!=e)&&i(b.prototype,e,function(n,a){if(c(this,b,e),!t&&g&&!d(n))return"get"==e&&void 0;var r=this._c[e](0===n?0:n,a);return t?this:r})}),g||p(b.prototype,"size",{get:function(){return this._c.size}})):(b=v.getConstructor(t,e,y,_),s(b.prototype,n),o.NEED=!0),f(b,e),w[e]=b,r(r.G+r.W+r.F,w),g||v.setStrong(b,e,y),b}},function(e,t,n){var a=n(82),r=n(226),o=n(122),l=n(228),i=n(958);e.exports=function(e,t){var n=1==e,s=2==e,u=3==e,c=4==e,d=6==e,f=5==e||d,p=t||i;return function(t,i,h){for(var m,v,y=o(t),g=r(y),E=a(i,h,3),b=l(g.length),_=0,C=n?p(t,b):s?p(t,0):void 0;b>_;_++)if((f||_ in g)&&(m=g[_],v=E(m,_,y),e))if(n)C[_]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return _;case 2:C.push(m)}else if(c)return!1;return d?-1:u||c?c:C}}},function(e,t,n){var a=n(959);e.exports=function(e,t){return new(a(e))(t)}},function(e,t,n){var a=n(64),r=n(364),o=n(56)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),a(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var a=n(54);a(a.P+a.R,"Set",{toJSON:n(961)("Set")})},function(e,t,n){var a=n(239),r=n(962);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var a=n(125);e.exports=function(e,t){var n=[];return a(e,!1,n.push,n,t),n}},function(e,t,n){n(964)("Set")},function(e,t,n){"use strict";var a=n(54);e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(966)("Set")},function(e,t,n){"use strict";var a=n(54),r=n(119),o=n(82),l=n(125);e.exports=function(e){a(a.S,e,{from:function(e){var t,n,a,i,s=arguments[1];return r(this),(t=void 0!==s)&&r(s),void 0==e?new this:(n=[],t?(a=0,i=o(s,arguments[2],2),l(e,!1,function(e){n.push(i(e,a++))})):l(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(968)),f=a(n(969)),p=a(n(973)),h=a(n(974)),m=a(n(975)),v=a(n(976)),y=n(441),g=function(e){function t(e,n){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"renderHeader",value:function(){var e=this.context.user;return c.default.createElement("div",null,e?c.default.createElement(d.default,{onUserUpdate:this.props.onUserUpdate}):"")}},{key:"render",value:function(){var e=this.context.website,t=e.header,n=e.footer;return c.default.createElement("div",null,c.default.createElement(y.WebsiteComponent,{id:"header",template:t}),c.default.createElement("div",{className:"container"},this.renderHeader(),this.props.children),c.default.createElement(y.WebsiteComponent,{id:"footer",template:n}))}}],[{key:"getClassesAvailable",value:function(){return f.default}},{key:"getMyCourses",value:function(){return p.default}},{key:"getDonations",value:function(){return h.default}},{key:"getCart",value:function(){return m.default}},{key:"getHome",value:function(){return"/classes/available"}},{key:"getPaymentStudent",value:function(){return v.default}}]),t}(u.Component);t.default=g,g.propTypes={onUserUpdate:u.PropTypes.func.isRequired},g.contextTypes={user:u.PropTypes.object,website:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=n(38),p=a(n(96)),h=a(n(11)),m=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.logout=a.logout.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"logout",value:function(){var e=this.props.onUserUpdate;p.default.logout().then(function(){return e()},function(t){h.default.error("Logout error",t),e()})}},{key:"componentDidMount",value:function(){$(function(){$("#navMenu").addClass("user-nav-bar")})}},{key:"render",value:function(){var e=this.context.user.profile,t=e.profileForname,n=e.profileSurname,a={textAlign:"center",fontFamily:"marianina_wd_fyregular",fontSize:"20px",marginRight:"5px",marginLeft:"5px"};return c.default.createElement(d.Navbar,{id:"navMenu"},c.default.createElement(d.Nav,{style:{borderBottom:"0"},className:"front-navbar",bsStyle:"tabs",activeKey:this.props.activeKey},c.default.createElement(f.LinkContainer,{style:a,to:{pathname:"/classes/available"}},c.default.createElement(d.NavItem,{eventKey:1,href:"/dashboard"},"AVAILABLE CLASSES")),c.default.createElement(f.LinkContainer,{style:a,to:{pathname:"/cart"}},c.default.createElement(d.NavItem,{eventKey:2},"REGISTRATION CART")),c.default.createElement(f.LinkContainer,{style:a,to:{pathname:"/courses"}},c.default.createElement(d.NavItem,{eventKey:3},"MY COURSES")),c.default.createElement(f.LinkContainer,{style:a,to:{pathname:"/donations"}},c.default.createElement(d.NavItem,{eventKey:3},"DONATIONS")),c.default.createElement(f.LinkContainer,{style:a,to:{pathname:"/profile"}},c.default.createElement(d.NavItem,{eventKey:4},"PROFILE"))),c.default.createElement(d.Nav,{style:{marginRight:"15px",marginTop:"9px"},className:"front-navbar-right",pullRight:!0},c.default.createElement("div",null,c.default.createElement("span",{style:{marginRight:"10px",fontSize:"15px",verticalAlign:"middle"}},"Logged as "+t+" "+n),c.default.createElement(d.Button,{onClick:this.logout,bsStyle:"warning"},c.default.createElement("span",{style:{fontSize:"15px"}},"Logout")))))}}]),t}(u.Component);t.default=m,m.contextTypes={user:u.PropTypes.object},m.propTypes={onUserUpdate:u.PropTypes.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(434)),o=a(n(50)),l=a(n(59)),i=a(n(70)),s=a(n(3)),u=a(n(1)),c=a(n(2)),d=a(n(4)),f=a(n(5)),p=n(0),h=a(p),m=a(n(14)),v=a(n(11)),y=a(n(16)),g=(a(n(268)),a(n(31)),n(6)),E=a(n(435)),b=n(12),_=(a(n(436)),a(n(438))),C=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return a.state={isLoading:!1,data:{},tabsActiveKey:0},a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"parseData",value:function(e){var t=y.default.getIfExists,n={};for(var a in e){var r=e[a],o=t(r,"term.name","Other"),l=(r.classGender,t(r,"course.dept.branchAssociated")),s="1"==t(r,"course.isFullTime","0")?"fullTime":"partTime",u=t(r,"course.dept",{id:0,deptName:"Other",weight:"-1"}),c=t(r,"course");n[o]||(n[o]={branches:[],partTimeDescription:t(r,"term.partTimeDescription",""),fullTimeDescription:t(r,"term.fullTimeDescription","")});var d=n[o].branches;d[l.id]||(d[l.id]=l,d[l.id].depts={fullTime:[],partTime:[]});var f=d[l.id].depts;f[s][u.id]||(f[s][u.id]=u,f[s][u.id].courses=[]);var p=f[s][u.id].courses;p[c.id]||(p[c.id]=c,p[c.id].classes=[]);for(var h in r)"object"===(0,i.default)(r[h])&&delete r[h];p[c.id].classes[r.id]=r}return n}},{key:"sortItemsByWeight",value:function(e){var t=function(e,t,n){return parseInt(t[e])>parseInt(n[e])?1:-1};for(var n in e){var a=e[n].branches;a.sort(function(e,n){return t("branchWeight",e,n)});for(var r in a){var o=a[r].depts;for(var l in o){var i=o[l];i.sort(function(e,n){return t("weight",e,n)});for(var s in i){var u=i[s].courses;u.sort(function(e,n){return t("weight",e,n)});for(var c in u)u[c].classes.sort(function(e,n){return t("classWeight",e,n)})}}}}return e}},{key:"loadClasses",value:function(e){var t=this;this.setState({isLoading:!0}),e||(e=this.context);var n=e.user;(0,this.props.execute)("loadClasses",{userId:y.default.getIfExists(n,"id","")},function(e){t.setState({isLoading:!1,data:t.sortItemsByWeight(t.parseData(e))})},function(e){v.default.error("Error loading available classes"),t.setState({isLoading:!1})})}},{key:"componentWillMount",value:function(){this.loadClasses()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.context.user;(0,l.default)(n)!==(0,l.default)(t.user)&&this.loadClasses(t)}},{key:"renderBranchesView",value:function(e){return h.default.createElement(w,{gender:"male",branches:e.branches,term:e})}},{key:"renderTabs",value:function(){var e=this.state.data,t=[],n=0;for(var a in e)t.push(h.default.createElement(g.Tab,{key:n,eventKey:n,title:a},this.renderBranchesView(e[a]))),n++;return t}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.data,r=t.tabsActiveKey,l=(0,o.default)(a);return n?h.default.createElement("p",null,"Loading..."):0===l.length?h.default.createElement("h1",null,"No classes available yet"):1===l.length?this.renderBranchesView(a[l[0]]):h.default.createElement(g.Tabs,{activeKey:r,onSelect:function(t){return e.setState({tabsActiveKey:t})}},this.renderTabs())}}]),t}(p.Component);C.contextTypes={user:p.PropTypes.object},t.default=(0,m.default)(C,{loadClasses:{type:"get",url:"/api/classes/available"}}),(function(e){function t(e,n){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return a.state={tabActiveKey:"male"},a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"renderTabs",value:function(){var e=this.props.termData,t=[];for(var n in e)e[n].branches.length>0&&t.push(h.default.createElement(g.Tab,{key:n,eventKey:n,title:n,id:n+"-courses-tab",className:n+"-courses-tab"},h.default.createElement(w,{gender:n,branches:e[n].branches,term:e})));return t}},{key:"render",value:function(){var e=this,t=this.state.tabActiveKey;return h.default.createElement(g.Tabs,{activeKey:t,onSelect:function(t){return e.setState({tabActiveKey:t})},id:"tabnav"},this.renderTabs())}}]),t}(p.Component)).propTypes={termData:p.PropTypes.object.isRequired};var w=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return a.state={expandedDept:null},a.onSelect=a.onSelect.bind(a),a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"onSelect",value:function(e,t){return this.state.expandedDept==e&&(e=null),this.setState({expandedDept:e}),t&&t.preventDefault(),!1}},{key:"scrollToSelected",value:function(){var e=window.location.hash;e&&e.length>0&&(e=e.slice(1));var t=this.props.branches,n=!0,a=!1,o=void 0;try{for(var l,s=(0,r.default)(t);!(n=(l=s.next()).done);n=!0){var u=l.value;if(u)for(var c in u.depts){var d=u.depts[c],f=!0,p=!1,h=void 0;try{for(var m,v=(0,r.default)(d);!(f=(m=v.next()).done);f=!0){var y=m.value;if(y){var g=!0,E=!1,b=void 0;try{for(var C,w=(0,r.default)(y.courses);!(g=(C=w.next()).done);g=!0){var k=C.value;if("object"==(void 0===k?"undefined":(0,i.default)(k))&&k.id==e)return void this.setState({expandedDept:y.id},function(){(0,_.default)(e)})}}catch(e){E=!0,b=e}finally{try{!g&&w.return&&w.return()}finally{if(E)throw b}}}}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}}}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}}},{key:"componentDidMount",value:function(){this.scrollToSelected()}},{key:"setHtml",value:function(e){return{__html:e}}},{key:"renderDepts",value:function(e,t,n){var a=this,r=this.state.expandedDept,o=[];for(var l in t.depts){var i=t.depts[l];if(0!==i.length){var s="fullTime"==l?n.fullTimeDescription:n.partTimeDescription;o.push(h.default.createElement("div",{key:l},h.default.createElement("p",{className:"available-classes label"},h.default.createElement("b",null)," courses"),h.default.createElement("p",{className:"term-description",dangerouslySetInnerHTML:this.setHtml(s)}),h.default.createElement("div",null,i.map(function(t,n){return h.default.createElement(g.Panel,{key:n,eventKey:t.id,header:t.deptName,collapsible:!0,expanded:r==t.id,onSelect:function(e,n){return a.onSelect(t.id,e)},style:{marginBottom:"0px"}},h.default.createElement(k,{gender:e,courses:t.courses}))}))))}}return h.default.createElement("div",null,o)}},{key:"render",value:function(){var e=this,t=this.props,n=t.gender,a=t.branches,r=t.term;return h.default.createElement("div",null,a.map(function(t,a){return h.default.createElement("div",{key:a},h.default.createElement("h1",{className:"available-classes header branch-"+n},h.default.createElement("b",null,"All courses "),"registration & full info ("+t.branchName+")"),e.renderDepts(n,t,r))}))}}]),t}(p.Component);w.propTypes={gender:p.PropTypes.string.isRequired,branches:p.PropTypes.array.isRequired,term:p.PropTypes.object.isRequired};var k=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return a.state={showRegisterWindow:!1,selectedCourse:null,selectedGender:null},a.registerOnline=a.registerOnline.bind(a),a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"registerOnline",value:function(e,t,n){e.preventDefault(),this.context.router,this.setState({showRegisterWindow:!0,selectedCourse:t,selectedGender:n})}},{key:"handleAnchor",value:function(e,t){e.preventDefault(),(0,_.default)(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.showRegisterWindow,a=t.selectedCourse,r=t.selectedGender,l=this.props,i=l.courses,s=l.gender,u=this.context.website;for(var c in i){var d=i[c],f=[];for(var p in d.classes){var m=d.classes[p].classGender;f[m]||(f[m]=[],f[m].classes=[],f[m].label="both"==m?"FOR BOTH":"male"==m?"FOR MALE":"FOR FEMALE"),f[m].classes.push(d.classes[p])}i[c].genderSplit=f}return h.default.createElement("div",null,i.map(function(t,n){return h.default.createElement("div",{key:n,id:t.id,className:"course-container"},h.default.createElement("a",{href:window.location.pathname+"#"+t.id,onClick:function(n){return e.handleAnchor(n,t.id)},className:"available-classes course-label",id:t.id},t.courseTitle),h.default.createElement(g.Row,{style:{marginBottom:"10px"}},h.default.createElement(g.Col,{md:6},h.default.createElement("div",{className:"course-description",dangerouslySetInnerHTML:{__html:t.courseDescription}}),h.default.createElement("div",{className:"button-sec"},h.default.createElement("ul",null,h.default.createElement("li",null,"Fees"),h.default.createElement("li",{className:""+s},u.paymentField1+" "+t.feeForEmployed+" / "+u.paymentField2+" "+t.feeForUnemployed)),h.default.createElement("div",{className:"social-media-icon",style:{display:"none"}},h.default.createElement("a",{href:"https://www.facebook.com/TayyibunUK/"},h.default.createElement("img",{src:"/src/images/facebook-icon.png"}))),h.default.createElement("div",{className:"social-media-icon",style:{display:"none"}},h.default.createElement("a",{href:"https://twitter.com/Tayyibun"},h.default.createElement("img",{src:"/src/images/twitter-icon.png"})))),h.default.createElement("div",{className:"donload-link",style:{display:"none"}},h.default.createElement("a",{href:t.courseSubtitle},h.default.createElement("img",{width:"18",height:"18",alt:"letter-paper",src:"/src/images/letter-paper.png",className:"alignnone size-full wp-image-160"}),"Download Course Handbook"))),h.default.createElement(g.Col,{md:6},h.default.createElement("div",null,t.classes.map(function(e,n){return h.default.createElement("div",{key:n,style:{marginBottom:"0px"}},h.default.createElement(b.Html,null,t.courseStructure))}),h.default.createElement("div",{style:"1"==t.isFullTime?{display:"none"}:{}},h.default.createElement("p",{className:"course-timing-label"},"You may choose to study on one of the following days for the full duration of the full course."),h.default.createElement("div",{style:{marginTop:"30px",display:"flex",justifyContent:"space-between",flexWrap:"wrap"}},(0,o.default)(t.genderSplit).map(function(n,a){return h.default.createElement("div",{className:"gender-split",style:{position:"relative",height:"200px",flexBasis:"220px",marginBottom:"20px"}},h.default.createElement("p",{className:n+"-bgr gend-title"},t.genderSplit[n].label),t.genderSplit[n].classes.map(function(e,t){return h.default.createElement("p",{key:t,className:"course-timing-label"},t>0?"or":""," ",e.classTime)}),h.default.createElement("div",{className:"split"}),h.default.createElement("div",{className:"register-btn"},h.default.createElement("ul",null,h.default.createElement("li",{className:"golden-btn",style:"1"==t.isFullTime?{display:"none"}:{}},h.default.createElement("a",{type:"button",className:"reg_online",onClick:function(a){return e.registerOnline(a,t,n)},style:{cursor:"pointer"}},h.default.createElement("img",{width:"9",height:"19",alt:"mouse",src:"/src/images/mouse.png",className:"alignnone size-full wp-image-162"}),"REGISTER ONLINE NOW"))),h.default.createElement("a",{href:"pages/Institute/register.html"},"REGISTER IN PERSON")))})))))))}),n?h.default.createElement(E.default,{onClose:function(){return e.setState({showRegisterWindow:!1})},course:a,gender:r}):"")}}]),t}(p.Component);k.contextTypes={user:p.PropTypes.object,router:p.PropTypes.object.isRequired,website:p.PropTypes.object.isRequired}},function(e,t,n){n(161),n(158),e.exports=n(971)},function(e,t,n){var a=n(68),r=n(367);e.exports=n(41).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},function(e,t,n){"use strict";function a(){return document.documentElement.scrollTop||document.body.scrollTop}Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollTop=a,t.setScrollTop=function(e){document.documentElement.scrollTop=document.body.scrollTop=e},t.getOffsetTop=function(e){return e.getBoundingClientRect().top+a()}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(a(n(15)),a(n(14))),f=a(n(16)),p=(a(n(29)),n(18)),h=a(n(31)),m=n(6),v=n(12),y=(a(n(11)),a(n(89)),function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={termToStudents:{}},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"onFieldChange",value:function(e,t){this.changeField(e,t)}},{key:"parseData",value:function(e){var t={};for(var n in e){var a=e[n],r=f.default.getIfExists(a,"courseClass.term.name","Other");t[r]||(t[r]=[]),t[r].push(a)}this.setState({termToStudents:t})}},{key:"componentWillMount",value:function(){this.parseData(this.props.data.rows)}},{key:"renderClasses",value:function(){var e=this.state.termToStudents,t=[];for(var n in e){var a=e[n];t.push(c.default.createElement(E,{key:n,title:n,data:a}))}return c.default.createElement("div",null,t)}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("h2",null,"All Course Registration"),this.renderClasses())}}]),t}(u.Component));t.default=(0,d.default)(y,{load:{type:"get",url:"/api/classes/my",data:{fields:["registerDate","regStatus","studentStatus","reducedAmount","totalAmount","score","feedback","studentAbsent","course.courseTitle","course.feeForEmployed","course.feeForUnemployed","course.courseTitle","courseClass.exams","courseClass.classWorks","courseClass.classDescription","courseClass.feeForEmployed","courseClass.feeForUnemployed","courseClass.term.name","courseClass.classTime","courseClass.teacher.userFullname","payments"]}}});var g=function(e){return{__html:e}},E=function(e){for(var t=e.data,n=e.title,a=e.key,r=f.default.getIfExists,o=[],l=0;l<t.length;l++)o.push(function(e,t){var n=[],a=[],o=[],l=[],i=[],s=[],u=0,d=function(e,t){return n.push(c.default.createElement(m.Col,{md:t,sm:t,xs:t,className:"colTable",style:{lineHeight:"44px"},key:u++},c.default.createElement("p",null,e)))},f=function(e,t){return s.push(c.default.createElement(m.Col,{md:3,sm:3,xs:3,className:"colTable",style:{height:"100px"}},c.default.createElement("span",{dangerouslySetInnerHTML:g(t)}),c.default.createElement("p",null,e)))},y=function(e,t){return a.push(c.default.createElement("span",null," ",e))},E=function(e,t,n){return o.push(c.default.createElement("span",null," ",e," ",t," ",n))};d(e.registerDate,3),d(r(e,"courseClass.classTime","none"),2),d(r(e,"courseClass.teacher.userFullname","none"),2),function(e,t){l.push(c.default.createElement("span",null," ",e))}(r(e,"courseClass.teacher.userFullname","none",{width:"20%"}));var b=0;switch(r(e,"studentStatus","unemployed")){case"employed":case"unemployed":var _="feeFor"+h.default.ucFirst(r(e,"studentStatus","unemployed"));b=parseFloat(parseFloat(e.courseClass[_])>=0?e.courseClass[_]:e.course[_]).toFixed(2);break;case"reduced":b=parseFloat(e.reducedAmount).toFixed(2)}if(e.totalAmount&&parseFloat(e.totalAmount).toFixed(2),e.payments.length>0){for(var C=e.payments,w=0,k=0;k<C.length;k++)w+=C[k].amount;var S=parseInt(e.payments[0].courseStudentId);b=parseInt(b)-w,localStorage.setItem("pay-"+S,b),function(e,t,a,r){n.push(c.default.createElement(m.Col,{md:5,sm:8,xs:12,className:"colTablePayment"},c.default.createElement("span",{style:{color:"black",fontWeight:"normal",fontSize:"11pt",marginRight:"5px"}}," ",a," Paid, Remaining "),c.default.createElement(v.EditableValueInlineBlock,{style:{display:"inline-block"},value:r,onFieldChange:function(e,n){""==n&&(n=-1),localStorage.setItem("pay-"+t,n)},enableExternalUpdates:!0},c.default.createElement("input",{type:"number",min:0,className:"form-control",name:t})),c.default.createElement("div",{style:{display:"inline-block"}},c.default.createElement("a",{style:{color:"#337ab7",cursor:"pointer"},onClick:function(e){e.preventDefault();var n=localStorage.getItem("pay-"+t);p.browserHistory.push("/pay-student/"+n+"/"+t)}},"Pay Online"))))}(0,""+e.payments[0].courseStudentId,""+w,""+b)}if(y(r(e,"score","")),y(r(e,"feedback","")),e.courseClass.exams.length>0){var x=e.courseClass.exams;for(k=0;k<x.length;k++)E(r(x[k],"title","No Title"),r(x[k].scores[0],"score","")+"%",r(x[k].scores[0],"comment",""))}else E("","","");if(function(e,t){i.push(c.default.createElement("span",{dangerouslySetInnerHTML:g(e)}))}(r(e.courseClass,"classDescription","")),e.studentAbsent&&e.studentAbsent.length>0&&e.courseClass.classWorks.length>0){var T=e.studentAbsent;for(k=0;k<T.length;k++)if("present"==T[k].attendance){if(!e.courseClass.classWorks[k])continue;f(r(e.studentAbsent[k],"date",""),'<img src="src/images/check.gif" width="60" height="45"/>'),f(r(e.courseClass.classWorks[k],"done_work",""),""),f(r(e.courseClass.classWorks[k],"home_work",""),""),f(r(e.studentAbsent[k],"comment",""),"")}else f(r(e.studentAbsent[k],"date",""),'<img src="src/images/cross.gif" width="60" height="55"/>'),f(r(e.courseClass.classWorks[k],"done_work",""),""),f(r(e.courseClass.classWorks[k],"home_work",""),""),f(r(e.studentAbsent[k],"comment",""),"")}return t++,c.default.createElement(m.Panel,{eventKey:t,header:e.course.courseTitle[0]},c.default.createElement(m.Row,{className:"headingTableText"},n),c.default.createElement(m.Col,{lg:12,md:12,sm:12,xs:12,className:"bodyPart"},c.default.createElement(m.Row,null,c.default.createElement(m.Col,{md:12},c.default.createElement("h3",null,i))),c.default.createElement(m.Row,null,c.default.createElement(m.Col,{md:12},c.default.createElement("p",null,"Final Exam: ",a))),c.default.createElement(m.Row,null,c.default.createElement(m.Col,{md:12},o.map(function(e){return c.default.createElement("p",null,e)}))),c.default.createElement(m.Row,null,c.default.createElement(m.Col,{md:3,sm:3,xs:3},c.default.createElement("h4",{className:"headingText"},"Attendance")),c.default.createElement(m.Col,{md:3,sm:3,xs:3},c.default.createElement("h4",{className:"workDone headingText"},"Work Done")),c.default.createElement(m.Col,{md:3,sm:3,xs:3},c.default.createElement("h4",{className:"headingText"},"Homework")),c.default.createElement(m.Col,{md:3,sm:3,xs:3},c.default.createElement("h4",{className:"headingText"},"Notes")),s)))}(t[l],l));return c.default.createElement("div",null,c.default.createElement(m.Accordion,null,c.default.createElement(m.Panel,{eventKey:a,header:n},c.default.createElement(m.Accordion,null,o))))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(14)),p=n(6),h=a(n(440)),m=n(12),v=a(n(11)),y=a(n(89)),g=a(n(43)),E=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={donationAmount:0,typedAmount:"",showSubmitDialog:!1,donationSubmitted:!1,donationRecord:{},showPaymentForm:!1},a.onTextChange=a.onTextChange.bind(a),a.onRadioChange=a.onRadioChange.bind(a),a.submit=a.submit.bind(a),a.onSubmitDonation=a.onSubmitDonation.bind(a),a.redirectToPaypal=a.redirectToPaypal.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onRadioChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({typedAmount:""},n,a))}},{key:"onTextChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({typedAmount:a},n,a))}},{key:"submit",value:function(){var e=this.state.donationAmount;parseFloat(e)<=0?alert("Select donation amount please"):this.setState({showSubmitDialog:!0})}},{key:"redirectToPaypal",value:function(){(0,this.props.execute)("checkout",{donationId:this.state.donationRecord.id},function(e){if(e.paypalForm){var t=$("<div/>").html(e.paypalForm).text();$("body").append(t),$("form[name='paypal_form']").submit()}},function(e){return v.default.error(e.responseText.replace(/"/g,""))})}},{key:"onSubmitDonation",value:function(e){e&&this.setState({donationRecord:e,showPaymentForm:!0})}},{key:"componentDidMount",value:function(){$(function(){(0,g.default)($("textarea"))})}},{key:"renderPreview",value:function(){var e=this.props.data,t=this.state,n=t.donationAmount,a=t.typedAmount;return d.default.createElement("div",null,d.default.createElement(p.Jumbotron,null,d.default.createElement("h2",null,"One Off Donation"),d.default.createElement(m.Html,null,e.body),d.default.createElement("div",null,d.default.createElement("div",{style:{display:"inline-block",marginRight:"15px"}},d.default.createElement("input",{type:"radio",value:10,checked:10==n&&!a,name:"donationAmount",onChange:this.onRadioChange}),d.default.createElement("span",{style:{marginLeft:"10px"}}," 10")),d.default.createElement("div",{style:{display:"inline-block",marginRight:"15px"}},d.default.createElement("input",{type:"radio",value:25,checked:25==n&&!a,name:"donationAmount",onChange:this.onRadioChange}),d.default.createElement("span",{style:{marginLeft:"10px"}}," 25")),d.default.createElement("div",{style:{display:"inline-block",marginRight:"15px"}},d.default.createElement("input",{type:"radio",value:50,checked:50==n&&!a,name:"donationAmount",onChange:this.onRadioChange}),d.default.createElement("span",{style:{marginLeft:"10px"}}," 50")),d.default.createElement("div",{style:{display:"inline-block",marginRight:"15px"}},d.default.createElement("input",{type:"text",className:"form-control",style:{display:"inline-block",width:"100px"},name:"donationAmount",onChange:this.onTextChange}),d.default.createElement("span",{style:{marginLeft:"10px"}},"Other"))),d.default.createElement(p.Button,{onClick:this.submit,bsStyle:"primary"},"Submit")))}},{key:"renderPaypalRedirectScreen",value:function(){return d.default.createElement("div",null,d.default.createElement("h2",null,"Thank you for donating to us. You will be automatically redirected to paypal to complete the payment."),d.default.createElement("p",null,"Click here if page was not redirected"),d.default.createElement(p.Button,{onClick:this.redirectToPaypal},"Go to paypal"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.showSubmitDialog,a=t.donationAmount,r=t.donationRecord;return t.showPaymentForm?d.default.createElement(y.default,{url:"/api/donations/checkout",type:"post",params:{donationId:r.id}}):d.default.createElement("div",null,this.renderPreview(),d.default.createElement(h.default,{show:n,donationAmount:a,onClose:function(){return e.setState({showSubmitDialog:!1})},style:{maxHeight:"350px",overflowY:"auto"},onSubmit:this.onSubmitDonation}))}}]),t}(c.Component);E.contextTypes={router:c.PropTypes.object},t.default=(0,f.default)(E,{load:{type:"get",url:"/api/donations/1",data:{fields:["body"]}},checkout:{type:"post",url:"/api/donations/checkout"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(14)),p=a(n(29)),h=a(n(16)),m=a(n(100)),v=a(n(11)),y=a(n(89)),g=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={checkedRows:[],cartItems:[],paypalSurcharge:0,showConfirmDialog:!1,showPaymentForm:!1,showTocDialog:!1,toc:null},a.removeSelected=a.removeSelected.bind(a),a.showTocDialog=a.showTocDialog.bind(a),a.onTocConfirm=a.onTocConfirm.bind(a),a.parseData=a.parseData.bind(a),a.load=a.load.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"parseData",value:function(e){var t=[],n=h.default.getIfExists;for(var a in e.rows){var r=e.rows[a];t.push({id:r.cartId+"|"+r.classId,courseTitle:n(r,"courseClass.course.courseTitle","none"),classTime:n(r,"courseClass.classTime"),priceWithSurcharge:r.priceWithSurcharge,studentStatus:r.studentStatus})}this.setState({cartItems:t,paypalSurcharge:parseFloat(h.default.getIfExists(e,"info.paypalSurcharge",0)).toFixed(2)})}},{key:"getTotalPrice",value:function(){var e=this.state.cartItems,t=parseFloat(0);for(var n in e)t+=parseFloat(e[n].priceWithSurcharge);return t.toFixed(2)}},{key:"load",value:function(){console.log("reload"),(0,this.props.execute)("load",null,this.parseData)}},{key:"removeSelected",value:function(){var e=this,t=this.state.checkedRows,n=this.state.cartItems,a=this.props.execute,r=[];for(var o in t){var l=t[o].split("|"),i=l[0],s=l[1];r.push({cartId:i,classId:s})}a("removeCartItems",{items:r},function(){v.default.success("Cart items deleted"),e.load()},function(e){console.error(e),v.default.error("Error deleting cart items")});for(var u in t)for(var c in n)n[c].id==t[u]&&n.splice(c,1);this.setState({checkedRows:[],cartItems:n})}},{key:"onTocConfirm",value:function(){var e=this;this.setState({showTocDialog:!1}),this.getTotalPrice()>0?this.setState({showPaymentForm:!0}):$.ajax({url:"/api/cart/checkout",type:"get",success:function(){return e.context.router.push("/payment/success")},error:function(e){v.default.error("Payment has failed, please check the details and try again"),console.error(e)}})}},{key:"getTotalPrice",value:function(){return this.state.cartItems.reduce(function(e,t){return e+parseFloat(t.priceWithSurcharge)},0)}},{key:"showTocDialog",value:function(){var e=this.context.website.toc;e&&0!==e.length?this.setState({showTocDialog:!0}):this.onTocConfirm()}},{key:"componentDidMount",value:function(){var e=this.props.data;this.parseData(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.cartItems,a=t.paypalSurcharge,r=t.checkedRows,o=t.showConfirmDialog,l=t.showTocDialog,i=t.showPaymentForm,s=this.context.website.toc;return i?c.default.createElement("div",null,c.default.createElement("div",{style:{width:"580px",marginLeft:"auto",marginRight:"auto",padding:"30px"}},n.map(function(e,t){return c.default.createElement("div",{key:t,style:{marginBottom:"10px"}},c.default.createElement("span",{style:{width:"200px",display:"inline-block"}},e.courseTitle," :"),c.default.createElement("span",null," ",e.priceWithSurcharge))}),c.default.createElement("p",null,"Total :  ",this.getTotalPrice())),c.default.createElement(y.default,{url:"/api/cart/checkout",checkAvailableMethods:!0})):0===n.length?c.default.createElement("h2",null,"No classes in registration cart yet"):c.default.createElement("div",null,c.default.createElement("div",{id:"notifications"}),c.default.createElement("h2",null,"Registration Cart Items"),c.default.createElement(p.default,{data:n,headers:["Course Title","Class Time","Fee (+ paypal surcharge)"],showingProps:["courseTitle","classTime","priceWithSurcharge"],checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}}),c.default.createElement("div",{style:{marginTop:"50px"}},c.default.createElement("p",null,"Total course price + paypal surcharge:  ",this.getTotalPrice()),c.default.createElement("p",{style:{marginTop:"30px"}},"Paypal surcharge is  ",a," per non-free course")),c.default.createElement("div",null,c.default.createElement(d.Button,{onClick:function(){r.length>0&&e.setState({showConfirmDialog:!0})},style:{marginRight:"15px"}},"Remove selected items"),c.default.createElement(d.Button,{onClick:this.showTocDialog,bsStyle:"primary"},"Checkout")),c.default.createElement(m.default,{show:o,headerText:"Delete Confirmation",onYes:function(){e.removeSelected(),e.setState({showConfirmDialog:!1})},onNo:function(){return e.setState({showConfirmDialog:!1})}}),c.default.createElement(m.default,{show:l,headerText:"Terms & Conditions",confirmText:s,onYes:this.onTocConfirm,onNo:function(){return e.setState({showTocDialog:!1})},yesText:"Agree",noText:"Not agree",style:{height:"300px",overflowY:"auto"},rawHTML:!0}))}}]),t}(u.Component);g.contextTypes={router:u.PropTypes.object.isRequired,website:u.PropTypes.object.isRequired};var E=(0,f.default)(g),b=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.context.user;if(!e)return c.default.createElement("div",null);var t=e.id;return c.default.createElement(E,{ajaxOperations:{load:{type:"get",url:"/api/users/"+t+"/basket",data:{fields:["cartId","classId","priceWithSurcharge","studentStatus","courseClass.course.courseTitle","courseClass.classTime"]}},checkout:{type:"get",url:"/api/cart/checkout"},removeCartItems:{type:"delete",url:"/api/cart/delete"}}})}}]),t}(u.Component);t.default=b,b.contextTypes={user:u.PropTypes.object,router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(89)),f=(a(n(15)),function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={payment:0,courseClassId:null},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(e){this.setState({payment:e.amount,courseClassId:e.id})}},{key:"componentWillMount",value:function(){this.load(this.props.params),localStorage.removeItem("pay-"+this.props.params.id)}},{key:"render",value:function(){var e=this.state,t=e.payment,n=e.courseClassId;return c.default.createElement("div",null,c.default.createElement("div",{style:{width:"580px",marginLeft:"auto",marginRight:"auto",padding:"30px"}},c.default.createElement("p",null,"Total :  ",t)),c.default.createElement(d.default,{url:"/api/student-payment-checkout/"+t+"/"+n,checkAvailableMethods:!0}))}}]),t}(u.Component));t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(978)),f=a(n(979)),p=a(n(980)),h=a(n(981)),m=a(n(982)),v=a(n(442)),y=n(441),g=function(e){function t(e,n){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"renderHeader",value:function(){var e=this.context.user;return c.default.createElement("div",null,e?c.default.createElement(d.default,{onUserUpdate:this.props.onUserUpdate}):"")}},{key:"render",value:function(){var e=this.context.website,t=e.header,n=e.footer;return c.default.createElement("div",null,c.default.createElement(y.WebsiteComponent,{id:"header",template:t}),c.default.createElement("div",{className:"container"},this.renderHeader(),this.props.children),c.default.createElement(y.WebsiteComponent,{id:"footer",template:n}))}}],[{key:"getClassesAvailable",value:function(){return f.default}},{key:"getMyCourses",value:function(){return p.default}},{key:"getDonations",value:function(){return h.default}},{key:"getCart",value:function(){return m.default}},{key:"getHome",value:function(){return"/classes/available"}},{key:"getPaymentStudent",value:function(){return v.default}}]),t}(u.Component);t.default=g,g.propTypes={onUserUpdate:u.PropTypes.func.isRequired},g.contextTypes={user:u.PropTypes.object,website:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=n(38),p=a(n(96)),h=a(n(11)),m=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.logout=a.logout.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"logout",value:function(){var e=this.props.onUserUpdate;p.default.logout().then(function(){return e()},function(t){h.default.error("Logout error",t),e()})}},{key:"componentDidMount",value:function(){$(function(){$("#navMenu").addClass("user-nav-bar")})}},{key:"render",value:function(){var e=this.context.user.profile,t=e.profileForname,n=e.profileSurname,a={textAlign:"center",fontFamily:"marianina_wd_fyregular",fontSize:"20px",marginRight:"5px",marginLeft:"5px"};return c.default.createElement(d.Navbar,{id:"navMenu"},c.default.createElement(d.Nav,{style:{height:"52px",borderBottom:"0"},bsStyle:"tabs",activeKey:this.props.activeKey},c.default.createElement(f.LinkContainer,{style:a,to:{pathname:"/classes/available"}},c.default.createElement(d.NavItem,{eventKey:1,href:"/dashboard"},"ALL SHARES")),c.default.createElement(f.LinkContainer,{style:a,to:{pathname:"/cart"}},c.default.createElement(d.NavItem,{eventKey:3},"CART")),c.default.createElement(f.LinkContainer,{style:a,to:{pathname:"/courses"}},c.default.createElement(d.NavItem,{eventKey:3},"MY PURCHASES"))),c.default.createElement(d.Nav,{style:{marginRight:"15px",marginTop:"9px"},pullRight:!0},c.default.createElement("div",null,c.default.createElement("span",{style:{marginRight:"10px",fontSize:"15px",verticalAlign:"middle"}},"Logged as "+t+" "+n),c.default.createElement(d.Button,{onClick:this.logout,bsStyle:"warning"},c.default.createElement("span",{style:{fontSize:"15px"}},"Logout")))))}}]),t}(u.Component);t.default=m,m.contextTypes={user:u.PropTypes.object},m.propTypes={onUserUpdate:u.PropTypes.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(434)),o=a(n(50)),l=a(n(59)),i=a(n(70)),s=a(n(3)),u=a(n(1)),c=a(n(2)),d=a(n(4)),f=a(n(5)),p=n(0),h=a(p),m=a(n(14)),v=a(n(11)),y=a(n(16)),g=a(n(268)),E=(a(n(31)),n(6)),b=a(n(435)),_=(n(12),a(n(436)),a(n(438))),C=a(n(15)),w=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return a.state={isLoading:!1,data:{},tabsActiveKey:0},a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"parseData",value:function(e){var t=y.default.getIfExists,n={};for(var a in e){var r=e[a],o=t(r,"term.name","Other");n[o]||(n[o]={});var l=r.classGender;n[o][l]||(n[o][l]={branches:[],partTimeDescription:t(r,"term.partTimeDescription",""),fullTimeDescription:t(r,"term.fullTimeDescription","")});var s=n[o][l].branches,u=t(r,"course.dept.branchAssociated");g.default.createIfNotExists(s,u);for(var c in s)if(s[c].id==u.id){s[c].depts||(s[c].depts={fullTime:[],partTime:[]});var d="1"==t(r,"course.isFullTime","0")?"fullTime":"partTime",f=s[c].depts[d],p=t(r,"course.dept",{id:0,deptName:"Other",weight:"-1"});g.default.createIfNotExists(f,p);for(var h in f)if(f[h].id==p.id){f[h].courses||(f[h].courses=[]);var m=f[h].courses,v=t(r,"course");for(var E in v)"object"===(0,i.default)(v[E])&&delete v[E];g.default.createIfNotExists(m,v);for(var b in m)if(m[b].id==v.id){m[b].classes||(m[b].classes=[]);var _=m[b].classes;for(var C in r)"object"===(0,i.default)(r[C])&&delete r[C];g.default.createIfNotExists(_,r)}}}}return n}},{key:"sortItemsByWeight",value:function(e){var t=function(e,t,n){return parseInt(t[e])>parseInt(n[e])?1:-1};for(var n in e)for(var a in e[n]){var r=e[n][a].branches;r.sort(function(e,n){return t("branchWeight",e,n)});for(var o in r){var l=r[o].depts;for(var i in l){var s=l[i];s.sort(function(e,n){return t("weight",e,n)});for(var u in s){var c=s[u].courses;c.sort(function(e,n){return t("weight",e,n)});for(var d in c)c[d].classes.sort(function(e,n){return t("classWeight",e,n)})}}}}return e}},{key:"loadClasses",value:function(e){var t=this;this.setState({isLoading:!0}),e||(e=this.context);var n=e.user;(0,this.props.execute)("loadClasses",{userId:y.default.getIfExists(n,"id",""),allClasses:!0},function(e){t.setState({isLoading:!1,data:t.sortItemsByWeight(t.parseData(e))})},function(e){v.default.error("Error loading available classes"),t.setState({isLoading:!1})})}},{key:"componentWillMount",value:function(){this.loadClasses()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.context.user;(0,l.default)(n)!==(0,l.default)(t.user)&&this.loadClasses(t)}},{key:"renderBranchesView",value:function(e){var t=!1,n=!1,a=null;for(var r in e)if(e[r].branches.length>0){if(t){n=!0;break}t=!0,a=r}return n?h.default.createElement(k,{termData:e}):h.default.createElement(S,{gender:a,branches:e[a].branches,term:e})}},{key:"renderTabs",value:function(){var e=this.state.data,t=[],n=0;for(var a in e)t.push(h.default.createElement(E.Tab,{key:n,eventKey:n,title:a},this.renderBranchesView(e[a]))),n++;return t}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.data,r=t.tabsActiveKey,l=(0,o.default)(a);return n?h.default.createElement("p",null,"Loading..."):0===l.length?h.default.createElement("h1",null,"No classes available yet"):1===l.length?this.renderBranchesView(a[l[0]]):h.default.createElement(E.Tabs,{activeKey:r,onSelect:function(t){return e.setState({tabsActiveKey:t})}},this.renderTabs())}}]),t}(p.Component);w.contextTypes={user:p.PropTypes.object},t.default=(0,m.default)(w,{loadClasses:{type:"get",url:"/api/classes/available"}});var k=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return a.state={tabActiveKey:"male"},a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"renderTabs",value:function(){var e=this.props.termData,t=[];for(var n in e)e[n].branches.length>0&&t.push(h.default.createElement(E.Tab,{key:n,eventKey:n,title:n,id:n+"-courses-tab",className:n+"-courses-tab"},h.default.createElement(S,{gender:n,branches:e[n].branches,term:e})));return t}},{key:"render",value:function(){var e=this,t=this.state.tabActiveKey;return h.default.createElement(E.Tabs,{activeKey:t,onSelect:function(t){return e.setState({tabActiveKey:t})},id:"tabnav"},this.renderTabs())}}]),t}(p.Component);k.propTypes={termData:p.PropTypes.object.isRequired};var S=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return a.state={expandedDept:null},a.onSelect=a.onSelect.bind(a),a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"onSelect",value:function(e,t){return this.state.expandedDept==e&&(e=null),this.setState({expandedDept:e}),t&&t.preventDefault(),!1}},{key:"scrollToSelected",value:function(){var e=window.location.hash;e&&e.length>0&&(e=e.slice(1));var t=this.props.branches,n=!0,a=!1,o=void 0;try{for(var l,i=(0,r.default)(t);!(n=(l=i.next()).done);n=!0){var s=l.value;if(s)for(var u in s.depts){var c=s.depts[u],d=!0,f=!1,p=void 0;try{for(var h,m=(0,r.default)(c);!(d=(h=m.next()).done);d=!0){var v=h.value;if(v){var y=!0,g=!1,E=void 0;try{for(var b,C=(0,r.default)(v.courses);!(y=(b=C.next()).done);y=!0)if(b.value.id==e)return void this.setState({expandedDept:v.id},function(){(0,_.default)(e)})}catch(e){g=!0,E=e}finally{try{!y&&C.return&&C.return()}finally{if(g)throw E}}}}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}}}}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}}},{key:"componentDidMount",value:function(){this.scrollToSelected()}},{key:"setHtml",value:function(e){return{__html:e}}},{key:"renderDepts",value:function(e,t,n){this.state.expandedDept;var a=[];for(var r in t.depts){var o=t.depts[r];if(0!==o.length){var l="fullTime"==r?n[e].fullTimeDescription:n[e].partTimeDescription;a.push(h.default.createElement("div",{key:r},h.default.createElement("center",null,h.default.createElement("h3",{className:"term-description",dangerouslySetInnerHTML:this.setHtml(l)})),h.default.createElement("div",null,o.map(function(t,n){return h.default.createElement(x,{gender:e,courses:t.courses})}))))}}return h.default.createElement("div",null,a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.gender,a=t.branches,r=t.term;return a[0].depts.fullTime.length>0?r[n].fullTimeDescription:r[n].partTimeDescription,h.default.createElement("div",null,a.map(function(t,a){return h.default.createElement("div",{key:a},e.renderDepts(n,t,r))}))}}]),t}(p.Component);S.propTypes={gender:p.PropTypes.string.isRequired,branches:p.PropTypes.array.isRequired,term:p.PropTypes.object.isRequired};var x=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));return a.state={selectedCourse:null},a.registerOnline=a.registerOnline.bind(a),a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"registerOnline",value:function(e,t){e.preventDefault();var n=this.context,a=n.router,r=n.user,o=e.target.id;if(!r){var i=localStorage.getItem("registeredClasses");return(i=null==i?[]:JSON.parse(i)).push({classId:o,studentStatus:"unemployed"}),localStorage.setItem("registeredClasses",(0,l.default)(i)),void a.push("/login")}C.default.ajax({type:"post",url:"/api/cart/add",data:{classId:o,studentStatus:"unemployed"}}).then(function(e){v.default.success("Class added to cart"),a.push("/cart")},function(e){v.default.error(e.responseText.replace(/"/g,"")),console.error(e)})}},{key:"handleAnchor",value:function(e,t){e.preventDefault(),(0,_.default)(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.showRegisterWindow,a=t.selectedCourse,r=this.props,o=r.courses;return r.gender,this.context.website,h.default.createElement("div",null,o.map(function(t,n){return h.default.createElement("div",{key:n},h.default.createElement("p",{className:"available-classes course-label",id:t.id},h.default.createElement("h3",null,t.courseTitle)),h.default.createElement(E.Row,{style:{marginBottom:"10px"}},t.classes.map(function(n,a){return h.default.createElement(E.Col,{lg:2},h.default.createElement("div",{className:"216"==t.id?"btn btn-sq-lg btn-success":"btn btn-sq-lg btn-warning",style:{width:"100%",height:"210px",padding:"0"},key:a},h.default.createElement("h3",{key:a,className:"course-timing-label"}),h.default.createElement("span",{style:{width:"100px",height:"50px"}},h.default.createElement("img",{id:"icon_co",src:"http://icons.iconarchive.com/icons/iconsmind/outline/96/Cow-icon.png"}),h.default.createElement("br",null),n.classTime,h.default.createElement("br",null),"",n.feeForEmployed),h.default.createElement("br",null),h.default.createElement("button",{className:"button-reg",id:n.id,onClick:function(n){return e.registerOnline(n,t)},style:{cursor:"pointer"}},"Purchase"))," ")})))}),n?h.default.createElement(b.default,{onClose:function(){return e.setState({showRegisterWindow:!1})},course:a}):"")}}]),t}(p.Component);x.contextTypes={user:p.PropTypes.object,router:p.PropTypes.object.isRequired,website:p.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(a(n(15)),a(n(14))),f=a(n(16)),p=(a(n(29)),n(18),a(n(31))),h=n(6),m=(n(12),a(n(11)),a(n(89)),function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={termToStudents:{}},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"onFieldChange",value:function(e,t){this.changeField(e,t)}},{key:"parseData",value:function(e){var t={};for(var n in e){var a=e[n],r=f.default.getIfExists(a,"courseClass.term.name","Other");t[r]||(t[r]=[]),t[r].push(a)}this.setState({termToStudents:t})}},{key:"componentWillMount",value:function(){this.parseData(this.props.data.rows)}},{key:"renderClasses",value:function(){var e=this.state.termToStudents,t=[];for(var n in e){var a=e[n];t.push(c.default.createElement(y,{key:n,title:n,data:a}))}return c.default.createElement("div",null,t)}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("h2",null,"My Purchases"),this.renderClasses())}}]),t}(u.Component));t.default=(0,d.default)(m,{load:{type:"get",url:"/api/classes/my",data:{fields:["registerDate","regStatus","studentStatus","reducedAmount","totalAmount","score","feedback","studentAbsent","course.courseTitle","course.feeForEmployed","course.feeForUnemployed","course.courseTitle","courseClass.exams","courseClass.classWorks","courseClass.classDescription","courseClass.feeForEmployed","courseClass.feeForUnemployed","courseClass.term.name","courseClass.classTime","courseClass.teacher.userFullname","payments"]}}});var v=function(e){return{__html:e}},y=function(e){for(var t=e.data,n=e.title,a=e.key,r=f.default.getIfExists,o=[],l=0;l<t.length;l++)o.push(function(e,t){var n=[],a=[],o=[],l=[],i=[],s=[],u=0,d=function(e,t){return n.push(c.default.createElement(h.Col,{md:t,sm:t,xs:t,className:"colTable",style:{lineHeight:"44px"},key:u++},c.default.createElement("p",null,e)))},f=function(e,t){return s.push(c.default.createElement(h.Col,{md:3,sm:3,xs:3,className:"colTable",style:{height:"100px"}},c.default.createElement("span",{dangerouslySetInnerHTML:v(t)}),c.default.createElement("p",null,e)))},m=function(e,t){return a.push(c.default.createElement("span",null," ",e))},y=function(e,t,n){return o.push(c.default.createElement("span",null," ",e," ",t," ",n))};d(e.registerDate,3),d(r(e,"courseClass.classTime","none"),2),d(r(e,"courseClass.teacher.userFullname","none"),2),function(e,t){l.push(c.default.createElement("span",null," ",e))}(r(e,"courseClass.teacher.userFullname","none",{width:"20%"}));var g=0;switch(r(e,"studentStatus","unemployed")){case"employed":case"unemployed":var E="feeFor"+p.default.ucFirst(r(e,"studentStatus","unemployed"));g=parseFloat(parseFloat(e.courseClass[E])>=0?e.courseClass[E]:e.course[E]).toFixed(2);break;case"reduced":g=parseFloat(e.reducedAmount).toFixed(2)}if(e.totalAmount&&parseFloat(e.totalAmount).toFixed(2),e.payments.length>0){for(var b=e.payments,_=0,C=0;C<b.length;C++)_+=b[C].amount;var w=parseInt(e.payments[0].courseStudentId);g=parseInt(g)-_,localStorage.setItem("pay-"+w,g),function(e,t,a,r){n.push(c.default.createElement(h.Col,{md:5,sm:8,xs:12,className:"colTablePayment"},c.default.createElement("span",{style:{color:"black",fontWeight:"normal",fontSize:"11pt",marginRight:"5px"}}," ",a," Paid")))}(0,e.payments[0].courseStudentId,""+_)}if(m(r(e,"score","")),m(r(e,"feedback","")),e.courseClass.exams.length>0){var k=e.courseClass.exams;for(C=0;C<k.length;C++)y(r(k[C],"title","No Title"),r(k[C].scores[0],"score","")+"%",r(k[C].scores[0],"comment",""))}else y("","","");if(function(e,t){i.push(c.default.createElement("span",{dangerouslySetInnerHTML:v(e)}))}(r(e.courseClass,"classDescription","")),e.studentAbsent&&e.studentAbsent.length>0&&e.courseClass.classWorks.length>0){var S=e.studentAbsent;for(C=0;C<S.length;C++)if("present"==S[C].attendance){if(!e.courseClass.classWorks[C])continue;f(r(e.studentAbsent[C],"date",""),'<img src="src/images/check.gif" width="60" height="45"/>'),f(r(e.courseClass.classWorks[C],"done_work",""),""),f(r(e.courseClass.classWorks[C],"home_work",""),""),f(r(e.studentAbsent[C],"comment",""),"")}else f(r(e.studentAbsent[C],"date",""),'<img src="src/images/cross.gif" width="60" height="55"/>'),f(r(e.courseClass.classWorks[C],"done_work",""),""),f(r(e.courseClass.classWorks[C],"home_work",""),""),f(r(e.studentAbsent[C],"comment",""),"")}return t++,c.default.createElement(h.Panel,{eventKey:t,header:e.course.courseTitle[0]},c.default.createElement(h.Row,{className:"headingTableText"},n),c.default.createElement(h.Col,{lg:12,md:12,sm:12,xs:12,className:"bodyPart"},c.default.createElement(h.Row,null,c.default.createElement(h.Col,{md:12},c.default.createElement("h3",null,i))),c.default.createElement(h.Row,null,c.default.createElement(h.Col,{md:12},o.map(function(e){return c.default.createElement("p",null,e)})))))}(t[l],l));return c.default.createElement("div",null,c.default.createElement(h.Accordion,null,c.default.createElement(h.Panel,{eventKey:a,header:n},c.default.createElement(h.Accordion,null,o))))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(14)),p=n(6),h=a(n(440)),m=n(12),v=a(n(11)),y=a(n(89)),g=a(n(43)),E=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={donationAmount:0,typedAmount:"",showSubmitDialog:!1,donationSubmitted:!1,donationRecord:{},showPaymentForm:!1},a.onTextChange=a.onTextChange.bind(a),a.onRadioChange=a.onRadioChange.bind(a),a.submit=a.submit.bind(a),a.onSubmitDonation=a.onSubmitDonation.bind(a),a.redirectToPaypal=a.redirectToPaypal.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onRadioChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({typedAmount:""},n,a))}},{key:"onTextChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({typedAmount:a},n,a))}},{key:"submit",value:function(){var e=this.state.donationAmount;parseFloat(e)<=0?alert("Select donation amount please"):this.setState({showSubmitDialog:!0})}},{key:"redirectToPaypal",value:function(){(0,this.props.execute)("checkout",{donationId:this.state.donationRecord.id},function(e){if(e.paypalForm){var t=$("<div/>").html(e.paypalForm).text();$("body").append(t),$("form[name='paypal_form']").submit()}},function(e){return v.default.error(e.responseText.replace(/"/g,""))})}},{key:"onSubmitDonation",value:function(e){e&&this.setState({donationRecord:e,showPaymentForm:!0})}},{key:"componentDidMount",value:function(){$(function(){(0,g.default)($("textarea"))})}},{key:"renderPreview",value:function(){var e=this.props.data,t=this.state,n=t.donationAmount,a=t.typedAmount;return d.default.createElement("div",null,d.default.createElement(p.Jumbotron,null,d.default.createElement("h2",null,"One Off Donation"),d.default.createElement(m.Html,null,e.body),d.default.createElement("div",null,d.default.createElement("div",{style:{display:"inline-block",marginRight:"15px"}},d.default.createElement("input",{type:"radio",value:10,checked:10==n&&!a,name:"donationAmount",onChange:this.onRadioChange}),d.default.createElement("span",{style:{marginLeft:"10px"}}," 10")),d.default.createElement("div",{style:{display:"inline-block",marginRight:"15px"}},d.default.createElement("input",{type:"radio",value:25,checked:25==n&&!a,name:"donationAmount",onChange:this.onRadioChange}),d.default.createElement("span",{style:{marginLeft:"10px"}}," 25")),d.default.createElement("div",{style:{display:"inline-block",marginRight:"15px"}},d.default.createElement("input",{type:"radio",value:50,checked:50==n&&!a,name:"donationAmount",onChange:this.onRadioChange}),d.default.createElement("span",{style:{marginLeft:"10px"}}," 50")),d.default.createElement("div",{style:{display:"inline-block",marginRight:"15px"}},d.default.createElement("input",{type:"text",className:"form-control",style:{display:"inline-block",width:"100px"},name:"donationAmount",onChange:this.onTextChange}),d.default.createElement("span",{style:{marginLeft:"10px"}},"Other"))),d.default.createElement(p.Button,{onClick:this.submit,bsStyle:"primary"},"Submit")))}},{key:"renderPaypalRedirectScreen",value:function(){return d.default.createElement("div",null,d.default.createElement("h2",null,"Thank you for donating to us. You will be automatically redirected to paypal to complete the payment."),d.default.createElement("p",null,"Click here if page was not redirected"),d.default.createElement(p.Button,{onClick:this.redirectToPaypal},"Go to paypal"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.showSubmitDialog,a=t.donationAmount,r=t.donationRecord;return t.showPaymentForm?d.default.createElement(y.default,{url:"/api/donations/checkout",type:"post",params:{donationId:r.id}}):d.default.createElement("div",null,this.renderPreview(),d.default.createElement(h.default,{show:n,donationAmount:a,onClose:function(){return e.setState({showSubmitDialog:!1})},style:{maxHeight:"350px",overflowY:"auto"},onSubmit:this.onSubmitDonation}))}}]),t}(c.Component);E.contextTypes={router:c.PropTypes.object},t.default=(0,f.default)(E,{load:{type:"get",url:"/api/donations/1",data:{fields:["body"]}},checkout:{type:"post",url:"/api/donations/checkout"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(29)),p=a(n(16)),h=n(6),m=a(n(100)),v=a(n(11)),y=a(n(89)),g=a(n(43)),E=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={checkedRows:[],cartItems:[],paypalSurcharge:0,showConfirmDialog:!1,showPaymentForm:!1,showTocDialog:!1,toc:null},a.updates={},a.removeSelected=a.removeSelected.bind(a),a.showTocDialog=a.showTocDialog.bind(a),a.onTocConfirm=a.onTocConfirm.bind(a),a.createSubRows=a.createSubRows.bind(a),a.removePlaceholder=a.removePlaceholder.bind(a),a.setPlaceHolder=a.setPlaceHolder.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"parseData",value:function(e){var t=[],n=p.default.getIfExists;for(var a in e.rows){var r=e.rows[a];t.push({id:r.cartId+"|"+r.classId,courseTitle:n(r,"courseClass.course.courseTitle","none"),classTime:n(r,"courseClass.classTime"),priceWithSurcharge:r.priceWithSurcharge,studentStatus:r.studentStatus,notes:r.notes})}this.setState({cartItems:t,paypalSurcharge:parseFloat(p.default.getIfExists(e,"info.paypalSurcharge")).toFixed(2)})}},{key:"getTotalPrice",value:function(){var e=this.state.cartItems,t=parseFloat(0);for(var n in e)t+=parseFloat(e[n].priceWithSurcharge);return t.toFixed(2)}},{key:"removeSelected",value:function(){var e=this.state.checkedRows,t=this.state.cartItems,n=this.props.execute,a=[];for(var r in e){var o=e[r].split("|"),l=o[0],i=o[1];a.push({cartId:l,classId:i})}n("removeCartItems",{items:a},function(){return v.default.success("Cart items deleted")},function(e){console.error(e),v.default.error("Error deleting cart items")});for(var s in e)for(var u in t)t[u].id==e[s]&&t.splice(u,1);this.setState({checkedRows:[],cartItems:t})}},{key:"onTocConfirm",value:function(){var e=this;this.setState({showTocDialog:!1}),this.getTotalPrice()>0?this.setState({showPaymentForm:!0}):$.ajax({url:"/api/cart/checkout",type:"get",success:function(){return e.context.router.push("/payment/success")},error:function(e){v.default.error("Payment has failed, please check the details and try again"),console.error(e)}})}},{key:"showTocDialog",value:function(){var e=this.context.website.toc;e&&0!==e.length?this.setState({showTocDialog:!0}):this.onTocConfirm()}},{key:"onNotesChange",value:function(e,t){var n=this.state.cartItems;for(var a in n)if(n[a].id==e){n[a].notes=t;break}this.updates[e]&&(clearTimeout(this.updates[e]),this.updates[e]=null),this.updates[e]=setTimeout(function(){var n=e.split("|");$.ajax({type:"put",url:"/api/cart/"+n[0]+"/"+n[1],data:{notes:t},error:function(e){return console.error(e)}})},2e3),this.setState({cartItems:n})}},{key:"removePlaceholder",value:function(e){$(e.target).attr("placeholder")==e.target.value&&(e.target.value="")}},{key:"setPlaceHolder",value:function(e){""==e.target.value&&(e.target.value=$(e.target).attr("placeholder"))}},{key:"createSubRows",value:function(e,t){var n=this;return c.default.createElement("tr",{key:t},c.default.createElement("td",null),c.default.createElement("td",null,c.default.createElement("textarea",{className:"form-control",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:function(t){return n.onNotesChange(e.id,t.target.value)},placeholder:"Please write down each persons name",value:e.notes,style:{color:e.notes?"black":"#A8A8A8"}})),c.default.createElement("td",null),c.default.createElement("td",null),c.default.createElement("td",null))}},{key:"componentDidMount",value:function(){var e=this.props.data;this.parseData(e),$(function(){return(0,g.default)($("textarea"))})}},{key:"componentDidUpdate",value:function(){$(function(){return(0,g.default)($("textarea"))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.cartItems,a=(t.paypalSurcharge,t.checkedRows),r=t.showConfirmDialog,o=t.showTocDialog,l=t.showPaymentForm,i=this.context.website.toc;return l?c.default.createElement("div",null,c.default.createElement("div",{style:{width:"580px",marginLeft:"auto",marginRight:"auto",padding:"30px"}},n.map(function(e,t){return c.default.createElement("div",{key:t,style:{marginBottom:"10px"}},c.default.createElement("span",{style:{width:"200px",display:"inline-block"}},e.courseTitle," :"),c.default.createElement("span",null," ",e.priceWithSurcharge))}),c.default.createElement("p",null,"Total :  ",n.reduce(function(e,t){return e+parseFloat(t.priceWithSurcharge)},0))),c.default.createElement(y.default,{url:"/api/cart/checkout",checkAvailableMethods:!0})):0===n.length?c.default.createElement("h2",null,"Nothing in cart yet"):c.default.createElement("div",null,c.default.createElement("h2",null,"Cart Items"),c.default.createElement(f.default,{data:n,headers:["Title","Item","Fee"],showingProps:["courseTitle","classTime","priceWithSurcharge"],createSubRows:this.createSubRows,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})},checkableRows:!0}),c.default.createElement(h.Button,{bsStyle:"warning"},c.default.createElement("a",{href:"/classes/available",style:{fontSize:"15px"}},"Add or Amend shares")),c.default.createElement("div",{style:{marginTop:"50px"}},c.default.createElement("p",null,"Total course price:  ",this.getTotalPrice()),c.default.createElement("p",{style:{marginTop:"30px"}})),c.default.createElement("div",null,c.default.createElement(h.Button,{onClick:function(){a.length>0&&e.setState({showConfirmDialog:!0})},style:{marginRight:"15px"}},"Remove selected items"),c.default.createElement(h.Button,{onClick:function(){e.showTocDialog()},bsStyle:"primary"},"Checkout")),c.default.createElement(m.default,{show:r,headerText:"Delete Confirmation",onYes:function(){e.removeSelected(),e.setState({showConfirmDialog:!1})},onNo:function(){return e.setState({showConfirmDialog:!1})}}),c.default.createElement(m.default,{show:o,headerText:"Terms & Conditions",confirmText:i,onYes:this.onTocConfirm,onNo:function(){return e.setState({showTocDialog:!1})},yesText:"Agree",noText:"Not agree",style:{height:"300px",overflowY:"auto"},rawHTML:!0}))}}]),t}(u.Component);E.contextTypes={router:u.PropTypes.object.isRequired,website:u.PropTypes.object.isRequired};var b=(0,d.default)(E),_=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.context.user;if(!e)return c.default.createElement("div",null);var t=e.id;return c.default.createElement(b,{ajaxOperations:{load:{type:"get",url:"/api/users/"+t+"/basket",data:{fields:["cartId","classId","priceWithSurcharge","studentStatus","notes","courseClass.course.courseTitle","courseClass.classTime"]}},checkout:{type:"get",url:"/api/cart/checkout"},removeCartItems:{type:"delete",url:"/api/cart/delete"}}})}}]),t}(u.Component);t.default=_,_.contextTypes={user:u.PropTypes.object,router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(984)),f=a(n(432)),p=a(n(267)),h=n(6),m=a(n(171)),v=a(n(88)),y=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={contextData:{branchId:null}},a.assetManager=new v.default,a.changeContext=a.changeContext.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.assetManager.loadCss("src/style/admin/styles.css")}},{key:"componentWillUnmount",value:function(){this.assetManager.unloadAll()}},{key:"getChildContext",value:function(){return this.state.contextData}},{key:"changeContext",value:function(e,t){var n=this.state.contextData;n[e]=t,this.setState({contextData:n})}},{key:"renderHeader",value:function(){var e=this,t=this.context.router;return c.default.createElement("div",null,c.default.createElement("div",{className:"admin-header"},c.default.createElement("div",{className:"container"},c.default.createElement(h.Row,null,c.default.createElement(h.Col,{md:2,sm:3,xs:3},c.default.createElement("img",{src:"src/images/admin/logo.png",className:"logo",style:{marginBottom:"-158px"}})),c.default.createElement(h.Col,{md:6,sm:5,xs:5,style:{marginTop:"80px"}},c.default.createElement(m.default,{onSelectResult:function(e){return t.push("/users/"+e)}})),c.default.createElement(h.Col,{md:3,sm:4,xs:4,style:{marginTop:"10px"}},c.default.createElement(p.default,{onChange:function(t){return e.changeContext("branchId",t)}}),c.default.createElement(f.default,{style:{marginTop:"35px"},onUpdate:this.props.onUserUpdate,isLogged:!0}))))),c.default.createElement(d.default,null))}},{key:"render",value:function(){return c.default.createElement("div",{className:"admin"},this.renderHeader(),c.default.createElement("div",{className:"container"},this.props.children))}}]),t}(u.Component);t.default=y,y.childContextTypes={branchId:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.number])},y.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(50)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=(n(18),n(6)),p=a(n(99)),h=n(38),m=(n(9),a(n(16)),function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.tabRoutesMap={dashboard:"/dashboard","new-user":"/new-user",courses:"/courses",profile:"/profile",complaints:"/complaints"},a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=window.location.pathname,t=null,n=(0,r.default)(this.tabRoutesMap);for(var a in n){if(null!=t)break;var o=n[a],l=this.tabRoutesMap[o];Array.isArray(l)||(l=[l]);for(var i in l)if(e.includes(l[i])){t=o;break}}return d.default.createElement("div",{className:"admin-nav"},d.default.createElement("div",{className:"container"},d.default.createElement(p.default,null,[{route:"dashboard",label:"Dashboard"},{route:"new-user",label:"Add Student"},{route:"courses",label:"Course"},{route:"complaints",label:"Complaints"}].map(function(e,n){return d.default.createElement(h.LinkContainer,{key:n,to:{pathname:"/"+e.route}},d.default.createElement(f.NavItem,{className:t==e.route?"active":""},e.label))}))))}}]),t}(c.Component));t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.attempts=4,a.checkDelay=1e4,a.styles={background:{width:"100%",height:"100%",position:"fixed",top:"0",left:"0",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:"9"},notifyBox:{height:"60px",backgroundColor:"rgba(229, 92, 92, 0.78)",position:"fixed",top:"50%",left:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)",display:"flex",borderRadius:"10px",padding:"0px 40px 0px 40px",zIndex:"10"},message:{margin:"0",lineHeight:"60px"},img:{width:"25px",height:"25px",alignSelf:"center",marginRight:"10px"}},a.state={attemptsMade:0,isOnline:!0},a.check=a.check.bind(a),a.fadeIn=a.fadeIn.bind(a),a.fadeOut=a.fadeOut.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"fadeOut",value:function(){$("#noNetBackground").fadeOut("slow")}},{key:"fadeIn",value:function(){$("#noNetBackground").fadeIn("slow")}},{key:"check",value:function(){var e=this;$.ajax({type:"get",url:"/api/test/connection",success:function(){e.setState({isOnline:!0,attemptsMade:0}),e.fadeOut(),setTimeout(e.check,e.checkDelay)},error:function(){var t=e.state.attemptsMade;++t==e.attempts&&(e.setState({isOnline:!1}),e.fadeIn()),e.setState({attemptsMade:t}),setTimeout(e.check,e.checkDelay)}})}},{key:"componentDidMount",value:function(){setTimeout(this.check,this.checkDelay)}},{key:"render",value:function(){return d.default.createElement("div",{style:(0,r.default)({display:"none"},this.styles.background),id:"noNetBackground"},d.default.createElement("div",{style:this.styles.notifyBox},d.default.createElement("img",{style:this.styles.img,src:"/src/images/cross.gif"}),d.default.createElement("h2",{style:this.styles.message},"No internet Connection")))}}]),t}(c.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(a(n(96)),n(9)),f=a(n(110)),p=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n)),l="";switch(e.appTypeKey){case d.ROLES.REGISTRAR:case d.ROLES.SUPER_ADMIN:case d.ROLES.ADMIN:l="/dashboard";break;case d.ROLES.STUDENT:case d.ROLES.GUEST:l=f.default.getTemplatedComponent("Home",{userRole:e.appTypeKey})}return l.endsWith(".html")||!a.context?window.location.assign(l):a.context.router.replace(l),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement("div",null)}}]),t}(c.default.Component);t.default=p,p.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=n(9),f=a(n(988)),p=a(n(993)),h=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,d.ROLES.REGISTRAR,p.default),(0,r.default)(a,d.ROLES.ADMIN,f.default),(0,r.default)(a,d.ROLES.SUPER_ADMIN,f.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){if(this.props.appTypeKey in this.childTypes){var e=this.childTypes[this.props.appTypeKey],t=this.props.children?c.default.cloneElement(this.props.children,{appTypeKey:this.props.appTypeKey}):"";return c.default.createElement("div",null,c.default.createElement(e,null),t)}return!1}}]),t}(c.default.Component);t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(50)),l=a(n(17)),i=a(n(3)),s=a(n(1)),u=a(n(2)),c=a(n(4)),d=a(n(5)),f=n(0),p=a(f),h=n(6),m=a(n(989)),v=a(n(14)),y=n(12),g=a(n(15)),E=a(n(16)),b=a(n(31)),_=a(n(11)),C=a(n(19)),w=a(n(29)),k=n(18),S=n(9),x=a(n(443)),T=E.default.getIfExists,P={placesDateInputLeft:{width:"110px",display:"inline-block"},placesDateInputRight:{width:"110px",display:"inline-block",marginLeft:20},placesDateButton:{marginLeft:"20px"},blockWrapper:{}};window.innerWidth<768&&(P={placesDateInputLeft:{marginBottom:10},placesDateInputRight:{marginBottom:10},placesDateButton:{width:"100%",marginBottom:10},blockWrapper:{borderTop:"1px solid #ccc",marginTop:20,paddingTop:10}});var R=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={info:{},filters:{term:e.data.id},beginDate:"",endDate:"",hearPlacesInfo:null,classes:{male:[],female:[]},payments:[],showClassStudentsWnd:!1},a.loadDashboardInfo=a.loadDashboardInfo.bind(a),a.loadHearPlacesInfo=a.loadHearPlacesInfo.bind(a),a.renderClassesTableRow=a.renderClassesTableRow.bind(a),a.loadClasses=a.loadClasses.bind(a),a.load=a.load.bind(a),a.onChange=a.onChange.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"loadDashboardInfo",value:function(e){var t=this;e||(e=this.state.filters);var n={url:"/api/dashboard",dataType:"json",success:function(e){t.setState({info:e})},error:function(e,t,n){_.default.error(e.responseText),console.error(e.responseText)}};e?(n.type="post",n.data={term:e.term}):n.type="get",$.ajax(n)}},{key:"loadHearPlacesInfo",value:function(){var e=this,t=this.state,n=t.beginDate,a=t.endDate;this.loadHearPlacesP&&this.loadHearPlacesP.cancel(),this.loadHearPlacesP=g.default.ajax({type:"get",url:"/api/hear-places/info",data:{beginDate:n,endDate:a}}),this.loadHearPlacesP.then(function(t){return e.setState({hearPlacesInfo:t})},function(e){return console.error(e)})}},{key:"loadClasses",value:function(e){var t=this;$.ajax({type:"get",url:"/api/classes",data:{filters:e,fields:["id","classGender","course.courseTitle","course.dept.weight","classTime","teacher.userFullname","studentsCount","classroom.classroomName"]},success:function(e){var n={male:[],female:[]};e.rows.forEach(function(e){n["both"==e.classGender?"male":e.classGender].push(e)}),t.setState({classes:n})},error:function(e){_.default.error(e.responseText),console.error(e.responseText)}})}},{key:"loadPaymentsInfo",value:function(e){var t=this;e||(e=this.state.filters),$.ajax({type:"get",url:"/api/student-payments/total",data:{filters:e},success:function(e){return t.setState({payments:e})},error:function(e){_.default.error(e.responseText),console.error(e)}})}},{key:"load",value:function(e){e||(e=this.state.filters),this.loadDashboardInfo(e),this.loadClasses(e),this.loadPaymentsInfo(e)}},{key:"updateDatePickers",value:function(){var e=this;y.DatePicker.init(function(t,n){return e.setState((0,l.default)({},t,n))})}},{key:"onChange",value:function(e){this.setState((0,l.default)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){this.updateDatePickers()}},{key:"componentDidUpdate",value:function(){this.updateDatePickers()}},{key:"componentWillMount",value:function(){this.loadHearPlacesInfo(),this.load()}},{key:"renderHearPlacesInfo",value:function(){var e=this.state,t=e.hearPlacesInfo,n=e.beginDate,a=e.endDate;if(!t)return p.default.createElement("div",null);var r=[],o={borderBottom:"1px solid rgba(0, 0, 0, 0.15)",height:"30px"};for(var l in t){var i=t[l];i.placeName&&r.push(p.default.createElement("p",{key:l,style:o},i.placeName," : ",i.count," people"))}return p.default.createElement("div",{style:P.blockWrapper},p.default.createElement("h4",null,"Places where people heard about us"),p.default.createElement("div",{style:{marginBottom:"10px"}},p.default.createElement("input",{className:"form-control datepicker",name:"beginDate",value:n,onChange:this.onChange,placeholder:"begin date",style:P.placesDateInputLeft}),p.default.createElement("input",{className:"form-control datepicker",name:"endDate",value:a,onChange:this.onChange,placeholder:"end date",style:P.placesDateInputRight}),p.default.createElement(h.Button,{className:"custom btn-success",style:P.placesDateButton,onClick:this.loadHearPlacesInfo},"Search1")),p.default.createElement("div",null,r.length>0?r:"No data yet"))}},{key:"renderTotalPayments",value:function(){var e=this.state.payments;return e&&0!=e.length&&T(this.context,"user.role.roleName","")==S.ROLES.SUPER_ADMIN?p.default.createElement("div",null,p.default.createElement("h4",null,"Total payments"),e.map(function(e,t){return p.default.createElement("p",{key:t},b.default.ucFirst(e.paymentMethod)," : ",e.amount)})):p.default.createElement("div",null)}},{key:"renderClassesTableRow",value:function(e){var t=this.context.router,n=[],a=function(){var e=0;return function(t){return n.push(p.default.createElement("td",{key:e++},t))}}();return a(T(e,"course.courseTitle","")),a(p.default.createElement("a",{style:{cursor:"pointer"},onClick:function(){return t.push("/classes/"+e.id+"/")}},e.classTime)),a(p.default.createElement(k.Link,{to:"/classes/"+e.id+"/students?tab=Attendance+records",target:"_blank"},p.default.createElement("p",{style:{cursor:"pointer",color:"#337ab7",textDecoration:"none"}},"Attendance"))),a(T(e,"teacher.userFullname","")),a(e.studentsCount),a(T(e,"classroom.classroomName","")),n}},{key:"renderClassTables",value:function(){var e=this.state,t=e.classes,n=e.className,a=function(e){return!n||-1!==(T(e,"course.courseTitle","")+e.classTime).toLowerCase().indexOf(n.toLowerCase())},r=function(e,t){var n=T(e,"course.dept.weight",0),a=T(t,"course.dept.weight",0);return n<a?-1:n>a?1:T(e,"course.courseTitle","")<T(t,"course.courseTitle","")?-1:1};return p.default.createElement("div",null,p.default.createElement("div",null,p.default.createElement("input",{className:"form-control",style:{width:"300px"},placeholder:"course title / class name search",type:"text",name:"className",onChange:this.onChange,value:n})),p.default.createElement(h.Grid,{fluid:!0},p.default.createElement(h.Row,{style:{marginBottom:"10px"}},p.default.createElement("h4",null,"Male classes"),p.default.createElement(w.default,{data:t.male.filter(a).sort(r),headers:["Course Name","Class name","Attendance","Teacher","Students Count","Classroom"],createRow:this.renderClassesTableRow}))),p.default.createElement(h.Grid,{fluid:!0},p.default.createElement(h.Row,{style:{marginBottom:"10px"}},p.default.createElement("h4",null,"Female classes"),p.default.createElement(w.default,{data:t.female.filter(a).sort(r),headers:["Course Name","Class name","Attendance","Teacher","Students Count","Classroom"],createRow:this.renderClassesTableRow}))))}},{key:"render",value:function(){var e=this,t=this.state,n=t.info,a=t.filters;if(!n)return!1;for(var r=[],l=[],i=[],s=(0,o.default)(n),u=0;u<s.length;u++){var c=p.default.createElement("p",{style:{borderBottom:"1px solid rgba(0, 0, 0, 0.15)",paddingBottom:"10px"},key:u},n[s[u]]," | ",s[u]);i.push(c),u%2==0?r.push(c):l.push(c)}var d=s.length>0,f=this.state,v=f.showClassStudentsWnd,y=f.classId;return p.default.createElement("div",null,p.default.createElement("div",{id:"notifications"}),p.default.createElement("div",{className:"content-block"},p.default.createElement("h2",{className:"block-heading"},"Dashboard"),p.default.createElement("hr",null),p.default.createElement(h.Row,{style:{marginBottom:"10px"}},p.default.createElement(h.Col,{md:6},r),p.default.createElement(h.Col,{md:6},l)),p.default.createElement(m.default,{initialFilters:{term:this.props.data.id},onFiltersSubmit:this.load,visible:d}),this.renderTotalPayments(),p.default.createElement(h.Row,{style:{marginBottom:"10px"}},p.default.createElement(h.Col,{lg:6},p.default.createElement(O,{termId:a.term})),p.default.createElement(h.Col,{lg:6},this.renderHearPlacesInfo())),this.renderClassTables(),p.default.createElement(x.default,{show:v,selectedTab:1,params:{id:y},appTypeKey:S.ROLES.REGISTRAR,onClose:function(){return e.setState({showClassStudentsWnd:!1})}})))}}]),t}(f.Component);R.contextTypes={user:f.PropTypes.object.isRequired,router:f.PropTypes.object.isRequired},t.default=(0,v.default)(R,{load:{type:"get",url:"/api/terms/active"}});var O=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={offset:0,step:10,limit:10,data:[],isLoading:!1},a.showMore=a.showMore.bind(a),a.load=a.load.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"load",value:function(e){var t=this,n=this.context.branchId,a=this.state,o=(a.limit,a.offset,this.props.termId);this.setState({isLoading:!0}),e||(e={branchId:n}),(0,r.default)(e,{countStudents:!0,termId:o}),this.loader&&this.loader.cancel(),this.loader=g.default.ajax({type:"get",data:e,url:"/api/courses/list"});var l=function(){return t.setState({isLoading:!1})};this.loader.then(function(e){var n=t.state.data;n=n.concat(e),t.setState({data:n}),l()},function(e){console.error(e),l()})}},{key:"showMore",value:function(){var e=this.state,t=e.offset,n=e.step;this.setState({offset:t+n})}},{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this,a={},l=null;this.context.branchId!=t.branchId&&(l={branchId:t.branchId},(0,r.default)(a,{data:[],offset:0})),this.props.termId!=e.termId&&(a.termId=e.termId),(0,o.default)(a).length>0&&this.setState(a,function(){return n.load(l)})}},{key:"renderCourses",value:function(){for(var e=this.state,t=e.data,n=e.limit,a=e.offset,r=[],o=0;o<n+a&&o<t.length;o++)r.push(p.default.createElement("li",{key:o},p.default.createElement(k.Link,{to:"/courses/"+t[o].value+"/classes"},t[o].studentsCount," - ",t[o].label)));return r}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.limit,a=e.offset,r=e.data;return t?p.default.createElement(C.default,null):p.default.createElement("div",null,p.default.createElement("h4",null,"Courses"),p.default.createElement("ul",{style:{paddingLeft:"20px"}},this.renderCourses()),n+a<r.length?p.default.createElement(h.Button,{onClick:this.showMore,style:{width:"100%"}},"See more"):p.default.createElement("div",null))}}]),t}(f.Component);O.contextTypes={branchId:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number])}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=n(6),f=a(n(36)),p=a(n(269)),h=a(n(19)),m={sourceSelect:{width:"300px",display:"inline-block",marginBottom:15},button:{marginLeft:"15px"}};window.innerWidth<768&&(m={sourceSelect:{marginBottom:10},button:{display:"block",marginBottom:10}});var v=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state=e.initialFilters?e.initialFilters:{term:"All"},a.promises={},a.promises.activeTerm=p.default.getActive(function(e){return a.setState({term:e.id})}),a.submitFilters=a.submitFilters.bind(a),a.handleFieldChange=a.handleFieldChange.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"render",value:function(){return!1===this.props.visible?c.default.createElement("div",null,c.default.createElement(h.default,null)):c.default.createElement("form",{method:"post",id:"filterForm",onSubmit:this.submitFilters,style:{marginBottom:"10px"}},c.default.createElement(f.default,{url:"/api/terms/list",className:"form-control",name:"term",id:"term",value:this.state.term,onChange:this.handleFieldChange,style:m.sourceSelect}),c.default.createElement(d.Button,{style:m.button,className:"custom btn-success",type:"submit"},"Filter"))}},{key:"handleFieldChange",value:function(e){this.setState((0,r.default)({},e.target.name,e.target.value))}},{key:"submitFilters",value:function(e){e.preventDefault();var t=this.state.term;t&&this.props.onFiltersSubmit({term:t})}}]),t}(c.default.Component);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(2)),l=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"getInt",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}}]),e}();t.default=l},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(17)),l=a(n(39)),i=a(n(3)),s=a(n(1)),u=a(n(2)),c=a(n(4)),d=a(n(5)),f=n(0),p=a(f),h=a(n(14)),m=a(n(28)),v=(a(n(47)),n(9)),y=n(12),g=n(6),E=a(n(16)),b=a(n(11)),_=a(n(43)),C=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.close=a.close.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"close",value:function(){(0,this.props.onClose)()}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.id;return p.default.createElement(g.Modal,{show:t,onHide:this.close,dialogClassName:"big-modal"},p.default.createElement(g.Modal.Header,{closeButton:!0},p.default.createElement("p",{style:{textAlign:"center",fontSize:"14pt"}},"Class Students")),p.default.createElement(g.Modal.Body,{style:{height:"650px",overflowY:"auto"}},p.default.createElement(k,(0,l.default)({ajaxOperations:{load:{type:"get",url:"/api/classes/"+n,data:{fields:["course.courseTitle","classTime","teacher.userFullname","classWorks","studentsAttendance"]}},save:{type:"put",url:"/api/classes/"+n}},logEnabled:!0},this.props))),p.default.createElement(g.Modal.Footer,null,p.default.createElement(g.Button,{onClick:this.close},"Close")))}}]),t}(f.Component);t.default=C;var w=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={data:e.data,date:(new Date).toJSON().slice(0,10),currentClassWork:{},attendanceEditMode:!1},a.onChange=a.onChange.bind(a),a.save=a.save.bind(a),a.goToAttendanceTable=a.goToAttendanceTable.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"onChange",value:function(e){for(var t=e.target,n=t.name,a=t.value,r=this.state.date,l=this.state,i=l.data,s=l.data.classWorks,u=this.props.id,c=!1,d=0;d<s.length;d++)if(s[d].date==r){s[d][n]=a,c=!0;break}if(!c){var f;s.push((f={date:r},(0,o.default)(f,n,a),(0,o.default)(f,"courseClassId",u),f))}console.log(i),this.setState({data:i})}},{key:"getCurrentClassWork",value:function(){for(var e=this.state,t=e.date,n=e.data.classWorks,a=0;a<n.length;a++)if(n[a].date==t)return n[a];return null}},{key:"save",value:function(){var e=this,t=this.state.data;(0,this.props.save)({classWorks:t.classWorks},function(n){t.classWorks=n.classWorks,e.setState({data:t})})}},{key:"renderClassTitle",value:function(){var e=this.state.data,t=E.default.getIfExists,n=t(e,"course.courseTitle",""),a=t(e,"classTime",""),r=t(e,"teacher.userFullname","");return p.default.createElement("div",null,p.default.createElement("h2",{className:"block-heading"},n+": "+a),p.default.createElement("br",null),p.default.createElement("h2",{className:"block-heading"},"Teacher: "+r),p.default.createElement("hr",null))}},{key:"goToAttendanceTable",value:function(){this.save(),(0,this.props.onUpdate)()}},{key:"renderForm",value:function(){var e=this,t=this.state,n=t.date,a=t.data.studentsAttendance,r=t.attendanceEditMode,o=this.getCurrentClassWork(),l=E.default.getIfExists;return r?p.default.createElement("div",null,p.default.createElement(S,{date:n,data:a,onListEndReach:this.goToAttendanceTable})):p.default.createElement("div",null,p.default.createElement(y.FormField,{width:12,label:"Work Covered"},p.default.createElement("textarea",{name:"doneWork",style:{height:"100px"},value:l(o,"doneWork",""),className:"form-control",onChange:this.onChange})),p.default.createElement(y.FormField,{width:12,label:"Homework"},p.default.createElement("textarea",{name:"homeWork",style:{height:"100px"},value:l(o,"homeWork",""),className:"form-control",onChange:this.onChange})),p.default.createElement(g.Button,{className:"custom btn-success",onClick:function(){return e.setState({attendanceEditMode:!0})}},"Next"))}},{key:"componentDidMount",value:function(){var e=this;y.DatePicker.init(function(t,n){var a=n.split("-"),r=[a[2],a[1],a[0]].join("-");e.setState((0,o.default)({},t,r))}),$(function(){(0,_.default)($("textarea"))})}},{key:"render",value:function(){var e=this.state.date;return p.default.createElement("div",{className:"content-block"},this.renderClassTitle(),p.default.createElement(y.FormField,{width:2},p.default.createElement("input",{name:"date",value:e,className:"form-control datepicker",onChange:this.onChange})),this.renderForm())}}]),t}(f.Component);w.contextTypes={router:f.PropTypes.object.isRequired};var k=(0,m.default)((0,h.default)(w),[v.ROLES.ADMIN,v.ROLES.SUPER_ADMIN,v.ROLES.TEACHER,v.ROLES.REGISTRAR]),S=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={data:e.data,currStudent:0},a.move=a.move.bind(a),a.onChange=a.onChange.bind(a),a.save=a.save.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"save",value:function(){var e=this,t=this.state,n=t.currStudent,a=t.data,r=a[n];if(!r||!r.isChanged)return!1;$.ajax({type:"put",url:"/api/students/"+r.id,data:{attendance:r.attendance},success:function(t){r.attendance=t.attendance,a[n]=r,e.setState({data:a})},error:function(e){b.default.error("Update failed"),console.error(e)}})}},{key:"getPos",value:function(e,t,n){return(e+=n)>=t?e-=t:e<0&&(e+=t),e}},{key:"move",value:function(e){this.save();var t=this.state,n=t.currStudent,a=t.data;this.setState({currStudent:this.getPos(n,a.length,e)})}},{key:"getCurrentAttendaceRecord",value:function(e){for(var t=this.props.date,n=e.attendance,a=0;a<n.length;a++)if(n[a].date==t)return n[a];return null}},{key:"changeField",value:function(e,t){var n=this.props.date,a=this.state.currStudent,r=this.state.data,o=r[a];if(!o)return!1;for(var l=!1,i=o.attendance,s=0;s<i.length;s++)i[s].date==n&&(i[s][e]!==t&&(i[s][e]=t,o.isChanged=!0),l=!0);if(!l){var u={studentId:o.id,date:n,comment:"",late:"0",attendance:"absent"};u[e]=t,i.push(u),o.isChanged=!0}r[a]=o,this.setState({data:r})}},{key:"onChange",value:function(e){this.changeField(e.target.name,e.target.value)}},{key:"setAttendance",value:function(e){this.changeField("attendance",e?"present":"absent");var t=this.state,n=t.currStudent,a=t.data,r=this.props.onListEndReach;n+1>=a.length?(this.save(),r()):this.move(1)}},{key:"render",value:function(){var e=this,t=E.default.getIfExists,n=this.state,a=n.currStudent,o=n.data,l=o[a],i=this.getCurrentAttendaceRecord(l),s={width:"100px",height:"50px"};return l?p.default.createElement("div",null,p.default.createElement("div",{style:{marginBottom:"20px"}},p.default.createElement(g.Button,{className:"custom",onClick:function(){return e.move(-1)},style:{marginRight:"15px",minWidth:"100px"}},"Prev "+(this.getPos(a,o.length,-1)+1)+"/"+o.length),p.default.createElement(g.Button,{className:"custom",onClick:function(){return e.move(1)},style:{minWidth:"100px"}},"Next "+(this.getPos(a,o.length,1)+1)+"/"+o.length)),p.default.createElement("h2",null,l.user.userFullname),p.default.createElement(y.FormField,{width:12},p.default.createElement("textarea",{name:"comment",style:{height:"100px"},value:t(i,"comment",""),className:"form-control",onChange:this.onChange})),a+1>=o.length?p.default.createElement("p",null,"Last student"):"",p.default.createElement("div",{style:{marginTop:"20px"}},p.default.createElement(g.Button,{onClick:function(){return e.setAttendance(!1)},className:"custom btn-danger",style:(0,r.default)(s,{marginRight:"15px"})},"Absent"),p.default.createElement(g.Button,{onClick:function(){return e.setAttendance(!0)},className:"custom btn-green",style:s},"Present"))):p.default.createElement("h2",null,"No student data")}}]),t}(f.Component);S.ProTypes={date:f.PropTypes.string.isRequired,data:f.PropTypes.array.isRequired,onListEndReach:f.PropTypes.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(50)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=n(6),h=a(n(16)),m=a(n(29)),v=a(n(11)),y=(a(n(19)),a(n(443))),g=n(9),E=h.default.getIfExists,b=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={info:{},classes:{male:[],female:[]},isLoading:!0,showClassStudentsWnd:!1,classId:null},a.onChange=a.onChange.bind(a),a.renderClassesTableRow=a.renderClassesTableRow.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"loadDashboardInfo",value:function(e){var t=this,n={url:"/api/dashboard",dataType:"json",success:function(e){t.setState({info:e})},error:function(e,t,n){}};e?(n.type="post",n.data={term:e.term}):n.type="get",$.ajax(n)}},{key:"loadClasses",value:function(e){var t=this;this.setState({isLoading:!0}),$.ajax({type:"get",url:"/api/classes",data:{filters:e,fields:["id","classGender","course.courseTitle","course.dept.weight","classTime","teacher.userFullname","studentsCount","classroom.classroomName"]},success:function(e){var n={male:[],female:[]};e.rows.forEach(function(e){n["both"==e.classGender?"male":e.classGender].push(e)}),t.setState({classes:n,isLoading:!1})},error:function(e){v.default.error(e.responseText),console.error(e.responseText)}})}},{key:"componentWillMount",value:function(){this.loadDashboardInfo(),this.loadClasses()}},{key:"onChange",value:function(e){this.setState((0,o.default)({},e.target.name,e.target.value))}},{key:"renderClassesTableRow",value:function(e){var t=this,n=this.context.router,a=[],r=function(){var e=0;return function(t){return a.push(f.default.createElement("td",{key:e++},t))}}();return r(E(e,"course.courseTitle","")),r(f.default.createElement("a",{style:{cursor:"pointer"},onClick:function(){return n.push("/classes/"+e.id+"/")}},e.classTime)),r(f.default.createElement("a",{style:{cursor:"pointer"},onClick:function(){return t.setState({classId:e.id,showClassStudentsWnd:!0})}},"Attendance")),r(E(e,"teacher.userFullname","")),r(e.studentsCount),r(E(e,"classroom.classroomName","")),a}},{key:"renderClassTables",value:function(){var e=this.state,t=e.classes,n=e.className;if(e.isLoading)return f.default.createElement("div",null,"Loading...");var a=function(e){return!n||-1!==(E(e,"course.courseTitle","")+e.classTime).toLowerCase().indexOf(n.toLowerCase())},r=function(e,t){var n=E(e,"course.dept.weight",0),a=E(t,"course.dept.weight",0);return n<a?-1:n>a?1:E(e,"course.courseTitle","")<E(t,"course.courseTitle","")?-1:1};return f.default.createElement("div",null,f.default.createElement("div",null,f.default.createElement("input",{className:"form-control",style:{width:"300px"},placeholder:"course title / class name search",type:"text",name:"className",onChange:this.onChange,value:n})),f.default.createElement(p.Row,{style:{marginBottom:"10px"}},f.default.createElement("h4",null,"Male classes"),f.default.createElement(m.default,{data:t.male.filter(a).sort(r),headers:["Course Name","Class name","Attendance","Teacher","Students Count","Classroom"],createRow:this.renderClassesTableRow})),f.default.createElement(p.Row,{style:{marginBottom:"10px"}},f.default.createElement("h4",null,"Female classes"),f.default.createElement(m.default,{data:t.female.filter(a).sort(r),headers:["Course Name","Class name","Attendance","Teacher","Students Count","Classroom"],createRow:this.renderClassesTableRow})))}},{key:"render",value:function(){var e=this;if(this.state.info){for(var t=[],n=[],a=[],o=(0,r.default)(this.state.info),l=0;l<o.length;l++){var i=f.default.createElement("p",{style:{borderBottom:"1px solid rgba(0, 0, 0, 0.15)",height:"30px"},key:l},this.state.info[o[l]]," | ",o[l]);a.push(i),l%2==0?t.push(i):n.push(i)}o.length;var s=this.state,u=s.showClassStudentsWnd,c=s.classId;return f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"Dashboard"),f.default.createElement("hr",null),f.default.createElement(p.Row,null,f.default.createElement(p.Col,{md:6},t),f.default.createElement(p.Col,{md:6},n)),this.renderClassTables(),f.default.createElement(y.default,{show:u,selectedTab:1,params:{id:c},appTypeKey:g.ROLES.REGISTRAR,onClose:function(){return e.setState({showClassStudentsWnd:!1})}}))}return!1}}]),t}(d.Component);t.default=b,b.contextTypes={router:d.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=a(n(995)),f=n(9),p=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,f.ROLES.ADMIN,d.default),(0,r.default)(a,f.ROLES.SUPER_ADMIN,d.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){if(this.props.appTypeKey in this.childTypes){var e=this.childTypes[this.props.appTypeKey],t=this.props.children?c.default.cloneElement(this.props.children,{appTypeKey:this.props.appTypeKey}):"";return c.default.createElement("div",null,c.default.createElement(e,null),t)}return!1}}]),t}(c.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=a(n(99)),d=n(38),f=n(6),p=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"admin-nav-secondary"},u.default.createElement("div",{className:"container"},u.default.createElement(c.default,{activeKey:1},u.default.createElement(d.LinkContainer,{to:{pathname:"/transactions/all"}},u.default.createElement(f.NavItem,{eventKey:1},"All Transactions")),u.default.createElement(d.LinkContainer,{to:{pathname:"/transactions/paypal"}},u.default.createElement(f.NavItem,{eventKey:2},"PayPal Transactions")),u.default.createElement(d.LinkContainer,{to:{pathname:"/transactions/stripe"}},u.default.createElement(f.NavItem,{eventKey:3},"Stripe Transactions")))))}}]),t}(u.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=a(n(29)),p=a(n(15)),h=a(n(60)),m=(a(n(22)),n(6)),v=a(n(174)),y=n(18),g=a(n(19)),E=a(n(566)),b=(a(n(16)).default.getIfExists,function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return!(!this.props.appTypeKey||!t.allowedRoles().includes(this.props.appTypeKey))&&c.default.createElement("div",null,c.default.createElement(_,null))}}],[{key:"allowedRoles",value:function(){return[d.ROLES.ADMIN,d.ROLES.SUPER_ADMIN]}}]),t}(u.Component));t.default=b;var _=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,totalCount:0,rows:null,showFullDetails:!1,fullDetails:null},a.currentPage=1,a.rowsPerPage=40,a.loadPromise=null,a.filters={txnId:""},a.createRow=a.createRow.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.showFullDetails,a=t.fullDetails;return this.state.isLoading?c.default.createElement("div",null,c.default.createElement(g.default,null)):c.default.createElement("div",null,c.default.createElement("div",{className:"content-block"},c.default.createElement(E.default,{onSubmit:function(t){e.filters.txnId=t,e.currentPage=1,e.loadData()}})),c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Transactions"),c.default.createElement("hr",null),this.showTable(),c.default.createElement(h.default,{currentPage:this.currentPage,totalCount:this.state.totalCount,rowsPerPage:this.rowsPerPage,onPageChange:function(t){e.currentPage=t,e.loadData()}}),c.default.createElement(C,null)),c.default.createElement(v.default,{heading:"Paypal transaction full details",show:n,data:a,onClose:function(){return e.setState({showFullDetails:!1})}}))}},{key:"showTable",value:function(){var e=this;return c.default.createElement(f.default,{data:this.state.rows,headers:["Last Update","Student Name","Total Price","Total Discount","Payment Status","TXN ID"],createHead:function(t){return e.createHead(t)},createRow:this.createRow})}},{key:"createHead",value:function(e){var t=[];return(t=t.concat(f.default.createHeadBase(e))).push(c.default.createElement("td",{key:"detail"})),t}},{key:"showDetail",value:function(e){this.context.router.push("/transactions/paypal/"+e)}},{key:"showFullDetails",value:function(e){e&&this.setState({showFullDetails:!0,fullDetails:e})}},{key:"createRow",value:function(e){var t=this,n=[],a=0,r=function(e){return n.push(c.default.createElement("td",{key:a++},e))};return r(c.default.createElement("p",null,e.lastUpdate)),r(c.default.createElement(y.Link,{to:"/users/"+e.userId},e.userFullname)),r(c.default.createElement("p",null,e.totalCalculatedPrice)),r(c.default.createElement("p",null,e.totalDiscount)),r(c.default.createElement("p",null,e.paymentStatus)),r(c.default.createElement("a",{onClick:function(){return t.showFullDetails(e.fullDetails)},style:{cursor:"pointer"}},e.txnId)),r(c.default.createElement(m.Button,{onClick:function(){return t.showDetail(e.id)}},"Detail")),n}},{key:"loadData",value:function(){var e=this;this.setState({isLoading:!0});var t={page:this.currentPage,rowsPerPage:this.rowsPerPage,filters:this.filters};this.loadPromise=p.default.makeCancelableAjax($.ajax({type:"get",url:"/api/transactions/paypal",data:t})),this.loadPromise.promise.then(function(t){e.setState({isLoading:!1,rows:t.rows,totalCount:t.info.totalCount})},function(t){e.setState({isLoading:!1}),console.log(t.responseText)})}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}}]),t}(u.Component);_.contextTypes={router:u.PropTypes.object.isRequired};var C=function(){return c.default.createElement(m.Row,null,c.default.createElement(m.Col,{md:10,mdOffset:1,style:{textAlign:"center",paddingLeft:"30px"}},c.default.createElement(y.Link,{to:"transactions/print/paypal/filters/none",target:"_blank",style:{marginRight:"15px",marginTop:"15px",display:"inline-block",marginBottom:10}},c.default.createElement(m.Button,{className:"custom",style:{width:"185px"}},"Export all"))))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(70)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(19)),p=a(n(15)),h=a(n(29)),m=n(18),v=n(6),y=a(n(60)),g=a(n(174)),E=a(n(566)),b=a(n(16)).default.getIfExists,_=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={isLoading:!1,totalCount:0,rows:null,fullDetails:null,showFullDetails:!1},a.filters={txnId:""},a.currentPage=1,a.rowsPerPage=40,a.loadPromise=null,a.requestFields=["id","amount","user.id","user.userFullname","userId","cardOwnerName","created","status","balanceTransaction","fullDetails"],a.createRow=a.createRow.bind(a),a.openTransaction=a.openTransaction.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"showFullDetails",value:function(e){e&&this.setState({showFullDetails:!0,fullDetails:e})}},{key:"prepareData",value:function(e){return e.map(function(e){return e.fullDetails&&"object"===(0,r.default)(e.fullDetails.created)&&(e.fullDetails.created=e.fullDetails.created.date),e})}},{key:"loadData",value:function(){var e=this;this.setState({isLoading:!0});var t={page:this.currentPage,rowsPerPage:this.rowsPerPage,fields:this.requestFields,filters:this.filters};this.loadPromise=p.default.ajax({type:"get",url:"/api/transactions/stripe",data:t}),this.loadPromise.promise.then(function(t){e.setState({isLoading:!1,rows:e.prepareData(t.rows),totalCount:t.info.totalCount})},function(t){e.setState({isLoading:!1}),console.log(t.responseText)})}},{key:"openTransaction",value:function(e){this.context.router.push("/transactions/stripe/"+e)}},{key:"createRow",value:function(e){var t=this,n=[],a=function(){var e=0;return function(t){return n.push(d.default.createElement("td",{key:e++},t))}}();return a(d.default.createElement("p",null,e.created)),a(d.default.createElement(m.Link,{to:"/users/"+b(e,"user.id","deleted")},b(e,"user.userFullname","deleted"))),a(d.default.createElement("p",null,parseFloat(e.amount).toFixed(2))),a(d.default.createElement("p",null,e.status)),a(d.default.createElement("p",null,e.cardOwnerName)),a(d.default.createElement("a",{style:{cursor:"pointer"},onClick:function(){return t.showFullDetails(e.fullDetails)}},e.balanceTransaction)),a(d.default.createElement(v.Button,{onClick:function(){return t.openTransaction(e.id)}},"Detail")),n}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.fullDetails,r=t.totalCount,o=t.showFullDetails,l=t.rows;return n?d.default.createElement(f.default,null):d.default.createElement("div",null,d.default.createElement("div",{className:"content-block"},d.default.createElement(E.default,{onSubmit:function(t){e.filters.txnId=t,e.currentPage=1,e.loadData()}})),d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Transactions"),d.default.createElement("hr",null),d.default.createElement(h.default,{data:l,headers:["Created At","Student Name","Total Amount","Payment Status","Card Owner Name","TXN ID",""],createRow:this.createRow}),d.default.createElement(y.default,{currentPage:this.currentPage,totalCount:r,rowsPerPage:this.rowsPerPage,onPageChange:function(t){e.currentPage=t,e.loadData()}}),d.default.createElement(C,null),d.default.createElement(g.default,{heading:"Stripe transaction full details",show:o,data:a,onClose:function(){return e.setState({showFullDetails:!1})}})))}}]),t}(c.Component);t.default=_,_.contextTypes={router:c.PropTypes.object.isRequired};var C=function(){return d.default.createElement(v.Row,null,d.default.createElement(v.Col,{md:10,mdOffset:1,style:{textAlign:"center",paddingLeft:"30px"}},d.default.createElement(m.Link,{to:"transactions/print/stripe/filters/none",target:"_blank",style:{marginRight:"15px",marginTop:"15px",display:"inline-block",marginBottom:10}},d.default.createElement(v.Button,{className:"custom",style:{width:"185px"}},"Export all"))))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(14)),p=n(12),h=(a(n(31)),n(18)),m=n(6),v=a(n(174)),y=(0,f.default)(function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={showFullDetails:!1},a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"renderValue",value:function(e,t){if(!t)return!1;for(var n=t.toString().split(" "),a=["NaN","undefined","null"],r=0;r<n.length;r++)if(a.includes(n[r]))return!1;return d.default.createElement(p.FormField,{width:5,label:e},d.default.createElement("p",null,t))}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.data.fullDetails,r=this.state.showFullDetails;return d.default.createElement("div",null,d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Paypal Transaction Detail"),d.default.createElement("hr",null),d.default.createElement(m.Row,null,d.default.createElement(m.Col,{md:6},this.renderValue("Last Update",new Date(n.lastUpdate).toLocaleDateString()),this.renderValue("Student Name",n.studentName),this.renderValue("Total Price"," "+parseFloat(n.totalCalculatedPrice).toFixed(2)),this.renderValue("Total Price"," "+parseFloat(n.totalDiscount).toFixed(2)),this.renderValue("Invoice",n.invoiceNo),this.renderValue("Invoice Date",n.invoiceDate),this.renderValue("Gross Payment From Customer"," "+parseFloat(n.mcGross).toFixed(2)+" "+n.mcCurrency),this.renderValue("Payment Date in PayPal",a.paymentDate),this.renderValue("Payment Status in PayPal",n.paymentStatus)),d.default.createElement(m.Col,{md:6},this.renderValue("Payment Type in PayPal",n.paymentType),this.renderValue("Verify Sign",a.verifySign),this.renderValue("TXN ID",a.txnId),this.renderValue("Payer Email",a.payerEmail),this.renderValue("Payer ID in PayPal",a.payerId),this.renderValue("Payer Status in PayPal",a.payerStatus),this.renderValue("Receiver Email in PayPal",a.receiverEmail),this.renderValue("Receiver ID in PayPal",a.receiverId))),d.default.createElement(m.Button,{className:"custom",onClick:function(){return e.setState({showFullDetails:!0})}},"Open full variable from PayPal")),d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Course Registered in this Transaction"),d.default.createElement("hr",null),d.default.createElement(g,{data:n.students})),d.default.createElement(v.default,{show:r,data:a,onClose:function(){return e.setState({showFullDetails:!1})}}))}}]),t}(c.Component));t.default=function(e){return d.default.createElement(y,(0,r.default)({ajaxOperations:{load:{type:"get",url:"/api/transactions/paypal/"+e.params.id}}},e))};var g=function(e){var t=e.data;return!!t&&d.default.createElement("div",null,d.default.createElement("table",{className:"table table-striped results-table table-hover"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("td",null,"Registration Time"),d.default.createElement("td",null,"Course Title"),d.default.createElement("td",null,"Student Status"),d.default.createElement("td",null,"Payment Status"),d.default.createElement("td",null))),d.default.createElement("tbody",null,t.map(function(e,t){return d.default.createElement("tr",{key:t},d.default.createElement("td",null,new Date(e.registerDate).toLocaleDateString()),d.default.createElement("td",null,e.course.courseTitle),d.default.createElement("td",null,e.studentStatus),d.default.createElement("td",null,e.regPaymentStatus),d.default.createElement("td",null,d.default.createElement(h.Link,{to:"/students/"+e.id},"Edit"),d.default.createElement("span",null," | "),d.default.createElement(h.Link,{to:"/students/"+e.id+"/grades"},"Grade")))}))))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(70)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(14)),h=n(12),m=(a(n(31)),a(n(16))),v=(n(18),n(6)),y=a(n(174)),g=m.default.getIfExists,E=(0,p.default)(function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));a.state={showFullDetails:!1};var r=e.data;return r.created=new Date(r.created).toLocaleDateString(),r.fullDetails.created&&"object"===(0,o.default)(r.fullDetails.created)&&(r.fullDetails.created=r.created),a.state.data=r,a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"renderValue",value:function(e,t,n){if(!t)return!1;for(var a=t.toString().split(" "),r=["NaN","undefined","null"],o=0;o<a.length;o++)if(r.includes(a[o]))return!1;return f.default.createElement(h.FormField,{width:5,label:e},n?f.default.createElement("a",{style:{cursor:"pointer",display:"block"},href:n},t):f.default.createElement("p",null,t))}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.data.fullDetails,r=t.data.cart,o=this.state.showFullDetails;return r&&r.students,f.default.createElement("div",null,f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"Paypal Transaction Detail"),f.default.createElement("hr",null),f.default.createElement(v.Row,null,f.default.createElement(v.Col,{md:6},this.renderValue("Last Update",n.created),this.renderValue("Status",n.status),this.renderValue("Student Name",g(n,"user.userFullname",""),"/users/"+g(n,"user.id","")),this.renderValue("Total Amount",n.currency+" "+parseFloat(n.amount).toFixed(2))),f.default.createElement(v.Col,{md:6},this.renderValue("Customer",n.customer),this.renderValue("Description",n.description),this.renderValue("TXN ID",n.balanceTransaction),this.renderValue("Card Owner Name",n.cardOwnerName))),f.default.createElement(v.Button,{className:"custom",onClick:function(){return e.setState({showFullDetails:!0})}},"Open full variable from Stripe")),!1,f.default.createElement(y.default,{show:o,data:a,onClose:function(){return e.setState({showFullDetails:!1})}}))}}]),t}(d.Component));t.default=function(e){return f.default.createElement(E,(0,r.default)({ajaxOperations:{load:{type:"get",url:"/api/transactions/stripe/"+e.params.id,data:{fields:["user.userFullname","user.id","amount","balanceTransaction","currency","customer","description","created","fullDetails","status","cardOwnerName","cart.students"]}}}},e))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(15)),f=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.currentPage=1,a.rowsPerPage=40,a.fields=[],a.state={filters:{}},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(){var e=this,t=this.state.filters;this.setState({isLoading:!0});var n={page:this.currentPage,rowsPerPage:this.rowsPerPage,fields:this.fields,filters:t};this.loadPromise=d.default.ajax({type:"get",url:"/api/transactions/stripe",data:n}),this.loadPromise.promise.then(function(t){e.setState({isLoading:!1,rows:e.prepareData(t.rows),totalCount:t.info.totalCount})},function(t){e.setState({isLoading:!1}),console.log(t.responseText)})}},{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){return c.default.createElement("div",null)}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";(function(e){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(59)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=n(6),h=a(n(22)),m=a(n(36)),v=a(n(15)),y=a(n(29)),g=a(n(60)),E=n(18),b=a(n(19)),_=n(12),C=a(n(16)).default.getIfExists,w={filterDatePicker:{alignSelf:"center",width:200},untilLabel:{alignSelf:"center",margin:"10px 20px 10px 20px"},filterButton:{marginTop:"50px"}};window.innerWidth<768&&(w={filterDatePicker:{flexBasis:"100%",marginBottom:10},untilLabel:{alignSelf:"center",margin:"0px 20px 10px 20px"},filterButton:{marginTop:"50px",width:"100%"}});var k=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={filters:null},a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this;if(!this.props.appTypeKey||!t.allowedRoles().includes(this.props.appTypeKey))return!1;var n=this.state.filters;return d.default.createElement("div",null,d.default.createElement("div",{className:"content-block"},d.default.createElement(x,{onFiltersSubmit:function(t){return e.setState({filters:t})}})),d.default.createElement(T,{filters:n}))}}],[{key:"allowedRoles",value:function(){return[f.ROLES.ADMIN,f.ROLES.SUPER_ADMIN]}}]),t}(d.default.Component);t.default=k;var S=function(e){function t(){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props.filters,t=e?(0,r.default)(e):"";return d.default.createElement("div",{style:{marginBottom:"15px"}},d.default.createElement(E.Link,{to:"/transactions/print/students/filters/"+t,target:"_blank"},d.default.createElement(p.Button,{className:"custom"},"Export Transactions")),d.default.createElement(E.Link,{style:{marginLeft:"15px"},to:"/transactions/print/cart-items/filters/"+t,target:"_blank"},d.default.createElement(p.Button,{className:"custom"},"Export student with cart items")))}}]),t}(c.Component);S.propTypes={filters:c.PropTypes.object};var x=function(t){function n(e,t){(0,l.default)(this,n);var a=(0,s.default)(this,(n.__proto__||(0,o.default)(n)).call(this,e,t));return a.state={filters:{paymentMethod:"All",paymentStatus:"All",regStatus:"All",employmentType:"All",paymentType:"All",beginDate:"",endDate:"",currTermOnly:!1,haveAdminNotes:!1,haveReducedNotes:!1}},a.submit=a.submit.bind(a),a.handleFieldChange=a.handleFieldChange.bind(a),a.updateFilter=a.updateFilter.bind(a),a}return(0,u.default)(n,t),(0,i.default)(n,[{key:"componentDidMount",value:function(){_.DatePicker.init(this.updateFilter)}},{key:"updateFilter",value:function(e,t){var n=this.state.filters;n[e]=t,this.setState({filters:n})}},{key:"render",value:function(){var e=function(e){var t=e.style,n=e.children;return d.default.createElement("p",{style:t,className:"detail-field-label"},n)};return d.default.createElement("div",null,d.default.createElement("form",{id:"filterForm",onSubmit:this.submit,style:{marginTop:"35px"}},d.default.createElement(p.Row,null,d.default.createElement(p.Col,{md:5,mdOffset:1},d.default.createElement(h.default,null,d.default.createElement(e,null,"Payment method"),d.default.createElement(m.default,{url:"/api/students/get-reg-payment-method-enum",className:"form-control",name:"paymentMethod",id:"paymentMethod",value:this.state.filters.paymentMethod,onChange:this.handleFieldChange},d.default.createElement("option",{value:"All"},"All Methods")))),d.default.createElement(p.Col,{md:5},d.default.createElement(h.default,null,d.default.createElement(e,null,"Payment Status"),d.default.createElement(m.default,{url:"/api/students/get-reg-payment-status-enum",className:"form-control",name:"paymentStatus",id:"paymentStatus",value:this.state.filters.paymentStatus,onChange:this.handleFieldChange},d.default.createElement("option",{value:"All"},"All Statuses"))))),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{md:5,mdOffset:1},d.default.createElement(h.default,null,d.default.createElement(e,null,"Registration Status"),d.default.createElement(m.default,{url:"/api/students/get-reg-status-enum",className:"form-control",name:"regStatus",id:"regStatus",value:this.state.filters.regStatus,onChange:this.handleFieldChange},d.default.createElement("option",{value:"All"},"All Statuses")))),d.default.createElement(p.Col,{md:5},d.default.createElement(h.default,null,d.default.createElement(e,null,"Employment Type"),d.default.createElement(m.default,{url:"/api/students/get-student-status-enum",className:"form-control",name:"employmentType",id:"employmentType",value:this.state.filters.employmentType,onChange:this.handleFieldChange},d.default.createElement("option",{value:"All"},"All Types"))))),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{md:4,mdOffset:4},d.default.createElement(h.default,null,d.default.createElement(e,null,"Payment Type"),d.default.createElement(m.default,{url:"/api/student-payments/get-payment-method-enum",className:"form-control",name:"paymentType",id:"paymentType",value:this.state.filters.paymentType,onChange:this.handleFieldChange},d.default.createElement("option",{value:"All"},"All Types"))))),d.default.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:"15px",flexWrap:"wrap"}},d.default.createElement("input",{className:"form-control datepicker",placeholder:"begin date",type:"text",id:"beginDate",name:"beginDate",value:this.state.filters.beginDate,onChange:this.handleFieldChange,style:w.filterDatePicker}),d.default.createElement(e,{style:w.untilLabel},"Until"),d.default.createElement("input",{className:"form-control datepicker",placeholder:"end date",type:"text",id:"endDate",name:"endDate",value:this.state.filters.endDate,onChange:this.handleFieldChange,style:w.filterDatePicker})),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{md:10,mdOffset:1},d.default.createElement(p.Row,null,d.default.createElement(p.Col,{md:4},d.default.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:10}},d.default.createElement(e,{style:{alignSelf:"center",margin:"0"}},"Show Only Current Term & Year"),d.default.createElement("input",{style:{margin:"0px 0px 0px 15px",alignSelf:"center"},type:"checkbox",id:"currTermOnly",name:"currTermOnly",value:this.state.filters.currTermOnly,onChange:this.handleFieldChange}))),d.default.createElement(p.Col,{md:4},d.default.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:10}},d.default.createElement(e,{style:{alignSelf:"center",margin:"0"}},"Have admin notes"),d.default.createElement("input",{style:{margin:"0px 0px 0px 15px",alignSelf:"center"},type:"checkbox",id:"haveAdminNotes",name:"haveAdminNotes",value:this.state.filters.haveAdminNotes,onChange:this.handleFieldChange}))),d.default.createElement(p.Col,{md:4},d.default.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:10}},d.default.createElement(e,{style:{alignSelf:"center",margin:"0"}},"Have reduced notes"),d.default.createElement("input",{style:{margin:"0px 0px 0px 15px",alignSelf:"center"},type:"checkbox",id:"haveReducedNotes",name:"haveReducedNotes",value:this.state.filters.haveReducedNotes,onChange:this.handleFieldChange})))))),d.default.createElement(h.default,null,d.default.createElement(p.Button,{style:w.filterButton,className:"custom btn-success",type:"submit"},"Filter"))))}},{key:"submit",value:function(e){e.preventDefault(),this.props.onFiltersSubmit&&this.props.onFiltersSubmit(this.state.filters)}},{key:"handleFieldChange",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n=n||t.target.type;var a=this.state.filters,r=t.target.name;switch(n){case"text":case"select-one":case"radio":a[r]=t.target.value;break;case"multi-checkbox":r=r.replace(/\[]/g,""),t.target.checked?a[r]=a[r].concat(t.target.value):a[r]=e.without(a[r],t.target.value);break;case"checkbox":a[r]=t.target.checked}this.setState({filters:a})}}]),n}(c.Component),T=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={isLoading:!1,loadingWithNewFilters:!1,totalCount:0,rows:null},a.currentPage=1,a.rowsPerPage=40,a.loadPromise=null,a.requestFields=["user.id","registerDate","course.courseTitle","courseClass.classTime","user.userFullname","totalAmount","regPaymentStatus","regStatus"],a.filters=null,a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.state.rows;return!!(this.state.isLoading||e&&0!==e.length)&&d.default.createElement("div",null,this.showTable(),this.showPaginator())}},{key:"showTable",value:function(){var e=this;return this.state.isLoading?d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Transactions"),d.default.createElement("hr",null),d.default.createElement("div",null,d.default.createElement(b.default,null))):d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Transactions"),d.default.createElement("hr",null),d.default.createElement(y.default,{data:this.state.rows,showingProps:["registerDate","course.courseTitle","courseClass.classTime","user.userFullname","totalAmount","regPaymentStatus","regStatus"],headers:["Registration Time","Course Title","Class Time","Student Name","Amount","Payment Status","Reg Status"],createHead:function(t){return e.createHead(t)},createRow:function(t,n){return e.createRow(t,n)}}),d.default.createElement(S,{filters:this.filters}))}},{key:"showPaginator",value:function(){var e=this;return!this.state.loadingWithNewFilters&&d.default.createElement(g.default,{currentPage:this.currentPage,totalCount:this.state.totalCount,rowsPerPage:this.rowsPerPage,onPageChange:function(t){e.currentPage=t,e.loadData()}})}},{key:"componentWillReceiveProps",value:function(e){e&&e.filters&&(this.filters=e.filters,this.currentPage=1,this.setState({loadingWithNewFilters:!0}),this.loadData())}},{key:"loadData",value:function(){var e=this;this.setState({isLoading:!0});var t={page:this.currentPage,rowsPerPage:this.rowsPerPage,fields:this.requestFields,filters:this.filters};this.loadPromise=v.default.makeCancelableAjax($.ajax({type:"get",url:"/api/transactions/all",data:t})),this.loadPromise.promise.then(function(t){e.setState({rows:t.rows,totalCount:t.info.totalCount,isLoading:!1,loadingWithNewFilters:!1})},function(e){return console.log(e)})}},{key:"createHead",value:function(e){var t=[];return(t=t.concat(y.default.createHeadBase(e))).push(d.default.createElement("td",{key:"actions"})),t}},{key:"createRow",value:function(e,t){var n=[];return(n=n.concat(y.default.createRowBase(e,t))).push(d.default.createElement("td",{key:"actions"},d.default.createElement(E.Link,{to:"/users/"+C(e,"user.id","deleted")},"Detail"))),n}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}}]),t}(c.Component)}).call(t,n(132))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=n(9),f=a(n(1003)),p=a(n(1196)),h=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,d.ROLES.SUPER_ADMIN,f.default),(0,r.default)(a,d.ROLES.ADMIN,f.default),(0,r.default)(a,d.ROLES.REGISTRAR,f.default),(0,r.default)(a,d.ROLES.STUDENT,p.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){if(this.props.appTypeKey in this.childTypes){var e=this.childTypes[this.props.appTypeKey],t=this.props.children?c.default.cloneElement(this.props.children,{appTypeKey:this.props.appTypeKey}):"";return c.default.createElement("div",null,c.default.createElement(e,{params:this.props.params}),t)}return console.error("Access denied for courses"),!1}}]),t}(c.default.Component);t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(47)),f=a(n(22)),p=a(n(36)),h=a(n(1004)),m=a(n(605)),v=n(6),y=(n(38),a(n(15))),g=(n(18),a(n(16)),a(n(11))),E=a(n(19)),b={};window.innerWidth<768&&(b={deptFilterButton:{width:"100%"}});var _=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n)),l=a.props.params;return a.state={dept:l?l.deptId:null},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.context.branchId!=t.branchId&&this.setState({dept:null})}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,c.default.createElement(d.default,null),c.default.createElement("div",{id:"notifications"}),c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Course List"),c.default.createElement("hr",null),c.default.createElement(C,{onSubmit:function(t){return e.setState({dept:t})}}),c.default.createElement(w,{dept:this.state.dept})),c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Course Groups"),c.default.createElement("hr",null),c.default.createElement(k,null)))}}]),t}(c.default.Component);t.default=_,_.propTypes={params:u.PropTypes.object},_.contextTypes={branchId:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.number])};var C=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={dept:""},a.submit=a.submit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.context.branchId;return c.default.createElement("div",null,c.default.createElement("h4",null,"Filter"),c.default.createElement("form",{id:"DeptFilterForm",onSubmit:this.submit},c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"dept"},"Dept"),c.default.createElement(p.default,{url:"/api/depts/list",className:"form-control",name:"dept",id:"dept",value:this.state.dept,onChange:function(t){return e.setState({dept:t.target.value})},optionPredicate:function(e){return!t||e.branchId==t}},c.default.createElement("option",{value:"All"},"All Depts"))),c.default.createElement(f.default,null,c.default.createElement(v.Button,{className:"custom btn-success",type:"submit",style:b.deptFilterButton},"Filter"))))))}},{key:"submit",value:function(e){e.preventDefault(),this.props.onSubmit&&this.props.onSubmit(this.state.dept)}}]),t}(c.default.Component);C.contextTypes={branchId:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.number])};var w=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,selectedTab:1,data:null},a.loadPromise=null,a.delete=a.delete.bind(a),a.replaceCourse=a.replaceCourse.bind(a),a.swapCourses=a.swapCourses.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this;if(this.state.isLoading)return c.default.createElement("div",null,c.default.createElement(E.default,null));var t=this.sortData(),n=this.props.dept;return c.default.createElement(v.Tabs,{className:"content-tabs",activeKey:this.state.selectedTab,onSelect:function(t){return e.setState({selectedTab:t})}},c.default.createElement(v.Tab,{eventKey:1,title:"Class"},c.default.createElement(h.default,{deptId:n,data:t.withClasses,onDelete:this.delete,onCourseReplace:this.replaceCourse,onCoursesSwap:this.swapCourses,onGroupsSwap:this.swapGroups})),c.default.createElement(v.Tab,{eventKey:2,title:"No Class"},c.default.createElement(h.default,{deptId:n,data:t.withoutClasses,onDelete:this.delete,onCourseReplace:this.replaceCourse,onCoursesSwap:this.swapCourses,onGroupsSwap:this.swapGroups})))}},{key:"sortData",value:function(){var e={withClasses:{},withoutClasses:{}},t=this.state.data;for(var n in t)for(var a=t[n].courses,r=0;r<a.length;r++){var o={id:t[n].id,courses:[],weight:t[n].weight};a[r].classes.length>0?(e.withClasses[n]||(e.withClasses[n]=o),e.withClasses[n].courses.push(a[r])):(e.withoutClasses[n]||(e.withoutClasses[n]=o),e.withoutClasses[n].courses.push(a[r]))}return e}},{key:"loadData",value:function(e,t){var n=this,a=t.branchId;this.setState({isLoading:!0}),this.loadPromise&&this.loadPromise.cancel(),this.loadPromise=y.default.makeCancelableAjax($.ajax({type:"get",url:"/api/courses/grouped-list",data:{deptId:e.dept,branchId:a}})),this.loadPromise.promise.then(function(e){n.setState({isLoading:!1,data:e})},function(e){n.setState({isLoading:!1}),console.log(e)})}},{key:"delete",value:function(e,t){var n=this;e&&0!==e.length&&$.ajax({type:"delete",url:"/api/courses",data:{ids:e,reason:t},success:function(){g.default.success("Deleted successfully");var t=n.state.data;if(t)for(var a in t)t[a].courses=t[a].courses.filter(function(t){return-1===e.indexOf(parseInt(t.id))});n.setState({data:t}),n.props.onUpdate&&n.props.onUpdate()},error:function(e){g.default.error(e.responseText.replace(/"/g,"")),console.log(e)}})}},{key:"replaceCourse",value:function(e,t){$.ajax({type:"put",url:"/api/courses/"+e.id,data:{courseGroupId:t},error:function(e){return console.log(e)}})}},{key:"swapCourses",value:function(e,t){$.ajax({type:"put",url:"/api/courses/swap",data:{courseA:e,courseB:t},error:function(e){return console.log(e)}})}},{key:"swapGroups",value:function(e,t){$.ajax({type:"put",url:"/api/courses/groups/swap",data:{groupA:e,groupB:t},error:function(e){return console.log(e)}})}},{key:"componentDidMount",value:function(){this.loadData(this.props,this.context)}},{key:"componentWillUnmount",value:function(){this.loadPromise.cancel()}},{key:"componentWillReceiveProps",value:function(e,t){this.loadData(e,t)}}]),t}(c.default.Component);w.contextTypes={branchId:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.number])};var k=function(){return c.default.createElement("div",null,c.default.createElement(m.default,{ajaxOperations:{load:{type:"get",url:"/api/courses/groups"},save:{type:"put",url:"/api/courses/groups"}}}))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(59)),o=a(n(50)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=a(n(23)),f=n(0),p=a(f),h=n(6),m=(n(38),a(n(16))),v=n(175),y=a(n(283)),g=a(n(1192)),E=a(n(604)),b=a(n(44)),_=n(9),C={checkboxColumn:{alignSelf:"center",display:"flex",justifyContent:"center",width:"12%",paddingLeft:"6%"},titleColumn:{alignSelf:"center",width:"43%"},addButton:{marginLeft:"15px",marginTop:"30px",marginBottom:10},deleteButton:{marginTop:"30px",marginBottom:10}};window.innerWidth<992&&(C=(0,d.default)({},C,{checkboxColumn:{alignSelf:"center",display:"flex",justifyContent:"center",width:"5%",paddingLeft:10},titleColumn:{alignSelf:"center",width:"50%"}})),window.innerWidth<768&&(C=(0,d.default)({},C,{addButton:{marginTop:10,marginBottom:10,width:"100%"},deleteButton:{marginTop:"30px",marginBottom:10,width:"100%"}}));var w=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={rowIds:[],groupTablesInfo:{},selectedAll:!1,selectAllEventValue:null,data:{},sortedGroups:[],showConfirmDelete:!1},a.add=a.add.bind(a),a.onCkeckedRowsChange=a.onCkeckedRowsChange.bind(a),a.handleSelectAllCheckBox=a.handleSelectAllCheckBox.bind(a),a.deleteChecked=a.deleteChecked.bind(a),a.onCoursesSwap=a.onCoursesSwap.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"add",value:function(){var e=this.context.router,t=this.props.deptId;t?e.push("/courses/dept/"+t+"/add"):e.push("/courses/add")}},{key:"render",value:function(){var e=this,t=this.state,n=t.sortedGroups,a=t.showConfirmDelete;if(!this.props.data||0==(0,o.default)(this.props.data).length)return p.default.createElement("div",null,p.default.createElement("p",null,"No data."),p.default.createElement(h.Button,{bsStyle:"success",style:{marginLeft:"15px",marginTop:"30px"},onClick:this.add},"Add"));var r=m.default.getIfExists(this,"context.user.role.roleName","None"),l=[_.ROLES.ADMIN,_.ROLES.SUPER_ADMIN];return p.default.createElement("div",null,p.default.createElement("div",{style:{overflow:"auto"}},p.default.createElement("div",{className:"table-head",style:{height:"50px",display:"flex",justifyContent:"flex-start",minWidth:992}},p.default.createElement("div",{style:C.checkboxColumn},p.default.createElement("input",{style:{alignSelf:"center"},type:"checkbox",checked:this.state.selectedAll,onChange:this.handleSelectAllCheckBox})),p.default.createElement("div",{style:{display:"inline-block",width:"5%",cursor:"move",alignSelf:"center"}}),p.default.createElement("div",{style:C.titleColumn},"Title"),p.default.createElement("div",{style:{alignSelf:"center",width:"40%"}},"Dept")),1===n.length?this.renderUngrouped():this.renderGroupTables()),p.default.createElement("div",null,l.includes(r)?p.default.createElement(h.Button,{className:"custom",style:C.deleteButton,onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete selected"):"",l.includes(r)?p.default.createElement(h.Button,{className:"custom",bsStyle:"success",style:C.addButton,onClick:this.add},"Add"):"",p.default.createElement(b.default,{show:a,onConfirm:this.deleteChecked,onClose:function(){return e.setState({showConfirmDelete:!1})}})))}},{key:"componentWillReceiveProps",value:function(e){var t=e.data;(0,r.default)(this.props.data)!==(0,r.default)(t)&&(this.initGroupTablesInfo(t),this.setState({data:t,sortedGroups:this.sortGroups(t)}))}},{key:"componentWillMount",value:function(){var e=this.props.data;this.initGroupTablesInfo(e),this.setState({data:e,sortedGroups:this.sortGroups(e)})}},{key:"sortGroups",value:function(e){return(0,o.default)(e).sort(function(t,n){var a=parseInt(e[t].weight),r=parseInt(e[n].weight);return isNaN(r)||a<r?-1:isNaN(a)||a>r?1:0})}},{key:"initGroupTablesInfo",value:function(e){if(e){var t={},n=[],a=null;this.state.groupTablesInfo&&(a=this.state.groupTablesInfo);for(var r in e)t[r]={id:e[r].id,isExpanded:!1},null!==a&&(t[r].isExpanded=m.default.accessObjByPath(a,r+".isExpanded")),e[r].courses.forEach(function(e){0==e.studentsCount&&n.push(e.id)});this.setState({groupTablesInfo:t,rowIds:n})}}},{key:"renderUngrouped",value:function(){var e=this,t=this.state,n=t.data,a=t.sortedGroups,r=t.groupTablesInfo,o=a[0],l=n[o].courses,i=r[o],s=i.checkedRows?i.checkedRows:[];return p.default.createElement("div",{style:{minWidth:992}},p.default.createElement(E.default,{title:o,data:l,checkedRows:s,onRowCheck:function(t,n){var a=s.indexOf(t),r=-1!==a;!r&&n&&s.push(t),r&&!n&&s.splice(a,1),e.onCkeckedRowsChange(o,s)},onCoursesSwap:this.onCoursesSwap}))}},{key:"renderGroupTables",value:function(){var e=this,t=this.state.data,n=this.state.sortedGroups;if(!t)return!1;var a=[];return n.forEach(function(n){a.push(p.default.createElement(g.default,{weight:t[n].weight,id:t[n].id,key:n,title:n,expanded:e.state.groupTablesInfo[n].isExpanded,data:t[n].courses,onClick:function(){var t=e.state.groupTablesInfo;t[n].isExpanded=!t[n].isExpanded,e.setState({groupTablesInfo:t})},onCheckedRowsChange:function(t){return e.onCkeckedRowsChange(n,t)},selectAllEventValue:e.state.selectAllEventValue,onCourseReplace:function(t,n){return e.onCourseReplace(t,n)},onCoursesSwap:function(t,n){return e.onCoursesSwap(t,n)},onGroupsSwap:function(t,n){return e.onGroupsSwap(t,n)}}))}),a}},{key:"onCourseReplace",value:function(e,t){var n=this.state.data,a=e.groupId;for(var r in n)if(n[r].id==a){for(var o=0;o<n[r].courses.length;o++)if(n[r].courses[o].id==e.id){n[r].courses.splice(o,1);break}break}for(var l in n)n[l].id==t&&n[l].courses.push(e);this.setState({data:n}),this.props.onCourseReplace&&this.props.onCourseReplace(e,t)}},{key:"onCoursesSwap",value:function(e,t){var n=this.state.data,a=null!==e.weight?e.weight:0,r=null!==t.weight?t.weight:0,o=function(e,t,a,r){for(var o=0;n[t].courses.length;o++){var l=n[t].courses[o];if(l.id==e){l.weight=r,t!=a?(n[t].courses.splice(o,1),n[a].courses.push(l)):n[t].courses[o]=l;break}}};o(e.id,e.groupTitle,t.groupTitle,r),o(t.id,t.groupTitle,e.groupTitle,a),this.setState({data:n}),this.props.onCoursesSwap&&this.props.onCoursesSwap(e,t)}},{key:"onGroupsSwap",value:function(e,t){var n=this.state.data,a=null!==e.weight?e.weight:0,r=null!==t.weight?t.weight:0;n[e.title].weight=r,n[t.title].weight=a,this.setState({data:n,sortedGroups:this.sortGroups(n)}),this.props.onGroupsSwap&&this.props.onGroupsSwap(e,t)}},{key:"onCkeckedRowsChange",value:function(e,t){var n=this.state.groupTablesInfo;n[e].checkedRows=t;var a=0;for(var r in n){var o=n[r].checkedRows;o&&(a+=o.length)}this.setState({groupTablesInfo:n});var l=a===this.state.rowIds.length;this.state.selectedAll!==l&&this.state.rowIds.length>0&&this.setState({selectedAll:l}),this.setState({selectAllEventValue:null})}},{key:"handleSelectAllCheckBox",value:function(e){this.state.selectedAll?this.setState({selectAllEventValue:!1}):this.setState({selectAllEventValue:!0})}},{key:"deleteChecked",value:function(e){var t=[],n=this.state.groupTablesInfo;for(var a in this.state.groupTablesInfo)n[a].checkedRows&&(t=t.concat(n[a].checkedRows));this.props.onDelete&&this.props.onDelete(t,e)}}]),t}(p.default.Component);w.contextTypes={router:f.PropTypes.object.isRequired,user:f.PropTypes.object.isRequired},t.default=(0,v.DragDropContext)(y.default)(w)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1006);Object.defineProperty(t,"DragDropManager",{enumerable:!0,get:function(){return a(r).default}});var o=n(1088);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return a(o).default}});var l=n(1089);Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return a(l).default}});var i=n(1090);Object.defineProperty(t,"createTestBackend",{enumerable:!0,get:function(){return a(i).default}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(1007)),l=a(n(1020)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(176)),s=a(n(1083)),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=(0,o.default)(l.default);this.context=n,this.store=a,this.monitor=new s.default(a),this.registry=this.monitor.registry,this.backend=t(this),a.subscribe(this.handleRefCountChange.bind(this))}return r(e,[{key:"handleRefCountChange",value:function(){var e=this.store.getState().refCount>0;e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1)}},{key:"getContext",value:function(){return this.context}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch;return Object.keys(i).filter(function(e){return"function"==typeof i[e]}).reduce(function(n,a){var r=i[a];return n[a]=function(n){return function(){for(var a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];var l=n.apply(e,r);void 0!==l&&t(l)}}(r),n},{})}}]),e}();t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){function a(){m===h&&(m=h.slice())}function s(){return p}function u(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return a(),m.push(e),function(){if(t){t=!1,a();var n=m.indexOf(e);m.splice(n,1)}}}function c(e){if(!(0,o.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw new Error("Reducers may not dispatch actions.");try{v=!0,p=f(p,e)}finally{v=!1}for(var t=h=m,n=0;n<t.length;n++)(0,t[n])();return e}var d;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var f=e,p=t,h=[],m=h,v=!1;return c({type:i.INIT}),d={dispatch:c,subscribe:u,getState:s,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");f=e,c({type:i.INIT})}},d[l.default]=function(){var e,t=u;return e={subscribe:function(e){function n(){e.next&&e.next(s())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[l.default]=function(){return this},e},d}t.__esModule=!0,t.ActionTypes=void 0,t.default=r;var o=a(n(1008)),l=a(n(1017)),i=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){var a=n(1009),r=n(1014),o=n(1016),l=Function.prototype,i=Object.prototype,s=l.toString,u=i.hasOwnProperty,c=s.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=a(e))return!1;var t=r(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==c}},function(e,t,n){var a=n(568),r=n(1012),o=n(1013),l=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?r(e):o(e)}},function(e,t,n){var a=n(1011),r="object"==typeof self&&self&&self.Object===Object&&self,o=a||r||Function("return this")();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(40))},function(e,t,n){var a=n(568),r=Object.prototype,o=r.hasOwnProperty,l=r.toString,i=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),n=e[i];try{e[i]=void 0;var a=!0}catch(e){}var r=l.call(e);return a&&(t?e[i]=n:delete e[i]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var a=n(1015)(Object.getPrototypeOf,Object);e.exports=a},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){e.exports=n(1018)},function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(e){return e&&e.__esModule?e:{default:e}}(n(1019));r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:a;var l=(0,o.default)(r);t.default=l}).call(t,n(40),n(133)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return{dirtyHandlerIds:(0,i.default)(e.dirtyHandlerIds,t,e.dragOperation),dragOffset:(0,r.default)(e.dragOffset,t),refCount:(0,l.default)(e.refCount,t),dragOperation:(0,o.default)(e.dragOperation,t),stateId:(0,s.default)(e.stateId)}};var r=a(n(569)),o=a(n(1021)),l=a(n(1067)),i=a(n(576)),s=a(n(1082))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case o.BEGIN_DRAG:return a({},e,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case o.PUBLISH_DRAG_SOURCE:return a({},e,{isSourcePublic:!0});case o.HOVER:return a({},e,{targetIds:t.targetIds});case l.REMOVE_TARGET:return-1===e.targetIds.indexOf(t.targetId)?e:a({},e,{targetIds:(0,r.default)(e.targetIds,t.targetId)});case o.DROP:return a({},e,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case o.END_DRAG:return a({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1022)),o=n(176),l=n(182),i={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null}},function(e,t,n){var a=n(571),r=n(277),o=n(278),l=r(function(e,t){return o(e)?a(e,t):[]});e.exports=l},function(e,t,n){function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var r=n(1024),o=n(1047),l=n(1049),i=n(1050),s=n(1051);a.prototype.clear=r,a.prototype.delete=o,a.prototype.get=l,a.prototype.has=i,a.prototype.set=s,e.exports=a},function(e,t,n){var a=n(1025),r=n(1039),o=n(1046);e.exports=function(){this.size=0,this.__data__={hash:new a,map:new(o||r),string:new a}}},function(e,t,n){function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var r=n(1026),o=n(1035),l=n(1036),i=n(1037),s=n(1038);a.prototype.clear=r,a.prototype.delete=o,a.prototype.get=l,a.prototype.has=i,a.prototype.set=s,e.exports=a},function(e,t,n){var a=n(177);e.exports=function(){this.__data__=a?a(null):{},this.size=0}},function(e,t,n){var a=n(572),r=n(1031),o=n(270),l=n(1033),i=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,c=s.toString,d=u.hasOwnProperty,f=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||r(e))&&(a(e)?f:i).test(l(e))}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(40))},function(e,t,n){var a=n(272),r=Object.prototype,o=r.hasOwnProperty,l=r.toString,i=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),n=e[i];try{e[i]=void 0;var a=!0}catch(e){}var r=l.call(e);return a&&(t?e[i]=n:delete e[i]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var a=n(1032),r=function(){var e=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!r&&r in e}},function(e,t,n){var a=n(179)["__core-js_shared__"];e.exports=a},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var a=n(177),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(a){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},function(e,t,n){var a=n(177),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return a?void 0!==t[e]:r.call(t,e)}},function(e,t,n){var a=n(177);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=a&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var r=n(1040),o=n(1041),l=n(1043),i=n(1044),s=n(1045);a.prototype.clear=r,a.prototype.delete=o,a.prototype.get=l,a.prototype.has=i,a.prototype.set=s,e.exports=a},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var a=n(180),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=a(t,e);return!(n<0||(n==t.length-1?t.pop():r.call(t,n,1),--this.size,0))}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var a=n(180);e.exports=function(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var a=n(180);e.exports=function(e){return a(this.__data__,e)>-1}},function(e,t,n){var a=n(180);e.exports=function(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},function(e,t,n){var a=n(178)(n(179),"Map");e.exports=a},function(e,t,n){var a=n(181);e.exports=function(e){var t=a(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var a=n(181);e.exports=function(e){return a(this,e).get(e)}},function(e,t,n){var a=n(181);e.exports=function(e){return a(this,e).has(e)}},function(e,t,n){var a=n(181);e.exports=function(e,t){var n=a(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var a=n(1055),r=n(1056),o=n(1057);e.exports=function(e,t,n){return t==t?o(e,t,n):a(e,r,n)}},function(e,t){e.exports=function(e,t,n,a){for(var r=e.length,o=n+(a?1:-1);a?o--:++o<r;)if(t(e[o],o,e))return o;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1}},function(e,t,n){var a=n(1059),r=Math.max;e.exports=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var o=arguments,l=-1,i=r(o.length-t,0),s=Array(i);++l<i;)s[l]=o[t+l];l=-1;for(var u=Array(t+1);++l<t;)u[l]=o[l];return u[t]=n(s),a(e,this,u)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var a=n(1061),r=n(1064)(a);e.exports=r},function(e,t,n){var a=n(1062),r=n(1063),o=n(575),l=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:o;e.exports=l},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var a=n(178),r=function(){try{var e=a(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,t){var n=Date.now;e.exports=function(e){var t=0,a=0;return function(){var r=n(),o=16-(r-a);if(a=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var a=n(572),r=n(1066);e.exports=function(e){return null!=e&&r(e.length)&&!a(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(arguments[1].type){case a.ADD_SOURCE:case a.ADD_TARGET:return e+1;case a.REMOVE_SOURCE:case a.REMOVE_TARGET:return e-1;default:return e}};var a=n(182)},function(e,t,n){var a=n(1069),r=n(277),o=n(1070),l=n(278),i=r(function(e){return o(a(e,l))});e.exports=i},function(e,t){e.exports=function(e,t){for(var n=-1,a=null==e?0:e.length,r=0,o=[];++n<a;){var l=e[n];t(l,n,e)&&(o[r++]=l)}return o}},function(e,t,n){var a=n(571),r=n(1071),o=n(1076);e.exports=function(e,t,n){var l=e.length;if(l<2)return l?o(e[0]):[];for(var i=-1,s=Array(l);++i<l;)for(var u=e[i],c=-1;++c<l;)c!=i&&(s[i]=a(s[i]||u,e[c],t,n));return o(r(s,1),t,n)}},function(e,t,n){function a(e,t,n,l,i){var s=-1,u=e.length;for(n||(n=o),i||(i=[]);++s<u;){var c=e[s];t>0&&n(c)?t>1?a(c,t-1,n,l,i):r(i,c):l||(i[i.length]=c)}return i}var r=n(1072),o=n(1073);e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e}},function(e,t,n){var a=n(272),r=n(1074),o=n(135),l=a?a.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||r(e)||!!(l&&e&&e[l])}},function(e,t,n){var a=n(1075),r=n(279),o=Object.prototype,l=o.hasOwnProperty,i=o.propertyIsEnumerable,s=a(function(){return arguments}())?a:function(e){return r(e)&&l.call(e,"callee")&&!i.call(e,"callee")};e.exports=s},function(e,t,n){var a=n(573),r=n(279);e.exports=function(e){return r(e)&&"[object Arguments]"==a(e)}},function(e,t,n){var a=n(271),r=n(273),o=n(274),l=n(276),i=n(1077),s=n(578);e.exports=function(e,t,n){var u=-1,c=r,d=e.length,f=!0,p=[],h=p;if(n)f=!1,c=o;else if(d>=200){var m=t?null:i(e);if(m)return s(m);f=!1,c=l,h=new a}else h=t?[]:p;e:for(;++u<d;){var v=e[u],y=t?t(v):v;if(v=n||0!==v?v:0,f&&y==y){for(var g=h.length;g--;)if(h[g]===y)continue e;t&&h.push(y),p.push(v)}else c(h,y,n)||(h!==p&&h.push(y),p.push(v))}return p}},function(e,t,n){var a=n(1078),r=n(577),o=n(578),l=a&&1/o(new a([,-0]))[1]==1/0?function(e){return new a(e)}:r;e.exports=l},function(e,t,n){var a=n(178)(n(179),"Set");e.exports=a},function(e,t,n){var a=n(275),r=n(1080),o=n(277),l=n(1081),i=o(function(e){var t=a(e,l);return t.length&&t[0]===e[0]?r(t):[]});e.exports=i},function(e,t,n){var a=n(271),r=n(273),o=n(274),l=n(275),i=n(574),s=n(276),u=Math.min;e.exports=function(e,t,n){for(var c=n?o:r,d=e[0].length,f=e.length,p=f,h=Array(f),m=1/0,v=[];p--;){var y=e[p];p&&t&&(y=l(y,i(t))),m=u(y.length,m),h[p]=!n&&(t||d>=120&&y.length>=120)?new a(p&&y):void 0}y=e[0];var g=-1,E=h[0];e:for(;++g<d&&v.length<m;){var b=y[g],_=t?t(b):b;if(b=n||0!==b?b:0,!(E?s(E,_):c(v,_,n))){for(p=f;--p;){var C=h[p];if(!(C?s(C,_):c(e[p],_,n)))continue e}E&&E.push(_),v.push(b)}}return v}},function(e,t,n){var a=n(278);e.exports=function(e){return a(e)?e:[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(25)),l=a(n(135)),i=a(n(570)),s=a(n(1084)),u=n(569),c=n(576),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=new s.default(t)}return r(e,[{key:"subscribeToStateChange",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).handlerIds;(0,o.default)("function"==typeof e,"listener must be a function."),(0,o.default)(void 0===n||(0,l.default)(n),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId;return this.store.subscribe(function(){var r=t.store.getState(),o=r.stateId;try{o===a||o===a+1&&!(0,c.areDirty)(r.dirtyHandlerIds,n)||e()}finally{a=o}})}},{key:"subscribeToOffsetChange",value:function(e){var t=this;(0,o.default)("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe(function(){var a=t.store.getState().dragOffset;a!==n&&(n=a,e())})}},{key:"canDragSource",value:function(e){var t=this.registry.getSource(e);return(0,o.default)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){var t=this.registry.getTarget(e);if((0,o.default)(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),a=this.getItemType();return(0,i.default)(n,a)&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){var t=this.registry.getSource(e,!0);return(0,o.default)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))}},{key:"isOverTarget",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),a=this.getItemType();if(!(0,i.default)(n,a))return!1;var r=this.getTargetIds();if(!r.length)return!1;var o=r.indexOf(e);return t?o===r.length-1:o>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return(0,u.getSourceClientOffset)(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return(0,u.getDifferenceFromInitialOffset)(this.store.getState().dragOffset)}}]),e}();t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){t&&(0,u.default)(e)?e.forEach(function(e){return r(e,!1)}):(0,s.default)("string"==typeof e||"symbol"===(void 0===e?"undefined":i(e)),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function o(e){switch(e[0]){case"S":return p.SOURCE;case"T":return p.TARGET;default:(0,s.default)(!1,"Cannot parse handler ID: "+e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=a(n(25)),u=a(n(135)),c=a(n(1085)),d=n(182),f=a(n(1087)),p={SOURCE:"SOURCE",TARGET:"TARGET"},h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.types={},this.handlers={},this.pinnedSourceId=null,this.pinnedSource=null}return l(e,[{key:"addSource",value:function(e,t){r(e),function(e){(0,s.default)("function"==typeof e.canDrag,"Expected canDrag to be a function."),(0,s.default)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),(0,s.default)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(p.SOURCE,e,t);return this.store.dispatch((0,d.addSource)(n)),n}},{key:"addTarget",value:function(e,t){r(e,!0),function(e){(0,s.default)("function"==typeof e.canDrop,"Expected canDrop to be a function."),(0,s.default)("function"==typeof e.hover,"Expected hover to be a function."),(0,s.default)("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(p.TARGET,e,t);return this.store.dispatch((0,d.addTarget)(n)),n}},{key:"addHandler",value:function(e,t,n){var a=function(e){var t=(0,f.default)().toString();switch(e){case p.SOURCE:return"S"+t;case p.TARGET:return"T"+t;default:(0,s.default)(!1,"Unknown role: "+e)}}(e);return this.types[a]=t,this.handlers[a]=n,a}},{key:"containsHandler",value:function(e){var t=this;return Object.keys(this.handlers).some(function(n){return t.handlers[n]===e})}},{key:"getSource",value:function(e,t){return(0,s.default)(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.handlers[e]}},{key:"getTarget",value:function(e){return(0,s.default)(this.isTargetId(e),"Expected a valid target ID."),this.handlers[e]}},{key:"getSourceType",value:function(e){return(0,s.default)(this.isSourceId(e),"Expected a valid source ID."),this.types[e]}},{key:"getTargetType",value:function(e){return(0,s.default)(this.isTargetId(e),"Expected a valid target ID."),this.types[e]}},{key:"isSourceId",value:function(e){return o(e)===p.SOURCE}},{key:"isTargetId",value:function(e){return o(e)===p.TARGET}},{key:"removeSource",value:function(e){var t=this;(0,s.default)(this.getSource(e),"Expected an existing source."),this.store.dispatch((0,d.removeSource)(e)),(0,c.default)(function(){delete t.handlers[e],delete t.types[e]})}},{key:"removeTarget",value:function(e){var t=this;(0,s.default)(this.getTarget(e),"Expected an existing target."),this.store.dispatch((0,d.removeTarget)(e)),(0,c.default)(function(){delete t.handlers[e],delete t.types[e]})}},{key:"pinSource",value:function(e){var t=this.getSource(e);(0,s.default)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){(0,s.default)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}}]),e}();t.default=h},function(e,t,n){"use strict";function a(e){var t;(t=l.length?l.pop():new r).task=e,o(t)}function r(){this.task=null}var o=n(1086),l=[],i=[],s=o.makeRequestCallFromTimer(function(){if(i.length)throw i.shift()});e.exports=a,r.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(i.push(e),s())}finally{this.task=null,l[l.length]=this}}},function(e,t,n){"use strict";(function(t){function n(e){l.length||o(),l[l.length]=e}function a(){for(;i<l.length;){var e=i;if(i+=1,l[e].call(),i>s){for(var t=0,n=l.length-i;t<n;t++)l[t]=l[t+i];l.length-=i,i=0}}l.length=0,i=0}function r(e){return function(){function t(){clearTimeout(n),clearInterval(a),e()}var n=setTimeout(t,0),a=setInterval(t,50)}}e.exports=n;var o,l=[],i=0,s=1024,u=void 0!==t?t:self,c=u.MutationObserver||u.WebKitMutationObserver;o="function"==typeof c?function(e){var t=1,n=new c(e),a=document.createTextNode("");return n.observe(a,{characterData:!0}),function(){t=-t,a.data=t}}(a):r(a),n.requestFlush=o,n.makeRequestCallFromTimer=r}).call(t,n(40))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a++};var a=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"canDrag",value:function(){return!0}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"canDrop",value:function(){return!0}},{key:"hover",value:function(){}},{key:"drop",value:function(){}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e){return new o(e)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(577)),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actions=t.getActions()}return a(e,[{key:"setup",value:function(){this.didCallSetup=!0}},{key:"teardown",value:function(){this.didCallTeardown=!0}},{key:"connectDragSource",value:function(){return r.default}},{key:"connectDragPreview",value:function(){return r.default}},{key:"connectDropTarget",value:function(){return r.default}},{key:"simulateBeginDrag",value:function(e,t){this.actions.beginDrag(e,t)}},{key:"simulatePublishDragSource",value:function(){this.actions.publishDragSource()}},{key:"simulateHover",value:function(e,t){this.actions.hover(e,t)}},{key:"simulateDrop",value:function(){this.actions.drop()}},{key:"simulateEndDrag",value:function(){this.actions.endDrag()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(n(117)),s=n(567),u=(r=a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.backend=(0,s.unpackBackendForEs5Users)(e.backend),a.childContext=(0,s.createChildContext)(a.backend,{window:e&&e.window?e.window:n&&n.window?n.window:"undefined"!=typeof window?window:void 0}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){if(e.backend!==this.props.backend||e.window!==this.props.window)throw new Error("DragDropContextProvider backend and window props must not change.")}},{key:"getChildContext",value:function(){return this.childContext}},{key:"render",value:function(){return l.Children.only(this.props.children)}}]),t}(),a.propTypes={backend:i.default.oneOfType([i.default.func,i.default.object]).isRequired,children:i.default.element.isRequired,window:i.default.object},a.defaultProps={window:void 0},a.childContextTypes=s.CHILD_CONTEXT_TYPES,a.displayName="DragDropContextProvider",a.contextTypes={window:i.default.object},r);t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m.default.apply(void 0,["DragLayer","collect[, options]"].concat(Array.prototype.slice.call(arguments))),(0,f.default)("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html",e),(0,f.default)((0,d.default)(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html',t),function(n){var a,d,m=t.arePropsEqual,v=void 0===m?h.default:m,y=n.displayName||n.name||"Component",g=(d=a=function(t){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return n.handleChange=n.handleChange.bind(n),n.manager=t.dragDropManager,(0,f.default)("object"===o(n.manager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",y,y),n.state=n.getCurrentState(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.Component),l(a,[{key:"getDecoratedComponentInstance",value:function(){return(0,f.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"shouldComponentUpdate",value:function(e,t){return!v(e,this.props)||!(0,p.default)(t,this.state)}}]),l(a,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0;var e=this.manager.getMonitor();this.unsubscribeFromOffsetChange=e.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=e.subscribeToStateChange(this.handleChange),this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange(),this.unsubscribeFromStateChange()}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,p.default)(e,this.state)||this.setState(e)}}},{key:"getCurrentState",value:function(){var t=this.manager.getMonitor();return e(t)}},{key:"render",value:function(){var e=this;return s.default.createElement(n,r({},this.props,this.state,{ref:function(t){e.child=t}}))}}]),a}(),a.DecoratedComponent=n,a.displayName="DragLayer("+y+")",a.contextTypes={dragDropManager:u.default.object.isRequired},d);return(0,c.default)(g,n)}};var i=n(0),s=a(i),u=a(n(117)),c=a(n(280)),d=a(n(111)),f=a(n(25)),p=a(n(281)),h=a(n(580)),m=a(n(183))},function(e,t,n){var a=n(579),r=n(1096),o=n(1097),l=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?r(e):o(e)}},function(e,t,n){var a=n(1095),r="object"==typeof self&&self&&self.Object===Object&&self,o=a||r||Function("return this")();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(40))},function(e,t,n){var a=n(579),r=Object.prototype,o=r.hasOwnProperty,l=r.toString,i=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),n=e[i];try{e[i]=void 0;var a=!0}catch(e){}var r=l.call(e);return a&&(t?e[i]=n:delete e[i]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var a=n(1099)(Object.getPrototypeOf,Object);e.exports=a},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};l.default.apply(void 0,["DragSource","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var p=e;"function"!=typeof e&&((0,r.default)((0,f.default)(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',e),p=function(){return e}),(0,r.default)((0,o.default)(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',t);var h=(0,u.default)(t);return(0,r.default)("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),(0,r.default)((0,o.default)(a),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),function(e){return(0,i.default)({connectBackend:function(e,t){return e.connectDragSource(t)},containerDisplayName:"DragSource",createHandler:h,registerHandler:s.default,createMonitor:c.default,createConnector:d.default,DecoratedComponent:e,getType:p,collect:n,options:a})}};var r=a(n(25)),o=a(n(111)),l=a(n(183)),i=a(n(581)),s=a(n(1106)),u=a(n(1107)),c=a(n(1108)),d=a(n(1109)),f=a(n(584))},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=a(n(282));t.isDisposable=r.default;var o=a(n(1103));t.Disposable=o.default;var l=a(n(1104));t.CompositeDisposable=l.default;var i=a(n(1105));t.SerialDisposable=i.default},function(e,t,n){"use strict";var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.__esModule=!0;var o=function(){},l=function(){function e(t){a(this,e),this.isDisposed=!1,this.action=t||o}return e.prototype.dispose=function(){this.isDisposed||(this.action.call(null),this.isDisposed=!0)},r(e,null,[{key:"empty",enumerable:!0,value:{dispose:o}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(282)),o=function(){function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];a(this,e),Array.isArray(n[0])&&1===n.length&&(n=n[0]);for(var l=0;l<n.length;l++)if(!r.default(n[l]))throw new Error("Expected a disposable");this.disposables=n,this.isDisposed=!1}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){if(this.isDisposed)return!1;var t=this.disposables.indexOf(e);return-1!==t&&(this.disposables.splice(t,1),e.dispose(),!0)},e.prototype.dispose=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];for(this.isDisposed=!0,this.disposables=[],this.length=0,n=0;n<e;n++)t[n].dispose()}},e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(282)),o=function(){function e(){a(this,e),this.isDisposed=!1,this.current=null}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(){var e=void 0===arguments[0]?null:arguments[0];if(null!=e&&!r.default(e))throw new Error("Expected either an empty value or a valid disposable");var t=this.isDisposed,n=void 0;t||(n=this.current,this.current=e),n&&n.dispose(),t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null,e&&e.dispose()}},e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=n.getRegistry(),r=a.addSource(e,t);return{handlerId:r,unregister:function(){a.removeSource(r)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e){Object.keys(e).forEach(function(t){(0,o.default)(l.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',l.join(", "),t),(0,o.default)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])}),i.forEach(function(t){(0,o.default)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])});var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.monitor=e,this.props=null,this.component=null}return r(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrag",value:function(){return!e.canDrag||e.canDrag(this.props,this.monitor)}},{key:"isDragging",value:function(t,n){return e.isDragging?e.isDragging(this.props,this.monitor):n===t.getSourceId()}},{key:"beginDrag",value:function(){return e.beginDrag(this.props,this.monitor,this.component)}},{key:"endDrag",value:function(){e.endDrag&&e.endDrag(this.props,this.monitor,this.component)}}]),t}();return function(e){return new t(e)}};var o=a(n(25)),l=(a(n(111)),["canDrag","beginDrag","isDragging","endDrag"]),i=["beginDrag"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e){return new i(e)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(25)),o=!1,l=!1,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.internalMonitor=t.getMonitor()}return a(e,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"canDrag",value:function(){(0,r.default)(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}}},{key:"isDragging",value:function(){(0,r.default)(!l,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return l=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{l=!1}}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(){s&&(s(),s=null),a&&l&&(s=e.connectDragSource(a,l,i))}function n(){d&&(d(),d=null),a&&u&&(d=e.connectDragPreview(a,u,c))}var a=void 0,l=void 0,i=void 0,s=void 0,u=void 0,c=void 0,d=void 0;return{receiveHandlerId:function(e){e!==a&&(a=e,t(),n())},hooks:(0,r.default)({dragSource:function(e,n){e===l&&(0,o.default)(n,i)||(l=e,i=n,t())},dragPreview:function(e,t){e===u&&(0,o.default)(t,c)||(u=e,c=t,n())}})}};var r=a(n(582)),o=a(n(583))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.ref;return(0,a.default)("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?(0,r.cloneElement)(e,{ref:function(e){t(e),n&&n(e)}}):(0,r.cloneElement)(e,{ref:t})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(25)),r=n(0)},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};l.default.apply(void 0,["DropTarget","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var p=e;"function"!=typeof e&&((0,r.default)((0,f.default)(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',e),p=function(){return e}),(0,r.default)((0,o.default)(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',t);var h=(0,u.default)(t);return(0,r.default)("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),(0,r.default)((0,o.default)(a),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),function(e){return(0,i.default)({connectBackend:function(e,t){return e.connectDropTarget(t)},containerDisplayName:"DropTarget",createHandler:h,registerHandler:s.default,createMonitor:c.default,createConnector:d.default,DecoratedComponent:e,getType:p,collect:n,options:a})}};var r=a(n(25)),o=a(n(111)),l=a(n(183)),i=a(n(581)),s=a(n(1113)),u=a(n(1114)),c=a(n(1115)),d=a(n(1116)),f=a(n(584))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=n.getRegistry(),r=a.addTarget(e,t);return{handlerId:r,unregister:function(){a.removeTarget(r)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e){Object.keys(e).forEach(function(t){(0,o.default)(l.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',l.join(", "),t),(0,o.default)("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html",t,t,e[t])});var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.monitor=e,this.props=null,this.component=null}return r(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrop",value:function(){return!e.canDrop||e.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){e.hover&&e.hover(this.props,this.monitor,this.component)}},{key:"drop",value:function(){if(e.drop){return e.drop(this.props,this.monitor,this.component)}}}]),t}();return function(e){return new t(e)}};var o=a(n(25)),l=(a(n(111)),["canDrop","hover","drop"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e){return new l(e)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(25)),o=!1,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.internalMonitor=t.getMonitor()}return a(e,[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"canDrop",value:function(){(0,r.default)(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target-monitor.html");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}}},{key:"isOver",value:function(e){return this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(){i&&(i(),i=null),n&&a&&(i=e.connectDropTarget(n,a,l))}var n=void 0,a=void 0,l=void 0,i=void 0;return{receiveHandlerId:function(e){e!==n&&(n=e,t())},hooks:(0,r.default)({dropTarget:function(e,n){e===a&&(0,o.default)(n,l)||(a=e,l=n,t())}})}};var r=a(n(582)),o=a(n(583))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(1118)),l=a(n(1149)),i=a(n(1150)),s=n(603),u=n(1188),c=n(1190),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(287)),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.context=t.getContext(),this.sourcePreviewNodes={},this.sourcePreviewNodeOptions={},this.sourceNodes={},this.sourceNodeOptions={},this.enterLeaveCounter=new i.default,this.dragStartSourceIds=[],this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.altKeyPressed=!1,this.getSourceClientOffset=this.getSourceClientOffset.bind(this),this.handleTopDragStart=this.handleTopDragStart.bind(this),this.handleTopDragStartCapture=this.handleTopDragStartCapture.bind(this),this.handleTopDragEndCapture=this.handleTopDragEndCapture.bind(this),this.handleTopDragEnter=this.handleTopDragEnter.bind(this),this.handleTopDragEnterCapture=this.handleTopDragEnterCapture.bind(this),this.handleTopDragLeaveCapture=this.handleTopDragLeaveCapture.bind(this),this.handleTopDragOver=this.handleTopDragOver.bind(this),this.handleTopDragOverCapture=this.handleTopDragOverCapture.bind(this),this.handleTopDrop=this.handleTopDrop.bind(this),this.handleTopDropCapture=this.handleTopDropCapture.bind(this),this.handleSelectStart=this.handleSelectStart.bind(this),this.endDragIfSourceWasRemovedFromDOM=this.endDragIfSourceWasRemovedFromDOM.bind(this),this.endDragNativeItem=this.endDragNativeItem.bind(this),this.asyncEndDragNativeItem=this.asyncEndDragNativeItem.bind(this),this.isNodeInDocument=this.isNodeInDocument.bind(this)}return r(e,[{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"connectDragPreview",value:function(e,t,n){var a=this;return this.sourcePreviewNodeOptions[e]=n,this.sourcePreviewNodes[e]=t,function(){delete a.sourcePreviewNodes[e],delete a.sourcePreviewNodeOptions[e]}}},{key:"connectDragSource",value:function(e,t,n){var a=this;this.sourceNodes[e]=t,this.sourceNodeOptions[e]=n;var r=function(t){return a.handleDragStart(t,e)},o=function(t){return a.handleSelectStart(t,e)};return t.setAttribute("draggable",!0),t.addEventListener("dragstart",r),t.addEventListener("selectstart",o),function(){delete a.sourceNodes[e],delete a.sourceNodeOptions[e],t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",o),t.setAttribute("draggable",!1)}}},{key:"connectDropTarget",value:function(e,t){var n=this,a=function(t){return n.handleDragEnter(t,e)},r=function(t){return n.handleDragOver(t,e)},o=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",a),t.addEventListener("dragover",r),t.addEventListener("drop",o),function(){t.removeEventListener("dragenter",a),t.removeEventListener("dragover",r),t.removeEventListener("drop",o)}}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions[e];return(0,o.default)(t||{},{dropEffect:this.altKeyPressed?"copy":"move"})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions[e];return(0,o.default)(t||{},{anchorX:.5,anchorY:.5,captureDraggingState:!1})}},{key:"getSourceClientOffset",value:function(e){return(0,u.getNodeClientOffset)(this.sourceNodes[e])}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(d).some(function(t){return d[t]===e})}},{key:"beginDragNativeItem",value:function(e){this.clearCurrentDragSourceNode();var t=(0,c.createNativeDragSource)(e);this.currentNativeSource=new t,this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle]),(0,s.isFirefox)()&&this.window.addEventListener("mouseover",this.asyncEndDragNativeItem,!0)}},{key:"asyncEndDragNativeItem",value:function(){this.asyncEndDragFrameId=this.window.requestAnimationFrame(this.endDragNativeItem),(0,s.isFirefox)()&&(this.window.removeEventListener("mouseover",this.asyncEndDragNativeItem,!0),this.enterLeaveCounter.reset())}},{key:"endDragNativeItem",value:function(){this.isDraggingNativeItem()&&(this.actions.endDrag(),this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)}},{key:"isNodeInDocument",value:function(e){return!(!document.body.contains(e)&&!this.window)&&this.window.document.body.contains(e)}},{key:"endDragIfSourceWasRemovedFromDOM",value:function(){var e=this.currentDragSourceNode;this.isNodeInDocument(e)||this.clearCurrentDragSourceNode()&&this.actions.endDrag()}},{key:"setCurrentDragSourceNode",value:function(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.currentDragSourceNodeOffset=(0,u.getNodeClientOffset)(e),this.currentDragSourceNodeOffsetChanged=!1,this.window.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0),!0)}},{key:"checkIfCurrentDragSourceRectChanged",value:function(){var e=this.currentDragSourceNode;return!!e&&(!!this.currentDragSourceNodeOffsetChanged||(this.currentDragSourceNodeOffsetChanged=!(0,l.default)((0,u.getNodeClientOffset)(e),this.currentDragSourceNodeOffset),this.currentDragSourceNodeOffsetChanged))}},{key:"handleTopDragStartCapture",value:function(){this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]}},{key:"handleDragStart",value:function(e,t){this.dragStartSourceIds.unshift(t)}},{key:"handleTopDragStart",value:function(e){var t=this,n=this.dragStartSourceIds;this.dragStartSourceIds=null;var a=(0,u.getEventClientOffset)(e);this.monitor.isDragging()&&this.actions.endDrag(),this.actions.beginDrag(n,{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});var r=e.dataTransfer,o=(0,c.matchNativeItemType)(r);if(this.monitor.isDragging()){if("function"==typeof r.setDragImage){var l=this.monitor.getSourceId(),i=this.sourceNodes[l],s=this.sourcePreviewNodes[l]||i,d=this.getCurrentSourcePreviewNodeOptions(),f={anchorX:d.anchorX,anchorY:d.anchorY},p={offsetX:d.offsetX,offsetY:d.offsetY},h=(0,u.getDragPreviewOffset)(i,s,a,f,p);r.setDragImage(s,h.x,h.y)}try{r.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target),this.getCurrentSourcePreviewNodeOptions().captureDraggingState?this.actions.publishDragSource():setTimeout(function(){return t.actions.publishDragSource()})}else if(o)this.beginDragNativeItem(o);else{if(!(r.types||e.target.hasAttribute&&e.target.hasAttribute("draggable")))return;e.preventDefault()}}},{key:"handleTopDragEndCapture",value:function(){this.clearCurrentDragSourceNode()&&this.actions.endDrag()}},{key:"handleTopDragEnterCapture",value:function(e){if(this.dragEnterTargetIds=[],this.enterLeaveCounter.enter(e.target)&&!this.monitor.isDragging()){var t=e.dataTransfer,n=(0,c.matchNativeItemType)(t);n&&this.beginDragNativeItem(n)}}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleTopDragEnter",value:function(e){var t=this,n=this.dragEnterTargetIds;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e.altKey,(0,s.isFirefox)()||this.actions.hover(n,{clientOffset:(0,u.getEventClientOffset)(e)}),n.some(function(e){return t.monitor.canDropOnTarget(e)})&&(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()))}},{key:"handleTopDragOverCapture",value:function(){this.dragOverTargetIds=[]}},{key:"handleDragOver",value:function(e,t){this.dragOverTargetIds.unshift(t)}},{key:"handleTopDragOver",value:function(e){var t=this,n=this.dragOverTargetIds;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer.dropEffect="none");this.altKeyPressed=e.altKey,this.actions.hover(n,{clientOffset:(0,u.getEventClientOffset)(e)}),n.some(function(e){return t.monitor.canDropOnTarget(e)})?(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()):this.isDraggingNativeItem()?(e.preventDefault(),e.dataTransfer.dropEffect="none"):this.checkIfCurrentDragSourceRectChanged()&&(e.preventDefault(),e.dataTransfer.dropEffect="move")}},{key:"handleTopDragLeaveCapture",value:function(e){this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&this.isDraggingNativeItem()&&this.endDragNativeItem()}},{key:"handleTopDropCapture",value:function(e){this.dropTargetIds=[],e.preventDefault(),this.isDraggingNativeItem()&&this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),this.enterLeaveCounter.reset()}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"handleTopDrop",value:function(e){var t=this.dropTargetIds;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:(0,u.getEventClientOffset)(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.endDragIfSourceWasRemovedFromDOM()}},{key:"handleSelectStart",value:function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))}},{key:"window",get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0}}]),e}();t.default=f},function(e,t,n){var a=n(585),r=n(1119),o=n(187),l=n(1148),i=o(function(e){return e.push(void 0,l),a(r,void 0,e)});e.exports=i},function(e,t,n){var a=n(1120),r=n(1129),o=n(1136),l=r(function(e,t,n,r){a(t,o(t),e,r)});e.exports=l},function(e,t,n){var a=n(1121),r=n(586);e.exports=function(e,t,n,o){var l=!n;n||(n={});for(var i=-1,s=t.length;++i<s;){var u=t[i],c=o?o(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),l?r(n,u,c):a(n,u,c)}return n}},function(e,t,n){var a=n(586),r=n(186),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var l=e[t];o.call(e,t)&&r(l,n)&&(void 0!==n||t in e)||a(e,t,n)}},function(e,t,n){var a=n(588),r=n(1125),o=n(185),l=n(1127),i=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,c=s.toString,d=u.hasOwnProperty,f=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||r(e))&&(a(e)?f:i).test(l(e))}},function(e,t,n){var a=n(285),r=Object.prototype,o=r.hasOwnProperty,l=r.toString,i=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),n=e[i];try{e[i]=void 0;var a=!0}catch(e){}var r=l.call(e);return a&&(t?e[i]=n:delete e[i]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var a=n(1126),r=function(){var e=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!r&&r in e}},function(e,t,n){var a=n(136)["__core-js_shared__"];e.exports=a},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var a=n(187),r=n(1135);e.exports=function(e){return a(function(t,n){var a=-1,o=n.length,l=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(l=e.length>3&&"function"==typeof l?(o--,l):void 0,i&&r(n[0],n[1],i)&&(l=o<3?void 0:l,o=1),t=Object(t);++a<o;){var s=n[a];s&&e(t,s,a,l)}return t})}},function(e,t,n){var a=n(585),r=Math.max;e.exports=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var o=arguments,l=-1,i=r(o.length-t,0),s=Array(i);++l<i;)s[l]=o[t+l];l=-1;for(var u=Array(t+1);++l<t;)u[l]=o[l];return u[t]=n(s),a(e,this,u)}}},function(e,t,n){var a=n(1132),r=n(1134)(a);e.exports=r},function(e,t,n){var a=n(1133),r=n(587),o=n(590),l=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:o;e.exports=l},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,a=0;return function(){var r=n(),o=16-(r-a);if(a=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var a=n(186),r=n(286),o=n(592),l=n(185);e.exports=function(e,t,n){if(!l(n))return!1;var i=typeof t;return!!("number"==i?r(n)&&o(t,n.length):"string"==i&&t in n)&&a(n[t],e)}},function(e,t,n){var a=n(1137),r=n(1145),o=n(286);e.exports=function(e){return o(e)?a(e,!0):r(e)}},function(e,t,n){var a=n(1138),r=n(593),o=n(594),l=n(1140),i=n(592),s=n(1142),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&r(e),d=!n&&!c&&l(e),f=!n&&!c&&!d&&s(e),p=n||c||d||f,h=p?a(e.length,String):[],m=h.length;for(var v in e)!t&&!u.call(e,v)||p&&("length"==v||d&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||i(v,m))||h.push(v);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}},function(e,t,n){var a=n(284),r=n(188);e.exports=function(e){return r(e)&&"[object Arguments]"==a(e)}},function(e,t,n){(function(e){var a=n(136),r=n(1141),o="object"==typeof t&&t&&!t.nodeType&&t,l=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=l&&l.exports===o?a.Buffer:void 0,s=(i?i.isBuffer:void 0)||r;e.exports=s}).call(t,n(133)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,n){var a=n(1143),r=n(595),o=n(1144),l=o&&o.isTypedArray,i=l?r(l):a;e.exports=i},function(e,t,n){var a=n(284),r=n(591),o=n(188),l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&r(e.length)&&!!l[a(e)]}},function(e,t,n){(function(e){var a=n(589),r="object"==typeof t&&t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,l=o&&o.exports===r&&a.process,i=function(){try{return l&&l.binding&&l.binding("util")}catch(e){}}();e.exports=i}).call(t,n(133)(e))},function(e,t,n){var a=n(185),r=n(1146),o=n(1147),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(!a(e))return o(e);var t=r(e),n=[];for(var i in e)("constructor"!=i||!t&&l.call(e,i))&&n.push(i);return n}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var a=n(186),r=Object.prototype,o=r.hasOwnProperty;e.exports=function(e,t,n,l){return void 0===e||a(e,r[n])&&!o.call(l,n)?t:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var r=Object.prototype.hasOwnProperty,o=0;o<n.length;o+=1){if(!r.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;if(e[n[o]]!==t[n[o]])return!1}return!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(1151)),l=a(n(1184)),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[]}return r(e,[{key:"enter",value:function(e){var t=this.entered.length;return this.entered=(0,o.default)(this.entered.filter(function(t){return document.documentElement.contains(t)&&(!t.contains||t.contains(e))}),[e]),0===t&&this.entered.length>0}},{key:"leave",value:function(e){var t=this.entered.length;return this.entered=(0,l.default)(this.entered.filter(function(e){return document.documentElement.contains(e)}),e),t>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}]),e}();t.default=i},function(e,t,n){var a=n(1152),r=n(187),o=n(1155),l=n(602),i=r(function(e){return o(a(e,1,l,!0))});e.exports=i},function(e,t,n){function a(e,t,n,l,i){var s=-1,u=e.length;for(n||(n=o),i||(i=[]);++s<u;){var c=e[s];t>0&&n(c)?t>1?a(c,t-1,n,l,i):r(i,c):l||(i[i.length]=c)}return i}var r=n(1153),o=n(1154);e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e}},function(e,t,n){var a=n(285),r=n(593),o=n(594),l=a?a.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||r(e)||!!(l&&e&&e[l])}},function(e,t,n){var a=n(596),r=n(598),o=n(599),l=n(600),i=n(1181),s=n(601);e.exports=function(e,t,n){var u=-1,c=r,d=e.length,f=!0,p=[],h=p;if(n)f=!1,c=o;else if(d>=200){var m=t?null:i(e);if(m)return s(m);f=!1,c=l,h=new a}else h=t?[]:p;e:for(;++u<d;){var v=e[u],y=t?t(v):v;if(v=n||0!==v?v:0,f&&y==y){for(var g=h.length;g--;)if(h[g]===y)continue e;t&&h.push(y),p.push(v)}else c(h,y,n)||(h!==p&&h.push(y),p.push(v))}return p}},function(e,t,n){var a=n(1157),r=n(1163),o=n(1169);e.exports=function(){this.size=0,this.__data__={hash:new a,map:new(o||r),string:new a}}},function(e,t,n){function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var r=n(1158),o=n(1159),l=n(1160),i=n(1161),s=n(1162);a.prototype.clear=r,a.prototype.delete=o,a.prototype.get=l,a.prototype.has=i,a.prototype.set=s,e.exports=a},function(e,t,n){var a=n(189);e.exports=function(){this.__data__=a?a(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var a=n(189),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(a){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},function(e,t,n){var a=n(189),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return a?void 0!==t[e]:r.call(t,e)}},function(e,t,n){var a=n(189);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=a&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}var r=n(1164),o=n(1165),l=n(1166),i=n(1167),s=n(1168);a.prototype.clear=r,a.prototype.delete=o,a.prototype.get=l,a.prototype.has=i,a.prototype.set=s,e.exports=a},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var a=n(190),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=a(t,e);return!(n<0||(n==t.length-1?t.pop():r.call(t,n,1),--this.size,0))}},function(e,t,n){var a=n(190);e.exports=function(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var a=n(190);e.exports=function(e){return a(this.__data__,e)>-1}},function(e,t,n){var a=n(190);e.exports=function(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},function(e,t,n){var a=n(184)(n(136),"Map");e.exports=a},function(e,t,n){var a=n(191);e.exports=function(e){var t=a(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var a=n(191);e.exports=function(e){return a(this,e).get(e)}},function(e,t,n){var a=n(191);e.exports=function(e){return a(this,e).has(e)}},function(e,t,n){var a=n(191);e.exports=function(e,t){var n=a(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var a=n(1178),r=n(1179),o=n(1180);e.exports=function(e,t,n){return t==t?o(e,t,n):a(e,r,n)}},function(e,t){e.exports=function(e,t,n,a){for(var r=e.length,o=n+(a?1:-1);a?o--:++o<r;)if(t(e[o],o,e))return o;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1}},function(e,t,n){var a=n(1182),r=n(1183),o=n(601),l=a&&1/o(new a([,-0]))[1]==1/0?function(e){return new a(e)}:r;e.exports=l},function(e,t,n){var a=n(184)(n(136),"Set");e.exports=a},function(e,t){e.exports=function(){}},function(e,t,n){var a=n(1185),r=n(187),o=n(602),l=r(function(e,t){return o(e)?a(e,t):[]});e.exports=l},function(e,t,n){var a=n(596),r=n(598),o=n(599),l=n(1186),i=n(595),s=n(600);e.exports=function(e,t,n,u){var c=-1,d=r,f=!0,p=e.length,h=[],m=t.length;if(!p)return h;n&&(t=l(t,i(n))),u?(d=o,f=!1):t.length>=200&&(d=s,f=!1,t=new a(t));e:for(;++c<p;){var v=e[c],y=null==n?v:n(v);if(v=u||0!==v?v:0,f&&y==y){for(var g=m;g--;)if(t[g]===y)continue e;h.push(v)}else d(t,y,u)||h.push(v)}return h}},function(e,t){e.exports=function(e,t){for(var n=-1,a=null==e?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r}},function(e,t,n){function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],o=n.cache;if(o.has(r))return o.get(r);var l=e.apply(this,a);return n.cache=o.set(r,l)||o,l};return n.cache=new(a.Cache||r),n}var r=n(597),o="Expected a function";a.Cache=r,e.exports=a},function(e,t,n){"use strict";function a(e){var t=e.nodeType===l?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),a=n.top;return{x:n.left,y:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeClientOffset=a,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,n,l,i){var s=function(e){return"IMG"===e.nodeName&&((0,r.isFirefox)()||!document.documentElement.contains(e))}(t),u=a(s?e:t),c={x:n.x-u.x,y:n.y-u.y},d=e.offsetWidth,f=e.offsetHeight,p=l.anchorX,h=l.anchorY,m=function(e,t,n,a){var o=e?t.width:n,l=e?t.height:a;return(0,r.isSafari)()&&e&&(l/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:l}}(s,t,d,f),v=m.dragPreviewWidth,y=m.dragPreviewHeight,g=i.offsetX,E=i.offsetY,b=0===E||E;return{x:0===g||g?g:new o.default([0,.5,1],[c.x,c.x/d*v,c.x+v-d]).interpolate(p),y:b?E:function(){var e=new o.default([0,.5,1],[c.y,c.y/f*y,c.y+y-f]).interpolate(h);return(0,r.isSafari)()&&s&&(e+=(window.devicePixelRatio-1)*y),e}()}};var r=n(603),o=function(e){return e&&e.__esModule?e:{default:e}}(n(1189)),l=1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=t.length,r=[],o=0;o<a;o++)r.push(o);r.sort(function(e,n){return t[e]<t[n]?-1:1});for(var l=[],i=[],s=[],u=void 0,c=void 0,d=0;d<a-1;d++)u=t[d+1]-t[d],c=n[d+1]-n[d],i.push(u),l.push(c),s.push(c/u);for(var f=[s[0]],p=0;p<i.length-1;p++){var h=s[p],m=s[p+1];if(h*m<=0)f.push(0);else{u=i[p];var v=i[p+1],y=u+v;f.push(3*y/((y+v)/h+(y+u)/m))}}f.push(s[s.length-1]);for(var g=[],E=[],b=void 0,_=0;_<f.length-1;_++){b=s[_];var C=f[_],w=1/i[_],k=C+f[_+1]-b-b;g.push((b-C-k)*w),E.push(k*w*w)}this.xs=t,this.ys=n,this.c1s=f,this.c2s=g,this.c3s=E}return a(e,[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,a=this.c1s,r=this.c2s,o=this.c3s,l=t.length-1;if(e===t[l])return n[l];for(var i=0,s=o.length-1,u=void 0;i<=s;){var c=t[u=Math.floor(.5*(i+s))];if(c<e)i=u+1;else{if(!(c>e))return n[u];s=u-1}}var d=e-t[l=Math.max(0,s)],f=d*d;return n[l]+a[l]*d+r[l]*f+o[l]*d*f}}]),e}();t.default=r},function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n){var a=t.reduce(function(t,n){return t||e.getData(n)},null);return null!=a?a:n}Object.defineProperty(t,"__esModule",{value:!0});var o,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.createNativeDragSource=function(e){var t=s[e],n=t.exposeProperty,a=t.matchesTypes,r=t.getData;return function(){function e(){var t,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.item=(t={},a={},a[n]=a[n]||{},a[n].get=function(){return console.warn("Browser doesn't allow reading \""+n+'" until the drop event.'),null},function(e,t){for(var n in t){var a=t[n];a.configurable=a.enumerable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n,a)}}(t,a),t)}return l(e,[{key:"mutateItemByReadingDataTransfer",value:function(e){delete this.item[n],this.item[n]=r(e,a)}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}()},t.matchNativeItemType=function(e){var t=Array.prototype.slice.call(e.types||[]);return Object.keys(s).filter(function(e){return s[e].matchesTypes.some(function(e){return t.indexOf(e)>-1})})[0]||null};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(287)),s=(o={},a(o,i.FILE,{exposeProperty:"files",matchesTypes:["Files"],getData:function(e){return Array.prototype.slice.call(e.files)}}),a(o,i.URL,{exposeProperty:"urls",matchesTypes:["Url","text/uri-list"],getData:function(e,t){return r(e,t,"").split("\n")}}),a(o,i.TEXT,{exposeProperty:"text",matchesTypes:["Text","text/plain"],getData:function(e,t){return r(e,t,"")}}),o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a||((a=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),a};var a=void 0},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GroupTable=void 0;var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(604)),p=(a(n(16)),n(9)),h=n(175),m=a(n(288)),v=t.GroupTable=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={checkedRows:[],data:[]},a.rowIds=a.getRowIds(),a.onCoursesSwap=a.onCoursesSwap.bind(a),a.onRowCheck=a.onRowCheck.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.hasOwnProperty("selectAllEventValue")&&null!==e.selectAllEventValue&&this.handleSelectAll(e.selectAllEventValue),this.sortAndSetData(e.data)}},{key:"componentWillMount",value:function(){this.sortAndSetData(this.props.data)}},{key:"sortAndSetData",value:function(e){e=e.sort(function(e,t){var n=parseInt(e.weight),a=parseInt(t.weight);return n>a?-1:n<a?1:0}),this.setState({data:e})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.expanded,a=e.onClick,r=e.isCourseOver,o=e.isGroupOver,l=e.connectGroupDropTarget,i=e.connectCourseDropTarget,s=e.connectDragSource,u=e.connectDragPreview,p=e.canDropGroup,h=this.state,m=h.data,v=h.checkedRows,y="#e1eafb";return r&&(y="#FFFF80"),o&&(y=p?"#FFFF80":"#F5A6A6"),u(c.default.createElement("div",null,c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:12},i(l(c.default.createElement("div",null,c.default.createElement(d.Button,{style:{height:"50px",textAlign:"left",paddingLeft:"2%",backgroundColor:y,borderBottom:"1px solid #b6ccf3"},onClick:function(){return a(t)},vertical:!0,block:!0},s(c.default.createElement("img",{src:"src/images/move_icon2.png",alt:"",width:"20px"})),t)))),c.default.createElement(d.Panel,{className:"courses-panel",collapsible:!0,expanded:n},c.default.createElement(f.default,{title:t,data:m,checkedRows:v,onRowCheck:this.onRowCheck,onCoursesSwap:this.onCoursesSwap}))))))}},{key:"getRowIds",value:function(){var e=[];return this.props.data.forEach(function(t){var n=t.id?parseInt(t.id):null;null!==n&&0==t.studentsCount&&e.push(n)}),e}},{key:"onRowCheck",value:function(e,t){var n=this.state.checkedRows,a=n.indexOf(e),r=-1!==a;!r&&t&&n.push(e),r&&!t&&n.splice(a,1),this.props.onCheckedRowsChange(n),this.setState({checkedRows:n})}},{key:"onCoursesSwap",value:function(e,t){this.props.onCoursesSwap(e,t)&&this.props.onCoursesSwap(e,t)}},{key:"handleSelectAll",value:function(e){var t;t=e?this.rowIds:[],this.props.onCheckedRowsChange(t),this.setState({checkedRows:t})}}]),t}(c.default.Component);v.propTypes={isCourseOver:u.PropTypes.bool.isRequired,isGroupOver:u.PropTypes.bool.isRequired},t.default=(0,m.default)((0,h.DropTarget)(p.DRAG_ITEM_TYPES.COURSE,{drop:function(e,t){var n=t.getItem();e.onCourseReplace(n,e.id)}},function(e,t){return{connectCourseDropTarget:e.dropTarget(),isCourseOver:t.isOver()}}),(0,h.DropTarget)(p.DRAG_ITEM_TYPES.GROUP,{canDrop:function(e){return null!==e.id&&null!==e.weight},drop:function(e,t){var n=t.getItem(),a={id:e.id,weight:e.weight,title:e.title},r={id:n.id,weight:n.weight,title:n.title};a.id!=r.id&&e.onGroupsSwap(a,r)}},function(e,t){return{connectGroupDropTarget:e.dropTarget(),isGroupOver:t.isOver(),canDropGroup:t.canDrop()}}),(0,h.DragSource)(p.DRAG_ITEM_TYPES.GROUP,{beginDrag:function(e){return{id:e.id,weight:e.weight,title:e.title}},canDrag:function(e){return null!==e.id&&null!==e.weight}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(v)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(175),f=(a(n(283)),n(18)),p=n(9),h=n(6),m=a(n(1194)),v=a(n(1195)),y=a(n(288)),g={checkboxColumn:{display:"inline-block",width:"12%",paddingLeft:"6%",alignSelf:"center"},titleColumn:{display:"inline-block",width:"43%",textAlign:"left",alignSelf:"center"},innerTable:{padding:"15px"}};window.innerWidth<992&&(g={checkboxColumn:{display:"inline-block",width:"5%",paddingLeft:10,alignSelf:"center"},titleColumn:{display:"inline-block",width:"50%",textAlign:"left",alignSelf:"center"}}),window.innerWidth<768&&(g={checkboxColumn:{display:"inline-block",width:"5%",paddingLeft:10,alignSelf:"center"},titleColumn:{display:"inline-block",width:"50%",textAlign:"left",alignSelf:"center"}});var E=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={classesExpanded:!1,showAddClass:!1,classes:e.classes},a.onAddClass=a.onAddClass.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"onAddClass",value:function(e){var t=this.state.classes;t.push({classTime:e.classTime,classId:e.id,classGender:e.classGender,maleCount:0,femaleCount:0,classRegOpen:"no"}),this.setState({classes:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.connectDragSource,a=t.connectDragPreview,r=t.connectDropTarget,o=t.checked,l=t.disabled,i=t.id,s=t.onCheck,u=t.isDragging,d=t.odd,p=t.title,y=t.deptName,E=t.isOver,b=t.feeForEmployed,_=t.feeForUnemployed,C=this.props,w=C.maleCount,k=C.femaleCount,S=this.state,x=S.showAddClass,T=S.classesExpanded,P=S.classes;w||(w=0),k||(k=0);var R="white";return d&&(R="whiteSmoke"),E&&(R="#7CE27C"),a(r(c.default.createElement("div",{style:{opacity:u?"0.5":"1"}},c.default.createElement("div",{className:"btn",style:{padding:"10px 0px",width:"100%",height:"50px",backgroundColor:R,display:"flex",justifyContent:"flex-start",borderBottom:0,borderTop:0},onClick:function(t){return e.setState({classesExpanded:!T})}},c.default.createElement("div",{style:g.checkboxColumn},c.default.createElement("input",{type:"checkbox",onClick:function(e){return e.stopPropagation()},onChange:function(e){return s(e.target.checked)},checked:o,disabled:l})),c.default.createElement("div",{style:{display:"inline-block",width:"5%",cursor:"move",alignSelf:"center"}},n(c.default.createElement("img",{src:"src/images/move_icon2.png",alt:"",width:"20px"}))),c.default.createElement("div",{style:g.titleColumn},p+" (Male: "+w+" Female: "+k+")"),c.default.createElement("div",{style:{display:"inline-block",width:"30%",textAlign:"left",alignSelf:"center"}},y),c.default.createElement("div",{style:{display:"inline-block",width:"10%",alignSelf:"center",paddingRight:10}},c.default.createElement(f.Link,{onClick:function(e){return e.stopPropagation()},to:"/courses/"+i+"/classes"},"Detail"),c.default.createElement("span",null," | "),c.default.createElement(f.Link,{onClick:function(e){return e.stopPropagation()},to:"/courses/"+i},"Edit"))),c.default.createElement(h.Panel,{style:{marginBottom:"0px",borderTop:0,borderBottom:0},collapsible:!0,expanded:T},c.default.createElement("div",{style:g.innerTable},c.default.createElement(m.default,{classes:P}),c.default.createElement(h.Button,{style:{marginTop:"15px",float:"right",marginBottom:"15px"},className:"custom",bsStyle:"success",onClick:function(){return e.setState({showAddClass:!0})}},"Add class"))),c.default.createElement(v.default,{courseTitle:p,courseId:i,show:x,feeForEmployed:b,feeForUnemployed:_,onClose:function(){return e.setState({showAddClass:!1})},onAdd:this.onAddClass}))))}}]),t}(c.default.Component);E.propTypes={title:u.PropTypes.string.isRequired,groupId:u.PropTypes.number.isRequired,groupTitle:u.PropTypes.string.isRequired,deptName:u.PropTypes.string,id:u.PropTypes.number,weight:u.PropTypes.number,onCheck:u.PropTypes.func.isRequired,checked:u.PropTypes.bool.isRequired,disabled:u.PropTypes.bool,connectDragSource:u.PropTypes.func.isRequired,connectDragPreview:u.PropTypes.func.isRequired,connectDropTarget:u.PropTypes.func.isRequired,isDragging:u.PropTypes.bool.isRequired,isOver:u.PropTypes.bool.isRequired,odd:u.PropTypes.bool,style:u.PropTypes.object},t.default=(0,y.default)((0,d.DragSource)(p.DRAG_ITEM_TYPES.COURSE,{beginDrag:function(e){return{id:e.id,courseTitle:e.title,deptName:e.deptName,studentsCount:e.disabled?1:0,groupId:e.groupId,groupTitle:e.groupTitle,weight:e.weight}}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}),(0,d.DropTarget)(p.DRAG_ITEM_TYPES.COURSE,{drop:function(e,t){var n=t.getItem();if(e.id!==n){var a={id:e.id,groupId:e.groupId,groupTitle:e.groupTitle,weight:e.weight},r={id:n.id,groupId:n.groupId,groupTitle:n.groupTitle,weight:n.weight};e.onCoursesSwap(a,r)}}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(E)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(18),p=n(6),h=a(n(11)),m=function(e){function t(e,n){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n))}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props.classes;return null==e||0===e.length?d.default.createElement("p",null,"No classes"):d.default.createElement("div",null,this.renderClasses())}},{key:"sortClasses",value:function(e){return e.sort(function(e,t){var n=parseInt(e.classWeight),a=parseInt(t.classWeight);return n>a?-1:n<a?1:0})}},{key:"renderClasses",value:function(){for(var e=[],t=this.props.classes,n=this.sortClasses(t),a=0;a<n.length;a++){var o=n[a].classId;e.push(d.default.createElement(v,(0,r.default)({key:o},n[a])))}return e}}]),t}(c.Component);t.default=m,m.PropTypes={classes:c.PropTypes.array};var v=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={classRegOpen:e.classRegOpen},a.toggleRegPromise=null,a.toggleReg=a.toggleReg.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"toggleReg",value:function(){var e=this.props.classId,t="yes"==this.state.classRegOpen?"no":"yes";this.setState({classRegOpen:t}),$.ajax({type:"put",url:"/api/classes/"+e,data:{courseClassRegistrationOpen:t},success:function(){return h.default.success("Updated")},error:function(e){h.default.error("Update failed"),console.log(e)}})}},{key:"render",value:function(){var e=this.props,t=e.classTime,n=e.classGender,a=e.classId,r=this.props,o=r.maleCount,l=r.femaleCount,i=this.state.classRegOpen;return o||(o=0),l||(l=0),d.default.createElement("div",{style:{backgroundColor:"#EFEFEF",marginBottom:"5px",display:"flex",justifyContent:"center",height:"50px"}},d.default.createElement("div",{style:{display:"inline-block",width:"35%",alignSelf:"center",textAlign:"left"}},d.default.createElement("p",{style:{margin:"0"}},"Class time: ",t," (Male: ",o," Female: ",l,")")),d.default.createElement("div",{style:{display:"inline-block",width:"15%",alignSelf:"center",textAlign:"left"}},d.default.createElement("p",{style:{margin:"0"}},"Class gender: ",n)),d.default.createElement("div",{style:{display:"inline-block",width:"35%",textAlign:"center",alignSelf:"center"}},d.default.createElement("p",{style:{margin:"0"}},d.default.createElement(f.Link,{to:"classes/"+a},"Detail"),d.default.createElement("span",null," | Registers "),d.default.createElement(f.Link,{to:"classes/"+a+"/print/weekend-registers"},"Weekend"),d.default.createElement("span",null," "),d.default.createElement(f.Link,{to:"classes/"+a+"/print/weekday-registers"},"Weekday"),d.default.createElement("span",null," "),d.default.createElement(f.Link,{to:"classes/"+a+"/print/adults"},"Adults"))),d.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},d.default.createElement(p.Button,{onClick:this.toggleReg,style:{height:"40px",alignSelf:"center"},bsStyle:"yes"==i?"success":"danger"},"Reg is open")))}}]),t}(c.Component);v.PropTypes={classId:c.PropTypes.number.isRequired,gender:c.PropTypes.string.isRequired,classTime:c.PropTypes.string.isRequired,maleCount:c.PropTypes.number.isRequired,femaleCount:c.PropTypes.number.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=n(12),h=a(n(14)),m=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.initialState={classTime:"",classGender:"male",classWeight:0,feeForEmployed:e.feeForEmployed,feeForUnemployed:e.feeForUnemployed},a.state=a.initialState,a.close=a.close.bind(a),a.add=a.add.bind(a),a.onChange=a.onChange.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"clear",value:function(){for(var e in this.state){var t=null;void 0!==this.initialState[e]&&(t=this.initialState[e]),this.setState((0,r.default)({},e,t))}}},{key:"close",value:function(){this.clear(),this.props.onClose()}},{key:"add",value:function(){var e=this,t=this.state,n=t.classTime,a=t.classGender,r=this.state,o=r.classWeight,l=r.feeForEmployed,i=r.feeForUnemployed;0===o.length&&(o=0);var s=this.props,u=s.save,c=s.courseId,d=s.onAdd;u({courseId:c,classGender:a,classTime:n,classWeight:o,feeForEmployed:l,feeForUnemployed:i},function(t){d(t),e.close()},function(e){return console.error(e)})}},{key:"onChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({},n,a))}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.courseTitle,a=this.state,r=a.classTime,o=a.classGender,l=a.classWeight,i=a.feeForEmployed,s=a.feeForUnemployed;return d.default.createElement(f.Modal,{show:t},d.default.createElement(f.Modal.Header,null,"Add class ",n?"to "+n:""),d.default.createElement(f.Modal.Body,null,d.default.createElement(p.FormField,{label:"Class time",width:12},d.default.createElement("input",{type:"text",className:"form-control",name:"classTime",onChange:this.onChange,value:r})),d.default.createElement(p.FormField,{label:"Class gender",width:12},d.default.createElement("select",{name:"classGender",className:"form-control",value:o,onChange:this.onChange},d.default.createElement("option",{value:"male"},"Male"),d.default.createElement("option",{value:"female"},"Female"),d.default.createElement("option",{value:"both"},"Both"))),d.default.createElement("p",null,"Optional"),d.default.createElement(p.FormField,{label:"Class weight",width:12},d.default.createElement("input",{type:"text",className:"form-control",name:"classWeight",onChange:this.onChange,value:l})),d.default.createElement(p.FormField,{label:"Fee for employed",width:12},d.default.createElement("input",{type:"text",className:"form-control",name:"feeForEmployed",onChange:this.onChange,value:i})),d.default.createElement(p.FormField,{label:"Fee for unemployed",width:12},d.default.createElement("input",{type:"text",className:"form-control",name:"feeForUnemployed",onChange:this.onChange,value:s}))),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{bsStyle:"success",style:{marginRight:"15px"},onClick:this.add},"Add"),d.default.createElement(f.Button,{onClick:this.close},"Cancel")))}}]),t}(c.Component);m.propTypes={show:c.PropTypes.bool,courseTitle:c.PropTypes.string,courseId:c.PropTypes.number.isRequired,onClose:c.PropTypes.func.isRequired,onAdd:c.PropTypes.func.isRequired,feeForEmployed:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.number]),feeForUnemployed:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.number])},t.default=(0,h.default)(m,{save:{type:"post",url:"/api/classes"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(110)),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.context,t=e.user,n=e.router;return t?d.default.renderTemplatedComponent("MyCourses"):(n.push("/login"),c.default.createElement("div",null))}}]),t}(u.Component);t.default=f,f.contextTypes={user:u.PropTypes.object,router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(15)),h=a(n(47)),m=a(n(36)),v=(a(n(22)),n(6)),y=a(n(11)),g=n(12),E=(a(n(289)),a(n(43))),b=a(n(100)),_=a(n(19)),C=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={isLoading:!0,course:{deptId:e.params.deptId,courseTitle:"",courseCode:"",weight:"",courseSubtitle:"",feeForEmployed:0,feeForUnemployed:0,courseDescription:"",courseStructure:"",courseGroupId:0,isFullTime:"0"},formData:null,showConfirm:!1},i.promises={load:null,save:null},i.headerTypes=(a={},(0,r.default)(a,f.ROLES.SUPER_ADMIN,h.default),(0,r.default)(a,f.ROLES.ADMIN,h.default),(0,r.default)(a,f.ROLES.REGISTRAR,h.default),a),i.requestFields=["deptId","courseTitle","courseCode","weight","courseSubtitle","feeForEmployed","feeForUnemployed","courseDescription","courseStructure","courseGroupId","isFullTime"],i.submit=i.submit.bind(i),i.handleFieldChange=i.handleFieldChange.bind(i),i.handleFileFieldChange=i.handleFileFieldChange.bind(i),i.setCourse=i.setCourse.bind(i),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"jqueryInit",value:function(){var e=this;this.jqueryInitialized||$(function(){console.log("test : ",$("textarea")),(0,E.default)($("textarea")),e.jqueryInitialized=!0})}},{key:"componentDidMount",value:function(){this.props.params.id?this.loadData():this.setState({isLoading:!1,formData:new FormData})}},{key:"componentWillUnmount",value:function(){for(var e in this.promises){var t=this.promises[e];t&&t.cancel()}}},{key:"render",value:function(){var e=this;if(!this.isAllowed())return!1;if(this.state.isLoading)return d.default.createElement("div",null,this.showHeader(),d.default.createElement("div",null,d.default.createElement(_.default,null)));var t=this.state.course;if(!t&&this.props.params.id)return d.default.createElement("div",null,this.showHeader(),d.default.createElement("p",null,"No data."));var n=this.context,a=n.branchId,r=n.website,o=function(e){var t=e.children;return d.default.createElement("p",{className:"detail-field-label"},t)};return d.default.createElement("div",null,this.showHeader(),d.default.createElement("div",{id:"notifications"}),d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Course"),d.default.createElement("hr",null),d.default.createElement("form",{method:"put",id:"courseEditForm",onSubmit:this.submit},d.default.createElement(v.Row,null,d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(o,null,"Dept"),d.default.createElement(m.default,{url:"/api/depts/list",className:"form-control",name:"deptId",id:"deptId",value:t.deptId,onChange:this.handleFieldChange,optionPredicate:function(e){return!a||e.branchId==a||e.value==t.deptId}},d.default.createElement("option",{value:"0"},"None"))),d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(o,null,"Group"),d.default.createElement(m.default,{url:"/api/courses/groups/list",className:"form-control",name:"courseGroupId",id:"courseGroupId",value:t.courseGroupId,onChange:this.handleFieldChange},d.default.createElement("option",{value:"0"},"None")))),d.default.createElement(v.Row,null,d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(o,null,"Title"),d.default.createElement("input",{id:"courseTitle",name:"courseTitle",type:"text",className:"form-control",value:t.courseTitle,onChange:this.handleFieldChange})),d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(o,null,"Code"),d.default.createElement("input",{id:"courseCode",name:"courseCode",type:"text",className:"form-control",value:t.courseCode,onChange:this.handleFieldChange}))),d.default.createElement(v.Row,null,d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(o,null,"Weight"),d.default.createElement("input",{id:"weight",name:"weight",type:"text",className:"form-control",value:t.weight,onChange:this.handleFieldChange})),d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(o,null,"Subtitle"),d.default.createElement("input",{id:"courseSubtitle",name:"courseSubtitle",type:"text",className:"form-control",value:t.courseSubtitle,onChange:this.handleFieldChange}),d.default.createElement("input",{style:{marginTop:"10px"},type:"file",name:"courseSubtitlePdf",onChange:this.handleFileFieldChange,accept:"application/pdf"}))),d.default.createElement(v.Row,null,d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(o,null,r.paymentField1," fee"),d.default.createElement("input",{type:"text",name:"feeForEmployed",className:"form-control",value:t.feeForEmployed,onChange:this.handleFieldChange})),d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(o,null,"F",r.paymentField2," fee"),d.default.createElement("input",{type:"text",name:"feeForUnemployed",className:"form-control",value:t.feeForUnemployed,onChange:this.handleFieldChange}))),d.default.createElement(v.Row,null,d.default.createElement(g.FormField,{width:12,label:"Description"},d.default.createElement("textarea",{name:"courseDescription",id:"courseDescription",rows:"2",className:"form-control",value:t.courseDescription,onChange:this.handleFieldChange})),d.default.createElement(g.FormField,{width:12,label:"Structure"},d.default.createElement("textarea",{name:"courseStructure",id:"courseStructure",rows:"2",className:"form-control",value:t.courseStructure,onChange:this.handleFieldChange}))),d.default.createElement(v.Row,null,d.default.createElement(g.FormField,{width:6,label:"Is Full Time"},d.default.createElement("input",{style:{display:"block"},type:"checkbox",name:"isFullTime",checked:"1"==t.isFullTime,onChange:this.handleFieldChange})),d.default.createElement(v.Col,{md:6,style:{marginBottom:"15px"}},d.default.createElement(v.Button,{className:"custom btn-success",onClick:function(){return e.setState({showConfirm:!0})}},"Save"))))),d.default.createElement(b.default,{headerText:"Update Course",confirmText:"Are you sure?",onYes:function(){e.submit(),e.setState({showConfirm:!1})},onNo:function(){return e.setState({showConfirm:!1})},show:this.state.showConfirm}))}},{key:"submit",value:function(e){e&&e.preventDefault(),this.saveData()}},{key:"setCourse",value:function(e,t,n){var a=this.state,r=a.course,o=a.formData;r[e]=t,n?o.set(e,t,n):o.set(e,t),this.setState({course:r,formData:o})}},{key:"handleFieldChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,o=t.checked;"checkbox"!=r?this.setCourse(n,a):this.setCourse(n,o?"1":"0")}},{key:"handleFileFieldChange",value:function(e){var t=e.target,n=t.files,a=t.name,r=n[0];this.setCourse(a,r,r.name),this.setCourse("courseSubtitle",document.location.origin+"/pdf/"+r.name)}},{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return!!e&&-1!==t.allowedRoles().indexOf(e)}},{key:"showHeader",value:function(){var e=this.props.appTypeKey;if(e in this.headerTypes)var t=this.headerTypes[e];return d.default.createElement("div",null,d.default.createElement(t,{selectedTab:"/courses"}))}},{key:"loadData",value:function(){var e=this;this.setState({isLoading:!0});var t={fields:this.requestFields};this.promises.load=p.default.makeCancelableAjax($.ajax({type:"get",url:"/api/courses/"+this.props.params.id,data:t})),this.promises.load.promise.then(function(t){var n=new FormData;for(var a in t)n.append(a,t[a]);e.setState({isLoading:!1,course:t,formData:n}),e.jqueryInit()},function(t){e.setState({isLoading:!1}),console.log(t)})}},{key:"saveData",value:function(){var e=this,t=this.state.formData,n=this.props.params.id,a={type:"post",url:"/api/courses",cache:!1,processData:!1,contentType:!1,mimeType:"multipart/form-data",data:t};n&&(a.url+="/"+n),this.promises.save=p.default.ajax(a),this.promises.save.then(function(){e.context.router.push("/courses"),y.default.success("Saved successfully")},function(e){y.default.error("Save failed"),console.log(e)})}}],[{key:"allowedRoles",value:function(){return[f.ROLES.ADMIN,f.ROLES.SUPER_ADMIN,f.ROLES.REGISTRAR]}}]),t}(c.Component);t.default=C,C.contextTypes={branchId:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.number]),router:c.PropTypes.object.isRequired,website:c.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=n(9),f=a(n(1199)),p=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,d.ROLES.SUPER_ADMIN,f.default),(0,r.default)(a,d.ROLES.ADMIN,f.default),(0,r.default)(a,d.ROLES.REGISTRAR,f.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props.appTypeKey;if(e in this.childTypes){var t=this.childTypes[e],n=this.props.children?c.default.cloneElement(this.props.children,{appTypeKey:e}):"";return c.default.createElement("div",null,c.default.createElement(t,{params:this.props.params}),n)}return!1}}]),t}(c.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(50)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=a(n(70)),f=a(n(23)),p=n(0),h=a(p),m=a(n(47)),v=n(6),y=a(n(22)),g=a(n(36)),E=a(n(15)),b=a(n(60)),_=a(n(290)),C=n(18),w=n(38),k=a(n(1200)),S=a(n(605)),x=a(n(14)),T=a(n(11)),P=a(n(44)),R=a(n(16)),O=a(n(288)),D=n(175),N=a(n(283)),I=n(9),M=a(n(19)),A=function(e,t){var n=(0,f.default)({},e);return t&&"object"===(void 0===t?"undefined":(0,d.default)(t))&&(0,f.default)(n,t),n},F=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={filters:{}},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e,t){if(this.context.branchId!=t.branchId){var n=this.state.filters;n.courseSelect=null,this.setState({filters:n})}}},{key:"render",value:function(){var e=this;return h.default.createElement("div",null,h.default.createElement(m.default,{selectedTab:"/classes"}),h.default.createElement("div",{id:"notifications"}),h.default.createElement("div",{className:"content-block"},h.default.createElement("h2",{className:"block-heading"},"All Classes"),h.default.createElement("hr",null),h.default.createElement(j,{params:this.props.params,onSubmit:function(t){e.setState({filters:t})}})),h.default.createElement("div",{className:"content-block"},h.default.createElement("h2",{className:"block-heading"},"Class List"),h.default.createElement("hr",null),h.default.createElement(B,{filters:this.state.filters})),h.default.createElement("div",{className:"content-block"},h.default.createElement("h2",{className:"block-heading"},"Class Groups"),h.default.createElement("hr",null),h.default.createElement(q,null)))}}]),t}(p.Component);F.contextTypes={branchId:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.number])},t.default=(0,D.DragDropContext)(N.default)(F);var L={filterButton:{}};window.innerWidth<768&&(L={filterButton:{width:"100%"}});var j=function(){var e=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n)),r=R.default.getIfExists(e,"params.courseId","All");return a.state={filters:{courseSelect:r,classTime:"",termId:e.data.id}},a.submit=a.submit.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=R.default.getIfExists(this.props,"params.courseId","All"),n=R.default.getIfExists(e,"params.courseId","All");if(t!=n){var a=this.state.filters;a.courseSelect=n,this.setState({filters:a}),this.props.onSubmit(a)}}},{key:"componentDidMount",value:function(){this.submit()}},{key:"render",value:function(){var e=this,t=this.context.branchId;return h.default.createElement("div",null,h.default.createElement("h4",null,"Filters"),h.default.createElement("form",{id:"ClassFilterForm",onSubmit:this.submit},h.default.createElement(v.Row,null,h.default.createElement(v.Col,{md:5},h.default.createElement(y.default,null,h.default.createElement("label",{htmlFor:"courseSelect"},"Course"),h.default.createElement(g.default,{url:"/api/courses/list",params:{branchId:t},className:"form-control",name:"courseSelect",id:"courseSelect",value:this.state.filters.courseSelect,onChange:function(t){return e.handleFieldChange(t)}},h.default.createElement("option",{value:"All"},"All Courses"))))),h.default.createElement(v.Row,null,h.default.createElement(v.Col,{md:5},h.default.createElement(y.default,null,h.default.createElement("label",{htmlFor:"classTime"},"Class Time"),h.default.createElement("input",{className:"form-control",type:"text",id:"classTime",name:"classTime",value:this.state.filters.classTime,onChange:function(t){return e.handleFieldChange(t)}})))),h.default.createElement(v.Row,null,h.default.createElement(v.Col,{md:5},h.default.createElement(y.default,null,h.default.createElement("label",{htmlFor:"termId"},"Term Name"),h.default.createElement(g.default,{url:"/api/terms/list",className:"form-control",name:"termId",id:"termId",value:this.state.filters.termId,onChange:function(t){return e.handleFieldChange(t)}},h.default.createElement("option",{value:"All"},"All terms"))))),h.default.createElement(v.Row,null,h.default.createElement(v.Col,{md:2},h.default.createElement(y.default,null,h.default.createElement(v.Button,{className:"custom",bsStyle:"success",type:"submit",style:L.filterButton},"Filter"))))))}},{key:"submit",value:function(e){e&&e.preventDefault(),this.props.onSubmit(this.state.filters)}},{key:"handleFieldChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=t||e.target.type;var n=this.state.filters,a=e.target.name;switch(t){case"text":case"select-one":case"radio":n[a]=e.target.value}this.setState({filters:n})}}]),t}(p.Component);return e.contextTypes={branchId:p.PropTypes.oneOfType([p.PropTypes.number,p.PropTypes.string])},(0,x.default)(e,{load:{type:"get",url:"/api/terms/active"}})}(),B=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={isLoading:!1,selectedTab:0,rows:null,totalCount:0},a.rowsPerPage=100,a.page=1,a.loadPromise=null,a.deleteData=a.deleteData.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props.filters.termId,t=h.default.createElement("div",null,h.default.createElement(k.default,{id:e})),n=this.state,a=n.isLoading;return n.rows,a?h.default.createElement("div",null,t,h.default.createElement("div",null,h.default.createElement(M.default,null))):(h.default.createElement(w.LinkContainer,{to:{pathname:"/classes/add"}},h.default.createElement(v.Button,{bsStyle:"success"},"Add class")),h.default.createElement("div",null,t,this.renderRows()))}},{key:"componentDidMount",value:function(){this.loadData(this.props,this.context)}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}},{key:"componentWillReceiveProps",value:function(e,t){this.loadData(e,t)}},{key:"loadData",value:function(e,t){var n=this;t||(t=this.context),this.setState({isLoading:!0}),this.loadPromise&&this.loadPromise.cancel();var a=e.filters;(0,f.default)(a,{branchId:t.branchId});var r={rowsPerPage:"All"==a.termId?this.rowsPerPage:null,page:this.page,filters:a};this.loadPromise=E.default.ajax({type:"get",url:"/api/classes/grouped-list",data:r}),this.loadPromise.promise.then(function(e){n.setState({isLoading:!1,rows:e.rows,totalCount:e.info.totalCount})},function(e){n.setState({isLoading:!1}),console.log(e)})}},{key:"deleteData",value:function(e,t){$.ajax({type:"delete",url:"/api/classes",data:{ids:e,reason:t},success:function(e){T.default.success("Deleted successfully"),console.log(e)},error:function(e){T.default.error(e.responseText.replace(/"/g,"")),console.log(e)}})}},{key:"renderRows",value:function(){var e=this,t=this.state,n=t.rows,a=t.selectedTab,r={both:[],male:[],female:[]};n&&n.forEach(function(e){for(var t in r)t==e.gender&&r[t].push(e)});var o=this.props.filters;return h.default.createElement("div",null,h.default.createElement(v.Tabs,{className:"content-tabs",activeKey:a,onSelect:function(t){e.setState({selectedTab:t})}},h.default.createElement(v.Tab,{eventKey:0,title:"Both ("+r.both.length+")"},h.default.createElement(H,{filters:o,rows:r.both,onDelete:this.deleteData})),h.default.createElement(v.Tab,{eventKey:1,title:"Male ("+r.male.length+")"},h.default.createElement(H,{filters:o,rows:r.male,onDelete:this.deleteData})),h.default.createElement(v.Tab,{eventKey:2,title:"Female ("+r.female.length+")"},h.default.createElement(H,{filters:o,rows:r.female,onDelete:this.deleteData}))),this.showPaginator())}},{key:"showPaginator",value:function(){var e=this;return"All"==this.props.filters.termId&&h.default.createElement(b.default,{totalCount:this.state.totalCount,rowsPerPage:this.rowsPerPage,currentPage:this.page,onPageChange:function(t){e.page=t,e.setState({isLoading:!0}),e.loadData(e.props,e.context)}})}}]),t}(p.Component);B.propTypes={filters:p.PropTypes.object.isRequired},B.contextTypes={branchId:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.number])};var U={tableButton:{marginLeft:5},buttonWrapper:{marginLeft:-5,marginRight:-5},buttonAdd:{marginTop:"30px",float:"right"}};window.innerWidth<992&&(U={tableButton:{width:"calc(50% - 10px)",marginLeft:5,marginRight:5,marginBottom:10},buttonWrapper:{marginLeft:-5,marginRight:-5},buttonAdd:{marginTop:20}}),window.innerWidth<768&&(U={tableButton:{width:"100%",marginBottom:10},buttonAdd:{marginTop:20,width:"100%"}});var H=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={checkedIds:[],ids:[],rowGroups:{},rowGroupsKeys:[],showConfrimDelete:!1},a.goToClassAttendance=a.goToClassAttendance.bind(a),a.swapClasses=a.swapClasses.bind(a),a.toggleReg=a.toggleReg.bind(a),a.goToClassAttendance=a.goToClassAttendance.bind(a),a.onClassCheck=a.onClassCheck.bind(a),a.storeIdsForPtint=a.storeIdsForPtint.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"storeIdsForPtint",value:function(){localStorage.setItem("printableClassIds",this.props.rows.map(function(e){return e.id}))}},{key:"componentWillMount",value:function(){this.init()}},{key:"init",value:function(){var e=[],t={};this.props.rows.forEach(function(n){parseInt(n.maleStudents)+parseInt(n.femaleStudents)===0&&e.push(n.id);var a=null!==n.classGroupName?n.classGroupName:"Other";t.hasOwnProperty(a)?t[a].classes.push(n):t[a]={classes:[n],id:n.classGroupId,name:a,weight:n.classGroupWeight,isExpanded:!1}}),this.setState({ids:e,rowGroups:t,rowGroupsKeys:this.sortRowGroups(t)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.rowGroups,a=t.ids,r=t.checkedIds,l=t.rowGroupsKeys,i=t.showConfirmDelete,s=this.props.filters,u="";return u=n&&0!=(0,o.default)(n).length?h.default.createElement("div",null,h.default.createElement("div",{style:{overflow:"auto"}},h.default.createElement("div",{className:"table-head",style:{display:"flex",justifyContent:"center",minHeight:"58px",minWidth:992}},h.default.createElement("div",{style:{display:"flex",justifyContent:"center",width:"30px",paddingLeft:10}},h.default.createElement("input",{style:{alignSelf:"center"},type:"checkbox",checked:a.length==r.length,onChange:function(){return e.onSelectAll()}})),h.default.createElement("div",{style:{width:"3%"}}),h.default.createElement("div",{style:{display:"inline-block",width:"25%",alignSelf:"center"}},"Time"),h.default.createElement("div",{style:{display:"inline-block",width:"20%",alignSelf:"center"}},"Course"),h.default.createElement("div",{style:{display:"inline-block",width:"15%",alignSelf:"center"}},"Branch"),h.default.createElement("div",{style:{display:"inline-block",width:"10%",alignSelf:"center",textAlign:"center"}},"Reg Open?"),h.default.createElement("div",{style:{width:"26%"}})),h.default.createElement("div",{style:{minWidth:992}},l.length>1?this.renderGroups():this.renderClasses(n[l[0]].classes))),h.default.createElement(P.default,{show:i,onConfirm:function(t){return e.delete(r,t)},onClose:function(){return e.setState({showConfirmDelete:!1})}})):null,h.default.createElement("div",null,h.default.createElement("div",null,u||"No classes"),h.default.createElement("div",{style:{minHeight:"70px"}},h.default.createElement("div",{style:{marginTop:"30px"}},!!u&&h.default.createElement(v.Button,{className:"custom",style:U.tableButton,onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete selected"),h.default.createElement("div",{className:U.buttonWrapper},h.default.createElement(C.Link,{className:"custom btn btn-default",style:U.tableButton,to:"/classes/print/weekend-registers",target:"_blank",onClick:this.storeIdsForPtint},"Weekend registers"),h.default.createElement(C.Link,{className:"custom btn btn-default",style:U.tableButton,to:"/classes/print/weekday-registers",target:"_blank",onClick:this.storeIdsForPtint},"Weekday registers"),h.default.createElement(C.Link,{className:"custom btn btn-default",style:U.tableButton,to:"/classes/print/adults",target:"_blank",onClick:this.storeIdsForPtint},"Adults"),h.default.createElement(C.Link,{className:"custom btn btn-default",style:U.tableButton,to:"/classes/print/"+s.termId+"/certificates-all",target:"_blank",onClick:this.storeIdsForPtint},"Print All classes Certificate"))),h.default.createElement(v.Button,{className:"custom",bsStyle:"success",style:U.buttonAdd,onClick:function(){var t=e.props.filters.courseSelect;t&&"All"!=t&&localStorage.setItem("targetCourseId",t),e.context.router.push("/classes/add")}},"Add")),u?h.default.createElement(_.default,{label:"Exams (tick selected classes)",classesIds:r}):"")}},{key:"sortRowGroups",value:function(e){return(0,o.default)(e).sort(function(t,n){var a=parseInt(e[t].weight),r=parseInt(e[n].weight);return a>r?-1:a<r?1:0})}},{key:"renderGroups",value:function(){var e=this,t=this.state,n=t.rowGroups;return t.rowGroupsKeys.map(function(t){var a=n[t],r=a.isExpanded,o=a.name;return h.default.createElement("div",{key:a.name},h.default.createElement(v.Button,{style:{textAlign:"left",paddingLeft:"2%",backgroundColor:"white"},onClick:function(){n[o].isExpanded=!r,e.setState({rowGroups:n})},vertical:!0,block:!0},o),h.default.createElement(v.Panel,{style:{marginBottom:"0px"},collapsible:!0,expanded:r},e.renderClasses(a.classes)))})}},{key:"goToClassAttendance",value:function(e,t){e.preventDefault(),this.context.router.push({pathname:"/classes/"+t+"/students",query:{tab:"Attendance records"}})}},{key:"sortClasses",value:function(e){return e.sort(function(e,t){var n=parseInt(e.weight),a=parseInt(t.weight);if(n<a)return-1;if(n>a)return 1;if(e.courseTitle<t.courseTitle)return-1;if(e.courseTitle>t.courseTitle)return 1;var r=parseInt(e.classWeight),o=parseInt(t.classWeight);return r<o?-1:r>o?1:0})}},{key:"toggleReg",value:function(e,t){var n="yes"==t?"no":"yes",a=!1,r=this.state.rowGroups;for(var o in r){if(a)break;for(var l=r[o].classes,i=0;i<l.length;i++)if(l[i].id==e){l[i].regOpen=n,a=!0;break}}this.setState({rowGroups:r}),$.ajax({type:"put",url:"/api/classes/"+e,data:{courseClassRegistrationOpen:n},error:function(e){return console.log(e)}})}},{key:"swapClasses",value:function(e,t){if(e&&t){console.log(e,t);var n=this.state.rowGroups,a=e.weight,r=t.weight,o=!1;for(var l in n){for(var i=n[l].classes,s=0;s<i.length;s++){if(a==r==null){o=!0;break}i[s].id!=e.id?i[s].id!=t.id||(i[s].classeight=a,a=null):(i[s].classWeight=r,r=null)}if(o)break}for(var u in n)n[u].classes=this.sortClasses(n[u].classes);this.setState({rowGroups:n}),$.ajax({type:"put",url:"/api/classes/swap",data:{sourceClass:e,targetClass:t},error:function(e){T.default.error("Error swapping classes"),console.error(e)}})}}},{key:"renderClasses",value:function(e){var t=this,n=this.state.checkedIds;return e.map(function(e,a){var o=e.id,l=e.maleStudents,i=e.femaleStudents,s=parseInt(l)+parseInt(i)>0,u=-1!==n.indexOf(o);return h.default.createElement(K,(0,r.default)({key:o,isOdd:a%2==0},e,{textStyle:{display:"inline-block",textAlign:"left",verticalAlign:"middle"},checked:u,disabled:s,onDrop:t.swapClasses,toggleReg:t.toggleReg,goToClassAttendance:t.goToClassAttendance,onClassCheck:t.onClassCheck}))})}},{key:"onClassCheck",value:function(e,t){var n=this.state.checkedIds,a=n.indexOf(e),r=-1!==a;!r&&t&&n.push(e),r&&!t&&n.splice(a,1),this.setState({checkedIds:n})}},{key:"onSelectAll",value:function(){var e=this.state.checkedIds,t=this.state.ids;e=e.length<t.length?t.slice():[],this.setState({checkedIds:e})}},{key:"delete",value:function(e,t){var n=this.state.rowGroups,a=e.slice();for(var r in n)n[r].classes=n[r].classes.filter(function(e){for(var t=parseInt(e.maleStudents)+parseInt(e.femaleStudents),n=0;n<a.length;n++)if(e.id==a[n]&&0===t)return!1;return!0});this.setState({rowGroups:n,showConfirmDelete:!1}),this.props.onDelete&&this.props.onDelete(e,t)}}]),t}(p.Component);H.propTypes={rows:p.PropTypes.array.isRequired,onDelete:p.PropTypes.func.isRequired},H.contextTypes={router:p.PropTypes.object.isRequired};var q=function(){return h.default.createElement("div",null,h.default.createElement(S.default,{ajaxOperations:{load:{type:"get",url:"/api/classes/groups"},save:{type:"put",url:"/api/classes/groups"}}}))},K=(0,O.default)((0,D.DragSource)(I.DRAG_ITEM_TYPES.CLASS,{beginDrag:function(e){return{id:e.id,weight:e.weight,courseId:e.courseId,onDrop:e.onDrop}}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}),(0,D.DropTarget)(I.DRAG_ITEM_TYPES.CLASS,{drop:function(e,t){var n=t.getItem();e.id!=n.id&&n.onDrop(n,e)},canDrop:function(e,t){return t.getItem().courseId==e.courseId}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}}))(function(e){var t=e.id,n=e.isOdd,a=e.disabled,r=e.classTime,o=e.courseTitle,l=e.branch,i=e.regOpen,s=e.maleStudents,u=e.femaleStudents,c=e.textStyle,d=e.checked,f=e.isDragging,p=e.isOver,m=e.canDrop,y=e.connectDragPreview,g=e.connectDropTarget,E=e.connectDragSource,b=e.toggleReg,_=(e.goToClassAttendance,e.onClassCheck),w={alignSelf:"middle",width:"8px"};return y(g(h.default.createElement("div",{style:{minHeight:"58px",display:"flex",justifyContent:"center",opacity:f?"0.5":"1",backgroundColor:p?m?"#7CE27C":"#F5A6A6":n?"#ededed":""}},h.default.createElement("div",{style:{display:"flex",justifyContent:"center",width:"30px",paddinLeft:10}},h.default.createElement("input",{style:{alignSelf:"center"},type:"checkbox",disabled:a,onChange:function(e){return _(t,e.target.checked)},checked:d})),h.default.createElement("div",{style:{display:"inline-block",width:"3%",cursor:"move",textAlign:"center",alignSelf:"center"}},E(h.default.createElement("img",{src:"src/images/move_icon2.png",alt:"",width:"20px"}))),h.default.createElement("div",{style:A(c,{width:"25%",alignSelf:"center"})},r," (Male:",s," Female:",u,")"),h.default.createElement("div",{style:A(c,{width:"20%",alignSelf:"center"})},o),h.default.createElement("div",{style:A(c,{width:"15%",alignSelf:"center"})},l),h.default.createElement("div",{style:A(c,{width:"10%",alignSelf:"center",display:"flex",justifyContent:"center"})},h.default.createElement(v.Button,{onClick:function(){return b(t,i)},style:{width:"70px",alignSelf:"center",textTransform:"uppercase"},bsStyle:"yes"==i?"success":"danger"},i)),h.default.createElement("div",{style:{width:"26%",textAlign:"center",display:"flex",justifyContent:"center"}},h.default.createElement("p",{style:{margin:"10px"}},h.default.createElement(C.Link,{to:"/classes/"+t,style:{verticalAlign:"middle"}},"Detail"),h.default.createElement("span",{style:w}," | "),h.default.createElement(C.Link,{to:"/classes/"+t+"/students/",target:"_blank",style:{verticalAlign:"middle"}},"Results"),h.default.createElement("span",{style:w}," | "),h.default.createElement(C.Link,{to:"/classes/"+t+"/students?tab=Attendance+records",target:"_blank",style:{cursor:"pointer",verticalAlign:"middle"}},"Attendance"),h.default.createElement("span",{style:w}," | "),h.default.createElement(C.Link,{to:"/classes/"+t+"/print/weekend-registers",target:"_blank"},"Weekend Registers"),h.default.createElement("span",{style:w}," | "),h.default.createElement(C.Link,{to:"/classes/"+t+"/print/weekday-registers",target:"_blank"},"Weekday"),h.default.createElement("span",{style:w}," | "),h.default.createElement(C.Link,{to:"/classes/"+t+"/print/adults",target:"_blank"},"Adults"),h.default.createElement("span",{style:w}," | "),h.default.createElement(C.Link,{to:"/classes/"+t+"/print/address-labels",target:"_blank"},"Address"),h.default.createElement("span",{style:w}," | "),h.default.createElement(C.Link,{to:"/classes/"+t+"/print/phone-numbers",target:"_blank"},"Telephone"))))))})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(15)),f=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:null},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(e){var t=this;e||(e=this.props);var n=e.id;n&&(this.loadP&&this.loadP.cancel(),this.loadP=d.default.ajax({type:"get",url:"/api/terms/"+n}),this.loadP.then(function(e){return t.setState({data:e})},function(e){return console.error(e)}))}},{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillReceiveProps",value:function(e){this.load(e)}},{key:"render",value:function(){if(!this.state.data)return c.default.createElement("p",null);var e=this.state.data,t=e.name,n=e.term,a=e.year;return c.default.createElement("p",null,"Active Term: ",t," (term ",n," ",a,")")}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(23)),d=n(0),f=a(d),p=a(n(47)),h=n(9),m=a(n(15)),v=a(n(16)),y=a(n(77)),g=(a(n(31)),a(n(290))),E=n(6),b=n(12),_=a(n(36)),C=a(n(29)),w=n(18),k=a(n(1202)),S=(a(n(134)),a(n(11))),x=a(n(43)),T=a(n(19)),P={backButton:{float:"right",marginTop:20,marginBottom:20,marginRight:20},formCol:{marginBottom:15},addStudentExamResult:{marginBottom:10},sendEmailButton:{marginTop:25,marginBottom:15}};window.innerWidth<768?P={backButton:{marginTop:10,marginBottom:10},formCol:{marginBottom:15},addStudentExamResult:{marginBottom:10,width:"100%"},sendEmailButton:{width:"100%",marginTop:15,marginBottom:15}}:window.innerWidth<1025&&(P=(0,c.default)({},P,{addStudentExamResult:{width:"100%",marginBottom:10},sendEmailButton:{width:"100%",marginTop:15,marginBottom:15}}));var R=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={isLoading:!1,classObj:{},showSendEmailWindow:!1},i.allowedRoles=[h.ROLES.SUPER_ADMIN,h.ROLES.ADMIN,h.ROLES.REGISTRAR],i.headerTypes=(a={},(0,r.default)(a,h.ROLES.SUPER_ADMIN,p.default),(0,r.default)(a,h.ROLES.ADMIN,p.default),a),i.promises={save:null,load:null},i.requestFields=["id","teacher.userFullname","classroom.classroomName","teacherId","courseId","classroomId","courseClassTermId","term.name","classTime","courseClassCapacity","courseClassRegistrationOpen","classDescription","classGender","submitted","course.id","feeForEmployed","feeForUnemployed","course.feeForEmployed","course.feeForUnemployed","course.deptId","course.dept.deptName","course.dept.deptBranchId","course.dept.branchAssociated.branchName","course.courseTitle","classWeight","classDescription","classKey","classKeyCode","classGroupId","submitted","receiptEmailBody","receiptEmailSubject","receiptTemplate"],i.goToExamResults=i.goToExamResults.bind(i),i.onFieldChange=i.onFieldChange.bind(i),i.onChange=i.onChange.bind(i),i.onTextChange=i.onTextChange.bind(i),i.onDeptChange=i.onDeptChange.bind(i),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"goToExamResults",value:function(){var e=this.props.params.id;this.context.router.push("/classes/"+e+"/students")}},{key:"load",value:function(){var e=this,t=this.props.params.id;t&&(this.setState({isLoading:!0}),this.promises.load=m.default.ajax({type:"get",url:"/api/classes/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){var n=function(e){return!e||0===e.length},a=n(t.receiptEmail)&&n(t.receiptEmailSubject)&&n(t.receiptTemplate);e.setState({isLoading:!1,classObj:t,useDefaultReceipt:a.toString()}),$(function(){(0,x.default)("textarea")})},function(e){return console.log(e)}))}},{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return-1!==this.allowedRoles.indexOf(e)}},{key:"printRegisters",value:function(e){var t=this.state.classObj.id;this.context.router.push("/classes/"+t+"/print/"+e+"-registers")}},{key:"renderHeader",value:function(){var e=this,t=this.state.classObj,n=v.default.accessObjByPath(t,"course.courseTitle"),a=n&&n.length>0?"Class Detail for "+n:"Class Detail";return f.default.createElement("div",null,f.default.createElement("div",{id:"notifications"}),f.default.createElement("h2",{className:"block-heading"},a),f.default.createElement("div",{style:P.backButton},f.default.createElement(E.Button,{onClick:function(){return e.context.router.goBack()}},"Back")),f.default.createElement("hr",null))}},{key:"updateClassField",value:function(e,t,n,a){var o,l=this;void 0===n&&(n=!0),void 0===a&&(a=!0);var i=this.state.classObj;$.ajax({type:"put",url:"/api/classes/"+i.id,data:(o={},(0,r.default)(o,e,t),(0,r.default)(o,"requestFields",this.requestFields),o),success:function(e){n&&S.default.success("Class updated successfully"),a&&l.setState({classObj:e})},error:function(e){n&&S.default.error("Error updating class"),console.log(e)}})}},{key:"onFieldChange",value:function(e,t){var n=this.state.classObj;n[e]=t,this.setState({classObj:n}),this.updateClassField(e,t)}},{key:"clearReceiptOverride",value:function(){var e=this.state.classObj;e.receiptEmailBody=null,e.receiptEmailSubject=null,e.receiptTemplate=null,this.setState({classObj:e}),this.updateClassField("receiptEmailBody",null),this.updateClassField("receiptEmailSubject",null,!1)}},{key:"onChange",value:function(e){this.onFieldChange(e.target.name,e.target.value)}},{key:"onTextChange",value:function(e){var t=this,n=e.target,a=n.name,r=n.value,o=(0,c.default)({},this.state.classObj);o[a]=r,this.setState({classObj:o}),this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(function(){return t.updateClassField(a,r,!1,!1)},5e3)}},{key:"onDeptChange",value:function(e){var t=this,n=this.state,a=n.classObj,r=n.classObj.course;$.ajax({type:"post",url:"/api/courses/"+r.id,data:{data:{deptId:e.target.value},fields:["deptId","dept.deptName"]},success:function(e){r.deptId=e.deptId,r.dept.deptName=e.dept.deptName,a.course=r,t.setState({classObj:a}),S.default.success("Course dept changed")},error:function(e){S.default.error(e.responseText.replace(/"/g,""))}})}},{key:"renderDetail",value:function(){var e=this,t=this.state,n=t.classObj,a=t.useDefaultReceipt,r=this.context,o=r.branchId,l=r.website,i=v.default.getIfExists;return f.default.createElement("div",null,f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Dept"),f.default.createElement(b.EditableSourceSelected,{activeProps:{url:"/api/depts/list",params:{branchId:o},defaultOption:"Select dept",className:"form-control",id:"deptSelect",onChange:this.onDeptChange,name:"deptId",value:i(n,"course.deptId")},passiveProps:{value:i(n,"course.dept.deptName")}})),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Course"),f.default.createElement(b.EditableSourceSelected,{activeProps:{url:"/api/courses/list",params:{branchId:o},defaultOption:"Select course",className:"form-control",id:"courseSelect",onChange:this.onChange,name:"courseId",value:n.courseId},passiveProps:{value:i(n,"course.courseTitle")}})),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Teacher"),f.default.createElement(b.EditableSourceSelected,{activeProps:{url:"/api/users/"+h.ROLES.TEACHER+"/list",params:{gender:n.classGender},className:"form-control",id:"teacherSelect",onChange:this.onChange,name:"teacherId",value:n.teacherId},passiveProps:{value:i(n,"teacher.userFullname"),defaultValue:"teacher"}}))),f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Classroom"),f.default.createElement(b.EditableSourceSelected,{activeProps:{url:"/api/classrooms/list",params:{branchId:i(n,"course.dept.deptBranchId",null)},defaultOption:"Select classroom",className:"form-control",id:"classroomSelect",onChange:this.onChange,name:"classroomId",value:n.classroomId},passiveProps:{value:i(n,"classroom.classroomName"),defaultValue:"classroom"}})),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Term"),f.default.createElement(b.EditableSourceSelected,{activeProps:{url:"/api/terms/list",className:"form-control",id:"termSelect",onChange:this.onChange,name:"courseClassTermId",value:n.courseClassTermId},passiveProps:{value:i(n,"term.name"),defaultValue:"term"}})),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Class Time"),f.default.createElement(b.EditableValue,{value:n.classTime,onFieldChange:this.onFieldChange,noValueText:"class time"},f.default.createElement("input",{type:"text",className:"form-control",name:"classTime"})))),f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Gender"),f.default.createElement(b.EditableValue,{value:n.classGender,onFieldChange:this.onFieldChange},f.default.createElement("select",{className:"form-control",name:"classGender",id:"genderSelect"},f.default.createElement("option",{value:"male"},"Male"),f.default.createElement("option",{value:"female"},"Female"),f.default.createElement("option",{value:"both"},"Both")))),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(b.EditableValue,{label:"Fee For "+l.paymentField1,value:function(){var e=parseFloat(n.feeForEmployed);return(e>=0?e:parseFloat(i(n,"course.feeForEmployed",0))).toFixed(2)}(),onFieldChange:function(t,n){""==n&&(n=-1),e.onFieldChange(t,n)},enableExternalUpdates:!0},f.default.createElement("input",{type:"text",className:"form-control",name:"feeForEmployed"}))),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(b.EditableValue,{label:"Fee For "+l.paymentField2,value:function(){var e=parseFloat(n.feeForUnemployed);return(e>=0?e:parseFloat(i(n,"course.feeForUnemployed",0))).toFixed(2)}(),onFieldChange:function(t,n){""==n&&(n=-1),e.onFieldChange(t,n)},enableExternalUpdates:!0},f.default.createElement("input",{type:"text",className:"form-control",name:"feeForUnemployed"})))),f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Capacity"),f.default.createElement(b.EditableValue,{value:n.courseClassCapacity,onFieldChange:this.onFieldChange,noValueText:"capacity"},f.default.createElement("input",{type:"text",className:"form-control",name:"courseClassCapacity"}))),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Registration Is Open?"),f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"flex-start"}},f.default.createElement("input",{type:"radio",name:"courseClassRegistrationOpen",value:"yes",checked:"yes"==n.courseClassRegistrationOpen,onChange:this.onChange,style:{marginRight:"10px",marginTop:"0px",alignSelf:"center"}}),f.default.createElement("span",{style:{alignSelf:"center"}},"yes")),f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"flex-start",marginLeft:"15px"}},f.default.createElement("input",{type:"radio",name:"courseClassRegistrationOpen",value:"no",checked:"no"==n.courseClassRegistrationOpen,onChange:this.onChange,style:{marginRight:"10px",marginTop:"0px",alignSelf:"center"}}),f.default.createElement("span",{style:{alignSelf:"center"}},"no"))),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Class Weight"),f.default.createElement(b.EditableValue,{value:n.classWeight,onFieldChange:this.onFieldChange,noValueText:"weight"},f.default.createElement("input",{name:"classWeight",id:"classWeight",type:"text",className:"form-control"})))),f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(N,null,"Key"),f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"flex-start"}},f.default.createElement("input",{name:"classKey",id:"classKey",type:"radio",checked:"yes"==n.classKey,value:"yes",onChange:this.onChange,style:{alignSelf:"center"}}),f.default.createElement("span",{style:{alignSelf:"center"}},"Yes")),f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"flex-start",marginLeft:"15px"}},f.default.createElement("input",{name:"classKey",id:"classKey",type:"radio",checked:"no"==n.classKey,value:"no",onChange:this.onChange,style:{alignSelf:"center"}}),f.default.createElement("span",{style:{alignSelf:"center"}},"No"))),f.default.createElement(E.Col,{md:4,style:P.formCol},f.default.createElement(b.FormField,{label:"Key Code"},f.default.createElement(b.EditableValue,{value:n.classKeyCode,onFieldChange:this.onFieldChange},f.default.createElement("input",{name:"classKeyCode",id:"classKeyCode",type:"text",className:"form-control"}))))),f.default.createElement(E.Row,null,f.default.createElement(b.FormField,{width:12,label:"Description",style:P.formCol},f.default.createElement("textarea",{name:"classDescription",id:"classDescription",rows:"2",className:"form-control",value:n.classDescription,onChange:this.onTextChange}))),f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:3},f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"flex-start",marginBottom:15}},f.default.createElement(N,{style:{alignSelf:"center",margin:"0"}},"Use default receipt email"),f.default.createElement("input",{style:{marginLeft:"15px",alignSelf:"center"},type:"radio",name:"useDefaultReceipt",value:"true",checked:"true"==a,onChange:function(){e.clearReceiptOverride(),e.setState({useDefaultReceipt:"true"})}}))),f.default.createElement(E.Col,{md:3},f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"flex-start",marginBottom:15}},f.default.createElement(N,{style:{alignSelf:"center",margin:"0"}},"Override"),f.default.createElement("input",{style:{marginLeft:"15px",alignSelf:"center"},type:"radio",name:"useDefaultReceipt",checked:"false"==a,onChange:function(){return e.setState({useDefaultReceipt:"false"})}})))),f.default.createElement(E.Panel,{collapsible:!0,expanded:"false"==a,style:{padding:"0",border:"0"}},f.default.createElement(b.FormField,{width:12,style:{paddingLeft:"0"},label:"Email subject"},f.default.createElement(b.EditableValue,{enableExternalUpdates:!0,value:n.receiptEmailSubject,onFieldChange:this.onFieldChange},f.default.createElement("input",{type:"text",name:"receiptEmailSubject",className:"form-control"}))),f.default.createElement(b.FormField,{width:12,style:{paddingLeft:"0"},label:"Email body"},f.default.createElement(b.EditableValue,{enableExternalUpdates:!0,value:n.receiptEmailBody,onFieldChange:this.onFieldChange},f.default.createElement("textarea",{rows:"4",name:"receiptEmailBody",className:"form-control"})))),f.default.createElement(E.Row,null,f.default.createElement(b.FormField,{width:5,label:"Group"},f.default.createElement(_.default,{url:"/api/classes/groups/list",className:"form-control",name:"classGroupId",id:"classGroupId",value:n.classGroupId,onChange:this.onChange},f.default.createElement("option",{value:"0"},"None"))),f.default.createElement(E.Col,{md:6},f.default.createElement(E.Button,{style:P.sendEmailButton,onClick:function(){e.setState({showSendEmailWindow:!0})}},"Send Email to all students"))))}},{key:"renderControls",value:function(){this.state.classObj;var e={alignSelf:"center",marginLeft:"5px",marginRight:"5px",marginBottom:15},t={width:"310px"};window.innerWidth<768?(e={alignSelf:"center",marginBottom:15,width:"100%"},t={width:"100%"}):window.innerWidth<1025&&(e={alignSelf:"center",marginBottom:15,marginLeft:5,marginRight:5,minWidth:"calc(33% - 10px)"},t={width:"100%"});var n=this.state.classObj.id,a=function(n){var a=n.url,r=n.children;return f.default.createElement(w.Link,{to:a,target:"_blank",style:e},f.default.createElement(E.Button,{style:t,className:"custom"},r))};return f.default.createElement("div",null,f.default.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"}},f.default.createElement(a,{url:"/classes/"+n+"/print/weekend-registers"},"Weekend Registers"),f.default.createElement(a,{url:"/classes/"+n+"/print/weekday-registers"},"Weekday Registers"),f.default.createElement(a,{url:"/classes/"+n+"/print/adults"},"Adults Registers")),f.default.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"}},f.default.createElement(a,{url:"/classes/"+n+"/print/certificates"},"Print Certificates"),f.default.createElement(a,{url:"/classes/"+n+"/print/certificates-names-only"},"Print Certificates (Just Names)"),f.default.createElement(a,{url:"/classes/"+n+"/print/address-labels"},"Address Labels")),f.default.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"}},f.default.createElement(a,{url:"/classes/"+n+"/print/phone-numbers"},"Telephone"),f.default.createElement(a,{url:"/classes/"+n+"/print/address-labels-plus"},"Address Labels + Teacher and Course"),f.default.createElement(a,{url:"/classes/"+n+"/print/report"},"Report")))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.classObj,r=t.showSendEmailWindow;return!!this.isAllowed()&&(n?f.default.createElement("div",null,this.renderHeader(),f.default.createElement("div",null,f.default.createElement(T.default,null))):f.default.createElement("div",null,f.default.createElement(p.default,{selectedTab:"/classes"}),f.default.createElement("div",{className:"content-block"},this.renderHeader(),this.renderDetail()),f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"Exams"),f.default.createElement("hr",null),f.default.createElement(g.default,{classObj:a}),f.default.createElement(E.Button,{className:"custom btn-success",onClick:this.goToExamResults,style:P.addStudentExamResult},"Add student exam results")),f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"Class Registration List"),f.default.createElement("hr",null),f.default.createElement(O,{classId:a.id}),this.renderControls()),f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"Form Code"),f.default.createElement(I,{classObj:a})),f.default.createElement("div",{style:{display:r?"block":"none"}},f.default.createElement(k.default,{classId:a.id,onClose:function(){return e.setState({showSendEmailWindow:!1})}}))))}}]),t}(d.Component);t.default=R,R.propTypes={appTypeKey:d.PropTypes.string.isRequired,params:d.PropTypes.object.isRequired},R.contextTypes={router:d.PropTypes.object.isRequired,branchId:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.number]),website:d.PropTypes.object.isRequired};var O=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={selectedTab:0,isLoading:!0,students:null,totalCount:0},a.promise=null,a.page=1,a.rowsPerPage=100,a.requestFields=["id","studentId","registerDate","user.userFullname","user.age","studentStatus","regPaymentStatus","regStatus","feedback","score","gradeStatus","paypalTransactionId"],a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=(e.selectedTab,e.students),a=e.totalCount;return t?f.default.createElement("div",null,f.default.createElement(T.default,null)):f.default.createElement(D,{rows:n,totalCount:a})}},{key:"groupByRegStatus",value:function(e){var t={pending:[],active:[],waitingList:[]};return e.forEach(function(e){t[e.regStatus].push(e)}),t}},{key:"sortStudents",value:function(e){var t=v.default.getIfExists;return e.sort(function(e,n){return t(e,"user.userFullname","").toLowerCase()<t(n,"user.userFullname","").toLowerCase()?-1:1})}},{key:"load",value:function(){var e=this,t=this.props.classId;this.promise&&this.promise.cancel(),this.promise=m.default.ajax({type:"get",url:"/api/classes/"+t+"/students",data:{page:this.page,rowsPerPage:this.rowsPerPage,fields:this.requestFields}}),this.promise.then(function(t){e.setState({isLoading:!1,students:e.sortStudents(t.rows),totalCount:t.info.totalCount})},function(e){return console.log(e)})}}]),t}(d.Component);O.PropTypes={classId:d.PropTypes.number.isRequired};var D=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={rows:e.rows,checkedRows:[]},a.createRow=a.createRow.bind(a),a.createHead=a.createHead.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.rows,a=t.totalCount;return n&&0!=n.length?f.default.createElement("div",null,f.default.createElement("h3",null,"Total students : ",a),f.default.createElement(C.default,{data:n,showingProps:["registerDate","user.userFullname"],headers:["Registration Time","Student Name"],createHead:this.createHead,createRow:this.createRow,checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}})):f.default.createElement("p",null,"No students")}},{key:"createHead",value:function(e){var t=C.default.createHeadBase(e);return t.push(f.default.createElement("td",{key:"controls"})),t}},{key:"createRow",value:function(e,t){var n={margin:"0 10px 0 10px",alignSelf:"middle",width:"8px"},a=v.default.getIfExists;e.registerDate=e.registerDate.substr(0,10);var r=a(e,"user.age",null)?y.default.years(e.user.age):null,o=r?" ("+r+")":"",l=[];return l.push(f.default.createElement("td",null,f.default.createElement("p",null,e.registerDate))),l.push(f.default.createElement("td",null,f.default.createElement("p",null,a(e,"user.userFullname","")," ",o))),l.push(f.default.createElement("td",{key:"controls"},f.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},f.default.createElement(w.Link,{to:"/users/"+e.studentId},"Profile"),f.default.createElement("span",{style:n}," | "),f.default.createElement(w.Link,{to:"/students/"+e.id},"Edit"),f.default.createElement("span",{style:n}," | "),f.default.createElement(w.Link,{to:"/students/"+e.id+"/grades",style:{display:"inline-block",width:"90px"},target:"_blank"},"Grade : "+(e.score?e.score:"none")),f.default.createElement("span",{style:n}," | "),f.default.createElement(w.Link,{to:"/students/"+e.id+"/print-report",target:"_blank"},"Report"),f.default.createElement("span",{style:n}," | "),f.default.createElement(w.Link,{to:"/students/"+e.id+"/print-cert",target:"_blank"},"Print Cert"),e.transaction?f.default.createElement("span",null,f.default.createElement("span",{style:n}," | "),f.default.createElement(w.Link,{style:{width:"110px"},to:"/transactions/"+e.transaction.method+"/"+e.transaction.id},"Payment Detail")):f.default.createElement("span",null)))),l}}]),t}(d.Component);D.PropTypes={rows:d.PropTypes.arrayOf(d.PropTypes.object).isRequired};var N=function(e){var t=e.children,n=e.style;return f.default.createElement("p",{style:n,className:"detail-field-label"},t)},I=function(e){var t=e.classObj;return f.default.createElement("div",null,f.default.createElement("textarea",{className:"form-control",readOnly:!0,style:{fontSize:"10px",marginBottom:15},value:'<div class="">\n    <h2>'+t.course.dept.branchAssociated.branchName+'</h2>\n    <div class="">\n        <div class="">\n            <h3>'+t.course.courseTitle+'</h3>\n        </div>\n        <div class="">\n                <h3>'+t.classTime+'</h3>\n        </div>\n        <div class="">\n            <form method="post" id="register_online_form" class="register_form">\n                <input type="hidden" name="course_class_id" value="'+t.id+'">\n                <input type="hidden" name="student_status" value="unemployed">\n                <input type="hidden" name="reg_payment_method" value="paypal">\n                <input type="hidden" name="ajax" value="">\n                <input type="submit" class="button" value="'+t.course.courseTitle+'">\n            </form>\n        </div>\n    </div>\n</div>'}))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=n(6),h=a(n(14)),m=n(12),v=a(n(11)),y=a(n(43)),g=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.regStatuses=e.data,a.state={},a.close=a.close.bind(a),a.save=a.save.bind(a),a.onMessageContentChange=a.onMessageContentChange.bind(a),a.onChange=a.onChange.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"changeState",value:function(e,t){this.setState((0,o.default)({},e,t))}},{key:"clearState",value:function(){for(var e in this.state)this.setState((0,o.default)({},e,""))}},{key:"onChange",value:function(e){this.changeState(e.target.name,e.target.value)}},{key:"onMessageContentChange",value:function(e){this.setState({messageContent:e})}},{key:"close",value:function(){this.clearState(),this.props.onClose()}},{key:"save",value:function(){var e=this;(0,this.props.execute)("sendEmails",this.state,function(){v.default.success("All emails was sent"),e.close()},function(){v.default.error("Error sending emails"),e.close()})}},{key:"componentDidMount",value:function(){$(function(){(0,y.default)($("textarea"))})}},{key:"render",value:function(){var e=this.state,t=e.messageContent,n=e.subject;return f.default.createElement("div",{className:"static-modal modal-container"},f.default.createElement(p.Modal.Dialog,null,f.default.createElement(p.Modal.Header,null,f.default.createElement(p.Modal.Title,null,"Send email to all students")),f.default.createElement(p.Modal.Body,null,f.default.createElement(m.FormField,{width:12,label:"Subject"},f.default.createElement("input",{type:"text",name:"subject",className:"form-control",value:n,onChange:this.onChange})),f.default.createElement(m.FormField,{width:12,label:"Message content"},f.default.createElement("textarea",{name:"messageContent",rows:"4",className:"form-control",style:{resize:"vertical",maxHeight:"500px"},value:t,onChange:this.onChange}))),f.default.createElement(p.Modal.Footer,null,f.default.createElement(p.Button,{onClick:this.close},"Cancel"),f.default.createElement(p.Button,{onClick:this.save,bsStyle:"success"},"Save"))))}}]),t}(d.Component),E=(0,h.default)(g);t.default=function(e){return f.default.createElement(E,(0,r.default)({},e,{ajaxOperations:{sendEmails:{type:"post",url:"/api/classes/"+e.classId+"/send-email"}}}))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=n(9),h=a(n(15)),m=a(n(47)),v=n(12),y=a(n(22)),g=a(n(36)),E=(a(n(290)),a(n(1204)),n(6)),b=a(n(11)),_=a(n(269)),C=a(n(43)),w=a(n(19)),k=function(e){function t(e,n){var a;(0,i.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return r.state={isLoading:!1,classObj:{courseId:localStorage.getItem("targetCourseId"),teacherId:null,classroomId:null,courseClassTermId:null,classTime:"",courseClassCapacity:"0",courseClassRegistrationOpen:"yes",classWeight:"0",classDescription:"",classKey:"no",classKeyCode:"",classGroupId:null,classGender:"both",submitted:"0"}},r.allowedRoles=[p.ROLES.SUPER_ADMIN,p.ROLES.ADMIN],r.headerTypes=(a={},(0,o.default)(a,p.ROLES.SUPER_ADMIN,m.default),(0,o.default)(a,p.ROLES.ADMIN,m.default),a),r.promises={save:null,load:null},r.requestFields=["id","courseId","teacherId","classroomId","courseClassTermId","classTime","courseClassCapacity","courseClassRegistrationOpen","classWeight","classDescription","classKey","classKeyCode","classGroupId","classGender","submitted","receiptEmailBody","receiptEmailSubject","receiptTemplate"],r.handleFieldChange=r.handleFieldChange.bind(r),r.saveData=r.saveData.bind(r),localStorage.setItem("targetCourseId",null),r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"render",value:function(){var e=this.state,t=e.isLoading;return e.classObj,!!this.isAllowed()&&(t?f.default.createElement("div",null,this.showHeader(),f.default.createElement("div",null,f.default.createElement(w.default,null))):f.default.createElement("div",null,this.showHeader(),f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"New Class"),f.default.createElement("hr",null),this.renderClassEditForm())))}},{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return-1!==this.allowedRoles.indexOf(e)}},{key:"showHeader",value:function(){var e=this.props.appTypeKey;if(e in this.headerTypes)var t=this.headerTypes[e];return f.default.createElement("div",null,f.default.createElement(t,{selectedTab:"/classes"}))}},{key:"clearReceiptOverride",value:function(){var e=this.state.classObj;e.receiptEmailBody=null,e.receiptEmailSubject=null,e.receiptTemplate=null,this.setState({classObj:e})}},{key:"renderClassEditForm",value:function(){var e=this,t=this.state,n=t.classObj,a=t.useDefaultReceipt;return f.default.createElement("div",null,f.default.createElement("form",{id:"classEditForm",onSubmit:function(t){return e.submit(t)}},f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4},f.default.createElement(v.FormField,{label:"Course",width:12},f.default.createElement(g.default,{name:"courseId",id:"courseId",url:"/api/courses/list",className:"form-control",value:n.courseId,onChange:this.handleFieldChange},f.default.createElement("option",{value:"-1"},"-- Select Course --")))),f.default.createElement(E.Col,{md:4},f.default.createElement(v.FormField,{label:"Teacher",width:12},f.default.createElement(g.default,{name:"teacherId",id:"teacherId",url:"/api/users/"+p.ROLES.TEACHER+"/list",className:"form-control",value:n.teacherId,onChange:this.handleFieldChange},f.default.createElement("option",{value:"-1"},"-- Select Teacher --")))),f.default.createElement(E.Col,{md:4},f.default.createElement(v.FormField,{label:"Classroom",width:12},f.default.createElement(g.default,{name:"classroomId",id:"classroomId",url:"/api/classrooms/list",className:"form-control",value:n.classroomId,onChange:this.handleFieldChange},f.default.createElement("option",{value:"-1"},"-- Select Classroom --"))))),f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4},f.default.createElement(v.FormField,{label:"Term Name",width:12},f.default.createElement(g.default,{name:"courseClassTermId",id:"courseClassTermId",url:"/api/terms/list",className:"form-control",value:n.courseClassTermId,onChange:this.handleFieldChange},f.default.createElement("option",{value:"-1"},"-- Select Term --")))),f.default.createElement(E.Col,{md:4},f.default.createElement(v.FormField,{label:"Class Time",width:12},f.default.createElement("input",{type:"text",name:"classTime",id:"classTime",className:"form-control",value:n.classTime,onChange:this.handleFieldChange}))),f.default.createElement(E.Col,{md:4},f.default.createElement("p",{className:"detail-field-label"},"Gender"),f.default.createElement(v.FormField,{width:12},f.default.createElement("select",{className:"form-control",name:"classGender",id:"genderSelect",value:n.classGender,onChange:this.handleFieldChange},f.default.createElement("option",{value:"male"},"Male"),f.default.createElement("option",{value:"female"},"Female"),f.default.createElement("option",{value:"both"},"Both"))))),f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4},f.default.createElement(v.FormField,{width:12,label:"Class Capacity"},f.default.createElement("input",{name:"courseClassCapacity",id:"courseClassCapacity",className:"form-control",type:"text",value:n.courseClassCapacity,onChange:this.handleFieldChange}))),f.default.createElement(E.Col,{md:4},f.default.createElement("p",null,"Registration Is Open?"),f.default.createElement(v.FormField,{width:12},f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"center",marginRight:"15px"}},f.default.createElement("input",{name:"courseClassRegistrationOpen",id:"courseClassRegistrationOpen",type:"radio",checked:"yes"==n.courseClassRegistrationOpen,value:"yes",onChange:this.handleFieldChange,style:{alignSelf:"center"}}),f.default.createElement("span",{style:{alignSelf:"center"}},"Yes")),f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"center"}},f.default.createElement("input",{name:"courseClassRegistrationOpen",id:"courseClassRegistrationOpen",type:"radio",checked:"no"==n.courseClassRegistrationOpen,value:"no",onChange:this.handleFieldChange,style:{alignSelf:"center"}}),f.default.createElement("span",{style:{alignSelf:"center"}},"No")))),f.default.createElement(E.Col,{md:4},f.default.createElement(v.FormField,{width:12,label:"Class Weight"},f.default.createElement("input",{name:"classWeight",id:"classWeight",type:"text",className:"form-control",value:n.classWeight,onChange:this.handleFieldChange})))),f.default.createElement(E.Row,null,f.default.createElement(E.Col,{md:4},f.default.createElement("p",{className:"detail-field-label"},"Key"),f.default.createElement(v.FormField,{width:12},f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"center",marginRight:"15px"}},f.default.createElement("input",{name:"classKey",id:"classKey",type:"radio",checked:"yes"==n.classKey,value:"yes",onChange:this.handleFieldChange,style:{alignSelf:"center"}}),f.default.createElement("span",{style:{alignSelf:"center"}},"Yes")),f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"center"}},f.default.createElement("input",{name:"classKey",id:"classKey",type:"radio",checked:"no"==n.classKey,value:"no",onChange:this.handleFieldChange,style:{alignSelf:"center"}}),f.default.createElement("span",{style:{alignSelf:"center"}},"No")))),f.default.createElement(E.Col,{md:4},f.default.createElement(v.FormField,{width:12,label:"Key Code"},f.default.createElement("input",{name:"classKeyCode",id:"classKeyCode",type:"text",className:"form-control",value:n.classKeyCode,onChange:this.handleFieldChange})))),f.default.createElement(v.FormField,{width:12,label:"Description"},f.default.createElement("textarea",{name:"classDescription",id:"classDescription",className:"form-control",value:n.classDescription,onChange:this.handleFieldChange})),f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"flex-start",marginRight:"15px"}},f.default.createElement("p",{className:"detail-field-label",style:{alignSelf:"center",margin:"0"}},"Use default receipt email"),f.default.createElement("input",{style:{marginLeft:"15px",alignSelf:"center"},type:"radio",name:"useDefaultReceipt",value:"true",checked:"true"==a,onChange:function(){e.clearReceiptOverride(),e.setState({useDefaultReceipt:"true"})}})),f.default.createElement("div",{style:{display:"inline-flex",justifyContent:"flex-start",marginRight:"15px"}},f.default.createElement("p",{className:"detail-field-label",style:{alignSelf:"center",margin:"0"}},"Override"),f.default.createElement("input",{style:{marginLeft:"15px",alignSelf:"center"},type:"radio",name:"useDefaultReceipt",checked:"false"==a,onChange:function(){return e.setState({useDefaultReceipt:"false"})}})),f.default.createElement(E.Panel,{collapsible:!0,expanded:"false"==a,style:{border:"0"}},f.default.createElement(v.FormField,{width:12,label:"Email subject"},f.default.createElement("input",{type:"text",name:"receiptEmailSubject",value:n.receiptEmailSubject,className:"form-control",onChange:this.handleFieldChange})),f.default.createElement(v.FormField,{width:12,label:"Email body"},f.default.createElement("textarea",{name:"receiptEmailBody",value:n.receiptEmailBody,className:"form-control",onChange:this.handleFieldChange}))),f.default.createElement(v.FormField,{width:5,label:"Group"},f.default.createElement(g.default,{url:"/api/classes/groups/list",className:"form-control",name:"classGroupId",id:"classGroupId",value:n.classGroupId,onChange:this.handleFieldChange},f.default.createElement("option",{value:"0"},"None"))),f.default.createElement(y.default,null,f.default.createElement(E.Button,{className:"custom btn-success",type:"submit"},"Save"))))}},{key:"submit",value:function(e){e.preventDefault(),this.saveData()}},{key:"handleFieldChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.updateClassProp(n,a)}},{key:"updateClassProp",value:function(e,t){console.log(e),console.log(t);var n=(0,r.default)({},this.state.classObj);n[e]=t,this.setState({classObj:n})}},{key:"loadData",value:function(){var e=this,t=this.props.params.id;t?(this.setState({isLoading:!0}),this.promises.load=h.default.ajax({type:"get",url:"/api/classes/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){var n=function(e){return!e||0===e.length},a=n(t.receiptEmail)&&n(t.receiptEmailSubject)&&n(t.receiptTemplate);e.setState({isLoading:!1,classObj:t,useDefaultReceipt:a.toString()}),$(function(){(0,C.default)("textarea")})},function(e){return console.log(e)})):this.promises.activeTerm=_.default.getActive(function(t){e.updateClassProp("courseClassTermId",t.id)})}},{key:"saveData",value:function(){var e,t=this,n=this.props.params.id,a=this.state.classObj;e=n?{type:"put",url:"/api/classes/"+n,data:a}:{type:"post",url:"/api/classes",data:a},this.promises.save=h.default.ajax(e),this.promises.save.then(function(e){console.log(e),b.default.success("Saved successfully"),t.context.router.push("/courses/"+e.courseId+"/classes")},function(e){b.default.error("Save failed")})}}]),t}(d.Component);t.default=k,k.propTypes={appTypeKey:d.PropTypes.string.isRequired},k.contextTypes={router:d.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(36)),f=n(6),p=n(12),h=a(n(11)),m=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={feedbackCode:1,overwrite:!1},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.feedbackCode,a=t.overwrite;return c.default.createElement("div",null,c.default.createElement("h4",null,"Populate Exams"),c.default.createElement(p.FormField,{width:5,label:"Level"},c.default.createElement(d.default,{name:"feedbackLevel",id:"feedBackLevel",url:"/api/lookup/get-feedback-level",className:"form-control",value:n,onChange:function(t){return e.setState({feedbackCode:t.target.value})}})),c.default.createElement(p.FormField,{width:5,label:"Overwrite"},c.default.createElement("input",{style:{display:"block"},type:"checkbox",name:"overwrite",id:"overwrite",checked:a,onChange:function(t){return e.setState({overwrite:t.target.checked})}})),c.default.createElement(f.Button,{onClick:function(t){return e.populate()}},"Populate"))}},{key:"populate",value:function(){var e=this.props.classId,t=this.state,n=t.feedbackCode,a=t.overwrite;$.ajax({type:"post",url:"/api/exams/populate",data:{classId:e,feedbackCode:n,overwrite:a},success:function(e){h.default.success("Populated"),console.log(e)},error:function(e){h.default.error("Failed"),console.log(e)}})}}]),t}(u.Component);t.default=m,m.PropTypes={classId:u.PropTypes.number}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(444)),p=a(n(446)),h=n(6),m=n(9),v=a(n(47)),y=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={selectedTab:0},a.headerTypes=(0,r.default)({},m.ROLES.ADMIN,v.default),a.allowedRoles=[m.ROLES.ADMIN,m.ROLES.SUPER_ADMIN,m.ROLES.TEACHER,m.ROLES.REGISTRAR],a.appTypeKey=e.appTypeKey?e.appTypeKey:m.ROLES.SUPER_ADMIN,a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"isAllowed",value:function(){return this.allowedRoles.includes(this.appTypeKey)}},{key:"getSelectedTabFromQuery",value:function(){var e=this.props.location.query.tab;if(e){var t={"Exam results":0,"Attendance records":1};e in t&&this.setState({selectedTab:t[e]})}}},{key:"componentWillMount",value:function(){this.getSelectedTabFromQuery()}},{key:"renderHeader",value:function(){var e=this.props.appTypeKey;if(!(e in this.headerTypes))return!1;var t=this.headerTypes[e];return d.default.createElement("div",null,d.default.createElement(t,null))}},{key:"render",value:function(){var e=this;if(!this.isAllowed())return console.error("You are not allowed to view this page."),d.default.createElement("div",null,"You are not allowed to view this page.");var t=this.state.selectedTab,n=this.props.params.id;return d.default.createElement("div",{className:"admin"},this.renderHeader(),d.default.createElement(h.Tabs,{className:"content-tabs",activeKey:t,onSelect:function(t){return e.setState({selectedTab:t})}},d.default.createElement(h.Tab,{eventKey:0,title:"Exam results"},d.default.createElement(f.default,{id:n,appTypeKey:this.appTypeKey})),d.default.createElement(h.Tab,{eventKey:1,title:"Attendance records"},d.default.createElement(p.default,{id:n,appTypeKey:this.appTypeKey}))))}}]),t}(c.Component);t.default=y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=a(n(39)),f=n(0),p=a(f),h=a(n(14)),m=(a(n(28)),a(n(47)),n(9),n(12)),v=n(6),y=a(n(16)),g=a(n(11)),E=a(n(43));t.default=function(e){var t=e.params.id;return p.default.createElement(_,(0,d.default)({ajaxOperations:{load:{type:"get",url:"/api/classes/"+t,data:{fields:["course.courseTitle","classTime","teacher.userFullname","classWorks","studentsAttendance"]}},save:{type:"put",url:"/api/classes/"+t}},logEnabled:!0},e))};var b=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={data:e.data,date:(new Date).toJSON().slice(0,10),currentClassWork:{},attendanceEditMode:!1},a.onChange=a.onChange.bind(a),a.save=a.save.bind(a),a.goToAttendanceTable=a.goToAttendanceTable.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"onChange",value:function(e){for(var t=e.target,n=t.name,a=t.value,r=this.state.date,l=this.state,i=l.data,s=l.data.classWorks,u=this.props.params.id,c=!1,d=0;d<s.length;d++)if(s[d].date==r){s[d][n]=a,c=!0;break}if(!c){var f;s.push((f={date:r},(0,o.default)(f,n,a),(0,o.default)(f,"courseClassId",u),f))}console.log(i),this.setState({data:i})}},{key:"getCurrentClassWork",value:function(){for(var e=this.state,t=e.date,n=e.data.classWorks,a=0;a<n.length;a++)if(n[a].date==t)return n[a];return null}},{key:"save",value:function(){var e=this,t=this.state.data;(0,this.props.save)({classWorks:t.classWorks},function(n){t.classWorks=n.classWorks,e.setState({data:t})})}},{key:"renderClassTitle",value:function(){var e=this.state.data,t=y.default.getIfExists,n=t(e,"course.courseTitle",""),a=t(e,"classTime",""),r=t(e,"teacher.userFullname","");return p.default.createElement("div",null,p.default.createElement("h2",{className:"block-heading"},n+": "+a),p.default.createElement("br",null),p.default.createElement("h2",{className:"block-heading"},"Teacher: "+r),p.default.createElement("hr",null))}},{key:"goToAttendanceTable",value:function(){this.save();var e=this.props.params.id;this.context.router.push({pathname:"/classes/"+e+"/students",query:{tab:"Attendance records"}})}},{key:"renderForm",value:function(){var e=this,t=this.state,n=t.date,a=t.data.studentsAttendance,r=t.attendanceEditMode,o=this.getCurrentClassWork(),l=y.default.getIfExists;return r?p.default.createElement("div",null,p.default.createElement(C,{date:n,data:a,onListEndReach:this.goToAttendanceTable})):p.default.createElement("div",null,p.default.createElement(m.FormField,{width:12,label:"Work Covered"},p.default.createElement("textarea",{name:"doneWork",style:{height:"100px"},value:l(o,"doneWork",""),className:"form-control",onChange:this.onChange})),p.default.createElement(m.FormField,{width:12,label:"Homework"},p.default.createElement("textarea",{name:"homeWork",style:{height:"100px"},value:l(o,"homeWork",""),className:"form-control",onChange:this.onChange})),p.default.createElement(v.Button,{className:"custom btn-success",onClick:function(){return e.setState({attendanceEditMode:!0})}},"Next"))}},{key:"componentDidMount",value:function(){var e=this;m.DatePicker.init(function(t,n){var a=n.split("-"),r=[a[2],a[1],a[0]].join("-");e.setState((0,o.default)({},t,r))}),$(function(){(0,E.default)($("textarea"))})}},{key:"render",value:function(){var e=this.state,t=e.date,n=e.data;return n.studentsAttendance&&0!=n.studentsAttendance.length?p.default.createElement("div",{className:"admin"},p.default.createElement("div",{className:"content-block"},this.renderClassTitle(),p.default.createElement(m.FormField,{width:2},p.default.createElement("input",{name:"date",value:t,className:"form-control datepicker",onChange:this.onChange})),this.renderForm())):p.default.createElement("h2",null,"No students")}}]),t}(f.Component);b.contextTypes={router:f.PropTypes.object.isRequired};var _=(0,h.default)(b),C=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={data:e.data,currStudent:0},a.move=a.move.bind(a),a.onChange=a.onChange.bind(a),a.save=a.save.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"save",value:function(){var e=this,t=this.state,n=t.currStudent,a=t.data,r=a[n];if(!r||!r.isChanged)return!1;$.ajax({type:"put",url:"/api/students/"+r.id,data:{attendance:r.attendance},success:function(t){r.attendance=t.attendance,a[n]=r,e.setState({data:a})},error:function(e){g.default.error("Update failed"),console.error(e)}})}},{key:"getPos",value:function(e,t,n){return(e+=n)>=t?e-=t:e<0&&(e+=t),e}},{key:"move",value:function(e){this.save();var t=this.state,n=t.currStudent,a=t.data;this.setState({currStudent:this.getPos(n,a.length,e)})}},{key:"getCurrentAttendanceRecord",value:function(e){for(var t=this.props.date,n=e.attendance,a=0;a<n.length;a++)if(n[a].date==t)return n[a];return null}},{key:"changeField",value:function(e,t){var n=this.props.date,a=this.state.currStudent,r=this.state.data,o=r[a];if(!o)return!1;for(var l=!1,i=o.attendance,s=0;s<i.length;s++)i[s].date==n&&(i[s][e]!==t&&(i[s][e]=t,o.isChanged=!0),l=!0);if(!l){var u={studentId:o.id,date:n,comment:"",late:"0",attendance:"absent"};u[e]=t,i.push(u),o.isChanged=!0}r[a]=o,this.setState({data:r})}},{key:"onChange",value:function(e){this.changeField(e.target.name,e.target.value)}},{key:"setAttendance",value:function(e){this.changeField("attendance",e?"present":"absent");var t=this.state,n=t.currStudent,a=t.data,r=this.props.onListEndReach;n+1>=a.length?(this.save(),r()):this.move(1)}},{key:"render",value:function(){var e=this,t=y.default.getIfExists,n=this.state,a=n.currStudent,o=n.data,l=o[a],i=this.getCurrentAttendanceRecord(l),s={width:"100px",height:"50px"};return l?p.default.createElement("div",null,p.default.createElement("div",{style:{marginBottom:"20px"}},p.default.createElement(v.Button,{className:"custom",onClick:function(){return e.move(-1)},style:{marginRight:"15px",minWidth:"100px"}},"Prev "+(this.getPos(a,o.length,-1)+1)+"/"+o.length),p.default.createElement(v.Button,{className:"custom",onClick:function(){return e.move(1)},style:{minWidth:"100px"}},"Next "+(this.getPos(a,o.length,1)+1)+"/"+o.length)),p.default.createElement("h2",null,l.user.userFullname),p.default.createElement(m.FormField,{width:12},p.default.createElement("textarea",{name:"comment",style:{height:"100px"},value:t(i,"comment",""),className:"form-control",onChange:this.onChange})),a+1>=o.length?p.default.createElement("p",null,"Last student"):"",p.default.createElement("div",{style:{marginTop:"20px"}},p.default.createElement(v.Button,{onClick:function(){return e.setAttendance(!1)},className:"custom btn-danger",style:(0,r.default)(s,{marginRight:"15px"})},"Absent"),p.default.createElement(v.Button,{onClick:function(){return e.setAttendance(!0)},className:"custom btn-green",style:s},"Present"))):p.default.createElement("h2",null,"No student data")}}]),t}(f.Component);C.ProTypes={date:f.PropTypes.string.isRequired,data:f.PropTypes.array.isRequired,onListEndReach:f.PropTypes.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=(a(u),a(n(110))),d=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.renderTemplatedComponent("ClassesAvailable")}}]),t}(u.Component);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(0,a(n(14)).default)(function(e){var t=e.data;return c.default.createElement("div",{style:{margin:"8px"},dangerouslySetInnerHTML:{__html:t}})}),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params,t=e.id,n=e.type;return c.default.createElement("div",null,c.default.createElement(d,{ajaxOperations:{load:{type:"get",url:"/api/classes/"+t+"/print/"+n}},logEnabled:!0}))}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(0,a(n(14)).default)(function(e){var t=e.data;return c.default.createElement("div",{style:{margin:"8px"},dangerouslySetInnerHTML:{__html:t}})}),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params.type,t=this.props.params.term,n=localStorage.getItem("printableClassIds");return n?(n=n.split(","),t?c.default.createElement("div",null,c.default.createElement(d,{ajaxOperations:{load:{type:"post",url:"/api/classes/print/"+t+"/"+e,data:{classIds:n}}},logEnabled:!0})):c.default.createElement("div",null,c.default.createElement(d,{ajaxOperations:{load:{type:"post",url:"/api/classes/print/"+e,data:{classIds:n}}},logEnabled:!0}))):c.default.createElement("p",null,"None of the classes has been selected for printing")}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(1211)),h=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,f.ROLES.SUPER_ADMIN,p.default),(0,r.default)(a,f.ROLES.ADMIN,p.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){if(this.props.appTypeKey in this.childTypes){var e=this.childTypes[this.props.appTypeKey],t=this.props.children?d.default.cloneElement(this.props.children,{appTypeKey:this.props.appTypeKey}):"";return d.default.createElement("div",null,d.default.createElement(e,null),t)}return this.context.router.push("/"),!1}}]),t}(c.Component);t.default=h,h.contextTypes={router:c.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(47)),f=a(n(29)),p=a(n(15)),h=a(n(60)),m=n(18),v=n(6),y=n(38),g=a(n(11)),E=a(n(44)),b=a(n(16)),_=a(n(19)),C={buttonWrapper:{marginLeft:-5,marginRight:-5},button:{marginLeft:5,marginRight:5,marginBottom:10}};window.innerWidth<768&&(C={button:{width:"100%",marginBottom:10}});var w=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(d.default,null),c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"All Depts"),c.default.createElement("hr",null),c.default.createElement("div",{id:"notifications"}),c.default.createElement(k,null)))}}]),t}(u.Component);t.default=w;var k=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,rows:null,totalCount:0,checkedRows:[]},a.rowsPerPage=20,a.page=1,a.promises={load:null},a.requestFields=["id","deptName","branchIdAssociate","branchAssociated.branchWeight","coursesCount","weight"],a.loadData=a.loadData.bind(a),a.deleteData=a.deleteData.bind(a),a.createRow=a.createRow.bind(a),a.createHead=a.createHead.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.loadData(this.props,this.context)}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"componentWillReceiveProps",value:function(e,t){this.context.branchId!=t.branchId&&this.loadData(e,t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.totalCount,a=t.showConfirmDelete;return c.default.createElement("div",null,this.renderTable(),c.default.createElement(h.default,{totalCount:n,rowsPerPage:this.rowsPerPage,currentPage:this.page,onPageChange:function(t){e.page=t,e.loadData()}}),c.default.createElement("div",{style:C.buttonWrapper},c.default.createElement(v.Button,{className:"custom",style:C.button,onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete selected"),c.default.createElement(y.LinkContainer,{to:{pathname:"/depts/add"},style:C.button},c.default.createElement(v.Button,{className:"custom btn-success"},"Add"))),c.default.createElement(E.default,{show:a,onConfirm:this.deleteData,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}},{key:"renderTable",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.rows;return n?c.default.createElement("div",null,c.default.createElement(_.default,null)):c.default.createElement("div",null,c.default.createElement(f.default,{data:a,showingProps:["deptName","branchIdAssociate"],headers:["Name","Branch"],createHead:this.createHead,createRow:this.createRow,checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})},checkableRowCondition:function(e){return 0===e.coursesCount}}))}},{key:"sort",value:function(e){return e.sort(function(e,t){var n=parseInt(b.default.getIfExists(e,"branchAssociated.branchWeight",0)),a=parseInt(b.default.getIfExists(t,"branchAssociated.branchWeight",0));return n<a?-1:n>a?1:parseInt(e.weight)<parseInt(t.weight)?-1:1})}},{key:"loadData",value:function(e,t){var n=this;t||(t=this.context),this.setState({isLoading:!0});var a={rowsPerPage:this.rowsPerPage,page:this.page,fields:this.requestFields,branchId:t.branchId};this.promises.load&&this.promises.load.cancel(),this.promises.load=p.default.ajax({type:"get",url:"/api/depts",data:a}),this.promises.load.then(function(e){return n.setState({isLoading:!1,rows:n.sort(e.rows),totalCount:e.info.totalCount})},function(e){return console.log(e)})}},{key:"deleteData",value:function(e){var t=this.state,n=t.rows,a=t.checkedRows;n=n.filter(function(e){return-1===a.indexOf(e.id.toString())}),this.setState({rows:n,checkedRows:[]}),$.ajax({type:"delete",url:"/api/depts",data:{ids:a,reason:e},success:function(){return g.default.success("Deleted successfully")},error:function(){return g.default.error("Deletion failed")}})}},{key:"createHead",value:function(e){var t=f.default.createHeadBase(e);return t.push(c.default.createElement("td",{key:"controls"})),t}},{key:"createRow",value:function(e,t){var n=f.default.createRowBase(e,t);return n[0]=c.default.createElement("td",{key:"deptName"},c.default.createElement(m.Link,{to:"/courses/dept/"+e.id},e.deptName)),n.push(c.default.createElement("td",{key:"controls"},c.default.createElement(m.Link,{to:"/depts/"+e.id+"/edit"},"Edit"))),n}}]),t}(u.Component);k.contextTypes={branchId:u.PropTypes.oneOfType([u.PropTypes.number,u.PropTypes.string])}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(47)),h=a(n(15)),m=n(12),v=a(n(36)),y=a(n(22)),g=a(n(11)),E=n(6),b=a(n(19)),_=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={isLoading:!1,deptObj:{deptName:"",weight:0,deptBranchId:null}},i.allowedRoles=[f.ROLES.SUPER_ADMIN,f.ROLES.ADMIN],i.headerTypes=(a={},(0,r.default)(a,f.ROLES.SUPER_ADMIN,p.default),(0,r.default)(a,f.ROLES.ADMIN,p.default),a),i.requestFields=["deptName","weight","deptBranchId"],i.promises={load:null,save:null},i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderHeader(),d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Dept edit"),d.default.createElement("hr",null),this.renderForm()))}},{key:"renderHeader",value:function(){var e=this.props.appTypeKey;if(e in this.headerTypes)var t=this.headerTypes[e];return d.default.createElement("div",null,d.default.createElement(t,{selectedTab:"/depts"}))}},{key:"renderForm",value:function(){var e=this,t=this.state.deptObj;return this.state.isLoading?d.default.createElement("div",null,d.default.createElement(b.default,null)):d.default.createElement("div",null,d.default.createElement("form",{onSubmit:function(t){return e.submit(t)}},d.default.createElement(E.Row,null,d.default.createElement(m.FormField,{label:"Name",width:5},d.default.createElement("input",{type:"text",name:"deptName",id:"deptName",className:"form-control",value:t.deptName,onChange:function(t){return e.handleFieldChange(t)}})),d.default.createElement(m.FormField,{label:"Weight",width:5},d.default.createElement("input",{type:"text",name:"weight",id:"weight",className:"form-control",value:t.weight,onChange:function(t){return e.handleFieldChange(t)}})),d.default.createElement(m.FormField,{label:"Branch",width:5},d.default.createElement(v.default,{name:"deptBranchId",id:"deptBranchId",url:"/api/dept-branches/list",className:"form-control",value:t.deptBranchId,onChange:function(t){return e.handleFieldChange(t)},onLoad:function(n){n&&0!==n.length&&(t.deptBranchId||(t.deptBranchId=n[0].value,e.setState({deptObj:t})))}},d.default.createElement("option",{value:"-1"},"-- Select Branch --")))),d.default.createElement(y.default,null,d.default.createElement(E.Button,{className:"custom btn-success",type:"submit"},"Save"))))}},{key:"handleFieldChange",value:function(e){var t=this.state.deptObj;t[e.target.name]=e.target.value,this.setState({deptObj:t})}},{key:"submit",value:function(e){e.preventDefault(),this.save()}},{key:"load",value:function(){var e=this,t=this.props.params.id;t&&(this.setState({isLoading:!0}),this.promises.load=h.default.ajax({type:"get",url:"/api/depts/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){return e.setState({isLoading:!1,deptObj:t})},function(e){return console.log(e)}))}},{key:"save",value:function(){var e,t=this,n=this.props.params.id,a=this.state.deptObj;e=n?{type:"put",url:"/api/depts/"+n,data:a}:{type:"post",url:"/api/depts",data:a},this.promises.save=h.default.ajax(e),this.promises.save.then(function(e){g.default.success("Saved successfully"),t.context.router.push("/depts"),console.log(e)},function(e){g.default.error("Save failed"),console.log(e.responseText)})}}]),t}(c.Component);t.default=_,_.PropTypes={appTypeKey:c.PropTypes.string.isRequired},_.contextTypes={router:c.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=n(9),f=a(n(1214)),p=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,d.ROLES.SUPER_ADMIN,f.default),(0,r.default)(a,d.ROLES.ADMIN,f.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){if(this.props.appTypeKey in this.childTypes){var e=this.childTypes[this.props.appTypeKey],t=this.props.children?c.default.cloneElement(this.props.children,{appTypeKey:this.props.appTypeKey}):"";return c.default.createElement("div",null,c.default.createElement(e,null),t)}return!1}}]),t}(c.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(47)),f=a(n(29)),p=a(n(15)),h=(a(n(60)),n(18)),m=n(6),v=n(38),y=a(n(11)),g=a(n(44)),E=a(n(19)),b={buttonWrapper:{marginLeft:-5,marginRight:-5},button:{marginLeft:5,marginRight:5,marginBottom:10}};window.innerWidth<768&&(b={button:{width:"100%",marginBottom:10}});var _=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(d.default,null),c.default.createElement("div",{id:"notifications"}),c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Classrooms"),c.default.createElement("hr",null),c.default.createElement(C,null)))}}]),t}(u.Component);t.default=_;var C=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,rows:null,checkedRows:[]},a.promises={load:null},a.requestFields=["id","classroomName","city.name","branchName"],a.deleteData=a.deleteData.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.loadData(this.props,this.context)}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"componentWillReceiveProps",value:function(e,t){this.loadData(e,t)}},{key:"render",value:function(){var e=this,t=this.state.showConfirmDelete;return c.default.createElement("div",null,this.renderTable(),c.default.createElement("div",{style:b.buttonWrapper},c.default.createElement(m.Button,{className:"custom",style:b.button,onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete selected"),c.default.createElement(v.LinkContainer,{to:{pathname:"/classrooms/add"},style:b.button},c.default.createElement(m.Button,{className:"custom btn-success"},"Add"))),c.default.createElement(g.default,{show:t,onConfirm:this.deleteData,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}},{key:"renderTable",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.rows;return n?c.default.createElement("div",null,c.default.createElement(E.default,null)):0===a.length?c.default.createElement("div",null,"No data."):c.default.createElement("div",null,c.default.createElement(f.default,{data:a,showingProps:["classroomName","city.name","branchName"],headers:["Classroom name","City name","Branch Name"],createHead:function(t){return e.createHead(t)},createRow:function(t,n){return e.createRow(t,n)},checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}}))}},{key:"loadData",value:function(e,t){var n=this;this.setState({isLoading:!0});var a={fields:this.requestFields,branchId:t.branchId};this.promises.load&&this.promises.load.cancel(),this.promises.load=p.default.ajax({type:"get",url:"/api/classrooms",data:a}),this.promises.load.then(function(e){return n.setState({isLoading:!1,rows:e})},function(e){return console.log(e)})}},{key:"deleteData",value:function(e){var t=this.state,n=t.rows,a=t.checkedRows;n=n.filter(function(e){return-1===a.indexOf(e.id.toString())}),this.setState({rows:n,checkedRows:[]}),$.ajax({type:"delete",url:"/api/classrooms",data:{ids:a,reason:e},success:function(){return y.default.success("Deleted successfully")},error:function(){return y.default.success("Deletion failed")}})}},{key:"createHead",value:function(e){var t=f.default.createHeadBase(e);return t.push(c.default.createElement("td",{key:"controls"})),t}},{key:"createRow",value:function(e,t){var n=f.default.createRowBase(e,t);return n[0]=c.default.createElement("td",{key:"classroomName"},c.default.createElement(h.Link,{to:"/courses/"+e.id},e.classroomName)),n.push(c.default.createElement("td",{key:"controls"},c.default.createElement(h.Link,{to:"/classrooms/"+e.id+"/edit"},"Edit"))),n}}]),t}(u.Component);C.contextTypes={branchId:u.PropTypes.oneOfType([u.PropTypes.number,u.PropTypes.string])}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(47)),h=a(n(15)),m=n(12),v=a(n(36)),y=a(n(22)),g=n(6),E=a(n(11)),b=a(n(19)),_=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={isLoading:!1,classroomObj:{classroomName:"",branchId:null}},i.allowedRoles=[f.ROLES.SUPER_ADMIN,f.ROLES.ADMIN],i.headerTypes=(a={},(0,r.default)(a,f.ROLES.SUPER_ADMIN,p.default),(0,r.default)(a,f.ROLES.ADMIN,p.default),a),i.requestFields=["classroomName","branchId"],i.promises={load:null,save:null},i.submit=i.submit.bind(i),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderHeader(),d.default.createElement("div",{id:"notifications"}),d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Classroom edit"),d.default.createElement("hr",null),this.renderForm()))}},{key:"renderHeader",value:function(){var e=this.props.appTypeKey;if(e in this.headerTypes)var t=this.headerTypes[e];return d.default.createElement("div",null,d.default.createElement(t,{selectedTab:"/classrooms"}))}},{key:"renderForm",value:function(){var e=this,t=this.state,n=t.classroomObj;return t.isLoading?d.default.createElement("div",null,d.default.createElement(b.default,null)):d.default.createElement("div",null,d.default.createElement("form",{onSubmit:this.submit},d.default.createElement(g.Row,null,d.default.createElement(m.FormField,{label:"Classroom Name",width:5},d.default.createElement("input",{type:"text",name:"classroomName",id:"classroomName",className:"form-control",value:n.classroomName,onChange:function(t){return e.handleFieldChange(t)}})),d.default.createElement(m.FormField,{label:"Branch Name",width:5},d.default.createElement(v.default,{name:"branchId",id:"branchId",url:"/api/dept-branches/list",className:"form-control",value:n.branchId,onChange:function(t){return e.handleFieldChange(t)}},d.default.createElement("option",{value:"-1"},"-- Select Branch --")))),d.default.createElement(y.default,null,d.default.createElement(g.Button,{className:"custom btn-success",type:"submit"},"Save"))))}},{key:"handleFieldChange",value:function(e){var t=this.state.classroomObj;t[e.target.name]=e.target.value,this.setState({classroomObj:t})}},{key:"submit",value:function(e){e.preventDefault(),this.save()}},{key:"load",value:function(){var e=this,t=this.props.params.id;t&&(this.setState({isLoading:!0}),this.promises.load=h.default.ajax({type:"get",url:"/api/classrooms/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){return e.setState({isLoading:!1,classroomObj:t})},function(e){return console.log(e)}))}},{key:"save",value:function(){var e,t=this.props.params.id,n=this.state.classroomObj,a=this.context.router;e=t?{type:"put",url:"/api/classrooms/"+t,data:n}:{type:"post",url:"/api/classrooms",data:n},this.promises.save=h.default.ajax(e),this.promises.save.then(function(e){E.default.success("Saved successfully"),a.push("/classrooms")},function(e){E.default.success("Save failed"),console.log(e.responseText)})}}]),t}(c.Component);t.default=_,_.propTypes={appTypeKey:c.PropTypes.string.isRequired},_.contextTypes={router:c.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=n(9),f=a(n(1217)),p=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={childTypeKey:null},a.childTypes=(0,r.default)({},d.ROLES.ADMIN,f.default),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){if(this.props.appTypeKey in this.childTypes){var e=this.childTypes[this.props.appTypeKey],t=this.props.children?c.default.cloneElement(this.props.children,{appTypeKey:this.props.appTypeKey}):"";return c.default.createElement("div",null,c.default.createElement(e,null),t)}return!1}}]),t}(c.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=a(n(47)),d=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement(c.default,null),u.default.createElement("h3",null,"Attendance"))}}]),t}(u.default.Component);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=n(9),f=a(n(1219)),p=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,d.ROLES.SUPER_ADMIN,f.default),(0,r.default)(a,d.ROLES.ADMIN,f.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){if(this.props.appTypeKey in this.childTypes){var e=this.childTypes[this.props.appTypeKey],t=this.props.children?c.default.cloneElement(this.props.children,{appTypeKey:this.props.appTypeKey}):"";return c.default.createElement("div",null,c.default.createElement(e,null),t)}return!1}}]),t}(c.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(59)),o=a(n(23)),l=a(n(50)),i=a(n(3)),s=a(n(1)),u=a(n(2)),c=a(n(4)),d=a(n(5)),f=n(0),p=a(f),h=a(n(47)),m=a(n(29)),v=a(n(15)),y=a(n(60)),g=n(18),E=n(6),b=(n(38),n(12)),_=(a(n(22)),a(n(36))),C=a(n(19)),w={buttonFilter:{marginTop:24}};window.innerWidth<1024&&(w={buttonFilter:{width:"100%",marginBottom:20}});var k=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={filters:{}},a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.state.filters;return p.default.createElement("div",null,p.default.createElement(h.default,null),p.default.createElement("div",{className:"content-block"},p.default.createElement("h2",{className:"block-heading"},"Debtors"),p.default.createElement(S,{onSubmit:function(t){return e.setState({filters:t})}}),p.default.createElement(x,{filters:t}),p.default.createElement(P,{filters:t})))}}]),t}(p.default.Component);t.default=k;var S=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={filters:{deptBranchId:null,termId:null},termOptions:[],courseFilter:"",firstInstalment:"",secondInstalment:""},a.handleFieldChange=a.handleFieldChange.bind(a),a.submit=a.submit.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=this;$.ajax({type:"get",url:"/api/terms/list",success:function(t){for(var n=[],a=e.state.filters,r=0;r<t.length;r++)"1"==t[r].isActive&&(a.termId=t[r].value),n.push(t[r]);e.setState({termOptions:n,filters:a}),e.submitFilters(a)}})}},{key:"render",value:function(){var e=this.state,t=e.filters,n=e.termOptions;return p.default.createElement("div",{style:{marginBottom:"15px"}},p.default.createElement("h4",null,"Filters"),p.default.createElement("form",{onSubmit:this.submit,className:"row"},p.default.createElement(b.FormField,{width:5,label:"Branch"},p.default.createElement(_.default,{url:"/api/dept-branches/list",className:"form-control",name:"deptBranchId",id:"deptBranchId",value:t.deptBranchId,onChange:this.handleFieldChange},p.default.createElement("option",{value:"All"},"All branches"))),p.default.createElement(b.FormField,{width:5,label:"Term"},p.default.createElement("select",{className:"form-control",name:"termId",id:"termId",value:t.termId,onChange:this.handleFieldChange},n.map(function(e,t){return p.default.createElement("option",{key:t,value:e.value},e.label)}))),p.default.createElement(b.FormField,{width:5,label:"Courses"},p.default.createElement(_.default,{url:"/api/courses/list",params:{branchId:this.context.branchId},className:"form-control",name:"coursesFilter",id:"coursesFilter",value:t.courseSelect,onChange:this.handleFieldChange},p.default.createElement("option",{value:"All"},"All Courses"))),p.default.createElement(b.FormField,{width:5,label:"First instalment"},p.default.createElement("select",{className:"form-control",name:"firstInstalment",id:"firstInstalment",value:t.firstInstalment,onChange:this.handleFieldChange},p.default.createElement("option",{value:""},"Any"),p.default.createElement("option",{value:"notNull"},"Not 0"))),p.default.createElement(b.FormField,{width:5,label:"Second instalment"},p.default.createElement("select",{className:"form-control",name:"secondInstalment",id:"secondInstalment",value:t.secondInstalment,onChange:this.handleFieldChange},p.default.createElement("option",{value:""},"Any"),p.default.createElement("option",{value:"notNull"},"Not 0"))),p.default.createElement(E.Col,{md:5},p.default.createElement(E.Button,{className:"custom btn-success",type:"submit",style:w.buttonFilter},"Filter"))))}},{key:"submitFilters",value:function(e){this.props.onSubmit(e)}},{key:"submit",value:function(e){e&&e.preventDefault(),this.submitFilters(this.state.filters)}},{key:"handleFieldChange",value:function(e){var t=this.state.filters;t[e.target.name]=e.target.value,this.setState({filters:t})}}]),t}(f.Component);S.PropTypes={onSubmit:f.PropTypes.func.isRequired},S.contextTypes={branchId:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number])};var x=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={isLoading:!1,rows:null,info:{totalCount:0}},a.rowsPerPage=20,a.page=1,a.promises={load:null},a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.loadData(this.props)}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"componentWillReceiveProps",value:function(e){this.loadData(e)}},{key:"render",value:function(){var e=this,t=this.state.info;return p.default.createElement("div",null,this.renderTable(),p.default.createElement(y.default,{totalCount:t.totalCount,rowsPerPage:this.rowsPerPage,currentPage:this.page,onPageChange:function(t){e.page=t,e.loadData()}}))}},{key:"renderTable",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.rows;return n?p.default.createElement("div",null,p.default.createElement(C.default,null)):0==a.length?p.default.createElement("p",null,"No data."):p.default.createElement("div",null,p.default.createElement(m.default,{data:a,headers:["Student","Course Name","Paid","First instalment","Second instalment","Course Fee","Course Debt"],createRow:function(t){return e.createRow(t)}}))}},{key:"loadData",value:function(e){var t=this;if(e||(e=this.props),this.setState({isLoading:!0}),0!==(0,l.default)(e.filters).length){var n={rowsPerPage:this.rowsPerPage,page:this.page,filters:e.filters};this.promises.load&&this.promises.load.cancel(),this.promises.load=v.default.ajax({type:"get",url:"/api/students/debtors",data:n}),this.promises.load.then(function(e){t.setState({isLoading:!1,rows:e.rows,info:e.info})},function(e){return console.log(e)})}}},{key:"createRow",value:function(e){var t=parseFloat(e.paid),n=0;switch(e.status){case"employed":n=e.feeForEmployed;break;case"unemployed":n=e.feeForUnemployed;break;case"reduced":n=e.reducedFee}var a=Math.max(n/2-t,0),r=a>0?n/2:n-t,o=n-t,l=[];return l.push(p.default.createElement("td",{key:0},p.default.createElement(g.Link,{to:"/students/"+e.id},e.studentName))),l.push(p.default.createElement("td",{key:1},e.courseTitle)),l.push(p.default.createElement("td",{key:2},t)),l.push(p.default.createElement("td",{key:3},a)),l.push(p.default.createElement("td",{key:4},r)),l.push(p.default.createElement("td",{key:5},n)),l.push(p.default.createElement("td",{key:6},o)),l}}]),t}(f.Component);x.PropTypes={filters:f.PropTypes.object},x.defaultProps={filters:{}};var T={exportButtonWrapper:{display:"inline-block",alignSelf:"center",marginLeft:"15px",marginBottom:"15px"},exportButton:{width:"190px"}};window.innerWidth<768&&(T={exportButtonWrapper:{width:"100%",alignSelf:"center",marginBottom:"15px"},exportButton:{width:"100%"}});var P=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,u.default)(t,[{key:"renderExportBtn",value:function(e,t,n){var a=(0,o.default)({},this.props.filters);return t&&t.length>0&&(0,o.default)(a,{regPaymentMethod:t}),a=(0,r.default)(a),e+="/"+a,p.default.createElement(g.Link,{style:T.exportButtonWrapper,target:"_blank",to:e},p.default.createElement(E.Button,{className:"custom",style:T.exportButton},n))}},{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement(E.Row,null,p.default.createElement(E.Col,{md:12,style:{display:"flex",justifyContent:"center",flexWrap:"wrap"}},this.renderExportBtn("/students/print-debtors/addresses","","All address"),this.renderExportBtn("/students/print-debtors/list","","All list"),this.renderExportBtn("/students/print-debtors/addresses","active","Active address"),this.renderExportBtn("/students/print-debtors/list","active","Active list"),this.renderExportBtn("/students/print-debtors/addresses","payment_agreement","Agreement address"))),p.default.createElement(E.Row,null,p.default.createElement(E.Col,{md:12,style:{display:"flex",justifyContent:"center",flexWrap:"wrap"}},this.renderExportBtn("/students/print-debtors/list","payment_agreement","Agreement list"),this.renderExportBtn("/students/print-debtors/addresses","instalment","Instalment address"),this.renderExportBtn("/students/print-debtors/list","instalment","Instalment list"),this.renderExportBtn("/students/print-debtors/addresses","payment_agreement","Agreement address"),this.renderExportBtn("/students/print-debtors/list","payment_agreement","Agreement list"))),p.default.createElement(E.Row,null,p.default.createElement(E.Col,{md:10,mdOffset:1,style:{display:"flex",justifyContent:"center",flexWrap:"wrap"}},this.renderExportBtn("/students/print-debtors/addresses","no_response","No response address"),this.renderExportBtn("/students/print-debtors/list","no_response","No response list"),this.renderExportBtn("/students/print-debtors/addresses","withdrawn","Withdrawn address"),this.renderExportBtn("/students/print-debtors/list","withdrawn","Withdrawn list"))))}}]),t}(f.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=(n(18),n(9)),f=a(n(1221)),p=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,d.ROLES.SUPER_ADMIN,f.default),(0,r.default)(a,d.ROLES.ADMIN,f.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props.appTypeKey,t=this.props.children,n=function(){return c.default.createElement("div",null)};return e in this.childTypes&&(n=this.childTypes[e]),t=t?c.default.cloneElement(t,{appTypeKey:e}):"",c.default.createElement("div",null,c.default.createElement(n,null),c.default.createElement("div",{id:"notifications"}),t)}}]),t}(c.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(99)),f=n(38),p=n(6),h=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"admin-nav-secondary"},c.default.createElement("div",{className:"container"},c.default.createElement(d.default,{activeKey:0},[{label:"Student List",route:"/users/role/students"},{label:"Teacher List",route:"/users/role/teachers"},{label:"Teacher Payments",route:"/teachers-register"},{label:"Staff List",route:"/users/role/staff"},{label:"Reconcile List",route:"/users/reconcile"},{label:"Waiting List",route:"/users/waiting"}].map(function(e,t){return c.default.createElement(f.LinkContainer,{key:t,to:{pathname:e.route}},c.default.createElement(p.NavItem,{eventKey:t},e.label))}))))}}]),t}(u.Component);t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=a(n(1223)),d=a(n(1230)),f=a(n(1231)),p=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={childTypeKey:null},a.childTypes={students:c.default,teachers:d.default,staff:f.default},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params.role;if(e in this.childTypes){var t=this.childTypes[e];if(t.allowedRoles().includes(this.props.appTypeKey))return u.default.createElement("div",null,u.default.createElement(t,{appTypeKey:this.props.appTypeKey}))}return!1}}]),t}(u.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(1224)),h=a(n(1228)),m=(n(18),n(6),a(n(15))),v=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={filters:{},uniqueUsersCount:null},a.updateFilters=a.updateFilters.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.updateUniqueUsersCount()}},{key:"render",value:function(){var e=this.state.filters;return d.default.createElement("div",null,d.default.createElement("div",{id:"notifications"}),d.default.createElement("div",{className:"content-block"},d.default.createElement(p.default,{onSubmit:this.updateFilters})),d.default.createElement("div",{className:"content-block"},d.default.createElement(h.default,{filters:e,rowsPerPage:"150",id:"resultTable"})))}},{key:"updateFilters",value:function(e){this.setState({filters:e})}},{key:"updateUniqueUsersCount",value:function(e){var t=this;e||(e=this.state.filters?this.state.filters:{}),(e=(0,r.default)({},e)).countOnly=!0,this.promise=m.default.ajax({type:"get",url:"/api/users/search/students",data:e}),this.promise.then(function(e){return t.setState({uniqueUsersCount:e})})}}],[{key:"allowedRoles",value:function(){return[f.ROLES.SUPER_ADMIN,f.ROLES.ADMIN]}}]),t}(c.Component);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(22)),p=a(n(36)),h=a(n(71)),m=a(n(291)),v=a(n(1225)),y=a(n(269)),g=a(n(137)),E=n(12),b=a(n(1227)),_={mergeBranchWrapper:{marginLeft:"20px",display:"inline-block"}};window.innerWidth<768&&(_={});var C=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={filters:{genderSelect:"All",coursesCount:"",postcodeBeginning:"",city:"",advancedSearch:!1,fromTerm:"All",ageFrom:4,departmentsMode:"include",departmentsSelect:[],courseSelect:null,courseClassSelect:null,invoiceId:"",transactionBetweenStart:"",transactionBetweenEnd:"",gradeBetweenStart:"",gradeBetweenEnd:"",currentTermActivePaid:!1,notCurrentTermActivePaid:!1,paymentStatusSelect:"All",regStatusSelect:"All",paymentMethodSelect:"All",employmentTypeSelect:"All",amountBetweenStart:"",amountBetweenEnd:"",branches:[],linkedBranches:[],withCartItems:!1}},a.promises={},a.handleFieldChange=a.handleFieldChange.bind(a),a.submitFilters=a.submitFilters.bind(a),a.changeFilters=a.changeFilters.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"changeFilters",value:function(e,t){var n=this.state.filters;n[e]=t,this.setState({filters:n})}},{key:"updateDatePickers",value:function(){E.DatePicker.init(this.changeFilters)}},{key:"componentDidMount",value:function(){var e=this;(0,h.default)(function(){e.$advancedSearchObj=(0,h.default)("#onAdvancedSearch"),e.$departmentsSelect=(0,h.default)("#departmentsSelect"),e.$activePaidCheckBoxes=(0,h.default)('#activePaidCheckBoxes input[type="checkbox"]'),e.$regPaymentStatusesObj=(0,h.default)("#regPaymentStatuses")}),this.promises.activeTerm=y.default.getActive(function(t){var n=e.state.filters;n.fromTerm=t.id,e.setState({filters:n})}),this.updateDatePickers()}},{key:"componentDidUpdate",value:function(){this.updateDatePickers()}},{key:"componenWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"componentWillReceiveProps",value:function(e,t){if(this.context.branchId!=t.branchId){var n=this.state.filters;n.courseSelect=null,n.courseClassSelect=null,n.departmentsSelect=[],this.setState({filters:n})}}},{key:"render",value:function(){var e=this,t=this.context.branchId,n=this.state.filters;return c.default.createElement("div",null,c.default.createElement("h2",{className:"block-heading"},"Filters"),c.default.createElement("hr",null),c.default.createElement("form",{method:"post",id:"searchForm",onSubmit:this.submitFilters},c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"genderSelect"},"Gender"),c.default.createElement("select",{className:"form-control",name:"genderSelect",id:"genderSelect",value:this.state.filters.genderSelect,onChange:this.handleFieldChange},c.default.createElement("option",{value:"All"},"All"),c.default.createElement("option",{value:"Male"},"Male"),c.default.createElement("option",{value:"Female"},"Female"))),c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"coursesCount"},"Users with x number of courses"),c.default.createElement("input",{className:"form-control",type:"text",name:"coursesCount",id:"coursesCount",value:this.state.filters.coursesCount,onChange:this.handleFieldChange}))),c.default.createElement(d.Col,{md:5,mdOffset:2},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"age"},"User Age from ",n.ageFrom?n.ageFrom:4," to ",n.ageTo?n.ageTo:80),c.default.createElement("input",{type:"range",className:"form-control",id:"ageFrom",name:"ageFrom",min:4,max:80,value:n.ageFrom?n.ageFrom:4,onChange:this.handleFieldChange}),c.default.createElement("input",{type:"range",className:"form-control",id:"ageTo",name:"ageTo",min:4,max:80,value:n.ageTo?n.ageTo:80,onChange:this.handleFieldChange})))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"postcodeBeginning"},"Users with postcode beginning XXX"),c.default.createElement("input",{className:"form-control",type:"text",name:"postcodeBeginning",id:"postcodeBeginning",value:this.state.filters.postcodeBeginning,onChange:this.handleFieldChange}))),c.default.createElement(d.Col,{md:5,mdOffset:2},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"city"},"Users with town/city"),c.default.createElement("input",{className:"form-control",type:"text",name:"city",id:"city",value:this.state.filters.city,onChange:this.handleFieldChange})))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement(g.default,{name:"linkedBranhches",value:this.state.filters.linkedBranches,label:"Students profile linked to branch",onChange:function(t){return e.handleFieldChange(t,"select")}})))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"advancedSearch",style:{marginRight:8,marginTop:2,verticalAlign:"top"}},"Show Grade/Courses"),c.default.createElement("input",{type:"checkbox",id:"advancedSearch",name:"advancedSearch",value:this.state.filters.advancedSearch,onChange:function(t){e.handleFieldChange(t),e.$advancedSearchObj.slideToggle("slow")}})))),c.default.createElement("div",{id:"onAdvancedSearch",style:{display:"none"}},c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"fromTerm"},"From term"),c.default.createElement(p.default,{url:"/api/terms/list",className:"form-control",name:"fromTerm",id:"fromTerm",value:this.state.filters.fromTerm,onChange:this.handleFieldChange},c.default.createElement("option",{value:"All"},"All terms"))))),c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"includeDepartments",style:{marginRight:"5px"}},"Include these departments"),c.default.createElement("input",{type:"radio",name:"departmentsMode",id:"includeDepartments",value:"include",checked:"include"===this.state.filters.departmentsMode,onChange:this.handleFieldChange,style:{marginRight:"15px"}}),c.default.createElement("label",{htmlFor:"excludeDepartments",style:{marginRight:"5px"}},"Exclude these departments"),c.default.createElement("input",{type:"radio",name:"departmentsMode",id:"excludeDepartments",value:"exclude",checked:"exclude"===this.state.filters.departmentsMode,onChange:this.handleFieldChange})),c.default.createElement(f.default,null,c.default.createElement(v.default,{url:"/api/depts/list",params:{branchId:t},id:"departmentsSelect",className:"list-box",selectedItemClass:"list-box-item-selected",onChange:this.handleListBoxSelectionChange.bind(this)})),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"courseSelect"},"Course"),c.default.createElement(p.default,{url:"/api/courses/list",params:{branchId:t},className:"form-control",name:"courseSelect",id:"courseSelect",value:this.state.filters.courseSelect,onChange:this.handleFieldChange},c.default.createElement("option",{value:"All"},"All Courses")))),c.default.createElement(d.Col,{md:5,mdOffset:2},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"courseClassSelect"},"Class"),c.default.createElement(p.default,{url:"/api/classes/list",params:{courseId:this.state.filters.courseSelect,termId:this.state.filters.fromTerm,branchId:t},className:"form-control",name:"courseClassSelect",id:"courseClassSelect",value:this.state.filters.courseClassSelect,onChange:this.handleFieldChange},c.default.createElement("option",{value:"All"},"All Classes"))))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"invoiceId"},"Transaction No Like"),c.default.createElement("input",{className:"form-control",type:"text",id:"invoiceId",name:"invoiceId",value:this.state.filters.invoiceId,onChange:this.handleFieldChange})))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:12},c.default.createElement("label",null,"Transaction between"))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("input",{className:"form-control datepicker",type:"text",id:"transactionBetweenStart",name:"transactionBetweenStart",value:this.state.filters.transactionBetweenStart,onChange:this.handleFieldChange}))),c.default.createElement(d.Col,{md:2},c.default.createElement(f.default,null,c.default.createElement("p",{className:"filter-form-centered-text"},"Until"))),c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("input",{className:"form-control datepicker",type:"text",id:"transactionBetweenEnd",name:"transactionBetweenEnd",value:this.state.filters.transactionBetweenEnd,onChange:this.handleFieldChange})))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:12},c.default.createElement("label",null,"Grade between"))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("input",{className:"form-control",type:"text",id:"gradeBetweenStart",name:"gradeBetweenStart",value:this.state.filters.gradeBetweenStart,onChange:this.handleFieldChange}))),c.default.createElement(d.Col,{md:2},c.default.createElement(f.default,null,c.default.createElement("p",{className:"filter-form-centered-text"},"Until"))),c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("input",{className:"form-control",type:"text",id:"gradeBetweenEnd",name:"gradeBetweenEnd",value:this.state.filters.gradeBetweenEnd,onChange:this.handleFieldChange})))),c.default.createElement(f.default,{id:"activePaidCheckBoxes"},c.default.createElement("label",{htmlFor:"currentTermActivePaid",style:{marginRight:"5px"}},"Who have courses in this term (active/paid)"),c.default.createElement("input",{type:"checkBox",name:"currentTermActivePaid",id:"currentTermActivePaid",value:this.state.filters.currentTermActivePaid,onChange:function(t){e.handleFieldChange(t),e.activePaidCheckBoxChanged(t)},style:{marginRight:"10px"}}),c.default.createElement("label",{htmlFor:"notCurrentTermActivePaid",style:{marginRight:"5px"}},"Who did not attend this term"),c.default.createElement("input",{type:"checkBox",name:"notCurrentTermActivePaid",id:"notCurrentTermActivePaid",value:this.state.filters.notCurrentTermActivePaid,onChange:function(t){e.handleFieldChange(t),e.activePaidCheckBoxChanged(t)}})),c.default.createElement("div",{id:"regPaymentStatuses"},c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"paymentStatusSelect"},"Payment Status"),c.default.createElement(p.default,{url:"/api/students/get-reg-payment-status-enum",className:"form-control",name:"paymentStatusSelect",id:"paymentStatusSelect",value:this.state.filters.paymentStatusSelect,onChange:this.handleFieldChange},c.default.createElement("option",{value:"All"},"All Statuses"))))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"regStatusSelect"},"Registration Status"),c.default.createElement(p.default,{url:"/api/students/get-reg-status-enum",className:"form-control",name:"regStatusSelect",id:"regStatusSelect",value:this.state.filters.regStatusSelect,onChange:this.handleFieldChange},c.default.createElement("option",{value:"All"},"All Statuses")))))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"paymentMethodSelect"},"Payment method"),c.default.createElement(p.default,{url:"/api/students/get-reg-payment-method-enum",className:"form-control",name:"paymentMethodSelect",id:"paymentMethodSelect",value:this.state.filters.paymentMethodSelect,onChange:this.handleFieldChange},c.default.createElement("option",{value:"All"},"All Methods"))))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"employmentTypeSelect"},"Employment Type"),c.default.createElement(p.default,{url:"/api/students/get-student-status-enum",className:"form-control",name:"employmentTypeSelect",id:"employmentTypeSelect",value:this.state.filters.employmentTypeSelect,onChange:this.handleFieldChange},c.default.createElement("option",{value:"All"},"All Types"))))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:12},c.default.createElement("label",null,"Amount Between"))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("input",{className:"form-control",type:"text",id:"amountBetweenStart",name:"amountBetweenStart",value:this.state.filters.amountBetweenStart,onChange:this.handleFieldChange}))),c.default.createElement(d.Col,{md:2},c.default.createElement(f.default,null,c.default.createElement("p",{className:"filter-form-centered-text"},"Until"))),c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("input",{className:"form-control",type:"text",id:"amountBetweenEnd",name:"amountBetweenEnd",value:this.state.filters.amountBetweenEnd,onChange:this.handleFieldChange})))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(g.default,{name:"branches",value:this.state.filters.branches,label:"From the following branches",onChange:function(t){return e.handleFieldChange(t,"select")}}))),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:5},c.default.createElement(f.default,null,c.default.createElement("label",{htmlFor:"withCartItems",style:{marginRight:"5px"}},"Show with items in cart"),c.default.createElement("input",{type:"checkbox",id:"withCartItems",name:"withCartItems",value:this.state.filters.withCartItems,onChange:this.handleFieldChange}))))),c.default.createElement(f.default,null,c.default.createElement(d.Button,{className:"custom",bsStyle:"success",type:"submit"},"Filter"),c.default.createElement("div",{style:_.mergeBranchWrapper},c.default.createElement(b.default,{filters:this.state.filters}))),c.default.createElement(f.default,null)))}},{key:"handleFieldChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=t||e.target.type;var n=this.state.filters,a=e.target.name;switch(t){case"multi-checkbox":a=a.replace(/\[]/g,""),e.target.checked?n[a]=n[a].concat(e.target.value):n[a]=m.default.without(n[a],e.target.value);break;case"checkbox":n[a]=e.target.checked;break;default:console.log(a,e.target.value),n[a]=e.target.value}this.setState({filters:n})}},{key:"handleListBoxSelectionChange",value:function(e,t){var n=this.state.filters;n[t]=e,this.setState({filters:n})}},{key:"activePaidCheckBoxChanged",value:function(e){var t=(0,h.default)(e.target),n=this.$activePaidCheckBoxes.index(t);t.prop("checked")?(this.$activePaidCheckBoxes.each(function(e,t){var a=(0,h.default)(t);e!==n&&a.prop("checked",!1)}),"none"!=this.$regPaymentStatusesObj.css("display")&&this.$regPaymentStatusesObj.slideToggle("slow")):this.$regPaymentStatusesObj.slideToggle("slow")}},{key:"submitFilters",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.filters)}}]),t}(u.Component);t.default=C,C.contextTypes={branchId:u.PropTypes.oneOfType([u.PropTypes.number,u.PropTypes.string])}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(59)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=a(n(71)),f=a(n(291)),p=a(n(1226)),h=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={items:[],selectedItems:[]},a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this,t=this.state.items.map(function(t){return c.default.createElement(p.default,{label:t.label,value:t.value,name:e.props.id+"[]",selectedItemClass:e.props.selectedItemClass,key:t.value,onChange:function(t){return e.itemSelectionChanged(t)}})});return c.default.createElement("div",{className:this.props.className,id:this.props.id},t)}},{key:"componentDidMount",value:function(){var e=this;(0,d.default)(function(){e.$obj=(0,d.default)("#"+e.props.id),e.loadData()})}},{key:"componentWillReceiveProps",value:function(e){(0,r.default)(this.props.params)!==(0,r.default)(e.params)&&(this.clearState(),this.loadData(e))}},{key:"clearState",value:function(){this.state={items:[],selectedItems:[]}}},{key:"loadData",value:function(e){var t=this,n=e||this.props,a=n.url,r=n.params;d.default.ajax({type:"get",data:r,url:a,dataType:"json",success:function(e){t.setState({items:e})},error:function(e,t,n){console.log(e,t,n)}})}},{key:"itemSelectionChanged",value:function(e){var t=this,n=(0,d.default)(e.target);this.setState(function(e){var a=e.selectedItems;return n.prop("checked")?a.push(n.val()):a=f.default.without(a,n.val()),t.props.onChange(a,t.props.id),{selectedItems:a}})}}]),t}(c.default.Component);t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=a(n(71)),d=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("label",null,this.props.label,u.default.createElement("input",{type:"checkbox",name:this.props.name,value:this.props.value})))}},{key:"componentDidMount",value:function(){var e=this;(0,c.default)(function(){e.$checkBox=(0,c.default)('[name="'+e.props.name+'"][value="'+e.props.value+'"]'),e.$checkBox.change(function(t){e.switchClass(),e.props.onChange&&e.props.onChange(t)})})}},{key:"switchClass",value:function(){this.$checkBox.prop("checked")?this.$checkBox.parent().addClass(this.props.selectedItemClass):this.$checkBox.parent().removeClass(this.props.selectedItemClass)}}]),t}(u.default.Component);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=n(9),h=a(n(28)),m=n(6),v=a(n(11)),y=a(n(100)),g=a(n(137)),E=a(n(16)).default.getIfExists,b=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={showMergeDlg:!1,showConfirmDlg:!1,branches:[],isProcessing:!1},a.mergeConfirm=a.mergeConfirm.bind(a),a.finalConfirm=a.finalConfirm.bind(a),a.mergeBranch=a.mergeBranch.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"mergeBranch",value:function(){var e=this,t=this.state.branches,n=this.props.filters;this.setState({isProcessing:!0}),$.ajax({type:"post",url:"/api/users/merge-branches",data:{filters:n,branches:t},success:function(){v.default.success("Students merged to branches"),e.setState({isProcessing:!1})},error:function(t){v.default.error("Failed to merge students to branches"),console.error(t.responseText),e.setState({isProcessing:!1})}})}},{key:"mergeConfirm",value:function(e){this.setState({branches:e,showConfirmDlg:!0})}},{key:"finalConfirm",value:function(){this.mergeBranch(),this.setState({showConfirmDlg:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.showMergeDlg,a=t.showConfirmDlg,r=t.isProcessing;return f.default.createElement("div",null,f.default.createElement(m.Button,{className:"custom",onClick:function(){return e.setState({showMergeDlg:!0})}},r?"Merging...":"Merge to branch"),f.default.createElement(_,{show:n,onConfirm:this.mergeConfirm,onClose:function(){return e.setState({showMergeDlg:!1})}}),f.default.createElement(y.default,{show:a,onYes:this.finalConfirm,onNo:function(){return e.setState({showConfirmDlg:!1})},headerText:"Confirm merging students to branch",confirmText:"This cannot be undone, are you sure?"}))}}]),t}(d.Component);b.propTypes={filters:d.PropTypes.object.isRequired};var _=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={branches:[]},a.clearListeners=[],a.close=a.close.bind(a),a.submit=a.submit.bind(a),a.onChange=a.onChange.bind(a),a.onGetClearListener=a.onGetClearListener.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"onChange",value:function(e){var t=e.target;this.setState((0,o.default)({},t.name,t.value.split(",")))}},{key:"close",value:function(){this.clearListeners.forEach(function(e){return e()}),this.props.onClose()}},{key:"submit",value:function(){this.props.onConfirm(this.state.branches),this.close()}},{key:"onGetClearListener",value:function(e){this.clearListeners.push(e)}},{key:"render",value:function(){var e=this.props.show;return f.default.createElement(m.Modal,{show:e,onHide:this.close},f.default.createElement(m.Modal.Dialog,null,f.default.createElement(m.Modal.Header,{closeButton:!0},f.default.createElement("h3",null,"Merge students to branch")),f.default.createElement(m.Modal.Body,null,f.default.createElement(g.default,{name:"branches",onChange:this.onChange,onSendClearCallback:this.onGetClearListener})),f.default.createElement(m.Modal.Footer,null,f.default.createElement(m.Button,{onClick:this.submit,style:{marginRight:"15px"}},"OK"),f.default.createElement(m.Button,{onClick:this.close},"Cancel"))))}}]),t}(d.Component);_.propTypes={show:d.PropTypes.bool.isRequired,onConfirm:d.PropTypes.func.isRequired,onClose:d.PropTypes.func.isRequired};var C=function(e){function t(){return(0,i.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=(0,h.default)(b,[p.ROLES.SUPER_ADMIN]);return f.default.createElement(e,(0,r.default)({appTypeKey:E(this.context,"user.role.roleName","")},this.props))}}]),t}(d.Component);t.default=C,C.contextTypes={user:d.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(50)),o=a(n(23)),l=a(n(59)),i=a(n(3)),s=a(n(1)),u=a(n(2)),c=a(n(4)),d=a(n(5)),f=n(0),p=a(f),h=a(n(71)),m=(a(n(1229)),a(n(16))),v=n(18),y=n(6),g=(n(38),n(12)),E=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={currentPage:1,foundData:{}},a.filters={},a.lastQueryNumber=0,a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.prepareTableRows(),t=this.createPagination(),n=(0,l.default)(this.filters),a={marginRight:"15px",marginBottom:"15px",display:"inline-block"},r={};window.innerWidth<768&&(a={width:"100%"},r={width:"100%",marginBottom:10});var o=function(e,t){return p.default.createElement(v.Link,{to:e,target:"_blank",style:a},p.default.createElement(y.Button,{className:"custom",style:r},t))},i=m.default.getIfExists(this.state,"foundData.info.totalCount",0);return p.default.createElement("div",null,p.default.createElement("h2",{className:"block-heading"},"Results"),p.default.createElement("hr",null),p.default.createElement("div",{className:"table-responsive"},p.default.createElement("table",{className:"table table-striped results-table",id:this.props.id,style:{display:"none"}},p.default.createElement("thead",{id:"tableHead"},p.default.createElement("tr",null,p.default.createElement("th",{style:{width:"40% "}},"Full name"),p.default.createElement("th",null,"Email Address"),p.default.createElement("th",null))),p.default.createElement("thead",{id:"tableAdvancedHead"},p.default.createElement("tr",null,p.default.createElement("th",{style:{width:"25%"}},"Full name"),p.default.createElement("th",null,"Email Address"),p.default.createElement("th",null,"Course Title"),p.default.createElement("th",null,"Class Term"),p.default.createElement("th",null,"Grade Register Date"),p.default.createElement("th",null))),p.default.createElement("tbody",null,e))),p.default.createElement("div",{id:"pagination"},t),p.default.createElement(y.Row,{style:{fontSize:"12pt"}},p.default.createElement(y.Col,{md:4,mdOffset:1,sm:5,smOffset:0,style:{textAlign:window.innerWidth<768?"left":"right",marginBottom:15}},p.default.createElement(v.Link,{to:"/users/students/print/addresses/filters/"+n,target:"_blank",style:{color:"#f0a300"}},"Export Addresses"+(i?" - "+i+" unique users":""))),p.default.createElement(y.Col,{sm:2,className:"hidden-xs",style:{textAlign:"center"}},"|"),p.default.createElement(y.Col,{md:4,sm:5,style:{textAlign:"left",marginBottom:15}},p.default.createElement(v.Link,{to:"/users/students/print/addresses-xls/filters/"+n,target:"_blank",style:{color:"#f0a300"}},"Export Addresses XLS"+(i?" - "+i+" unique users":"")))),p.default.createElement(y.Row,null,p.default.createElement(y.Col,{md:10,mdOffset:1,style:{textAlign:"center",paddingLeft:"30px"}},o("/users/students/print/numbers/filters/"+n,"Export Numbers"),o("/users/students/print/emails/filters/"+n,"Export Emails"),o("/users/students/print/grades-table/filters/"+n,"Export Grades"),o("/users/students/print/grades/filters/"+n,"Export Grades Print"))),p.default.createElement(y.Row,null,p.default.createElement(y.Col,{mdOffset:1,md:10,style:{textAlign:"center",paddingLeft:"30px"}},o("/users/students/print/details/filters/"+n,"Export List of Details"),o("/users/students/print/transactions/filters/"+n,"Export Transactions"),o("/users/students/print/card/filters/"+n,"Export Card"),o("/users/students/print/class-details/filters/"+n,"Export Class Details"))))}},{key:"componentWillReceiveProps",value:function(e,t){var n=(0,l.default)(this.context)!=(0,l.default)(t);e&&e.filters&&!n&&(this.filters=(0,o.default)({},e.filters),this.filters.page=1,this.loadData())}},{key:"componentDidMount",value:function(){var e=this;(0,h.default)(function(){e.$table=(0,h.default)("#"+e.props.id),e.$head=e.$table.find("#tableHead"),e.$advancedHead=e.$table.find("#tableAdvancedHead"),e.$paginationContainer=(0,h.default)("#pagination")})}},{key:"loadData",value:function(){var e=this,t=++this.lastQueryNumber;h.default.ajax({type:"post",url:"/api/users/search/students",data:this.filters,success:function(n){console.log(n),t===e.lastQueryNumber&&e.setState({foundData:n}),e.props.onLoad&&e.props.onLoad(n)}})}},{key:"prepareTableRows",value:function(){var e=this,t=[];if(this.state.foundData&&(0,r.default)(this.state.foundData).length>0){this.$table.css("display","table");var n=["fullName","emailAddress"];if(this.filters.advancedSearch?(this.$head.css("display","none"),this.$advancedHead.css("display","table-header-group"),n=n.concat(["courseTitle","term","registerDate"])):(this.$head.css("display","table-header-group"),this.$advancedHead.css("display","none")),this.state.foundData.rows){var a=this.state.foundData.rows;for(var o in a){var l,i,s;!function(){var r=a[o];l=o,i=n.map(function(t){if(r.hasOwnProperty(t)){var n=t;return p.default.createElement("td",{onClick:function(){e.showUser(r.profileId)},key:n},p.default.createElement(g.Html,null,r[t]))}}),r.hasOwnProperty("profileId")&&i.push(p.default.createElement("td",{key:"profileId"},p.default.createElement(v.Link,{to:"/users/"+r.profileId},"Edit"))),s=l,t.push(p.default.createElement("tr",{key:s},i))}()}}}return t}},{key:"createPagination",value:function(){var e=this;if(m.default.checkNestedProps(this.state,"foundData","info","totalCount")){var t=this.state.foundData.info.totalCount,n=Math.ceil(t/parseInt(this.props.rowsPerPage)),a=1;return this.filters.page&&(a=this.filters.page),0==n?p.default.createElement("div",null):p.default.createElement(y.Pager,null,p.default.createElement(y.PageItem,{onClick:function(){return e.turnPage(a-1)},disabled:1==a}," Prev")," ",p.default.createElement(y.PageItem,{onClick:function(){return e.turnPage(a+1)},disabled:a==n},"Next "),p.default.createElement("p",{style:{marginTop:"10px"}},a," / ",n))}}},{key:"showUser",value:function(e){this.context.router.push("/users/"+e)}},{key:"turnPage",value:function(e){this.filters.page=parseInt(e),this.loadData()}}]),t}(f.Component);t.default=E,E.contextTypes={router:f.PropTypes.object.isRequired,branchId:f.PropTypes.oneOfType([f.PropTypes.number,f.PropTypes.string]),onLoad:f.PropTypes.func}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(2)),l=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"encodeHtmlEntities",value:function(e){var t={"<":"&lt;",">":"&gt;"};return e.replace(/[<>]/g,function(e){return t[e]||e})}},{key:"unescapeHTML",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.textContent}}]),e}();t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(50)),o=a(n(23)),l=a(n(3)),i=a(n(1)),s=a(n(4)),u=a(n(2)),c=a(n(5)),d=n(0),f=a(d),p=n(9),h=n(6),m=a(n(15)),v=a(n(29)),y=n(18),g=a(n(60)),E=(a(n(22)),n(38)),b=n(12),_=a(n(19)),C=a(n(267)),w=a(n(11)),k=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={activeTab:0,isLoading:!1,totalCount:0,teachers:[],paynames:[],termOptions:[],payNameOptions:[],selectedTerm:0,selectedPayName:0,modal:!1,editPayName:!1,selectedTeacher:0,newPayname:{name:"",description:"",branch_id:null,selected_term:null,time_in:null,time_out:null}},a.requestFields=["id","userStatus","userFullname","branchName","branchId","profile.teacherCrb","teacherHourlyRate","userDefaultTimeIn","userDefaultTimeOut","teacherCourseClasses"],a.rowsPerPage=20,a.page=1,a.promises={load:null,loadTermOptions:null,loadPayNameOptions:null},a.load=a.load.bind(a),a}return(0,c.default)(t,e),(0,u.default)(t,null,[{key:"allowedRoles",value:function(){return[p.ROLES.SUPER_ADMIN,p.ROLES.ADMIN]}}]),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.load(this.props,this.context)}},{key:"getByPayName",value:function(e){var t=this;if(this.setState({isLoading:!0}),"Select Pay name"===e)return this.setState({isLoading:!1}),!1;m.default.ajax({type:"get",url:"api/users/getbypayname/"+e}).then(function(e){t.setState({isLoading:!1,teachers:e.rows,totalCount:e.info.totalCount}),t.renderTermSelection()},function(e){console.log(e)})}},{key:"showPopup",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.state.selectedPayName;t&&(this.setState({editPayName:!0}),m.default.ajax({type:"get",url:"api/payname/get/"+n}).then(function(t){e.setState({newPayname:t})},function(e){console.log(e)})),this.setState({modal:!0})}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"changeTerm",value:function(e){var t=this;localStorage.setItem("termId",e),this.setState({isLoading:!0}),this.promises.load=m.default.ajax({type:"get",url:"/api/users/teachers",data:{page:this.page,rowsPerPage:this.rowsPerPage,fields:this.requestFields,branchId:localStorage.getItem("branchId"),termId:e}}),this.promises.load.then(function(e){t.setState({isLoading:!1,teachers:e.rows,totalCount:e.info.totalCount})},function(e){return console.log(e)}),this.promises.loadPayNameOptions=m.default.ajax({type:"get",url:"/api/PayName/list",data:{selected_term:localStorage.getItem("termId"),branch_id:localStorage.getItem("branchId")}}),this.promises.loadPayNameOptions.then(function(e){e.length<=0?t.setState({payNameOptions:[],selectedPayName:0}):t.setState({payNameOptions:e,selectedPayName:0})},function(e){return console.log(e)}),m.default.ajax({type:"get",url:"/api/payname/totallist",data:{branchId:localStorage.getItem("branchId"),termId:localStorage.getItem("termId")}}).then(function(e){e.length<=0?t.setState({paynames:[]}):t.setState({paynames:e})},function(e){return console.log(e)})}},{key:"load",value:function(e,t){var n=this;this.setState({isLoading:!0});var a=this.context.branchId;a&&""==(a=localStorage.getItem("branchId"))&&(a=0),this.state.editPayName,this.promises.load&&this.promises.load.cancel(),this.promises.load=m.default.ajax({type:"get",url:"/api/users/teachers",data:{page:this.page,rowsPerPage:this.rowsPerPage,fields:this.requestFields,branchId:a,termId:localStorage.getItem("termId")}}),this.promises.load.then(function(e){n.setState({isLoading:!1,teachers:e.rows,totalCount:e.info.totalCount})},function(e){return console.log(e)}),this.promises.loadTermOptions&&this.promises.loadTermOptions.cancel(),this.promises.loadTermOptions=m.default.ajax({type:"get",url:"/api/terms/list"}),this.promises.loadTermOptions.then(function(e){for(var t=null,a=0;a<e.length;a++)if("1"==e[a].isActive){t=e[a].value;break}null===t&&e.length>0&&(t=e[0].value),n.setState({termOptions:e,selectedTerm:t}),localStorage.setItem("termId",t)},function(e){return console.log(e)}),this.promises.loadPayNameOptions&&this.promises.loadPayNameOptions.cancel(),this.promises.loadPayNameOptions=m.default.ajax({type:"get",url:"/api/PayName/list",data:{selected_term:localStorage.getItem("termId")}}),this.promises.loadPayNameOptions.then(function(e){e.length<=0?n.setState({payNameOptions:[],selectedPayName:0}):n.setState({payNameOptions:e,selectedPayName:0})},function(e){return console.log(e)})}},{key:"updatePayname",value:function(e){var t=this;this.state.newPayname.selected_term=this.state.selectedTerm,m.default.ajax({type:"post",url:"api/payname/update/"+e.id,data:e}).then(function(e){w.default.success("Updated successfully"),t.setState({modal:!1,newPayname:{name:"",description:"",branch_id:null,selected_term:null,time_in:null,time_out:null}})},function(e){w.default.error("Update Has failed"),t.setState({modal:!1})})}},{key:"addPayName",value:function(){var e=this;this.state.newPayname.selected_term=this.state.selectedTerm,m.default.ajax({type:"post",url:"api/addpayname",data:this.state.newPayname}).then(function(t){w.default.success("Created successfully"),e.setState({modal:!1,payNameOptions:t,selectedPayName:0,newPayname:{name:"",description:"",branch_id:null,selected_term:null,time_in:null,time_out:null}})},function(t){w.default.error("Creat failed"),e.setState({modal:!1})})}},{key:"componentWillReceiveProps",value:function(e,t){var n=this,a={},l=null;this.context={branchId:localStorage.getItem("branchId")},this.context.branchId!=t.branchId&&(l={branchId:this.context.branchId},(0,o.default)(a,{data:[],offset:0})),this.props.termId!=e.termId&&(a.termId=e.termId),(0,r.default)(a).length>0&&this.setState(a,function(){return n.load(l)})}},{key:"renderTable",value:function(){var e=this.state,t=e.isLoading,n=e.teachers,a=e.selectedTerm,r=e.paynames,o=e.selectedPayName,l=e.payNameOptions;return t?f.default.createElement(_.default,null):f.default.createElement(S,{teachers:n,selectedTerm:a,payNameOptions:l,selectedPaynName:o,paynames:r})}},{key:"renderPaginator",value:function(){var e=this,t=this.state.totalCount;return f.default.createElement(g.default,{totalCount:t,rowsPerPage:this.rowsPerPage,currentPage:this.page,onPageChange:function(t){e.page=t,e.load()}})}},{key:"renderControls",value:function(){var e=this,t=this.state,n=t.selectedPayName,a=t.payNameOptions,r={marginLeft:20,marginBottom:10};window.innerWidth<768&&(r={marginBottom:10});var o=localStorage.getItem("branchId");return""==o&&(o=0),a.length>0?f.default.createElement("div",null,f.default.createElement(h.Button,{className:"custom",style:{marginBottom:10},onClick:function(t){t.preventDefault(),e.showPopup()}},"Add New Pay Name"),f.default.createElement(E.LinkContainer,{to:{pathname:"/users/role/teachers/add/"}},f.default.createElement(h.Button,{className:"custom",style:r,bsStyle:"success"},"Add New Teacher")),f.default.createElement(y.Link,{className:"custom",target:"_blank",style:{color:"white"},to:"payname/"+n+"/"+o},f.default.createElement(h.Button,{className:"custom",style:r},"Print Pay Name"))):f.default.createElement("div",null,f.default.createElement(h.Button,{className:"custom",style:{marginBottom:10},onClick:function(t){t.preventDefault(),e.showPopup()}},"Add New Pay Name"),f.default.createElement(E.LinkContainer,{to:{pathname:"/users/role/teachers/add/"}},f.default.createElement(h.Button,{className:"custom",style:r,bsStyle:"success"},"Add New Teacher")))}},{key:"renderTermSelection",value:function(){var e=this,t=this.state,n=t.termOptions,a=t.selectedTerm,r=t.selectedPayName,o=t.payNameOptions;localStorage.setItem("termId",a);for(var l=void 0,i=0;i<o.length;i++)if(o[i].value===parseInt(r))return l=o[i],f.default.createElement(h.Row,null,f.default.createElement(b.FormField,{width:4,label:"Selected term",style:{marginTop:"20px"}},f.default.createElement("select",{className:"form-control",value:a,onChange:function(t){t.preventDefault(),e.setState({selectedTerm:t.target.value}),e.changeTerm(t.target.value)}},n.map(function(e){return f.default.createElement("option",{key:e.value,value:e.value},e.label)}))),f.default.createElement(b.FormField,{width:4,label:"Pay Name",style:{marginTop:"20px"}},f.default.createElement("select",{className:"form-control",value:r,onChange:function(t){t.preventDefault(),e.setState({selectedPayName:t.target.value}),e.getByPayName(t.target.value)}},f.default.createElement("option",{selected:"true"},"Select Pay name"),o.map(function(e){return f.default.createElement("option",{key:e.value,value:e.value},e.label)}))),f.default.createElement(h.Col,{md:4},f.default.createElement(h.Button,{style:{marginTop:"45px"},className:"custom",onClick:function(t){t.preventDefault(),e.showPopup(!0)}},"Edit Pay Name")),f.default.createElement(h.Col,{md:12},f.default.createElement("h3",null,l.label," Term ",l.termName," (Hours ",l.timeIn,"- ",l.timeOut,") ",l.branchName,"This Month Includes week so and so ",l.description)));return f.default.createElement(h.Row,{style:{marginTop:"10px"}},f.default.createElement(b.FormField,{width:4,label:"Selected term",style:{marginTop:"20px"}},f.default.createElement("select",{className:"form-control",value:a,onChange:function(t){e.setState({selectedTerm:t.target.value}),e.changeTerm(t.target.value)}},n.map(function(e){return f.default.createElement("option",{key:e.value,value:e.value},e.label)}))),f.default.createElement(b.FormField,{width:4,label:"Pay Name",style:{marginTop:"20px"}},f.default.createElement("select",{className:"form-control",value:r,onChange:function(t){t.preventDefault(),e.setState({selectedPayName:t.target.value}),e.getByPayName(t.target.value)}},f.default.createElement("option",{selected:"true"},"Select Pay name"),o.map(function(e){return f.default.createElement("option",{key:e.value,value:e.value},e.label)}))))}},{key:"renderModal",value:function(){var e=this,t=this.state,n=t.modal,a=t.termOptions,r=t.selectedTerm,o=(t.selectedPayName,t.editPayName),l=this.state.newPayname,i=function(){e.setState({modal:!1,editPayName:!1})};if(o){var s=this.state.newPayname;return f.default.createElement(h.Modal,{show:n,onHide:i,container:this,bsSize:"large","aria-labelledby":"contained-modal-title-lg",bsClass:"modal"},f.default.createElement(h.Modal.Header,{closeButton:!0},f.default.createElement(h.Modal.Title,{id:"contained-modal-title"},"Update Pay Name")),f.default.createElement(h.Modal.Body,{style:{overflowY:"auto"}},f.default.createElement(h.Row,null,f.default.createElement(h.Col,{md:12},f.default.createElement("label",{className:"detail-field-label"},"Name : ",f.default.createElement("p",{style:{color:"black",display:"inline-block"}},s.name)),f.default.createElement("input",{className:"form-control",type:"text",placeholder:"Write New Name of Pay Name",onChange:function(e){e.preventDefault(),s.name=e.target.value}}),f.default.createElement("label",{className:"detail-field-label"},"Description : ",f.default.createElement("p",{style:{color:"black",display:"inline-block"}},s.description)),f.default.createElement("textarea",{style:{marginTop:"10px"},className:"form-control",placeholder:"Write a New Description",cols:"30",rows:"10",onChange:function(e){e.preventDefault(),s.description=e.target.value}}),f.default.createElement(h.Row,null,f.default.createElement(b.FormField,{width:6,label:"Term",style:{marginTop:"10px"}},f.default.createElement("select",{className:"form-control",value:s.selected_term,onChange:function(t){e.setState({selectedTerm:t.target.value}),s.selected_term=t.target.value}},f.default.createElement("option",null),a.map(function(e){return f.default.createElement("option",{key:e.value,value:e.value},e.label)}))),f.default.createElement(h.Col,{md:6,sm:6,xs:12,style:{marginTop:"10px"}},f.default.createElement("div",{className:"form-group"},f.default.createElement("label",{className:"detail-field-label"},"Select Branch"),f.default.createElement(C.default,{value:s.branch_id,onChange:function(e){s.branch_id=e}}))),f.default.createElement(h.Col,{md:6,sm:6,xs:12},f.default.createElement("div",{className:"form-group"},f.default.createElement("label",{htmlFor:"timeIn",className:"detail-field-label"},"Time In : ",f.default.createElement("p",{style:{color:"black",display:"inline-block"}},s.time_in)),f.default.createElement("input",{type:"time",id:"timeIn",className:"form-control",onChange:function(e){e.preventDefault(),s.time_in=e.target.value}}))),f.default.createElement(h.Col,{md:6,sm:6,xs:12},f.default.createElement("div",{className:"form-group"},f.default.createElement("label",{htmlFor:"timeOut",className:"detail-field-label"},"Time Out : ",f.default.createElement("p",{style:{color:"black",display:"inline-block"}},s.time_out)),f.default.createElement("input",{type:"time",id:"timeOut",className:"form-control",onChange:function(e){e.preventDefault(),s.time_out=e.target.value}}))))))),f.default.createElement(h.Modal.Footer,{style:{padding:"6px 15px"}},f.default.createElement(h.Button,{className:"custom",onClick:function(t){t.preventDefault(),function(t,n){t.preventDefault(),e.updatePayname(n)}(t,s)}},"Update")))}return f.default.createElement(h.Modal,{show:n,onHide:i,container:this,bsSize:"large","aria-labelledby":"contained-modal-title-lg"},f.default.createElement(h.Modal.Header,{closeButton:!0},f.default.createElement(h.Modal.Title,{id:"contained-modal-title"},"Create New Pay Name")),f.default.createElement(h.Modal.Body,{style:{overflowY:"auto"}},f.default.createElement(h.Row,null,f.default.createElement(h.Col,{md:12},f.default.createElement("input",{className:"form-control",type:"text",placeholder:"Write Name of Pay Name",onChange:function(e){e.preventDefault(),l.name=e.target.value}}),f.default.createElement("textarea",{style:{marginTop:"10px"},className:"form-control",placeholder:"Write a Description",cols:"30",rows:"10",onChange:function(e){e.preventDefault(),l.description=e.target.value}}),f.default.createElement(b.FormField,{width:6,label:"Term",style:{marginTop:"20px"}},f.default.createElement("select",{className:"form-control",value:r,onChange:function(t){e.setState({selectedTerm:t.target.value}),l.selected_term=t.target.value}},f.default.createElement("option",null),a.map(function(e){return f.default.createElement("option",{key:e.value,value:e.value},e.label)}))),f.default.createElement(h.Col,{md:6,sm:6,xs:12,style:{marginTop:"20px"}},f.default.createElement("div",{className:"form-group"},f.default.createElement("label",{className:"detail-field-label"},"Select Branch"),f.default.createElement(C.default,{onChange:function(e){l.branch_id=e}}))),f.default.createElement(h.Col,{md:6,sm:6,xs:12},f.default.createElement("div",{className:"form-group"},f.default.createElement("label",{htmlFor:"timeIn",className:"detail-field-label"},"Time In"),f.default.createElement("input",{type:"time",id:"timeIn",className:"form-control",style:{marginTop:"15px"},onChange:function(e){e.preventDefault(),l.time_in=e.target.value}}))),f.default.createElement(h.Col,{md:6,sm:6,xs:12},f.default.createElement("div",{className:"form-group"},f.default.createElement("label",{htmlFor:"timeOut",className:"detail-field-label"},"Time Out"),f.default.createElement("input",{type:"time",id:"timeOut",className:"form-control",style:{marginTop:"15px"},onChange:function(e){e.preventDefault(),l.time_out=e.target.value}})))))),f.default.createElement(h.Modal.Footer,null,f.default.createElement(h.Button,{className:"custom",onClick:function(t){t.preventDefault(),function(t){t.preventDefault(),e.addPayName()}(t)}},"Create")))}},{key:"render",value:function(){return f.default.createElement("div",{className:"content-block",style:{paddingTop:"35px"}},this.renderTermSelection(),this.renderTable(),this.renderPaginator(),this.renderControls(),this.renderModal())}}]),t}(d.Component);t.default=k;var S=function(e){function t(){return(0,i.default)(this,t),(0,s.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.teachers,a=(t.paynames,t.selectedPayName);return n&&0!=n.length?f.default.createElement("div",null,f.default.createElement(v.default,{name:a,data:n,showingProps:[],headers:["Name","Branch","Classes","Week 1","Week 2","Week 3","Week 4","Total","Pay","",""],createRow:function(t,n){return e.createRow(t,n)}})):f.default.createElement("p",null,"No teachers found!")}},{key:"createRow",value:function(e,t){var n=e.teacherCourseClasses,a=e.totalPayName,r=e.teacherHourlyRate;n||(n=[]);var o=this.props.selectedTerm,l=(this.context.branchId,this.props.selectedPaynName),i=this.props.payNameOptions,s=[];n.forEach(function(e,t){e.termId==o&&s.push(f.default.createElement("option",{key:t,value:e.id},e.classTime+" ("+e.courseTitle+")"))});var u=this.context.router,c=v.default.createRowBase(e,t);c.push(f.default.createElement("td",{key:"userFullname"},f.default.createElement(y.Link,{to:"/users/"+e.id},e.userFullname))),c.push(f.default.createElement("td",{key:"branchName"},e.branchName)),c.push(f.default.createElement("td",{key:"classes"},f.default.createElement("div",{style:{width:"200px"}},f.default.createElement("select",{value:-1,className:"form-control",onChange:function(e){-1!==e.target.value&&u.push("/classes/"+e.target.value)}},f.default.createElement("option",{value:"-1"},"Classes ("+s.length+")"),s))));for(var d=0;d<i.length;d++)if(0!=l&&l==i[d].value&&e.branchId==i[d].branchId){var p=r*parseInt(e.totalPayName.rateHours/60);c.push(f.default.createElement("td",{key:"week1"},f.default.createElement("p",{style:{fontSize:"18px"}},a.week1),f.default.createElement("p",{style:{color:"red",fontSize:"12px"}},e.totalPayName.weekLate1))),c.push(f.default.createElement("td",{key:"week2"},f.default.createElement("p",{style:{fontSize:"18px"}},a.week2),f.default.createElement("p",{style:{color:"red",fontSize:"12px"}},e.totalPayName.weekLate2))),c.push(f.default.createElement("td",{key:"week3"},f.default.createElement("p",{style:{fontSize:"18px"}},a.week3),f.default.createElement("p",{style:{color:"red",fontSize:"12px"}},e.totalPayName.weekLate3))),c.push(f.default.createElement("td",{key:"week4"},f.default.createElement("p",{style:{fontSize:"18px"}},a.week4),f.default.createElement("p",{style:{color:"red",fontSize:"12px"}},e.totalPayName.weekLate4))),c.push(f.default.createElement("td",{key:"Total"},f.default.createElement("p",{style:{fontSize:"18px"}},a.Total),f.default.createElement("p",{style:{color:"red",fontSize:"12px"}},e.totalPayName.totalLate))),c.push(f.default.createElement("td",{key:"pay"},f.default.createElement("p",null,p," "))),c.push(f.default.createElement("td",{key:"hours"},f.default.createElement(h.Button,{onClick:function(){if(!$.isNumeric(l))return!1;u.push("/addpay/"+l+"/"+e.id)}},"Hours")));break}return c}}]),t}(d.Component);S.PropTypes={teachers:d.PropTypes.arrayOf(d.PropTypes.object)},S.contextTypes={router:d.PropTypes.func.isRequired,branchId:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.number])}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=a(n(15)),p=a(n(29)),h=n(18),m=n(6),v=a(n(31)),y={roleDropdownWrapper:{width:200,display:"inline-block",marginRight:"10px",marginBottom:15}};window.innerWidth<768&&(y={roleDropdownWrapper:{width:"100%",marginBottom:15}});var g=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,data:null,selectedRole:0},a.roles=["admins","registrars"],e.appTypeKey==d.ROLES.SUPER_ADMIN&&a.roles.push("super-admins"),a.requestFields=["id","userFullname","userEmailAddress","role.roleName"],a.loadPromise=null,a.addUser=a.addUser.bind(a),a.onRoleSelect=a.onRoleSelect.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(){var e=this;this.setState({isLoading:!0}),this.loadPromise&&this.loadPromise.cancel(),this.loadPromise=f.default.ajax({type:"get",url:"/api/users",data:{fields:this.requestFields,roles:this.roles}}),this.loadPromise.then(function(t){return e.setState({isLoading:!1,data:t.rows})},function(e){return console.log(e)})}},{key:"createRow",value:function(e,t){var n=p.default.createRowBase(e,t);return n.push(c.default.createElement("td",{key:"controls"},c.default.createElement(h.Link,{to:"/users/"+e.id+"/edit"},"Edit"))),n}},{key:"onRoleSelect",value:function(e){this.setState({selectedRole:e.target.value})}},{key:"addUser",value:function(){var e=this.state.selectedRole;this.roles.includes(e)?this.context.router.push("/users/role/"+e+"/add"):console.log(e,this.roles)}},{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}},{key:"renderTable",value:function(){var e=this.state.data;return e&&0!=e.length?c.default.createElement(p.default,{data:e,showingProps:["userFullname","role.roleName","userEmailAddress"],headers:["Name","Role","Email Address",""],createRow:this.createRow}):c.default.createElement("p",null,"No super admins yet")}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.selectedRole;return t?c.default.createElement("p",null,"Loading..."):c.default.createElement("div",{className:"content-block",style:{paddingTop:"35px"}},this.renderTable(),c.default.createElement("div",{style:y.roleDropdownWrapper},c.default.createElement("select",{name:"selectedRole",className:"form-control",onChange:this.onRoleSelect,value:n},c.default.createElement("option",{value:"0"},"-- Select role --"),this.roles.map(function(e,t){return c.default.createElement("option",{key:t,value:e},v.default.ucFirst(e))}))),c.default.createElement(m.Button,{onClick:this.addUser,className:"custom btn-success"},"Add"))}}],[{key:"allowedRoles",value:function(){return[d.ROLES.ADMIN,d.ROLES.SUPER_ADMIN]}}]),t}(u.Component);t.default=g,g.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(1233)),h=a(n(292)),m=a(n(293)),v=a(n(294)),y=a(n(606)),g=a(n(163)),E=a(n(19)),b=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={isLoading:!1,user:null},i.childTypes=(a={},(0,r.default)(a,f.ROLES.STUDENT,p.default),(0,r.default)(a,f.ROLES.SUPER_ADMIN,h.default),(0,r.default)(a,f.ROLES.ADMIN,m.default),(0,r.default)(a,f.ROLES.REGISTRAR,v.default),(0,r.default)(a,f.ROLES.TEACHER,y.default),(0,r.default)(a,"students",p.default),(0,r.default)(a,"super-admins",h.default),(0,r.default)(a,"admins",m.default),(0,r.default)(a,"registrars",v.default),(0,r.default)(a,"teachers",y.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.params.id;t&&(this.setState({isLoading:!0}),g.default.findById(t,["role.roleName"],function(t){return e.setState({isLoading:!1,user:t})},function(){return console.error("User by id "+t+" was not found")}))}},{key:"getChildComponent",value:function(){var e=this.state.user,t=null;return t=null!==e?e.role.roleName:this.props.params.role,this.childTypes[t]}},{key:"render",value:function(){var e=this.props,t=e.appTypeKey,n=e.params.id;if(this.state.isLoading)return d.default.createElement("div",null,d.default.createElement(E.default,null));var a=this.getChildComponent();if(!a)return d.default.createElement("p",null,"Invalid role.");var r=this.context.user,o={appTypeKey:t};return this.state.user&&(o.id=n),a.allowedRoles().includes(t)||n&&r.id==n?d.default.createElement("div",null,d.default.createElement(a,o)):d.default.createElement("p",null,"Access not allowed.")}}]),t}(c.Component);t.default=b,b.propTypes={appTypeKey:c.PropTypes.string},b.contextTypes={user:c.PropTypes.object}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(4)),i=a(n(2)),s=a(n(5)),u=a(n(0)),c=n(9),d=function(e){function t(e,n){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n))}return(0,s.default)(t,e),(0,i.default)(t,null,[{key:"allowedRoles",value:function(){return[c.ROLES.ADMIN]}}]),(0,i.default)(t,[{key:"render",value:function(){return u.default.createElement("p",null," Not implemented yet")}}]),t}(u.default.Component);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.name,a=e.value,r=e.onChange,o=t.map(function(e,t){return c.default.createElement("div",{key:t},c.default.createElement("input",{type:"radio",name:n,value:e.value,checked:e.value==a,onChange:r}),c.default.createElement("span",null," ",e.label))});return c.default.createElement("div",null,o)}}]),t}(u.Component);f.PropTypes={name:u.PropTypes.string.isRequired,data:u.PropTypes.oneOfType([u.PropTypes.object,u.PropTypes.array]).isRequired,value:u.PropTypes.string.isRequired,onChange:u.PropTypes.func.isRequired},t.default=(0,d.default)(f)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(n(18),n(38),n(9),n(12)),f=a(n(15)),p=n(6),h=a(n(11)),m=a(n(29)),v=a(n(19)),y=a(n(16)),g=(a(n(134)),a(n(31)),function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,user:null,error:!1},a.promises={load:null,save:null,loadTeacherTitles:null,loadTeacherStatus:null},a.onFieldChange=a.onFieldChange.bind(a),a.changeField=a.changeField.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"onFieldChange",value:function(e,t,n,a){this.changeField(e,t,n,a)}},{key:"changeField",value:function(e,t,n,a){var r=this.state,o=r.week1,l=r.week2,i=r.week3,s=r.week4,u=r.defaultTimeIn,c=r.defaultTimeOut;switch(a){case 1:y.default.accessObjByPath(o[n-1],e,function(){return t}),this.setState({week1:o});break;case 2:y.default.accessObjByPath(l[n-1],e,function(){return t}),this.setState({week2:l});break;case 3:y.default.accessObjByPath(i[n-1],e,function(){return t}),this.setState({week3:i});break;case 4:y.default.accessObjByPath(s[n-1],e,function(){return t}),this.setState({week4:s});break;case"defaultTimeIn":u=t,this.setState({defaultTimeIn:u,changedDefault:!0});break;case"defaultTimeOut":c=t,this.setState({defaultTimeOut:c,changedDefault:!0})}this.updatePayName()}},{key:"updatePayName",value:function(){var e=this,t=this.state,n=t.week1,a=t.week2,r=t.week3,o=t.week4,l=t.defaultTimeIn,i=t.defaultTimeOut;if(t.changedDefault)var s=this.props.params.id;else s="";f.default.ajax({type:"post",url:"/api/updatePayName",data:{weekdays:{w1:n,w2:a,w3:r,w4:o},defaultTimeIn:l,defaultTimeOut:i,user_id:s}}).then(function(t){h.default.success("Updated successfully"),e.componentDidMount()},function(e){h.default.error("Error during update"),console.log(e)})}},{key:"load",value:function(e,t){var n=this;console.log(t),this.setState({isLoading:!0,changedDefault:!1}),""==localStorage.getItem("branchId")&&localStorage.setItem("branchId",0),this.promises.load=f.default.ajax({type:"get",url:"backend/public/api/PayName/",data:{branchId:localStorage.getItem("branchId"),termId:localStorage.getItem("termId"),userId:t,id:e}}),this.promises.load.then(function(e){e.error?n.setState({error:e.error}):n.setState({isLoading:!1,week1:e.rows[0].rows,week2:e.rows[1].rows,week3:e.rows[2].rows,week4:e.rows[3].rows,week1Total:e.rows[0].weekTotal,week2Total:e.rows[1].weekTotal,week3Total:e.rows[2].weekTotal,week4Total:e.rows[3].weekTotal,week1TotalLate:e.rows[0].totalWeekLate,week2TotalLate:e.rows[1].totalWeekLate,week3TotalLate:e.rows[2].totalWeekLate,week4TotalLate:e.rows[3].totalWeekLate,userName:e.rows[0].userFullName,payName:e.rows[0].payName,error:e.error,defaultTimeOut:e.rows[0].defaultTimeOut,defaultTimeIn:e.rows[0].defaultTimeIn})},function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){this.load(this.props.params.PayNameId,this.props.params.id)}},{key:"paynames",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.week1,r=t.week2,o=t.week3,l=t.week4,i=t.error,s=t.week1Total,u=t.week2Total,d=t.week3Total,f=t.week4Total,h=t.week1TotalLate,y=t.week2TotalLate,g=t.week3TotalLate,E=t.week4TotalLate,b=this.state.userName;return i?c.default.createElement("div",{className:"content-block"},c.default.createElement("h1",null,"the Pay Name Not Found In this Branch or Term")):n?c.default.createElement(v.default,null):c.default.createElement(p.Row,null,c.default.createElement("h2",null,"Teacher ",b),c.default.createElement(p.Col,{md:6},c.default.createElement("table",{className:"table"},c.default.createElement("thead",{className:"table-head"},c.default.createElement("tr",null,c.default.createElement("td",{style:{width:"33%"}},"Week 1"),c.default.createElement("td",{style:{width:"33%",textAlign:"right"}},s),c.default.createElement("td",{style:{width:"33%",textAlign:"right",color:"red"}},h)))),c.default.createElement(m.default,{data:a,showingProps:["day"],headers:["Day","In","Out","Total Late","Total Hours"],createRow:function(t,n){return e.createRow(t,n)}})),c.default.createElement(p.Col,{md:6},c.default.createElement("table",{className:"table"},c.default.createElement("thead",{className:"table-head"},c.default.createElement("tr",null,c.default.createElement("td",{style:{width:"33%"}},"Week 2"),c.default.createElement("td",{style:{width:"33%",textAlign:"right"}},u),c.default.createElement("td",{style:{width:"33%",textAlign:"right",color:"red"}},y)))),c.default.createElement(m.default,{data:r,showingProps:["day"],headers:["Day","In","Out","Total Late","Total Hours"],createRow:function(t,n){return e.createRow(t,n)}})),c.default.createElement(p.Col,{md:6},c.default.createElement("table",{className:"table"},c.default.createElement("thead",{className:".table-head"},c.default.createElement("tr",null,c.default.createElement("td",{style:{width:"33%"}},"Week 3"),c.default.createElement("td",{style:{width:"33%",textAlign:"right"}},d),c.default.createElement("td",{style:{width:"33%",textAlign:"right",color:"red"}},g)))),c.default.createElement(m.default,{data:o,showingProps:["day"],headers:["Day","In","Out","Total Late","Total Hours"],createRow:function(t,n){return e.createRow(t,n)}})),c.default.createElement(p.Col,{md:6},c.default.createElement("table",{className:"table"},c.default.createElement("thead",{className:".table-head"},c.default.createElement("tr",null,c.default.createElement("td",{style:{width:"33%"}},"Week 4"),c.default.createElement("td",{style:{width:"33%",textAlign:"right"}},f),c.default.createElement("td",{style:{width:"33%",textAlign:"right",color:"red"}},E)))),c.default.createElement(m.default,{data:l,showingProps:["day"],headers:["Day","In","Out","Total Late","Total Hours"],createRow:function(t,n){return e.createRow(t,n)}})))}},{key:"createRow",value:function(e,t){var n=this,a=m.default.createRowBase(e,t);return a.push(c.default.createElement("td",{key:"timeIn"},c.default.createElement(d.EditableValueInput,{value:e.timeIn,onFieldChange:function(e,t,a,r){""==t&&(t=-1),n.onFieldChange(e,t,a,r)},enableExternalUpdates:!0},c.default.createElement("input",{type:"time",className:"form-control",name:"timeIn",id:e.weekId,data:e.week})))),a.push(c.default.createElement("td",{key:"timeOut"},c.default.createElement(d.EditableValueInput,{value:e.timeOut,onFieldChange:function(e,t,a,r){""==t&&(t=-1),n.onFieldChange(e,t,a,r)},enableExternalUpdates:!0},c.default.createElement("input",{type:"time",className:"form-control",name:"timeOut",id:e.weekId,data:e.week})))),a.push(c.default.createElement("td",{key:"lateTime"},c.default.createElement("div",{style:{width:"100px"}},c.default.createElement("p",{style:{color:"red",fontSize:"12px"}},e.weekLate)))),a.push(c.default.createElement("td",{key:"totalHours"},c.default.createElement("div",{style:{width:"100px"}},e.totalHours))),a}},{key:"render",value:function(){var e=this,t=this.state,n=(t.isLoading,t.user,t.payName),a=t.error,r=t.defaultTimeIn,o=t.defaultTimeOut,l=this.props;return l.params.id,l.appTypeKey,a?c.default.createElement("div",{className:"content-block"},c.default.createElement("h1",null,"the Pay Name Not Found In this Branch or Term")):c.default.createElement("div",null,c.default.createElement("div",{className:"content-block"},c.default.createElement("h1",{className:"block-heading",style:{display:"inline-block"}},"Pay Name : ",c.default.createElement("h1",{style:{display:"inline-block"}},"",n)),c.default.createElement("h3",null,"Default Time In : ",r),c.default.createElement("hr",null),c.default.createElement(d.EditableValueInput,{value:r,onFieldChange:function(t,n,a,r){""==n&&(n=-1),e.onFieldChange(t,n,a,r)},enableExternalUpdates:!0},c.default.createElement("input",{type:"time",className:"form-control",name:"defaultTimeIn",id:"defaultTimeIn",data:"defaultTimeIn"})),c.default.createElement("h3",null,"Default Time Out : ",o),c.default.createElement(d.EditableValueInput,{value:o,onFieldChange:function(t,n,a,r){""==n&&(n=-1),e.onFieldChange(t,n,a,r)},enableExternalUpdates:!0},c.default.createElement("input",{type:"time",className:"form-control",name:"defaultTimeOut",id:"defaultTimeOut",data:"defaultTimeOut"})),c.default.createElement("hr",null),c.default.createElement("div",{style:{margin:"0"}},this.paynames())))}}]),t}(u.Component));t.default=g},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(15)),f=a(n(295)),p=n(6),h=a(n(11)),m=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={firstLoading:!0,data:[]},a.save=a.save.bind(a),a.loadPromise=null,a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}},{key:"change",value:function(e,t){var n=this.state.data;n[e].teacherPayments=t,this.setState({data:n})}},{key:"load",value:function(){var e=this;this.state.firstLoading&&this.setState({firstLoading:!1,isLoading:!0}),this.loadPromise&&this.loadPromise.cancel(),this.loadPromise=d.default.ajax({type:"get",url:"/api/users/teachers",data:{fields:["id","teacherPayments","userFullname"]}}),this.loadPromise.then(function(t){return e.setState({isLoading:!1,data:t.rows})},function(e){return console.log(e)})}},{key:"save",value:function(){var e=this,t=this.state.data;$.ajax({type:"put",url:"/api/users",data:{data:t},success:function(t){h.default.success("Updated"),console.log(t),e.load()},error:function(e){h.default.error("Update failed"),console.log(e)}})}},{key:"renderPayments",value:function(){var e=this;return this.state.data.map(function(t,n){return!(!t.teacherPayments||0==t.teacherPayments.length)&&c.default.createElement(f.default,{key:n,payments:t.teacherPayments,label:t.userFullname,onChange:function(t){return e.change(n,t)}})})}},{key:"render",value:function(){return this.state.isLoading?c.default.createElement("p",null,"Loading..."):c.default.createElement("div",null,c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Submit Hours"),c.default.createElement("hr",null),c.default.createElement("div",{style:{margin:"30px"}},this.renderPayments()),c.default.createElement(p.Button,{className:"custom btn-success",onClick:this.save},"Save")))}}]),t}(u.Component);t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(163)),p=n(9),h=a(n(1238)),m=a(n(606)),v=a(n(292)),y=a(n(293)),g=a(n(294)),E=a(n(19)),b=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={isLoading:!1,user:null},i.childTypes=(a={},(0,r.default)(a,p.ROLES.STUDENT,h.default),(0,r.default)(a,p.ROLES.TEACHER,m.default),(0,r.default)(a,p.ROLES.SUPER_ADMIN,v.default),(0,r.default)(a,p.ROLES.ADMIN,y.default),(0,r.default)(a,p.ROLES.REGISTRAR,g.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.params.id!==e.params.id&&this.load(e.params.id)}},{key:"load",value:function(e){var t=this;this.setState({isLoading:!0}),f.default.findById(e,["role.roleName"],function(e){t.setState({isLoading:!1,user:e})},function(){console.error("User by id "+e+" was not found"),t.setState({isLoading:!1})})}},{key:"componentDidMount",value:function(){this.load(this.props.params.id)}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.user,a=this.props,r=a.params.id,o=a.appTypeKey;if(t)return d.default.createElement(E.default,null);if(null===n)return d.default.createElement("p",null,"User was not found");var l=this.state.user.role.roleName;if(l in this.childTypes){var i=this.childTypes[l];if(i)return d.default.createElement("div",null,d.default.createElement(i,{id:r,appTypeKey:o}))}return!1}}]),t}(c.Component);t.default=b},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(23)),l=a(n(17)),i=a(n(3)),s=a(n(1)),u=a(n(2)),c=a(n(4)),d=a(n(5)),f=n(0),p=a(f),h=(a(n(163)),n(6)),m=n(9),v=(a(n(22)),a(n(1239))),y=a(n(16)),g=a(n(36)),E=n(12),b=a(n(14)),_=a(n(28)),C=a(n(1241)),w=a(n(1242)),k=a(n(15)),S=n(18),x=a(n(43)),T=a(n(7)),P=a(n(1243)),R=a(n(193)),O=a(n(11)),D=a(n(44)),N=(a(n(19)),a(n(137))),I=a(n(77)),M=a(n(1244)),A=a(n(608)),F=a(n(609)),L=a(n(31)),j=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={user:e.data,showQuickAddClass:!1,showAddDonation:!1,newSerial:""},a.onToggle=a.onToggle.bind(a),a.onChange=a.onChange.bind(a),a.delete=a.delete.bind(a),a.eventController=$({}),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"onChange",value:function(e,t,n,a){var r=this;void 0===t&&(t=!0),t&&this.setState({user:e});var o=this.props.save,l=y.default.getIfExists;e.userFullname=(l(e,"profile.profileForname","")+" "+l(e,"profile.profileSurname","")).trim();var i=function(){delete e.userPassword,o({data:e},function(e){r.setState({user:e}),n&&n(e)},function(e){console.error("test",e),O.default.error(e.responseText)})};if(a){if(a<0)return;this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(i,a)}else i()}},{key:"delete",value:function(e){var t=this.state.user,n=this.context.router;this.deletePromise||(this.deletePromise=k.default.ajax({type:"delete",url:"/api/users/"+t.id,data:{reason:e}}),this.deletePromise.then(function(){n.push("/users/role/students"),O.default.success("User deleted")},function(e){return O.default.error(e.responseText)}))}},{key:"onToggle",value:function(e){var t=e.target.value;this.setState((0,l.default)({},t,!this.state[t]))}},{key:"render",value:function(){var e=this,t=this.state,n=t.user,a=t.newSerial,r=t.showQuickAddClass,o=t.showAddDonation;return p.default.createElement("div",null,p.default.createElement("div",{id:"notifications"}),p.default.createElement("div",{className:"content-block"},p.default.createElement(U,{user:n,newSerial:a,onChange:this.onChange,onDelete:this.delete})),p.default.createElement("div",{className:"content-block"},p.default.createElement(v.default,{appTypeKey:this.props.appTypeKey,user:n,eventController:this.eventController}),p.default.createElement("div",{style:{float:window.innerWidth<768?"none":"right",marginTop:"10px"}},p.default.createElement(h.Button,{bsStyle:"success",className:"custom",style:{marginRight:"20px",marginBottom:10},value:"showAddDonation",onClick:this.onToggle},"Add Donation"),p.default.createElement(h.Button,{bsStyle:"success",value:"showQuickAddClass",style:{marginBottom:10},onClick:this.onToggle,className:"custom"},"Add Class")),p.default.createElement("div",{style:{marginTop:"60px"}},p.default.createElement(h.Panel,{style:{border:"0"},collapsible:!0,expanded:r},p.default.createElement(C.default,{id:n.id,onBasketUpdate:function(){return e.eventController.trigger("basketUpdate")}}))),p.default.createElement(w.default,{show:o,userId:n.id,onClose:function(){return e.setState({showAddDonation:!1})},style:{height:"300px",overflowY:"auto"}})),p.default.createElement(K,{appTypeKey:this.props.appTypeKey,id:n.id}),p.default.createElement(F.default,{appTypeKey:this.props.appTypeKey,params:{userId:n.id}}))}}]),t}(f.Component);j.contextTypes={router:f.PropTypes.object.isRequired};var B={detailButton:{marginLeft:10,marginRight:10},buttonWrapper:{float:"right",marginTop:"20px",marginBottom:"20px"}};window.innerWidth<1024&&(B={detailButton:{marginLeft:10,marginRight:10},buttonWrapper:{marginTop:"20px",marginBottom:"20px"}}),window.innerWidth<768&&(B={detailButton:{marginLeft:10,marginRight:10,marginBottom:10},buttonWrapper:{marginTop:"20px",marginBottom:"20px"}});var U=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={relativesSearchQuery:"",showResults:!1,searchResults:null,searchBarFocused:!1,possibleRelatives:null,user:e.user,newSerial:e.newSerial,deleteableSerial:"",showConfirmDelete:!1,showConfirmDeleteSerial:!1,showCopyUserWnd:!1,hearPlaces:null,isLoading:!0},a.relativesResultsPromise=null,a.possibleRelativesPromise=null,a.onQueryChange=a.onQueryChange.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a),a.onRelativeSelect=a.onRelativeSelect.bind(a),a.onFieldChange=a.onFieldChange.bind(a),a.onChange=a.onChange.bind(a),a.onTextChange=a.onTextChange.bind(a),a.onOff=a.onOff.bind(a),a.addSerial=a.addSerial.bind(a),a.deleteSerial=a.deleteSerial.bind(a),a.deleteSerialConform=a.deleteSerialConform.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"onRelativeSelect",value:function(e){var t=this,n=this.state.user,a=this.props.onChange;n.relatives||(n.relatives=[]),n.relatives.push(e),$.ajax({type:"post",url:"/api/users/"+n.id+"/add-relative/"+e,success:function(){a(n,!1,function(e){n.relatives=e.relatives,t.setState({user:n})})},error:function(e){O.default.error("Error adding relative"),console.error(e)}})}},{key:"onRelativeRemove",value:function(e){var t=this.state.user,n=this.props.onChange;if(t.relatives){for(var a=0;a<t.relatives.length;a++)if(t.relatives[a].id==e){t.relatives[a].isDeleted=!0;break}this.setState({user:t}),$.ajax({type:"delete",url:"/api/users/"+t.id+"/remove-relative/"+e,success:function(){return n(t)},error:function(e){O.default.error("Error removing relative"),console.error(e)}})}}},{key:"onQueryChange",value:function(e){var t=this,n=e.target.value,a=this.state,r=a.possibleRelatives,o=a.searchBarFocused,l=a.user;this.setState({relativesSearchQuery:n,searchResults:null}),r&&0!==r.length||this.setState({showResults:!1}),this.relativesResultsPromise&&this.relativesResultsPromise.cancel(),n&&n.length>0&&(this.relativesResultsPromise=k.default.ajax({type:"get",url:"/api/users/find-relatives",data:{query:n,excludeUserId:l.id}}),this.relativesResultsPromise.then(function(e){t.setState({searchResults:e});var n=function(e){return e?e.length:0};o&&n(e)+n(r)>0&&t.setState({showResults:!0}),t.relativesResultsPromise=null},function(e){console.error(e),t.relativesResultsPromise=null}))}},{key:"onFocus",value:function(){var e=this.state,t=e.searchResults,n=e.possibleRelatives;this.setState({searchBarFocused:!0});var a=function(e){return e?e.length:0};a(t)+a(n)>0&&this.setState({showResults:!0})}},{key:"onBlur",value:function(){this.setState({showResults:!1,searchBarFocused:!1})}},{key:"loadPossibleRelatives",value:function(){var e=this,t=this.state.user;this.possibleRelativesPromise=k.default.ajax({type:"get",url:"/api/users/find-relatives",data:{postcode:y.default.getIfExists(t,"profile.profilePostcode",""),excludeUserId:t.id}}),this.possibleRelativesPromise.then(function(t){return e.setState({possibleRelatives:t})},function(e){return console.error(e.responseText)})}},{key:"loadHearPlaces",value:function(){var e=this;$.ajax({type:"get",url:"/api/hear-places/list",success:function(t){e.setState({hearPlaces:t,isLoading:!1});var n=e.state.user;for(var a in t)if(t[a].value==n.hearPlaceId){if(t[a].isVisible)break;$("#otherHearPlaceInput").slideToggle("fast"),$("#otherHearPlaceInput input").val(t[a].label),n.hearPlaceId=-1,e.setState({user:n});break}}})}},{key:"componentDidMount",value:function(){$(function(){(0,x.default)($("textarea"))}),this.loadPossibleRelatives(),this.loadHearPlaces()}},{key:"renderRelatives",value:function(){var e=this,t=this.state.user.relatives;if(!t)return"";for(var n=[],a=0;a<t.length;a++)!function(a){if(t[a].isDeleted)return"continue";var r=t[a];n.push(p.default.createElement("div",{key:a},p.default.createElement(S.Link,{to:"/users/"+r.id},r.userFullname),p.default.createElement("a",{style:{display:"inline-block",marginLeft:"15px",cursor:"pointer"},onClick:function(t){t.preventDefault(),e.onRelativeRemove(r.id)}},"(remove)")))}(a);return 0===n.length?"":p.default.createElement(h.Col,{md:4},p.default.createElement("div",null,p.default.createElement("p",{className:"detail-field-label"},"Relatives"),p.default.createElement("div",null,n)))}},{key:"onOff",value:function(e){e.preventDefault();var t=this.state.user,n=(this.props.classId,this.state.classRegOpen,"yes"==t.profile.complete?"no":"yes");this.state.user.profile.complete=n,this.setState({user:t});var a=t.id;$.ajax({type:"put",url:"/api/users/"+a,data:{data:t},success:function(){return O.default.success("Saved Successfuly")},error:function(e){O.default.error("save failed"),console.log(e)}})}},{key:"addSerial",value:function(e){e.preventDefault();var t=this.state,n=t.user,a=t.newSerial,r=this.props.onChange;n.serialNumber+=","+a;for(var o=n.serialNumber.split(","),l=0;l<o.length;l++)""==o[l]&&o.splice(l,1);n.serialNumber=o.join(","),this.setState({user:n,newSerial:""}),r(n,!0,null,null)}},{key:"deleteSerialConform",value:function(e){e.preventDefault();var t=this.state,n=(t.showConfirmDeleteSerial,t.deleteableSerial);n=e.target.id,this.setState({showConfirmDeleteSerial:!0,deleteableSerial:n})}},{key:"deleteSerial",value:function(){var e=this.state,t=e.user,n=e.deleteableSerial,a=this.props.onChange,r=t.serialNumber.split(",");r.splice(r.indexOf(n),1);for(var o=0;o<r.length;o++)""==r[o]&&r.splice(o,1);t.serialNumber=r.join(","),this.setState({user:t,deleteableSerial:""}),a(t,!0,null,null)}},{key:"render",value:function(){var e=this,t=this.state,n=t.user,a=t.newSerial,r=[];if(null!==n.serialNumber){r=n.serialNumber.split(",");for(var o=0;o<r.length;o++)""==r[o]&&r.splice(o,1)}var l=this.state,i=l.relativesSearchQuery,s=l.showResults,u=l.searchResults,c=l.possibleRelatives,d=l.showChangePass,f=l.showConfirmDelete,m=l.showCopyUserWnd,v=l.hearPlaces,b=(l.isLoading,l.showConfirmDeleteSerial),_=y.default.getIfExists,C=["DD-MM-YYYY","DD/MM/YYYY","YYYY-MM-DD","YYYY-MM-DD","YYYY/DD/MM","YYYY/DD/MM"];return p.default.createElement("div",null,p.default.createElement(P.default,{show:d,userId:n.id,onClose:function(){return e.setState({showChangePass:!1})}}),p.default.createElement(D.default,{show:f,onConfirm:this.props.onDelete,onClose:function(){return e.setState({showConfirmDelete:!1})}}),p.default.createElement(D.default,{show:b,onConfirm:this.deleteSerial,noReason:"true",onClose:function(){return e.setState({showConfirmDeleteSerial:!1})}}),p.default.createElement(M.default,{show:m,originUserId:n.id,onCopy:function(t){return e.context.router.push("/users/"+t)},onClose:function(){return e.setState({showCopyUserWnd:!1})}}),p.default.createElement("h2",{className:"block-heading"},"Student Detail"),p.default.createElement("div",{style:B.buttonWrapper},p.default.createElement(h.Button,{style:B.detailButton,onClick:function(){return e.setState({showChangePass:!0})}},"Change password"),p.default.createElement(h.Button,{style:B.detailButton,onClick:function(){e.setState({showConfirmDelete:!0})}},"Delete user"),p.default.createElement(h.Button,{style:B.detailButton,onClick:function(){e.setState({showCopyUserWnd:!0})}},"Create Copy"),p.default.createElement(h.Button,{onClick:function(t){e.onOff(t)},style:B.detailButton,bsStyle:"yes"==n.profile.complete?"success":"danger"},"Profile Complete"),p.default.createElement("p",{className:"detail-field-label",style:{display:"inline",marginRight:"15px"}},"Unique id"),p.default.createElement("p",{className:"detail-field-value",style:{display:"inline"}},n.userUniqueId)),p.default.createElement("hr",null),p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:7},p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:12},p.default.createElement(E.EditableValue,{label:"Email Address",value:n.userEmailAddress,rawHTML:!0,onFieldChange:this.onFieldChange},p.default.createElement("input",{type:"text",name:"userEmailAddress",className:"form-control"})))),p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:3},p.default.createElement(E.EditableValue,{label:"Forname",value:n.profile.profileForname,rawHTML:!0,onFieldChange:this.onFieldChange},p.default.createElement("input",{type:"text",name:"profile.profileForname",className:"form-control"}))),p.default.createElement(h.Col,{md:3,mdOffset:1},p.default.createElement(E.EditableValue,{label:"Surname",value:n.profile.profileSurname,rawHTML:!0,onFieldChange:this.onFieldChange},p.default.createElement("input",{type:"text",name:"profile.profileSurname",className:"form-control"})))),p.default.createElement(h.Row,{style:{marginBottom:"15px"}},p.default.createElement(h.Col,{md:7},p.default.createElement("p",{className:"detail-field-label"},"Postcode"),p.default.createElement(R.default,{value:n.profile.profilePostcode,onSelect:function(t){var n=function(e){return e||""};e.onFieldChange("profile.profileAddress",n(t.line1)),e.onFieldChange("profile.profileAddress2",n(t.line2),!0),e.onFieldChange("profile.profilePostcode",n(t.postcode)),e.onFieldChange("profile.city",n(t.town))}}))),p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:4},p.default.createElement("p",{className:"detail-field-label"},"Addresses"),p.default.createElement(E.EditableValue,{value:n.profile.profileAddress,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Address line 1",enableExternalUpdates:!0},p.default.createElement("input",{type:"text",name:"profile.profileAddress",className:"form-control"})),p.default.createElement(E.EditableValue,{value:n.profile.profileAddress2,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Address line 2",enableExternalUpdates:!0},p.default.createElement("input",{type:"text",name:"profile.profileAddress2",className:"form-control"}))),p.default.createElement(h.Col,{md:3},p.default.createElement("p",{className:"detail-field-label"},"City"),p.default.createElement(E.EditableValue,{value:n.profile.city,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Address line 1",enableExternalUpdates:!0},p.default.createElement("input",{type:"text",name:"profile.city",className:"form-control"})))),p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:3},p.default.createElement(E.EditableValue,{label:"Male/female",value:n.profile.profileGender,rawHTML:!0,onFieldChange:this.onFieldChange},p.default.createElement("select",{className:"form-control",name:"profile.profileGender",id:"profile.profileGender"},p.default.createElement("option",{value:"male"},"Male"),p.default.createElement("option",{value:"female"},"Female")))),p.default.createElement(h.Col,{md:4,mdOffset:1},p.default.createElement(E.EditableValue,{label:"Age",value:n.age,valueView:function(e){return I.default.years(e)},formatValue:function(e){return(0,T.default)(e,C).format("DD-MM-YYYY")},rawHTML:!0,onFieldChange:this.onFieldChange},p.default.createElement("input",{name:"age",className:"form-control"}))),p.default.createElement(h.Col,{md:3},p.default.createElement(E.EditableValue,{label:"Status",value:n.userStatus,onFieldChange:this.onFieldChange},p.default.createElement(g.default,{url:"/api/users/get-user-status-enum",className:"form-control",name:"userStatus",id:"userStatus"})))),p.default.createElement(h.Row,null,this.renderRelatives(),p.default.createElement(h.Col,{md:4},p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:12},p.default.createElement("p",{className:"detail-field-label"},"Serial Numbers"),p.default.createElement(h.Row,{style:{margin:0}},p.default.createElement(h.Col,{xs:9,style:{padding:0}},p.default.createElement("input",{type:"text",name:"serialNumber",value:a,onChange:function(t){t.preventDefault,e.setState({newSerial:t.target.value})},className:"form-control"})),p.default.createElement(h.Col,{xs:3,style:{padding:0}},p.default.createElement("input",{type:"button",className:"btn btn-success",style:{width:"100%"},value:"Add",onClick:this.addSerial})))),p.default.createElement(h.Col,{md:12},r.map(function(t){return""==t?p.default.createElement("div",{className:"row"}):p.default.createElement("div",{className:"row"},p.default.createElement(h.Col,{md:2},p.default.createElement("span",{onClick:e.deleteSerialConform,style:{marginTop:"13px",color:"red",cursor:"pointer"},id:t,className:"glyphicon glyphicon-remove","aria-hidden":"true"})),p.default.createElement(h.Col,{md:9,style:{paddingTop:"8px"}},p.default.createElement("p",{name:"serialNumber",className:"detail-field-value highlighted"},t)))})))),p.default.createElement(E.FormField,{label:"Add relative",width:6},p.default.createElement("input",{type:"text",className:"form-control",name:"relativesSearchQuery",onChange:this.onQueryChange,onFocus:this.onFocus,onBlur:this.onBlur,value:i}),p.default.createElement(q,{isShown:s,data:{possibleRelatives:c,searchResults:u},query:i,onClick:this.onRelativeSelect})))),p.default.createElement(h.Col,{md:5},p.default.createElement("div",{style:{marginBottom:"25px"}},p.default.createElement("p",{style:{display:"inline-block"},className:"detail-field-label"},"Student Notes"),p.default.createElement("img",{src:"src/images/admin/pencil.png",style:{display:"inline-block",marginBottom:"4.5px",marginLeft:"4px"}}),p.default.createElement("textarea",{rows:"2",id:"studentNotes",name:"profile.studentNotes",className:"form-control",onChange:this.onTextChange,value:n.profile.studentNotes})),p.default.createElement("div",{style:{marginBottom:"25px"}},p.default.createElement("p",{style:{display:"inline-block"},className:"detail-field-label"},"Teacher Notes"),p.default.createElement("img",{src:"src/images/admin/pencil.png",style:{display:"inline-block",marginBottom:"4.5px",marginLeft:"4px"}}),p.default.createElement("textarea",{rows:"2",id:"studentNotes",name:"profile.teacherNotes",className:"form-control",onChange:this.onTextChange,value:n.profile.teacherNotes})),p.default.createElement("div",{style:{marginBottom:"25px"}},p.default.createElement("p",{className:"detail-field-label"},"PRIMARY CONTACT"),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.profileMobile,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Mobile Number"},p.default.createElement("input",{type:"text",name:"profile.profileMobile",className:"form-control"}))),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.profileTelephone,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Landline Number"},p.default.createElement("input",{type:"text",name:"profile.profileTelephone",className:"form-control"}))),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.parentName,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Parent Name"},p.default.createElement("input",{type:"text",name:"profile.parentName",className:"form-control"})))),p.default.createElement("div",{style:{marginBottom:"59px"}},p.default.createElement("p",{className:"detail-field-label"},"SECONDARY CONTACT"),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.emergencyContact_1Name,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Name"},p.default.createElement("input",{type:"text",name:"profile.emergencyContact_1Name",className:"form-control"}))),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.emergencyContact_1Address,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Address"},p.default.createElement("input",{type:"text",name:"profile.emergencyContact_1Address",className:"form-control"}))),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.emergencyContact_1Contact,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Number"},p.default.createElement("input",{type:"text",name:"profile.emergencyContact_1Contact",className:"form-control"})))),p.default.createElement("div",{style:{marginBottom:"59px"}},p.default.createElement("p",{className:"detail-field-label"},"EMERGENCY CONTACT"),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.emergencyContact_2Name,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Name"},p.default.createElement("input",{type:"text",name:"profile.emergencyContact_2Name",className:"form-control"}))),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.emergencyContact_2Address,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Address"},p.default.createElement("input",{type:"text",name:"profile.emergencyContact_2Address",className:"form-control"}))),p.default.createElement("div",{style:{marginBottom:"-15px"}},p.default.createElement(E.EditableValue,{value:n.profile.emergencyContact_2Contact,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"Number"},p.default.createElement("input",{type:"text",name:"profile.emergencyContact_2Contact",className:"form-control"})))),p.default.createElement("div",null,p.default.createElement("p",{className:"detail-field-label"},"Where "+("male"==_(n,"profile.profileGender","male")?"he":"she")+" heard about us"),p.default.createElement(E.Select,{name:"hearPlaceId",options:v?v.filter(function(e){return e.isVisible}):[],className:"form-control",style:{width:"190px"},value:n.hearPlaceId,onChange:function(t){var a=t.target.value;"-1"==_(n,"hearPlaceId","")!=("-1"==a)&&$("#otherHearPlaceInput").slideToggle("fast"),e.onChange(t,3e3)}})),p.default.createElement("div",{id:"otherHearPlaceInput",style:{display:"none"}},p.default.createElement("input",{type:"text",className:"form-control",name:"otherHearPlace",onChange:function(t){return e.onChange(t,3e3)},style:{width:"190px"}})),p.default.createElement(h.Row,{style:{marginTop:"25px"}},p.default.createElement(h.Col,{md:6,style:{height:"80px"}},p.default.createElement("p",{className:"detail-field-label"},"School"),p.default.createElement(E.EditableValue,{value:n.profile.school,rawHTML:!0,onFieldChange:this.onFieldChange,noValueText:"School"},p.default.createElement("input",{type:"text",name:"profile.school",className:"form-control"})))))),p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:6},p.default.createElement(N.default,{name:"closestBranches",value:n.closestBranches,label:"Closest Branches",onChange:function(t){return e.onChange(t,-1)}})),n.complaints&&n.complaints.length>0?p.default.createElement(h.Col,{md:6},p.default.createElement("p",{className:"detail-field-label"},"Complaints"),p.default.createElement("ul",null,n.complaints.map(function(e){return p.default.createElement("li",null,p.default.createElement(S.Link,{to:"/complaints/"+e.id},[e.type,e.createdAt.split(" ")[0],L.default.removeHtml(e.text.length>30?e.text.slice(0,30)+"...":e.text)].join(" ")))}))):""),p.default.createElement(h.Button,{className:"custom btn-success",onClick:function(){e.setState({showBranchSelector:!1}),e.props.onChange(n,!0,null)}},"Save"))}},{key:"onFieldChange",value:function(e,t,n){var a=this.state.user,r=this.props.onChange,o=!1;y.default.accessObjByPath(a,e,function(e){return e!==t&&(o=!0),t}),o&&r&&r(a,!0,null,n)}},{key:"onChange",value:function(e,t){var n=e.target,a=n.name,r=n.value;this.onFieldChange(a,r,t)}},{key:"onTextChange",value:function(e){var t=this.props.onChange,n=e.target,a=n.name,r=n.value,l=(0,o.default)({},this.state.user),i=!1;y.default.accessObjByPath(l,a,function(e){return e!==r&&(i=!0),r}),this.setState({user:l}),this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(function(){i&&t&&t(l)},5e3)}}]),t}(p.default.Component);U.contextTypes={router:f.PropTypes.object.isRequired},(0,b.default)(function(e){function t(e,n){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n))}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.data;return p.default.createElement("div",null,p.default.createElement("h2",null,"Student attendance"),p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:3},p.default.createElement(E.LabeledValue,{label:"Attended",value:e.attended}))),p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:3},p.default.createElement(E.LabeledValue,{label:"Absent",value:e.absentDays}))),p.default.createElement(h.Row,null,p.default.createElement(h.Col,{md:3},p.default.createElement(E.LabeledValue,{label:"Absent in the last two weeks",value:e.absentDaysInTwoWeeks}))))}}]),t}(f.Component));var H=(0,_.default)((0,b.default)(j),[m.ROLES.SUPER_ADMIN,m.ROLES.ADMIN,m.ROLES.REGISTRAR]);t.default=function(e){return p.default.createElement(H,(0,r.default)({ajaxOperations:{load:{type:"get",url:"/api/users/"+e.id},save:{type:"put",url:"/api/users/"+e.id}}},e))};var q=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.textStyle={width:"90%",paddingLeft:"10%",textAlign:"center",wordBreak:"break-word"},a.id="relativesSearch",a.onClick=a.onClick.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"onClick",value:function(e){this.props.onClick(e.target.value)}},{key:"getRowsCount",value:function(){var e=this.props.data;return e.searchResults?e.searchResults.length:0}},{key:"componentDidMount",value:function(){var e=this;$(function(){e.$searchResults=$("#"+e.id)})}},{key:"componentWillReceiveProps",value:function(e){this.props.isShown!==e.isShown&&this.$searchResults.slideToggle("500")}},{key:"renderList",value:function(e,t){if(!t||0===t.length)return"";for(var n={wordBreak:"break-word",width:"90%"},a=[],r=0;r<t.length&&500!==r;r++)a.push(p.default.createElement("li",{key:r,value:t[r].id,onClick:this.onClick,className:"highlighted",style:n},t[r].userData));return p.default.createElement("div",null,e&&e.length>0?p.default.createElement("p",null,e):"",p.default.createElement("ul",null,a))}},{key:"renderResults",value:function(){var e=this.props,t=e.query,n=e.data,a=n.possibleRelatives,r=n.searchResults,o=this.getRowsCount();return p.default.createElement("div",null,r?p.default.createElement("div",null,p.default.createElement("h5",{style:this.textStyle},'Search results for "',t,'"'),p.default.createElement("h4",{style:this.textStyle},"Found ",o," records",o>500?p.default.createElement("p",null,p.default.createElement("br",null)," Showing first 500+"):"")):"",r&&0!=r.length?"":this.renderList("Possible relatives",a),this.renderList("Found records",r))}},{key:"render",value:function(){return p.default.createElement("div",{style:{display:"none",width:"92%",height:"300px",position:"absolute",zIndex:"2",border:"1px solid #A9A9A9",borderWidth:"0 1px 1px 1px",WebkitBoxShadow:"5px 5px 5px rgba(0, 0, 0, 0.3)",MozBoxShadow:"5px 5px 5px rgba(0, 0, 0, 0.3)",boxShadow:"5px 5px 5px rgba(0, 0, 0, 0.3)",backgroundColor:"#fff",overflow:"auto"},id:this.id},this.renderResults())}}]),t}(f.Component);q.contextTypes={router:f.PropTypes.object.isRequired};var K=function(e){return p.default.createElement(A.default,{appTypeKey:e.appTypeKey,params:{userId:e.id},noFilterForm:!0})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(23)),l=a(n(17)),i=a(n(3)),s=a(n(1)),u=a(n(2)),c=a(n(4)),d=a(n(5)),f=n(0),p=a(f),h=n(6),m=a(n(29)),v=n(18),y=a(n(71)),g=n(9),E=a(n(16)),b=a(n(15)),_=a(n(31)),C=a(n(11)),w=a(n(44)),k=a(n(19)),S=a(n(14)),x=a(n(1240)),T=a(n(100)),P=(a(n(607)),n(12)),R=(E.default.getIfExists,function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={selectedTab:0,confirmText:0,tabHeaders:["Active","Basket","Paid Donations","Deleted Classes"]},a.listeners={},a.addListeners=a.addListeners.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.eventController.on("basketUpdate",function(){!function(t){e.listeners[t]&&e.listeners[t].forEach(function(e){return e()})}("basketUpdate"),e.setState({selectedTab:1})})}},{key:"componentWillUnmount",value:function(){this.props.eventController.off("basketUpdate")}},{key:"render",value:function(){var e=this,t=this.createRegHistoryTabs();return p.default.createElement("div",null,p.default.createElement("h2",{className:"block-heading"},"Course Registration History"),p.default.createElement("hr",null),p.default.createElement("div",{style:{position:"relative",paddingBottom:40,marginBottom:10}},p.default.createElement("div",{style:{overflow:"auto"}},p.default.createElement("div",{style:{minWidth:1024}},p.default.createElement(h.Tabs,{activeKey:this.state.selectedTab,onSelect:function(t){return e.handleTabSelect(t)},className:"content-tabs"},t)))))}},{key:"addListeners",value:function(e){for(var t in e)this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e[t])}},{key:"createRegHistoryTabs",value:function(){for(var e=this,t=this.props.user,n=[p.default.createElement(O,{resourceUrl:"/api/users/"+t.id+"/classes",requestParams:{fields:["id","classId","registerDate","studentStatus","reducedAmount","course.courseTitle","courseClass.classTime","courseClass.feeForEmployed","courseClass.feeForUnemployed","courseClass.classroom.classroomName","courseClass.teacher.userFullname","course.dept.branchIdAssociate","course.dept.deptBranchId","regPaymentStatus","transaction","score","isDeletable"],regStatus:"active"},noDataMsg:"No active course registration data yet!"},p.default.createElement(D,{user:t,deleted:!1})),p.default.createElement(j,{userId:t.id,onSubscribe:this.addListeners}),p.default.createElement(O,{resourceUrl:"/api/users/"+t.id+"/donationRecords",noDataMsg:"No paid donations data yet!",requestParams:{isReceived:1,fields:["donation.title","donation.targetAmount","donationAmount","createdAt","stripeTransaction","paypalTransaction"]}},p.default.createElement(N,null)),p.default.createElement(O,{resourceUrl:"/api/users/"+t.id+"/classes/deleted",requestParams:{fields:["id","classId","registerDate","studentStatus","reducedAmount","course.courseTitle","courseClass.classTime","courseClass.feeForEmployed","courseClass.feeForUnemployed","courseClass.classroom.classroomName","courseClass.teacher.userFullname","course.dept.branchIdAssociate","course.dept.deptBranchId","regPaymentStatus","transaction","score","isDeletable","reason"],regStatus:"active"},noDataMsg:"No Deleted course registration data!"},p.default.createElement(D,{selectedTab:this.state.selectedTab,user:t,deleted:!0,confirmText:this.state.confirmText}))],a=[],r=0;r<n.length;r++)!function(t){a.push(p.default.createElement(h.Tab,{eventKey:t,key:t,title:e.state.tabHeaders[t]},p.default.cloneElement(n[t],{onGetCount:function(n){return e.tableRowsChanged(t,n)}})))}(r);return a}},{key:"handleTabSelect",value:function(e){this.setState({selectedTab:e})}},{key:"tableRowsChanged",value:function(e,t){var n=/(\s\()([0-9]*)(\))$/,a=this.state.tabHeaders[e];a=a.search(n)>0?a.replace(n,"$1"+t+"$3"):a+" ("+t+")";var r=this.state.tabHeaders;r[e]=a,this.setState({tabHeaders:r})}}]),t}(f.Component));t.default=R;var O=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={currentPage:1,tableData:null,checkedRows:[],isLoading:!1},a.rowsPerPage=150,a.promises={loadPromise:null,deletePromise:null,editPromise:null},a.deleteData=a.deleteData.bind(a),a.loadData=a.loadData.bind(a),e.onSubscribe&&e.onSubscribe((0,l.default)({},e.updateEventName?e.updateEventName:"update",a.loadData)),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.tableData,a=t.showConfirmDelete,r=t.isLoading,o=this.props,l=o.noDataMsg,i=o.children,s=this.state.checkedRows;if(r)return p.default.createElement("div",null,p.default.createElement(k.default,null));if(n&&n.length>0){var u=p.default.cloneElement(i,{data:n,onClick:function(e){if(e.target.checked)s.push(e.target.id);else for(var t=0;t<s.length;t++)s[t]===e.target.id&&s.splice(t,1)},onFieldChange:function(t,n,a){return e.onFieldChange(t,n,a)}});return p.default.createElement("div",null,u,p.default.createElement(I,{onDelete:function(){return e.setState({showConfirmDelete:!0})}}),p.default.createElement(w.default,{show:a,onConfirm:this.deleteData,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}return p.default.createElement("div",null,l)}},{key:"loadData",value:function(){var e=this;if(this.props.resourceUrl){this.setState({isLoading:!0});var t={page:this.state.currentPage,rowsPerPage:this.rowsPerPage};this.props.requestParams&&(0,o.default)(t,this.props.requestParams),this.promises.loadPromise=b.default.ajax({type:"get",url:this.props.resourceUrl,data:t}),this.promises.loadPromise.promise.then(function(t){t?(e.setState({tableData:t.rows,isLoading:!1}),e.props.onGetCount&&e.props.onGetCount(t.info.totalCount)):e.props.onGetCount(0)},function(t){console.error(t),e.setState({isLoading:!1})})}}},{key:"deleteData",value:function(e){var t=this;if(this.props.resourceUrl){var n=this.props,a=n.deleteParams,r=n.resourceDeleteUrl,l=n.resourceUrl,i=this.state,s=i.tableData,u=i.checkedRows;if(s=s.filter(function(e){return!u.includes(e.id.toString())}),this.setState({tableData:s}),u.length>0){var c={ids:u,reason:e};a&&(0,o.default)(c,a),this.promises.deletePromise=b.default.makeCancelableAjax(y.default.ajax({type:"delete",url:r||l,data:c})),this.promises.deletePromise.promise.then(function(){C.default.success("Deleted successfully"),t.loadData(),t.setState({checkedRows:[]})},function(e){C.default.error("Deletion failed"),console.log(e,status,error)})}}}},{key:"onFieldChange",value:function(e,t,n){for(var a=this.state.tableData,r=0;r<a.length;r++)if(a[r].id==e){var o=!1;E.default.accessObjByPath(a[r],t,function(e){return e!==n&&(o=!0),n}),o&&this.editRow(a[r]);break}}},{key:"editRow",value:function(e){for(var t=this,n=this.state.tableData,a=0;a<n.length;a++)n[a].id===e.id&&(n[a]=e);this.setState({tableData:n}),this.promises.editPromise=b.default.makeCancelableAjax(y.default.ajax({type:"put",url:this.props.resourceUrl+"/"+e.id,data:e})),this.promises.editPromise.promise.then(function(e){C.default.success("Updated"),t.loadData()},function(e){C.default.error("Update failed"),console.log(e)})}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}}]),t}(p.default.Component),D=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.sendEmail=a.sendEmail.bind(a),a.onPaymentsChange=a.onPaymentsChange.bind(a),a.state={data:e.data,showPayments:{},deletedTable:a.props.deleted,feeForUnemployed:""},a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"sendEmail",value:function(e,t){y.default.ajax({type:"get",url:"/api/students/"+e+"/send-invoice/"+t,success:function(){return C.default.success("Invoice sent successfully")},error:function(e){console.log(e),C.default.error("Invoice sending failed")}})}},{key:"componentDidMount",value:function(){for(var e=this.props.data,t={},n=0;n<e.length;n++)for(var a in e)t.hasOwnProperty(a)||(t[e[n].id]=!1)}},{key:"onPaymentsChange",value:function(e){var t=this.state.data;this.saved=!1,this.setState({data:t});for(var n=0;n<t.length;n++)for(var a=0;a<e.length;a++)if(t[n].id==e[a].course_student_id){t[n].payments=e,this.setState({data:t});break}}},{key:"render",value:function(){for(var e=this,t=this.state.deletedTable,n=[],a=[],r=this.state.data,o=this.state.showPayments,l=0;l<r.length;l++){var i,s;!function(l){i=E.default.accessObjByPath(r[l],"course.dept.deptBranchId"),n.push(r[l]);var u=r[l],c=[],d=r[l].id,f=[],m=void 0,y=0;switch(r[l].studentStatus){case"employed":m=parseFloat(r[l].courseClass.feeForEmployed);break;case"unemployed":m=void 0!==r[l].courseClass?parseFloat(r[l].courseClass.feeForUnemployed):1;break;case"reduced":m=parseFloat(r[l].reducedAmount)}if(r[l].payments.length>0)for(f=r[l].payments,s=0;s<f.length;s++)y+=parseFloat(f[s].amount);if(void 0!==u.courseClass&&void 0!==u.courseClass.teacher&&(u.courseClass.teacher&&u.courseClass.classroom?c.push(p.default.createElement("span",null,u.courseClass.teacher.userFullname,"/",p.default.createElement("br",null),u.courseClass.classroom.classroomName)):u.courseClass.teacher&&!u.courseClass.classroom?c.push(p.default.createElement("span",null,u.courseClass.teacher.userFullname,p.default.createElement("br",null))):!u.courseClass.teacher&&u.courseClass.classroom?c.push(p.default.createElement("span",null,u.courseClass.classroom.classroomName,p.default.createElement("br",null))):c.push(p.default.createElement("span",null))),t||void 0===r[l].courseClass||void 0===r[l].courseClass.classTime?t&&void 0!==r[l].courseClass&&void 0!==r[l].courseClass.classTime&&a.push(p.default.createElement("div",null,p.default.createElement("div",{style:{padding:"10px",display:"flex",justifyContent:"flex-start",borderTop:0,textAlign:"left",paddingLeft:"2%",backgroundColor:"#e1eafb",borderBottom:"1px solid #b6ccf3",cursor:"pointer"},onClick:function(t){o[d]=!o[d],e.setState({showPayments:o})}},p.default.createElement("div",{style:{display:"inline-block",alignSelf:"center"}},p.default.createElement("input",{id:r[l].id,type:"checkbox",onClick:function(t){t.stopPropagation(),e.props.onClick(t)}})),p.default.createElement("div",{className:"col-md-2",style:{display:"inline-block",alignSelf:"center"}},p.default.createElement(v.Link,{to:"/classes/"+r[l].classId},r[l].registerDate.slice(0,10))),p.default.createElement("div",{className:"col-md-3",style:{display:"inline-block",textAlign:"left",alignSelf:"center"}},r[l].course.courseTitle,"/",p.default.createElement("br",null),r[l].courseClass.classTime),p.default.createElement("div",{className:"col-md-3",style:{display:"inline-block",textAlign:"left",alignSelf:"center"}},c),p.default.createElement("div",{className:"col-md-3"},r[l].course.dept.branchIdAssociate),p.default.createElement("div",{className:"col-md-2"},m,"/",parseFloat(m-y)),p.default.createElement("div",{className:"col-md-2"},r[l].reason)),p.default.createElement(h.Panel,{style:{marginBottom:"0px",borderTop:0,borderBottom:0},collapsible:!0,expanded:o[d]},p.default.createElement(M,{student:e.props.user,payments:f,onChange:e.onPaymentsChange,courseId:r[l].id})))):a.push(p.default.createElement("div",null,p.default.createElement("div",{style:{padding:"10px",display:"flex",justifyContent:"flex-start",borderTop:0,textAlign:"left",paddingLeft:"2%",backgroundColor:"#e1eafb",borderBottom:"1px solid #b6ccf3",cursor:"pointer"},onClick:function(t){o[d]=!o[d],e.setState({showPayments:o})}},p.default.createElement("div",{style:{display:"inline-block",alignSelf:"center"}},p.default.createElement("input",{id:r[l].id,type:"checkbox",onClick:function(t){t.stopPropagation(),e.props.onClick(t)}})),p.default.createElement("div",{className:"col-md-2",style:{display:"inline-block",alignSelf:"center"}},p.default.createElement(v.Link,{to:"/classes/"+r[l].classId},r[l].registerDate.slice(0,10))),p.default.createElement("div",{className:"col-md-3",style:{display:"inline-block",textAlign:"left",alignSelf:"center"}},r[l].course.courseTitle,"/",p.default.createElement("br",null),r[l].courseClass.classTime),p.default.createElement("div",{className:"col-md-3",style:{display:"inline-block",textAlign:"left",alignSelf:"center"}},c),p.default.createElement("div",{className:"col-md-3"},r[l].course.dept.branchIdAssociate),p.default.createElement("div",{className:"col-md-2"},m,"/",parseFloat(m-y)),p.default.createElement("div",{className:"col-md-6",style:{display:"inline-block",alignSelf:"center"}},p.default.createElement("div",{style:{width:"100%"}},p.default.createElement(v.Link,{to:"/students/"+r[l].id},"Edit"),p.default.createElement("span",null," | "),p.default.createElement(v.Link,{to:"/students/"+r[l].id+"/print-receipt/"+i,target:"_blank"},"Print Receipt"),p.default.createElement("span",null," | "),p.default.createElement(v.Link,{to:"/students/"+r[l].id+"/print-report",target:"_blank"},"Report"),p.default.createElement("span",null," | "),p.default.createElement("a",{style:{cursor:"pointer"},onClick:function(){return e.sendEmail(r[l].id,i)}},"Send invoice"),p.default.createElement("span",null," | "),void 0!==r[l].transaction&&p.default.createElement("span",null,p.default.createElement(v.Link,{to:"/transactions/"+r[l].transaction.method+"/"+r[l].transaction.id,target:"_blank"},_.default.ucFirst(r[l].transaction.method)+" Detail"),p.default.createElement("span",null," | ")),p.default.createElement(v.Link,{to:"/students/"+r[l].id+"/grades"},"Grade: ",r[l].score?" "+r[l].score:""),p.default.createElement("span",null," | "),p.default.createElement(v.Link,{to:"/students/"+r[l].id+"/print-cert"},"Print Cert")))),p.default.createElement(h.Panel,{style:{marginBottom:"0px",borderTop:0,borderBottom:0},collapsible:!0,expanded:o[d]},p.default.createElement(M,{student:e.props.user,payments:f,onChange:e.onPaymentsChange,courseId:r[l].id})))),!(r[l].payments.length>0))return"continue";n.push(r[l].payments)}(l)}return 3===this.props.selectedTab?p.default.createElement("div",null,p.default.createElement("div",null,p.default.createElement(h.Col,{md:12,style:{padding:"0"}},p.default.createElement("div",{className:"table-head",style:{minHeight:"50px",display:"flex",justifyContent:"flex-start"}},p.default.createElement("div",{style:{display:"inline-block",alignSelf:"center",width:"75px",height:"27px"}}),p.default.createElement("div",{className:"col-md-2"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Registration Time")),p.default.createElement("div",{className:"col-md-3"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Course Title/Class Time")),p.default.createElement("div",{className:"col-md-3"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Teacher/ClassRoom")),p.default.createElement("div",{className:"col-md-3"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Branch")),p.default.createElement("div",{className:"col-md-2"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Total/Remaining")),p.default.createElement("div",{className:"col-md-6"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Payment Status")),p.default.createElement("div",{className:"col-md-4"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Reason")))),p.default.createElement(h.Col,{md:12,style:{padding:"0"}},a))):p.default.createElement("div",null,p.default.createElement("div",null,p.default.createElement(h.Col,{md:12,style:{padding:"0"}},p.default.createElement("div",{className:"table-head",style:{minHeight:"50px",display:"flex",justifyContent:"flex-start"}},p.default.createElement("div",{style:{display:"inline-block",alignSelf:"center",width:"75px",minHeight:"27px"}}),p.default.createElement("div",{className:"col-md-2"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Registration Time")),p.default.createElement("div",{className:"col-md-3"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Course Title/Class Time")),p.default.createElement("div",{className:"col-md-3"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Teacher/ClassRoom")),p.default.createElement("div",{className:"col-md-3"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Branch")),p.default.createElement("div",{className:"col-md-2"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Total/Remaining")),p.default.createElement("div",{className:"col-md-6"},p.default.createElement("span",{style:{paddingTop:10,paddingBottom:10,display:"inline-block"}},"Payment Status")))),p.default.createElement(h.Col,{md:12,style:{padding:"0"}},a)))}},{key:"createHead",value:function(e){var t=m.default.createHeadBase(e);return t.push(p.default.createElement("td",{key:"buttons"})),t}},{key:"createRow",value:function(e,t){var n=this,a=this.state,r=a.showPayments,o=a.showPayment,l=void 0,i=[];if(e.length){if(e.length>0){var s=e[0].course_student_id;o=r[s]}l=e,i.push(p.default.createElement("td",{key:"payemnts",colSpan:6},p.default.createElement(h.Panel,{style:{marginBottom:"0px",borderTop:0,borderBottom:0},collapsible:!0,expanded:o},p.default.createElement(M,{student:this.props.user,payments:l,onChange:this.onPaymentsChange}))))}else{m.default.createRowBase(e,t);var u=E.default.accessObjByPath(e,"course.dept.deptBranchId");i.push(p.default.createElement("td",{key:"link",onClick:function(e){r[c]=o,n.setState({showPayment:!o})}},p.default.createElement(v.Link,{to:"/classes/"+e.classId},e.registerDate.slice(0,10)))),i.push(p.default.createElement("td",{key:"title",onClick:function(e){r[c]=o,n.setState({showPayment:!o})}},e.course.courseTitle)),e.courseClass.teacher&&e.courseClass.classroom?i.push(p.default.createElement("td",{key:"teacherClassRoom",onClick:function(e){r[c]=o,n.setState({showPayment:!o})}},e.courseClass.teacher.userFullname,"/",p.default.createElement("br",null),e.courseClass.classroom.classroomName)):e.courseClass.teacher&&!e.courseClass.classroom?i.push(p.default.createElement("td",{key:"teacherClassRoom",onClick:function(e){r[c]=o,n.setState({showPayment:!o})}},e.courseClass.teacher.userFullname,p.default.createElement("br",null))):!e.courseClass.teacher&&e.courseClass.classroom?i.push(p.default.createElement("td",{key:"teacherClassRoom",onClick:function(e){r[c]=o,n.setState({showPayment:!o})}},e.courseClass.classroom.classroomName,p.default.createElement("br",null))):i.push(p.default.createElement("td",{key:"teacherClassRoom",onClick:function(e){r[c]=o,n.setState({showPayment:!o})}})),i.push(p.default.createElement("td",{key:"branch",onClick:function(e){r[c]=o,n.setState({showPayment:!o})}},e.course.dept.branchIdAssociate));var c=e.id;i.push(p.default.createElement("td",{key:"controls"},p.default.createElement(v.Link,{to:"/students/"+e.id},"Edit"),p.default.createElement("span",null," | "),p.default.createElement(v.Link,{to:"/students/"+e.id+"/print-receipt/"+u,target:"_blank"},"Print Receipt"),p.default.createElement("span",null," | "),p.default.createElement(v.Link,{to:"/students/"+e.id+"/print-report",target:"_blank"},"Report"),p.default.createElement("span",null," | "),p.default.createElement("a",{style:{cursor:"pointer"},onClick:function(){return n.sendEmail(e.id,u)}},"Send invoice"),p.default.createElement("span",null," | "),void 0!==e.transaction&&p.default.createElement("span",null,p.default.createElement(v.Link,{to:"/transactions/"+e.transaction.method+"/"+e.transaction.id,target:"_blank"},_.default.ucFirst(e.transaction.method)+" Detail"),p.default.createElement("span",null," | ")),p.default.createElement(v.Link,{to:"/students/"+e.id+"/grades"},"Grade: ",e.score?" "+e.score:""),p.default.createElement("span",null," | "),p.default.createElement(v.Link,{to:"/students/"+e.id+"/print-cert"},"Print Cert")))}return i}}]),t}(p.default.Component),N=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement(m.default,{showingProps:["donation.title","donation.targetAmount","donationAmount","createdAt"],headers:["Donation Title","Target Amount","Payment Amount","Payment Date"],data:this.props.data,createHead:this.createHead,createRow:this.createRow}))}},{key:"createHead",value:function(e){var t=m.default.createHeadBase(e);return t.push(p.default.createElement("td",{key:"buttons"})),t}},{key:"createRow",value:function(e,t){var n=m.default.createRowBase(e,t),a="";return e.stripeTransaction?a="/transactions/stripe/"+e.stripeTransaction.id:e.paypalTransaction&&(a="/transactions/paypal/"+e.paypalTransaction.id),n.push(p.default.createElement("td",{key:"buttons"},p.default.createElement(v.Link,{to:a},"Detail"))),n}}]),t}(p.default.Component),I=(function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this;return p.default.createElement("div",null,p.default.createElement(m.default,{headers:["Title","Type","Show on Front?","Open / Closed","Total Received","Total Pledged"],data:this.props.data,createHead:function(t){return e.createHead(t)},createRow:function(t,n){return e.createRow(t,n)},checkableRows:!0,checkableRowCondition:function(e){return e.isRemovable},onCheckedRowsChange:function(t){return e.props.onCheckedRowsChange(t)}}))}},{key:"createHead",value:function(e){var t=m.default.createHeadBase(e);return t.push(p.default.createElement("td",{key:"buttons"})),t}},{key:"createRow",value:function(e,t){var n=this,a=[];return a.push(p.default.createElement("td",{key:"title"},e.title)),a.push(p.default.createElement("td",{key:"type"},e.donationType.type)),a.push(p.default.createElement("td",{key:"showOnFront"},p.default.createElement("input",{type:"checkbox",id:"toggle_show_"+e.id,onChange:function(t){return n.onFieldChange(e.id,"isShown",t.target.checked)},checked:e.isShown}))),a.push(p.default.createElement("td",{key:"openOrClosed"},p.default.createElement("input",{type:"checkbox",id:"toggle_closed_"+e.id,onChange:function(t){return n.onFieldChange(e.id,"isClosed",t.target.checked)},checked:e.isClosed}))),a.push(p.default.createElement("td",{key:"totalAmountReceived"},e.totalAmountReceived)),a.push(p.default.createElement("td",{key:"targetAmount"},e.targetAmount)),a}},{key:"onFieldChange",value:function(e,t,n){this.props.setField&&this.props.setField(e,t,n)}}])}(p.default.Component),function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return p.default.createElement("div",{style:{position:"absolute",left:0,bottom:0,right:window.innerWidth<768?0:"auto"}},p.default.createElement(h.Button,{onClick:this.props.onDelete,className:"custom"},"Delete selected"))}}]),t}(p.default.Component)),M=(0,S.default)(function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={payments:e.payments,paymentMethods:e.data,showDeletePayment:!1,idToDelete:null,showStripeForm:!1,clicked:1},a.add=a.add.bind(a),a.change=a.change.bind(a),a.update=a.update.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=(this.state.showStripeForm,this.state.clicked);return this.props.student,p.default.createElement("div",{style:{marginBottom:"20px"}},this.renderTable(),p.default.createElement(h.Button,{className:"custom btn-success",onClick:this.add,style:{marginRight:"15px"}},"Add New Payment"),p.default.createElement(h.Button,{style:{marginRight:"15px"},className:"custom btn-success",onClick:function(n){n.preventDefault(),e.update(),t++,e.setState({clicked:t})}},"Save"))}},{key:"getPaymentsCount",value:function(){var e=0;return this.state.payments.forEach(function(t){t.isDeleted||e++}),e}},{key:"renderTable",value:function(){var e=this,t=this.state,n=t.payments,a=t.showDeletePayment;return this.props.student,n&&0!==this.getPaymentsCount()?p.default.createElement("div",null,p.default.createElement("table",{className:"table table-striped results-table"},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("td",null,"Received by"),p.default.createElement("td",null,"Payment Method"),p.default.createElement("td",null,"Date"),p.default.createElement("td",null,"Amount"),p.default.createElement("td",null,"Staff"),p.default.createElement("td",null))),p.default.createElement("tbody",null,this.renderRows())),p.default.createElement(T.default,{headerText:"Delete payment",confirmText:"Are you sure?",onYes:function(){e.delete(),e.setState({showDeletePayment:!1})},onNo:function(){return e.setState({showDeletePayment:!1})},show:a})):p.default.createElement("h3",null,"No payments yet")}},{key:"renderRows",value:function(){var e=this,t=this.state,n=t.payments,a=t.paymentMethods,r=this.props,o=r.student,l=r.appTypeKey,i=[];return parseInt(o.totalAmount)>0&&i.push(p.default.createElement(A,{key:"initial",paymentMethods:a,payment:{received_by:o.payment_method,payment_method:o.payment_method,date:Dh.dateToStr(new Date),amount:o.totalAmount,staff:o.invoiceId?"paypal":"cash"},disabled:!0})),n&&(i=i.concat(n.map(function(t,n){if(t.isDeleted)return!1;var r="stripe"==t.payment_method&&t.id&&l!=g.ROLES.SUPER_ADMIN;return p.default.createElement(A,{key:n,index:n,payment:t,onDelete:function(){return e.setState({idToDelete:n,showDeletePayment:!0})},onChange:function(t,a){return e.change(n,t,a)},paymentMethods:a,disabled:r,undeletable:r})}))),i}},{key:"add",value:function(){var e=this.state,t=e.payments,n=(e.paymentMethods,this.props),a=(n.remainingFee,n.student,n.courseId);t.push({instalmentId:0,date:null,amount:"",staff:"",course_student_id:a,payment_method:""}),this.setState({payments:t,clicked:1}),this.props.onChange(t)}},{key:"delete",value:function(){var e=this.state,t=e.payments,n=e.idToDelete;t[n].id?t[n].isDeleted=!0:t.splice(n,1),this.setState({payments:t,clicked:1}),this.props.onChange(t)}},{key:"update",value:function(){var e=this.state,t=e.payments;e.clicked>1||y.default.ajax({type:"post",url:"/api/students/updateStudentPayments",data:{studentPayments:t},success:function(e){C.default.success("Successful!")},error:function(e){C.default.error("Something Went Wrong!")}})}},{key:"change",value:function(e,t,n){var a=this.state.payments;a[e][t]=n,this.setState({payments:a,clicked:1}),this.props.onChange(a)}}]),t}(f.Component),{load:{type:"get",url:"/api/student-payments/get-payment-method-enum"}});M.PropTypes={remainingFee:f.PropTypes.number,student:f.PropTypes.object,payments:f.PropTypes.arrayOf(f.PropTypes.object),onChange:f.PropTypes.func.isRequired};var A=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.onChange=a.onChange.bind(a),a.delete=a.delete.bind(a),a.handleDateChange=a.handleDateChange.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.index;P.DatePicker.init(this.handleDateChange,{selector:"#payment-datepicker-"+e})}},{key:"handleDateChange",value:function(){var e=void 0,t=void 0;switch(arguments.length){case 1:var n=arguments[0];e=n.target.name,t=n.target.value;break;case 2:e=arguments[0],t=arguments[1]}this.onChange(e,this.formatDate(t,"yyyy-mm-dd"))}},{key:"formatDate",value:function(e,t){if(!e)return e;var n=e.split("-");switch(t){case"dd-mm-yyyy":4===n[0].length&&n.reverse();break;case"yyyy-mm-dd":4===n[2].length&&n.reverse()}return n.join("-")}},{key:"render",value:function(){var e=this.props.payment,t=(e.instalmentId,e.id,e.received_by),n=e.payment_method,a=e.date,r=e.amount,o=e.staff,l=this.props,i=l.paymentMethods,s=l.disabled,u=l.undeletable,c=l.index;return p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("input",{type:"text",value:t,name:"received_by",className:"form-control",onChange:this.onChange,disabled:s})),p.default.createElement("td",null,p.default.createElement("select",{className:"form-control",name:"payment_method",id:"payment_method",value:n,onChange:this.onChange,disabled:s},p.default.createElement("option",{value:""},"Select method"),i?i.map(function(e,t){return p.default.createElement("option",{key:t,value:e.value},e.label)}):"")),p.default.createElement("td",null,p.default.createElement("input",{value:this.formatDate(a,"dd-mm-yyyy"),name:"date",id:"payment-datepicker-"+c,className:"form-control datepicker",onChange:this.handleDateChange,disabled:s})),p.default.createElement("td",null,p.default.createElement("input",{type:"text",value:r,name:"amount",className:"form-control",onChange:this.onChange,disabled:s})),p.default.createElement("td",null,p.default.createElement("input",{type:"text",value:o,name:"staff",className:"form-control",onChange:this.onChange,disabled:"stripe"!=n&&s})),p.default.createElement("td",null,s||u?"":p.default.createElement(h.Button,{bsStyle:"danger",onClick:this.delete},"Delete")))}},{key:"delete",value:function(){this.props.onDelete()}},{key:"onChange",value:function(){var e=void 0,t=void 0;switch(arguments.length){case 1:var n=arguments[0];e=n.target.name,t=n.target.value;break;case 2:e=arguments[0],t=arguments[1]}this.props.onChange(e,t)}}]),t}(f.Component);A.PropTypes={payment:f.PropTypes.shape({id:f.PropTypes.number,instalmentId:f.PropTypes.number,date:f.PropTypes.string.isRequired,amount:f.PropTypes.number.isRequired,staff:f.PropTypes.string.isRequired}).isRequired,onDelete:f.PropTypes.func.isRequired,onChange:f.PropTypes.func.isRequired};var F=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={data:[],showConfirmDelete:!1,checkedRows:[]},a.delays={},a.loadData=a.loadData.bind(a),a.deleteData=a.deleteData.bind(a),a.createRow=a.createRow.bind(a),a.onChangeStudentStatus=a.onChangeStudentStatus.bind(a),e.onSubscribe({basketUpdate:a.loadData}),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"loadData",value:function(){var e=this,t=this.props,n=t.execute,a=t.onGetCount;n("load",null,function(t){e.setState({data:t}),a(E.default.getIfExists(t,"info.totalCount",0))},function(e){return console.error(e)})}},{key:"deleteData",value:function(e){var t=this,n=this.props.execute,a=this.state.checkedRows;0!==a.length&&n("remove",{ids:a,reason:e},function(){t.setState({checkedRows:[]}),t.loadData(),C.default.success("Deleted successfully")},function(e){console.error(e),C.default.error("Deletion failed")})}},{key:"onChangeStudentStatus",value:function(e,t,n){for(var a=this,r=t.split("|"),o=r[0],i=r[1],s=e.target,u=s.name,c=s.value,d=this.state,f=d.data,p=d.data.rows,h=0;h<p.length;h++)if(p[h].id==t){p[h][u]=c;break}f.rows=p,this.setState({data:f});var m=(0,l.default)({},u,c);"studentStatus"==u&&(m.originalStudentStatus=c);var v={type:"put",url:"/api/cart/"+o+"/"+i,data:m,success:function(e){"reduced"!==c&&a.loadData(e)},error:function(e){C.default.error("Error updating cart item"),console.error(e)}};n&&n>0?(this.delays[t]&&clearTimeout(this.delays[t]),this.delays[t]=setTimeout(function(){return y.default.ajax(v)},n)):y.default.ajax(v)}},{key:"createRow",value:function(e){var t=this,n=this.context.website,a=[],r=0,o=function(e){return a.push(p.default.createElement("td",{key:r++},e))};return o(p.default.createElement("p",null,e.createdAt)),o(p.default.createElement("p",null,e.className)),o(p.default.createElement("select",{className:"form-control",value:e.studentStatus,name:"studentStatus",onChange:function(n){return t.onChangeStudentStatus(n,e.id)}},p.default.createElement("option",{value:"employed"},E.default.getIfExists(n,"paymentField1","employed")),p.default.createElement("option",{value:"unemployed"},E.default.getIfExists(n,"paymentField2","unemployed")),p.default.createElement("option",{value:"reduced"},"reduced"))),o("reduced"!==e.studentStatus?p.default.createElement("p",null,parseFloat(e.calculatedPrice).toFixed(2)):p.default.createElement("input",{className:"form-control",name:"calculatedPrice",type:"text",value:e.calculatedPrice,onChange:function(n){t.onChangeStudentStatus(n,e.id,2500)}})),a}},{key:"getPrices",value:function(){var e=this.state.data.rows;return e&&0!==e.length?e.map(function(e){return{price:e.calculatedPrice,priceWithSurcharge:e.priceWithSurcharge}}):0}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.showConfirmDelete,a=t.data,r=t.showPaymentForm,o=this.props.userId;return r?p.default.createElement("div",null,p.default.createElement(x.default,{params:{userId:o},url:"/api/cart/checkout",type:"get",prices:this.getPrices(),onClose:function(){e.setState({showPaymentForm:!1})},onComplete:function(){return e.loadData()}})):0===E.default.getIfExists(a,"rows.length",0)?p.default.createElement("p",null,"No items in basket"):p.default.createElement("div",null,p.default.createElement(m.default,{data:a.rows,showingProps:["createdAt","className","studentStatus","priceWithSurcharge"],createRow:this.createRow,headers:["Add Time","Class Name","Student Status","Fee"],checkableRows:!0,onCheckedRowsChange:function(t){e.setState({checkedRows:t})}}),p.default.createElement("div",null,p.default.createElement(h.Button,{className:"custom",onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete Selected"),p.default.createElement(h.Button,{className:"custom",style:{marginLeft:"10px"},onClick:function(){return e.setState({showPaymentForm:!0})}},"Process Payment")),p.default.createElement(w.default,{show:n,onConfirm:this.deleteData,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(f.Component);F.contextTypes={website:f.PropTypes.object.isRequired};var L=(0,S.default)(F),j=function(e){return p.default.createElement(L,(0,r.default)({},e,{ajaxOperations:{load:{type:"get",url:"/api/users/"+e.userId+"/basket"},remove:{type:"delete",url:"/api/cart/delete"}}}))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(172)),h=a(n(88)),m=n(6),v=a(n(173)),y=a(n(31)),g=a(n(19)),E=a(n(439)),b=a(n(11)),_=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={method:"",creditCard:{},processing:!1,receivedBy:"",staff:"",paymentCompleted:!1,registeredStudents:[]},a.assetManager=new h.default,a.paymentMethods=["cash","cheque","transfer","stripe"],a.onChange=a.onChange.bind(a),a.close=a.close.bind(a),a.submit=a.submit.bind(a),a.printReceipt=a.printReceipt.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"onChange",value:function(){var e=void 0,t=void 0;switch(arguments.length){case 1:var n=arguments[0];e=n.target.name,t=n.target.value;break;case 2:e=arguments[0],t=arguments[1]}this.setState((0,o.default)({},e,t))}},{key:"printReceipt",value:function(){var e=this.state.registeredStudents;this.context.router.push("/students/print-receipt-rows/"+e)}},{key:"close",value:function(){this.props.onClose()}},{key:"submit",value:function(){var e=this;if(!this.state.processing){this.context.router;var t=this.state,n=t.creditCard,a=t.receivedBy,o=t.staff,l=t.method,i=this.props,s=i.type,u=i.url,c=i.params,d=i.onComplete;if("stripe"===l){var f=v.default.validate(n);if(!f.isValid)return void f.errors.forEach(function(e){return b.default.error(e)})}this.setState({processing:!0}),c=(0,r.default)({receivedBy:a,staff:o},c),E.default.processPayment(l,{method:l,type:s,url:u,params:c,creditCard:n},function(t){d(),e.setState({processing:!1,paymentCompleted:!0,registeredStudents:t})},function(t){b.default.error("Payment has failed, please check the details and try again!","paymentNotifications"),console.log(t),e.setState({processing:!1})})}}},{key:"getTotalAmount",value:function(){var e=this.props.prices,t="stripe"===this.state.method?"priceWithSurcharge":"price";return e.reduce(function(e,n){return e+parseFloat(n[t])},0).toFixed(2)}},{key:"componentWillUnmount",value:function(){this.assetManager.unloadAll()}},{key:"componentWillMount",value:function(){this.assetManager.loadJs("https://js.stripe.com/v2/",function(){p.default.loadPublishableKey()})}},{key:"renderPaymentForm",value:function(){var e=this.state,t=e.receivedBy,n=e.staff,a=e.method,r=e.creditCard;return e.processing?f.default.createElement(g.default,null):f.default.createElement("div",null,f.default.createElement("h3",{style:{textAlign:"center"}},"Payment"),f.default.createElement("p",null,"Total : ",this.getTotalAmount()," "),f.default.createElement(m.Row,{style:{margin:"10px 0 10px 0px"}},f.default.createElement(m.Col,{md:6},f.default.createElement("input",{type:"text",name:"receivedBy",value:t,onChange:this.onChange,className:"form-control",placeholder:"Received By"})),f.default.createElement(m.Col,{md:6},f.default.createElement("input",{type:"text",name:"staff",value:n,onChange:this.onChange,className:"form-control",placeholder:"Staff"}))),f.default.createElement(m.Row,{style:{marginBottom:"10px"}},f.default.createElement(m.Col,{md:6,mdOffset:3},f.default.createElement("select",{value:a,name:"method",className:"form-control",onChange:this.onChange},f.default.createElement("option",{value:""},"Select payment method"),this.paymentMethods.map(function(e,t){return f.default.createElement("option",{key:t,value:e},y.default.ucFirst(e))})))),f.default.createElement(m.Panel,{collapsible:!0,expanded:"stripe"===a,style:"stripe"!==a?{border:"0"}:{}},f.default.createElement(v.default,{onChange:this.onChange,name:"creditCard",value:r})),f.default.createElement(m.Row,null,f.default.createElement(m.Col,{md:4,mdOffset:2},f.default.createElement(m.Button,{style:{width:"100%"},onClick:this.close},"Cancel")),f.default.createElement(m.Col,{md:4},f.default.createElement(m.Button,{style:{width:"100%"},onClick:this.submit},"Submit"))))}},{key:"renderSuccessPaymentView",value:function(){return f.default.createElement("div",null,f.default.createElement("h3",{style:{textAlign:"center"}},"Payment Completed!"),f.default.createElement(m.Row,{style:{margin:"20px 0px 40px 0px"}},f.default.createElement(m.Col,{md:4,mdOffset:2},f.default.createElement(m.Button,{style:{width:"100%"},onClick:this.printReceipt},"Print Receipt")),f.default.createElement(m.Col,{md:4},f.default.createElement(m.Button,{style:{width:"100%"},onClick:this.close},"Close"))))}},{key:"render",value:function(){var e=this.state.paymentCompleted;return f.default.createElement(C,null,f.default.createElement("div",{id:"paymentNotifications"}),e?this.renderSuccessPaymentView():this.renderPaymentForm())}}]),t}(d.Component);t.default=_,_.propTypes={url:d.PropTypes.string.isRequired,type:d.PropTypes.string,params:d.PropTypes.object,prices:d.PropTypes.array.isRequired,onClose:d.PropTypes.func,onComplete:d.PropTypes.func},_.contextTypes={router:d.PropTypes.object.isRequired};var C=function(e){var t=e.children;return f.default.createElement("div",{style:{backgroundColor:"white",padding:"1px 30px 10px 30px",marginTop:"20px",border:"2px solid #dad9d8",borderRadius:"3px",width:"580px",marginLeft:"auto",marginRight:"auto"}},t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(70)),o=a(n(23)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=n(12),h=a(n(14)),m=n(6),v=a(n(16)),y=a(n(11)),g=a(n(100)),E=a(n(19)),b=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={classes:[],isLoading:!1,showAddClass:!1,toCart:!1},a.load=a.load.bind(a),a.addClass=a.addClass.bind(a),a.removeClass=a.removeClass.bind(a),a.requestFields=["id","course.courseTitle","classTime","term.name","courseClassRegistrationOpen","classGender","classWeight","course.weight","course.dept.weight","course.dept.id","course.dept.branchAssociated.branchName"],a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){}},{key:"sortClasses",value:function(e){var t=v.default.getIfExists;return e.sort(function(e,n){var a=parseInt(t(e,"course.dept.weight",0)),r=parseInt(t(n,"course.dept.weight",0));if(a<r)return-1;if(a>r)return 1;var o=parseInt(t(e,"course.weight",0)),l=parseInt(t(n,"course.weight",0));if(o<l)return-1;if(o>l)return 1;var i=parseInt(e.classWeight),s=parseInt(n.classWeight);return i<s?-1:i>s?1:0})}},{key:"load",value:function(e){var t=this;this.setState({isLoading:!0});var n=this.props,a=n.execute,r=n.id,l=(0,o.default)({},e);(0,o.default)(l,{targetUser:r}),a("loadClasses",{filters:l,fields:this.requestFields},function(e){var n=t.sortClasses(e.rows);t.setState({classes:n,isLoading:!1})})}},{key:"removeClass",value:function(e){for(var t=this.state.classes,n=0;n<t.length;n++)if(t[n].id==e){t.splice(n,1);break}this.setState({classes:t})}},{key:"addClass",value:function(){var e=this,t=this.state,n=t.classId,a=t.toCart,r=this.props,o=r.execute,l=r.id,i=this.context.router;o(a?"addClassToCart":"addClass",{studentId:l,classId:n,studentStatus:"employed"},function(t){y.default.success("Class added successfully"),a&&e.props.onBasketUpdate?e.props.onBasketUpdate():i.push("/students/"+t.id),e.removeClass(n)},function(){return y.default.error("Error adding class")})}},{key:"render",value:function(){var e=this,t=this.state,n=t.classes,a=t.isLoading,r=t.showAddClass;return f.default.createElement("div",null,f.default.createElement(_,{onSubmit:this.load}),f.default.createElement(C,{classes:n,isLoading:a,onAdd:function(t,n){return e.setState({showAddClass:!0,classId:t,toCart:n})}}),f.default.createElement(g.default,{headerText:"Class registration",confirmText:"Are you sure?",onYes:function(){e.addClass(),e.setState({showAddClass:!1})},onNo:function(){return e.setState({showAddClass:!1})},show:r}))}}]),t}(d.Component);b.propTypes={id:d.PropTypes.oneOfType([d.PropTypes.number,d.PropTypes.string])},b.contextTypes={router:d.PropTypes.object.isRequired},t.default=(0,h.default)(b,{loadClasses:{type:"get",url:"/api/classes"},addClassToCart:{type:"post",url:"/api/cart/add"},addClass:{type:"post",url:"/api/students"}});var _=function(){var e=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={termOptions:[],courseOptions:[],filters:{term:null,course:null,regIsOpen:"",limit:100,branchId:a.context.branchId}},a.submit=a.submit.bind(a),a.onChange=a.onChange.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillReceiveProps",value:function(e,t){if(this.context.branchId!==t.branchId){this.loadCourses(e,t);var n=this.state.filters;n.branchId=t.branchId,this.setState({filters:n},this.submit)}}},{key:"loadCourses",value:function(e,t){var n=this,a=(t||this.context).branchId;(0,(e||this.props).execute)("loadCourseOptions",{branchId:a},function(e){var t=n.state.filters;n.setState({courseOptions:e,filters:t})})}},{key:"load",value:function(){var e=this;(0,this.props.execute)("loadTermOptions",null,function(t){for(var n=null,a=0;a<t.length;a++)if("1"==t[a].isActive){n=t[a].value;break}null===n&&t.length>0&&(n=t[0].value);var r=e.state.filters;r.term=n,e.setState({termOptions:t,filters:r}),e.submit(null,r)}),this.loadCourses()}},{key:"submit",value:function(e,t){e&&e.preventDefault(),"object"!==(void 0===t?"undefined":(0,r.default)(t))&&(t=this.state.filters),this.props.onSubmit(t)}},{key:"onChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.filters;r[n]=a,this.setState({filters:r})}},{key:"renderFormItem",value:function(e,t,n){var a=this.state.filters;return n&&0!==n.length?f.default.createElement(p.FormField,{width:5,label:t},f.default.createElement("select",{className:"form-control",value:a[e],name:e,onChange:this.onChange},n.map(function(e){return f.default.createElement("option",{key:""!=e.value?e.value:"-1",value:e.value},e.label)}))):""}},{key:"render",value:function(){var e=this.state,t=e.termOptions,n=e.filters,a=e.courseOptions;return a&&0===a.length?f.default.createElement("p",null,"No classes for this branch"):(a.unshift({value:"",label:"All courses"}),f.default.createElement("div",{style:{marginBottom:"10px"}},f.default.createElement("h3",null,"Class filter"),f.default.createElement("form",{onSubmit:this.submit},f.default.createElement(m.Row,null,this.renderFormItem("course","Course",a),this.renderFormItem("term","Term",t),f.default.createElement(p.FormField,{width:5,label:"Registration is open?"},f.default.createElement("select",{name:"regIsOpen",value:n.regIsOpen,onChange:this.onChange,className:"form-control"},f.default.createElement("option",{value:""},"Any status"),f.default.createElement("option",{value:"yes"},"Yes"),f.default.createElement("option",{value:"no"},"No"))),f.default.createElement(m.Col,{md:5},f.default.createElement(m.Button,{className:"custom btn-success",style:{marginTop:window.innerWidth<768?0:24},type:"submit"},"Filter"))))))}}]),t}(d.Component);return e.contextTypes={branchId:d.PropTypes.oneOfType([d.PropTypes.number,d.PropTypes.string])},(0,h.default)(e,{loadTermOptions:{type:"get",url:"/api/terms/list"},loadCourseOptions:{type:"get",url:"/api/courses/list"}})}(),C=function(e){function t(){return(0,i.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"renderRows",value:function(){var e=this.props,t=e.classes,n=e.onAdd,a=v.default.accessObjByPath;return t.map(function(e,t){var r="yes"===e.courseClassRegistrationOpen?f.default.createElement("span",{style:{color:"#00FF00"}},"open"):f.default.createElement("span",{style:{color:"#FF0000"}},"closed");return f.default.createElement("tr",{key:t},f.default.createElement("td",null,a(e,"course.courseTitle")),f.default.createElement("td",null,f.default.createElement("span",null,e.classTime," ("),r,f.default.createElement("span",null,")")),f.default.createElement("td",null,a(e,"term.name")),f.default.createElement("td",null,e.classGender),f.default.createElement("td",null,a(e,"course.dept.branchAssociated.branchName")),f.default.createElement("td",null,f.default.createElement(m.Button,{onClick:function(){return n(e.id,!1)}},"Register")),f.default.createElement("td",null,f.default.createElement(m.Button,{onClick:function(){return n(e.id,!0)}},"ADD TO CART")))})}},{key:"render",value:function(){var e=this.props,t=e.classes;return e.isLoading?f.default.createElement(E.default,null):!(!t||0===t.length)&&f.default.createElement("div",{className:"table-responsive"},f.default.createElement("table",{className:"table table-striped results-table",style:{minWidth:1024}},f.default.createElement("thead",null,f.default.createElement("tr",null,f.default.createElement("th",null,"Course Title"),f.default.createElement("th",null,"Time"),f.default.createElement("th",null,"Term"),f.default.createElement("th",null,"Gender"),f.default.createElement("th",null,"Branch"),f.default.createElement("th",null),f.default.createElement("th",null))),f.default.createElement("tbody",null,this.renderRows())))}}]),t}(d.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(14)),h=n(6),m=n(12),v=(a(n(11)),a(n(43))),y=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.onChange=a.onChange.bind(a),a.state={moneySource:"my money",donationAmount:0},a.save=a.save.bind(a),a.close=a.close.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"changeState",value:function(e,t){this.setState((0,o.default)({},e,t))}},{key:"onChange",value:function(e){this.changeState(e.target.name,e.target.value)}},{key:"close",value:function(){this.clearState(),this.props.onClose()}},{key:"clearState",value:function(){for(var e in this.state)"paymentMethods"!==e&&this.setState((0,o.default)({},e,""))}},{key:"save",value:function(){var e=this,t=this.props,n=t.save,a=t.userId,o=this.state;(0,r.default)(o,{userId:a}),n({data:o},function(){e.close()},function(){e.close()})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.execute;this.state.paymentMethods||t("loadPaymentMethods",null,function(t){e.setState({paymentMethods:t,paymentMethod:t[0].value})}),$(function(){return(0,v.default)($("textarea"))})}},{key:"render",value:function(){var e=this.state,t=e.paymentMethods,n=e.donationAmount,a=e.paymentMethod,r=e.notes,o=e.name,l=e.anotes,i=e.isUkTaxPayer,s=e.moneySource,u=e.isNotGettingTicket,c=this.props,d=c.show,p=c.style;return f.default.createElement(h.Modal,{show:d},f.default.createElement(h.Modal.Dialog,null,f.default.createElement(h.Modal.Header,null,f.default.createElement(h.Modal.Title,null,"Add new donation record")),f.default.createElement(h.Modal.Body,{style:p},f.default.createElement(m.FormField,{width:6,label:"Donation Amount "},f.default.createElement("input",{type:"text",className:"form-control",name:"donationAmount",onChange:this.onChange,value:n})),f.default.createElement(m.FormField,{width:6,label:"Payment Method"},f.default.createElement(m.Select,{name:"paymentMethod",onChange:this.onChange,options:t,value:a})),f.default.createElement(m.FormField,{width:6,label:"Name"},f.default.createElement("input",{type:"text",className:"form-control",name:"name",onChange:this.onChange,value:o})),f.default.createElement(m.FormField,{width:12,label:"Notes"},f.default.createElement("textarea",{name:"notes",rows:"2",className:"form-control",onChange:this.onChange,value:r})),f.default.createElement(m.FormField,{width:12,label:"Admin Notes"},f.default.createElement("textarea",{name:"anotes",rows:"2",className:"form-control",onChange:this.onChange,value:l})),f.default.createElement(h.Col,{md:12,style:{marginTop:10}},f.default.createElement("input",{type:"radio",name:"moneySource",onChange:this.onChange,value:"my money",checked:"my money"==s,style:{marginRight:7}}),f.default.createElement("span",null,"This is my money")),f.default.createElement(h.Col,{md:12,style:{marginTop:10}},f.default.createElement("input",{type:"radio",name:"moneySource",onChange:this.onChange,value:"other",checked:"other"==s,style:{marginRight:7}}),f.default.createElement("span",null,"I'm donating on behalf of a group, company, or someone else")),f.default.createElement(h.Col,{md:12,style:{marginTop:10}},f.default.createElement("input",{type:"checkbox",name:"isNotGettingTicket",checked:!u,onChange:this.onChange,style:{marginTop:"0",alignSelf:"center",marginRight:7}}),f.default.createElement("span",{style:{marginLeft:"5px",alignSelf:"center"}},"I'm getting a ticket, product, or service in return for my donation")),f.default.createElement(h.Col,{md:12,style:{marginTop:10}},f.default.createElement("input",{type:"radio",name:"isUkTaxPayer",onChange:this.onChange,value:"1",checked:"1"==i,style:{marginRight:7}}),f.default.createElement("span",null,"I am a UK taxpayer - please reclaim Gift Aid on my donation")),f.default.createElement(h.Col,{md:12,style:{marginTop:10}},f.default.createElement("input",{type:"radio",name:"isUkTaxPayer",onChange:this.onChange,value:"0",checked:"1"!=i,style:{marginRight:7}}),f.default.createElement("span",null,"I am not a UK taxpayer"))),f.default.createElement(h.Modal.Footer,null,f.default.createElement(h.Button,{onClick:this.close},"Cancel"),f.default.createElement(h.Button,{onClick:this.save,bsStyle:"success"},"Save"))))}}]),t}(d.Component);t.default=(0,p.default)(y,{loadPaymentMethods:{type:"get",url:"/api/donation-records/get-payment-method-enum"},save:{type:"post",url:"/api/donation-records"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=a(n(15)),h=n(12),m=a(n(11)),v=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={userPassword:"",userPasswordConfirm:""},a.close=a.close.bind(a),a.submit=a.submit.bind(a),a.onChange=a.onChange.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"close",value:function(){this.props.onClose()}},{key:"submit",value:function(){var e=this.props.userId,t=this.state,n=t.userPassword,a=t.userPasswordConfirm;""!=n?n==a?(this.promise&&this.promise.cancel(),this.promise=p.default.ajax({type:"put",url:"/api/users/"+e,data:{userPassword:n}}),this.promise.then(function(){return m.default.success("Password has been changed")},function(e){m.default.error("Password was not changed"),console.error(e)}),this.close()):m.default.error("Passwords should match"):m.default.error("Type new password")}},{key:"onChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({},n,a))}},{key:"render",value:function(){var e=this.props.show,t=this.state,n=t.userPassword,a=t.userPasswordConfirm;return d.default.createElement(f.Modal,{show:e,onHide:this.close},d.default.createElement(f.Modal.Dialog,null,d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement("h3",null,"Change password")),d.default.createElement(f.Modal.Body,null,d.default.createElement(h.FormField,{width:12,label:"New password"},d.default.createElement("input",{type:"text",name:"userPassword",className:"form-control",value:n,onChange:this.onChange})),d.default.createElement(h.FormField,{width:12,label:"Confirm"},d.default.createElement("input",{type:"text",name:"userPasswordConfirm",className:"form-control",value:a,onChange:this.onChange}))),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{onClick:this.submit,style:{marginRight:"15px"}},"OK"),d.default.createElement(f.Button,{onClick:this.close},"Cancel"))))}}]),t}(c.Component);t.default=v,v.propTypes={show:c.PropTypes.bool,onClose:c.PropTypes.func.isRequired,userId:c.PropTypes.oneOfType([c.PropTypes.number,c.PropTypes.string]).isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=n(12),h=a(n(11)),m=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.defaultState={firstName:"",lastName:"",gender:"male",birthDate:""},a.state=a.defaultState,a.headerStyle={textAlign:"center",fontSize:"14pt"},a.copyCalled=!1,a.close=a.close.bind(a),a.copyUser=a.copyUser.bind(a),a.handleChangeEvent=a.handleChangeEvent.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"clear",value:function(){this.setState(this.defaultState)}},{key:"close",value:function(){this.clear(),this.copyCalled=!1,this.props.onClose()}},{key:"copyUser",value:function(){var e=this;if(!this.copyCalled){this.copyCalled=!0;var t=this.props,n=t.originUserId,a=t.onCopy;$.ajax({type:"post",url:"/api/users/"+n+"/copy",data:this.state,success:function(t){h.default.success("User copied"),a(t),e.close()},error:function(t){h.default.error("Copy failed"),console.error(t),e.close()}})}}},{key:"handleChangeEvent",value:function(e){this.setState((0,r.default)({},e.target.name,e.target.value))}},{key:"updateDatePickers",value:function(){var e=this;console.log("update dp"),p.DatePicker.init(function(t,n){return e.setState((0,r.default)({},t,n))})}},{key:"componentDidMount",value:function(){this.updateDatePickers()}},{key:"componentDidUpdate",value:function(){this.updateDatePickers()}},{key:"render",value:function(){var e=this.props.show,t=this.state,n=t.firstName,a=t.lastName,r=t.gender,o=t.birthDate;return d.default.createElement(f.Modal,{show:e,onHide:this.close},d.default.createElement(f.Modal.Dialog,null,d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement("p",{style:this.headerStyle},"Copy user")),d.default.createElement(f.Modal.Body,null,d.default.createElement(p.FormField,{label:"First name",width:12},d.default.createElement("input",{type:"text",name:"firstName",className:"form-control",value:n,onChange:this.handleChangeEvent})),d.default.createElement(p.FormField,{label:"Last name",width:12},d.default.createElement("input",{type:"text",name:"lastName",className:"form-control",value:a,onChange:this.handleChangeEvent})),d.default.createElement(p.FormField,{label:"Gender",width:12},d.default.createElement("select",{name:"gender",className:"form-control",value:r,onChange:this.handleChangeEvent},d.default.createElement("option",{value:"male"},"Male"),d.default.createElement("option",{value:"female"},"Female"))),d.default.createElement(p.FormField,{label:"Birth Date",width:12},d.default.createElement("input",{type:"text",name:"birthDate",className:"form-control datepicker",value:o,onChange:this.handleChangeEvent}))),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{onClick:this.close},"Cancel"),d.default.createElement(f.Button,{onClick:this.copyUser,style:{marginLeft:"15px"}},"Copy"))))}}]),t}(c.Component);t.default=m,m.propTypes={originUserId:c.PropTypes.oneOfType([c.PropTypes.number,c.PropTypes.string]).isRequired,onCopy:c.PropTypes.func.isRequired,onClose:c.PropTypes.func.isRequired,show:c.PropTypes.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(15)),f=a(n(29)),p=n(18),h=a(n(60)),m=a(n(28)),v=n(9),y=a(n(11)),g=n(6),E=a(n(19)),b=a(n(44)),_=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:null,isLoading:!0,totalCount:0,showConfirmWnd:!1,idToDelete:null},a.loadPromise=null,a.rowsPerPage=40,a.currentPage=1,a.createRow=a.createRow.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}},{key:"load",value:function(){var e=this;this.loadPromise&&this.loadPromise.cancel();var t={rowsPerPage:this.rowsPerPage,page:this.currentPage};this.loadPromise=d.default.ajax({type:"get",url:"/api/users/reconcile",data:t}),this.loadPromise.then(function(t){console.log(t),e.setState({isLoading:!1,data:t.rows,totalCount:t.info.totalCount})},function(e){return console.log(e)})}},{key:"deleteUser",value:function(e){$.ajax({type:"delete",url:"/api/users/"+e,data:{force:!0},success:function(){return y.default.success("User deleted")},error:function(e){y.default.error("User deletion failed"),console.error(e)}});for(var t=this.state.data,n=0;n<t.length;n++)if(t[n].id==e){t.splice(n,1);break}this.setState({data:t})}},{key:"createRow",value:function(e,t){var n=this,a=f.default.createRowBase(e,t);return a.push(c.default.createElement("td",{key:"controls"},c.default.createElement(p.Link,{to:"/users/"+e.id},"Detail"))),0==e.totalAmount&&a.push(c.default.createElement("td",{key:"delete"},c.default.createElement(g.Button,{onClick:function(){return n.setState({showConfirmWnd:!0,idToDelete:e.id})}},"Delete User + Class"))),a}},{key:"renderTable",value:function(){var e=this.state,t=e.isLoading,n=e.data;return t?c.default.createElement("div",null,c.default.createElement("div",null,c.default.createElement(E.default,null))):n&&0!=n.length?c.default.createElement(f.default,{data:n,showingProps:["profileForname","profileSurname","profileAddress","profilePostcode","classesCount"],headers:["First Name","Last Name","Address","Post Code","Classes Enrolled","View Profile",""],createRow:this.createRow}):c.default.createElement("div",null,c.default.createElement("p",null,"No data."))}},{key:"renderPaginator",value:function(){var e=this;return c.default.createElement(h.default,{totalCount:this.state.totalCount,rowsPerPage:this.rowsPerPage,currentPage:this.currentPage,onPageChange:function(t){e.currentPage=t,e.setState({isLoading:!0}),e.load()}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.showConfirmWnd,a=t.idToDelete;return c.default.createElement("div",null,c.default.createElement("div",{id:"notifications"}),c.default.createElement("div",{className:"content-block",style:{paddingTop:"35px"}},this.renderTable(),this.renderPaginator()),c.default.createElement(b.default,{show:n,onConfirm:function(){return e.deleteUser(a)},onClose:function(){return e.setState({showConfirmWnd:!1})}}))}}]),t}(u.Component);t.default=(0,m.default)(_,[v.ROLES.ADMIN,v.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(59)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(29)),h=n(18),m=n(6),v=a(n(60)),y=a(n(28)),g=n(9),E=a(n(15)),b=a(n(19)),_=n(12),C={NO_CLASSES_THIS_TERM:"noClassesThisTerm",NO_CLASSES_ALL_AND_THIS_TERM:"noClassesAllAndThisTerm",NO_CLASSES_ALL_TERMS:"noClassesInAllTerms",MARKED_AS_WAITING:"statusIsWaiting"},w={datePicker:{alignSelf:"center",width:"200px"}};window.innerWidth<768&&(w={datePicker:{width:"100%"}});var k=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={data:null,isLoading:!0,totalCount:0,filter:C.NO_CLASSES_ALL_TERMS,beginDate:null,endDate:null,uniqueUsersCount:null},a.loadPromise=null,a.rowsPerPage=40,a.currentPage=1,a.createRow=a.createRow.bind(a),a.load=a.load.bind(a),a.handleFieldChange=a.handleFieldChange.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"handleFieldChange",value:function(){var e=void 0,t=void 0;switch(arguments.length){case 1:e=arguments[0].target.name,t=arguments[0].target.value;break;case 2:e=arguments[0],t=arguments[1]}this.setState((0,o.default)({},e,t))}},{key:"componentWillMount",value:function(){this.load()}},{key:"componentDidMount",value:function(){_.DatePicker.init(this.handleFieldChange)}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}},{key:"load",value:function(){var e=this;this.loadPromise&&this.loadPromise.cancel();var t=this.state,n=t.filter,a=t.beginDate,r=t.endDate,o={rowsPerPage:this.rowsPerPage,page:this.currentPage,waitingFilter:n,beginDate:a,endDate:r,advancedSearch:!0};this.loadPromise=E.default.ajax({type:"get",url:"/api/users/search/students",data:o}),this.loadPromise.then(function(t){e.setState({isLoading:!1,data:t.rows,totalCount:t.info.totalCount})},function(e){return console.log(e)}),this.uniqueUsersCountPromise=E.default.ajax({type:"get",url:"/api/users/search/students",data:{waitingFilter:n,countOnly:!0}}),this.uniqueUsersCountPromise.then(function(t){return e.setState({uniqueUsersCount:t})},function(e){return console.error(e)})}},{key:"createRow",value:function(e,t){var n=p.default.createRowBase(e,t,!0);return n.push(f.default.createElement("td",{key:"updatedAt"},e.userStatusUpdatedAt.split(" ")[0])),n.push(f.default.createElement("td",{key:"controls"},f.default.createElement(h.Link,{to:"/users/"+e.profileId},"Detail"))),n}},{key:"renderFilter",value:function(){var e=this,t=this.state,n=t.filter,a=t.beginDate,r=t.endDate;return f.default.createElement("div",{style:{marginTop:"20px"}},f.default.createElement(m.Row,null,f.default.createElement(m.Col,{md:5},f.default.createElement("div",{style:{marginBottom:15}},f.default.createElement("input",{type:"radio",checked:n==C.NO_CLASSES_ALL_TERMS,onChange:function(t){return e.setState({filter:C.NO_CLASSES_ALL_TERMS})},style:{verticalAlign:"middle"}}),f.default.createElement("span",{style:{verticalAlign:"top"}},"Show with no classes in all terms")),f.default.createElement("div",{style:{marginBottom:15}},f.default.createElement("input",{type:"radio",checked:n==C.NO_CLASSES_THIS_TERM,onChange:function(t){return e.setState({filter:C.NO_CLASSES_THIS_TERM})},style:{verticalAlign:"middle"}}),f.default.createElement("span",{style:{verticalAlign:"top"}},"Show with no classes in this term")),f.default.createElement("div",{style:{marginBottom:15}},f.default.createElement("input",{type:"radio",checked:n==C.NO_CLASSES_ALL_AND_THIS_TERM,onChange:function(t){return e.setState({filter:C.NO_CLASSES_ALL_AND_THIS_TERM})},style:{verticalAlign:"middle"}}),f.default.createElement("span",{style:{verticalAlign:"top"}},"Show with no classes in this term & 0 classes")),f.default.createElement("div",{style:{marginBottom:15}},f.default.createElement("input",{type:"radio",checked:n==C.MARKED_AS_WAITING,onChange:function(t){return e.setState({filter:C.MARKED_AS_WAITING})},style:{verticalAlign:"middle"}}),f.default.createElement("span",{style:{verticalAlign:"top"}},'Show marked as "waiting"'))),f.default.createElement(m.Col,{md:6},f.default.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:"15px",flexWrap:"wrap"}},f.default.createElement("input",{className:"form-control datepicker",placeholder:"begin date",type:"text",id:"beginDate",name:"beginDate",value:a,onChange:this.handleFieldChange,style:w.datePicker}),f.default.createElement(function(e){var t=e.style,n=e.children;return f.default.createElement("p",{style:t,className:"detail-field-label"},n)},{style:{alignSelf:"center",margin:"10px 20px 10px 20px"}},"Until"),f.default.createElement("input",{className:"form-control datepicker",placeholder:"end date",type:"text",id:"endDate",name:"endDate",value:r,onChange:this.handleFieldChange,style:w.datePicker})))),f.default.createElement("div",null,f.default.createElement(m.Button,{className:"custom btn-success",style:{marginTop:"15px",marginBottom:10},onClick:this.load},"Filter")))}},{key:"renderTable",value:function(){var e=this.state,t=e.isLoading,n=e.data;return t?f.default.createElement("div",null,f.default.createElement("div",null,f.default.createElement(b.default,null))):n&&0!=n.length?f.default.createElement("div",{style:{margin:"20px auto"}},f.default.createElement(p.default,{data:n,showingProps:["fullName","emailAddress","closestBranches"],headers:["Full name","Email Address","Closest Branches","Waiting sinse",""],createRow:this.createRow}),this.renderExports()):f.default.createElement("div",null,f.default.createElement("p",null,"No data."))}},{key:"renderPaginator",value:function(){var e=this;return f.default.createElement(v.default,{totalCount:this.state.totalCount,rowsPerPage:this.rowsPerPage,currentPage:this.currentPage,onPageChange:function(t){e.currentPage=t,e.setState({isLoading:!0}),e.load()}})}},{key:"renderExports",value:function(){var e=this.state,t=e.filter,n=e.uniqueUsersCount,a=(0,r.default)({waitingFilter:t});return f.default.createElement("div",null,f.default.createElement(m.Row,{style:{fontSize:"12pt"}},f.default.createElement(m.Col,{md:4,mdOffset:1,sm:6,smOffset:6,style:{textAlign:window.innerWidth<768?"left":"right",marginBottom:10}},f.default.createElement(h.Link,{to:"/users/students/print/addresses/filters/"+a,target:"_blank",style:{color:"#f0a300"}},"Export Addresses"+(n?" - "+n+" unique users":""))),f.default.createElement(m.Col,{md:2,className:"hidden-xs",style:{textAlign:"center"}},"|"),f.default.createElement(m.Col,{md:4,sm:6,style:{textAlign:"left",marginBottom:10}},f.default.createElement(h.Link,{to:"/users/students/print/addresses-xls/filters/"+a,target:"_blank",style:{color:"#f0a300"}},"Export Addresses XLS"+(n?" - "+n+" unique users":"")))),f.default.createElement(m.Row,null,f.default.createElement(m.Col,{md:10,mdOffset:1,style:{textAlign:"center",paddingLeft:"30px"}},f.default.createElement(S,{url:"/users/students/print/numbers/filters/"+a,label:"Export Numbers"}),f.default.createElement(S,{url:"/users/students/print/emails/filters/"+a,label:"Export Emails"}),f.default.createElement(S,{url:"/users/students/print/grades-table/filters/"+a,label:"Export Grades"}),f.default.createElement(S,{url:"/users/students/print/grades/filters/"+a,label:"Export Grades Print"}))),f.default.createElement(m.Row,null,f.default.createElement(m.Col,{mdOffset:1,md:10,style:{textAlign:"center",paddingLeft:"30px"}},f.default.createElement(S,{url:"/users/students/print/details/filters/"+a,label:"Export List of Details"}),f.default.createElement(S,{url:"/users/students/print/transactions/filters/"+a,label:"Export Transactions"}),f.default.createElement(S,{url:"/users/students/print/card/filters/"+a,label:"Export Card"}),f.default.createElement(S,{url:"/users/students/print/class-details/filters/"+a,label:"Export Class Details"}))))}},{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement("div",{className:"content-block",style:{marginTop:"35px"}},this.renderFilter()),f.default.createElement("div",{className:"content-block",style:{marginTop:"35px"}},this.renderTable(),this.renderPaginator()))}}]),t}(d.Component);t.default=(0,y.default)(k,[g.ROLES.ADMIN,g.ROLES.SUPER_ADMIN]);var S=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.buttonOffset={marginRight:"15px",marginTop:"15px",display:"inline-block"},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"loadUniqueUsersCount",value:function(){var e=this,t=[],n=this.props.url.split("/");for(var a in n)n[a]&&t.push(n[a]);var r=t[1],o=(t[3],t[5]);o&&((o=JSON.parse(o)).countOnly=!0,this.promise=E.default.ajax({type:"get",url:"/api/users/search/"+r,data:o}),this.promise.then(function(t){return e.setState({label:e.state.label+" - "+t+" unique users"})}))}},{key:"componentWillUnmount",value:function(){this.promise&&this.promise.cancel()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.label;return f.default.createElement(h.Link,{to:t,target:"_blank",style:this.buttonOffset},f.default.createElement(m.Button,{style:{width:"190px"},className:"custom"},n))}}]),t}(d.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(1248)),h=a(n(1251)),m=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,f.ROLES.ADMIN,p.default),(0,r.default)(a,f.ROLES.SUPER_ADMIN,p.default),(0,r.default)(a,f.ROLES.STUDENT,h.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"getChildComponent",value:function(){var e=this.props.appTypeKey;return e in this.childTypes&&this.childTypes[e]}},{key:"getChildrenWithType",value:function(){var e=this.props,t=e.children,n=e.appTypeKey;return!!t&&d.default.cloneElement(t,{appTypeKey:n})}},{key:"render",value:function(){var e=this.getChildComponent(),t=this.getChildrenWithType();return!!e&&d.default.createElement("div",null,d.default.createElement(e,null),t)}}]),t}(c.Component);t.default=m,m.PropTypes={appTypeKey:c.PropTypes.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(15)),f=(n(6),a(n(22)),a(n(1249))),p=a(n(11)),h=a(n(19)),m=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("div",{id:"notifications"}),c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Donations Management"),c.default.createElement("hr",null),c.default.createElement(v,null)))}}]),t}(u.Component);t.default=m;var v=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,donations:null},a.requestFields=["id","isClosed","title","friendlyTitle","user.userFullname","donationType.type","paymentMethod","isShown","donationRecords"],a.loadPromise=null,a.delete=a.delete.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.load()}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}},{key:"load",value:function(){var e=this;this.setState({isLoading:!0}),this.loadPromise&&this.loadPromise.cancel(),this.loadPromise=d.default.ajax({type:"get",url:"/api/donations",data:{fields:this.requestFields}}),this.loadPromise.then(function(t){e.setState({isLoading:!1,donations:t.rows})},function(e){return console.log(e)})}},{key:"delete",value:function(e,t,n){var a=function(e){console.log(e),p.default.success("Donations deleted successfully")},r=function(e){console.log(e),p.default.success("Donation records deleted successfully")};e&&e.length>0&&$.ajax({type:"delete",url:"/api/donations",data:{ids:e,reason:n},success:a,error:r}),t&&t.length>0&&$.ajax({type:"delete",url:"/api/donation-records",data:{ids:t,reason:n},success:a,error:r})}},{key:"renderData",value:function(){var e=this.state,t=e.isLoading,n=e.donations;return t?c.default.createElement("div",null,c.default.createElement(h.default,null)):c.default.createElement("div",null,c.default.createElement(f.default,{items:n,onDelete:this.delete}))}},{key:"render",value:function(){return c.default.createElement("div",null,this.renderData())}}]),t}(u.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=n(18),h=(a(n(29)),a(n(445)),a(n(1250))),m=a(n(268)),v=a(n(11)),y=a(n(44)),g=n(38),E=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={items:a.props.items,checkedDonations:[],checkedDonationRecords:[],expandedRows:[],showConfirmDelete:!1},a.headers=["Title","Type","Payment Method","Show on Front?","Open / Closed","Total Received","Total Pending","Total this month and year",""],a.renderDonation=a.renderDonation.bind(a),a.renderTotalsRow=a.renderTotalsRow.bind(a),a.delete=a.delete.bind(a),a.stopPropagation=a.stopPropagation.bind(a),a.onCheckAll=a.onCheckAll.bind(a),a.isCheckedAll=a.isCheckedAll.bind(a),a.onDonationRecordCheck=a.onDonationRecordCheck.bind(a),a.onDonationRecordStatusToggle=a.onDonationRecordStatusToggle.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onToggleProp",value:function(e,t,n){e.stopPropagation();var a=b.toggleProp(this.state.items,t,n);this.setState({items:a})}},{key:"onDonationCheck",value:function(e){var t=this.state.checkedDonations;m.default.toggleValue(t,e),this.setState({checkedDonations:t})}},{key:"onDonationRecordCheck",value:function(e){var t=this.state.checkedDonationRecords;m.default.toggleValue(t,e),this.setState({checkedDonationRecords:t})}},{key:"onDonationRecordStatusToggle",value:function(e){for(var t=this.state.items,n=0;n<t.length;n++){var a=t[n].donationRecords;if(a)for(var r=0;r<a.length;r++)if(a[r].id==e)return a[r].isReceived=!a[r].isReceived,b.updateDonationRecord(a[r],{isReceived:a[r].isReceived}),void this.setState({items:t})}}},{key:"onCheckAll",value:function(){var e=this.state,t=e.items,n=e.checkedDonations,a=e.checkedDonationRecords;if(this.isCheckedAll())n=[],a=[];else for(var r=0;r<t.length;r++){var o=t[r];n.push(parseInt(o.id));for(var l=0;l<o.donationRecords.length;l++){var i=o.donationRecords[l];a.push(parseInt(i.id))}}this.setState({checkedDonations:n,checkedDonationRecords:a})}},{key:"isCheckedAll",value:function(){for(var e=this.state,t=e.items,n=e.checkedDonations,a=e.checkedDonationRecords,r=0;r<t.length;r++){var o=t[r];if(!n.includes(parseInt(o.id)))return!1;for(var l=0;l<o.donationRecords.length;l++){var i=o.donationRecords[l];if(!a.includes(parseInt(i.id)))return!1}}return!0}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"delete",value:function(e){var t=this.state,n=t.checkedDonations,a=t.checkedDonationRecords,r=t.items;(0,this.props.onDelete)(n,a,e);for(var o=0;o<r.length;o++)if(n.includes(r[o].id))r.splice(o,1),o--;else{var l=r[o].donationRecords;if(l)for(var i=0;i<l.length;i++){var s=parseInt(l[i].id);a.includes(s)&&(l.splice(i,1),i--)}}this.setState({checkedDonations:[],checkedDonationRecords:[],items:r})}},{key:"onRowToggle",value:function(e){var t=this.state.expandedRows,n=t.indexOf(e);-1!==n?t.splice(n,1):t.push(e),this.setState({expandedRows:t})}},{key:"renderTotalsRow",value:function(){var e=this.state.items,t=[],n=0;t.push(d.default.createElement("td",{key:n++})),t.push(d.default.createElement("td",{key:n++},"Total this page"));for(var a=0;a<4;a++)t.push(d.default.createElement("td",{key:n++}));return t.push(d.default.createElement("td",{key:n++}," "+b.calcTotalReceived(e))),t.push(d.default.createElement("td",{key:n++}," "+b.calcTotalPending(e))),t.push(d.default.createElement("td",{key:n++}," "+b.calcTotalThisMonth(e))),t.push(d.default.createElement("td",{key:n++})),d.default.createElement("tr",{key:"totals"},t)}},{key:"renderDonation",value:function(e){var t=this,n=this.state.checkedDonations.includes(e.id),a=0,r=[];return r.push(d.default.createElement("td",{key:a++},d.default.createElement("input",{type:"checkbox",value:e.id,checked:n,onChange:function(){return t.onDonationCheck(e.id)},onClick:this.stopPropagation}))),r.push(d.default.createElement("td",{key:a++},d.default.createElement(p.Link,{to:"/front-donations/"+e.friendlyTitle},e.title))),r.push(d.default.createElement("td",{key:a++},e.donationType.type)),r.push(d.default.createElement("td",{key:a++},e.paymentMethod)),r.push(d.default.createElement("td",{key:a++},d.default.createElement(f.Button,{onClick:function(n){return t.onToggleProp(n,e.id,"isShown")},bsStyle:e.isShown?"success":"danger",style:{width:"50px"}},e.isShown?"Yes":"No"))),r.push(d.default.createElement("td",{key:a++},d.default.createElement(f.Button,{onClick:function(n){return t.onToggleProp(n,e.id,"isClosed")},bsStyle:e.isClosed?"danger":"success",style:{width:"70px"}},e.isClosed?"Closed":"Open"))),r.push(d.default.createElement("td",{key:a++}," "+b.calcTotalReceived([e]))),r.push(d.default.createElement("td",{key:a++}," "+b.calcTotalPending([e]))),r.push(d.default.createElement("td",{key:a++}," "+b.calcTotalThisMonth([e]))),r.push(d.default.createElement("td",{key:a++,width:"11%"},d.default.createElement(p.Link,{to:"/donations/"+e.id},"Edit"))),r}},{key:"renderHead",value:function(){return d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("td",null,d.default.createElement("input",{type:"checkbox",checked:this.isCheckedAll(),onChange:this.onCheckAll})),this.headers.map(function(e,t){return d.default.createElement("td",{key:t},e)})))}},{key:"renderBody",value:function(){var e=this,t=this.state,n=t.items,a=t.expandedRows,r=t.checkedDonationRecords,o=[];return n.forEach(function(t,n){var l=e.renderDonation(t),i=parseInt(t.id);o.push(d.default.createElement("tr",{key:n,onClick:function(){return e.onRowToggle(i)},style:{cursor:"pointer"}},l)),o.push(d.default.createElement("tr",{key:n+"-subrow"},d.default.createElement("td",{colSpan:l.length,style:{padding:"0"}},d.default.createElement(f.Panel,{collapsible:!0,expanded:a.includes(i),style:{margin:"0"}},d.default.createElement(h.default,{items:t.donationRecords,checkedDonationRecords:r,onRecordCheck:function(t){return e.onDonationRecordCheck(t)},onRecordStatusToggle:function(t){return e.onDonationRecordStatusToggle(t)}})))))}),d.default.createElement("tbody",null,o,this.renderTotalsRow())}},{key:"renderTable",value:function(){var e=this.state.items;return e&&0!==e.length?d.default.createElement("div",{className:"table-responsive"},d.default.createElement("table",{className:"table table-striped results-table table-hover"},this.renderHead(),this.renderBody())):d.default.createElement("p",null,"No donations yet.")}},{key:"render",value:function(){var e=this,t=this.state.showConfirmDelete;return d.default.createElement("div",null,this.renderTable(),d.default.createElement(g.LinkContainer,{to:{pathname:"/donations/add"}},d.default.createElement(f.Button,{className:"custom btn-success",style:{marginRight:"15px"}},"Add")),d.default.createElement(f.Button,{className:"custom btn-danger",onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete selected"),d.default.createElement(y.default,{show:t,onConfirm:this.delete,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(c.Component);t.default=E,E.PropTypes={items:c.PropTypes.array,onDelete:c.PropTypes.func.isRequired};var b=function(){function e(){(0,l.default)(this,e)}return(0,i.default)(e,null,[{key:"calcDonationAmount",value:function(e,t){for(var n=0,a=0;a<e.length;a++){var r=e[a].donationRecords;if(r)for(var o=0;o<r.length;o++)r[o].isReceived===t&&(n+=parseFloat(r[o].donationAmount))}return n.toFixed(2)}},{key:"calcTotalReceived",value:function(t){return e.calcDonationAmount(t,!0)}},{key:"calcTotalPending",value:function(t){return e.calcDonationAmount(t,!1)}},{key:"calcTargetAmount",value:function(e){var t=0;return e.forEach(function(e){return t+=parseFloat(e.targetAmount)}),t.toFixed(2)}},{key:"calcTotalThisMonth",value:function(e){for(var t=0,n=new Date,a=0;a<e.length;a++){var r=e[a].donationRecords;if(r)for(var o=0;o<r.length;o++){var l=new Date(r[o].createdAt);l.getMonth()===n.getMonth()&&l.getYear()===n.getYear()&&(t+=parseFloat(r[o].donationAmount))}}return t.toFixed(2)}},{key:"toggleProp",value:function(t,n,a){for(var o=0;o<t.length;o++)t[o].id==n&&(t[o][a]=!t[o][a],e.updateDonation(t[o],(0,r.default)({},a,t[o][a])));return t}},{key:"updateDonation",value:function(e,t){$.ajax({type:"put",url:"/api/donations/"+e.id,data:t,success:function(e){v.default.success("Updated",250),console.log(e)},error:function(e){v.default.error("Update failed",500),console.log(e)}})}},{key:"updateDonationRecord",value:function(e,t){$.ajax({type:"put",url:"/api/donation-records/"+e.id,data:t,success:function(e){v.default.success("Updated",250),console.log(e)},error:function(e){v.default.error("Update failed",500),console.log(e)}})}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(77)),p=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.onCheck=a.onCheck.bind(a),a.onStatusToggle=a.onStatusToggle.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"onCheck",value:function(e){(0,this.props.onRecordCheck)(e)}},{key:"onStatusToggle",value:function(e){(0,this.props.onRecordStatusToggle)(e)}},{key:"renderRows",value:function(){for(var e=this.props,t=e.items,n=e.checkedDonationRecords,a=[],r=0;r<t.length;r++)a.push(c.default.createElement(h,{key:r,item:t[r],onCheck:this.onCheck,onStatusToggle:this.onStatusToggle,checked:n.includes(parseInt(t[r].id))}));return a}},{key:"render",value:function(){var e=this.props.items;return e&&0!==e.length?c.default.createElement("div",null,this.renderRows()):c.default.createElement("p",null,"No records yet.")}}]),t}(u.Component);t.default=p,p.PropTypes={items:u.PropTypes.array,onRecordCheck:u.PropTypes.func.isRequired,onRecordStatusToggle:u.PropTypes.func.isRequired,checkedDonationRecords:u.PropTypes.array.isRequired};var h=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.show=a.show.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"show",value:function(){var e=this.props.item;this.context.router.push("/donation-records/"+e.id)}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.onCheck,a=e.onStatusToggle,r=e.checked,o=f.default.parse(t.createdAt).toString(),l=t.userEmailAddress&&t.userEmailAddress.length>0?t.userEmailAddress:"-",i=parseInt(t.id);return c.default.createElement("div",{style:{marginBottom:"-1px",border:"1px solid #ECECEC",padding:"10px"}},c.default.createElement("div",{style:{display:"inline-block",width:"3%",textAlign:"center"}},c.default.createElement("input",{type:"checkbox",onChange:function(){return n(i)},checked:r})),c.default.createElement("div",{style:{display:"inline-block",width:"15%",textAlign:"center"}}," "+t.donationAmount),c.default.createElement("div",{style:{display:"inline-block",width:"45%",textAlign:"center"}},l),c.default.createElement("div",{style:{display:"inline-block",width:"15%",textAlign:"center"}},o),c.default.createElement("div",{style:{display:"inline-block",width:"10%",textAlign:"center"}},c.default.createElement(d.Button,{onClick:function(){return a(i)},bsStyle:t.isReceived?"success":"warning",style:{width:"90px"}},t.isReceived?"Received":"Pending")),c.default.createElement("div",{style:{display:"inline-block",width:"10%",textAlign:"center"}},c.default.createElement(d.Button,{style:{width:"90px"},onClick:this.show},"Show")))}}]),t}(u.Component);h.PropTypes={item:u.PropTypes.object.isRequired,onCheck:u.PropTypes.func.isRequired,onStatusToggle:u.PropTypes.func.isRequired,checkedDonationRecords:u.PropTypes.array.isRequired},h.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=(a(u),a(n(110))),d=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.renderTemplatedComponent("Donations")}}]),t}(u.Component);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement("p",null,"Donations detail")}}]),t}(u.Component);t.default=d,(function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(u.Component)).PropTypes={}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=a(n(15)),p=n(12),h=a(n(22)),m=a(n(36)),v=n(6),y=a(n(11)),g=a(n(43)),E=a(n(19)),b=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,donation:{}},a.allowedRoles=[d.ROLES.ADMIN,d.ROLES.SUPER_ADMIN],a.promises={save:null,load:null},a.requestFields=["id","title","donationTypeId","targetAmount","body","notes","isCalled","isShown","imageFileName","paymentMethod"],a.handleFieldChange=a.handleFieldChange.bind(a),a.back=a.back.bind(a),a.submit=a.submit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return-1!==this.allowedRoles.indexOf(e)}},{key:"componentWillMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"submit",value:function(e){e.preventDefault(),this.saveData()}},{key:"handleFieldChange",value:function(e){var t=this.state.donation,n=e.target.value;"checkbox"==e.target.type&&(n=e.target.checked),t[e.target.name]=n,this.setState({donation:t})}},{key:"loadData",value:function(){var e=this,t=this.props.params.id;t&&(this.setState({isLoading:!0}),this.promises.load=f.default.ajax({type:"get",url:"/api/donations/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){e.setState({isLoading:!1,donation:t}),$(function(){return(0,g.default)($("textarea"))})},function(e){return console.log(e)}))}},{key:"saveData",value:function(){var e=this,t=this.props.params.id,n=this.state.donation,a=null;a=t?{type:"put",url:"/api/donations/"+t,data:n}:{type:"post",url:"/api/donations",data:n},this.promises.save=f.default.ajax(a),this.promises.save.then(function(n){y.default.success("Saved successfully"),console.log(n),!t&&n.id&&e.redirectToCreated(n.id)},function(e){y.default.error("Save failed"),console.log(e.responseText)})}},{key:"back",value:function(){this.context.router.push("/donations")}},{key:"redirectToCreated",value:function(e){this.context.router.push("/donations/"+e+"/edit")}},{key:"renderForm",value:function(){var e=this.state.donation,t={marginBottom:10};return c.default.createElement("div",null,c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6,style:t},c.default.createElement(_,null,"Title"),c.default.createElement("input",{type:"text",name:"title",id:"title",className:"form-control",value:e.title,onChange:this.handleFieldChange})),c.default.createElement(v.Col,{md:6,style:t},c.default.createElement(_,null,"Donation Type"),c.default.createElement(m.default,{name:"donationTypeId",id:"donationTypeId",url:"/api/donations/types",className:"form-control",value:e.donationTypeId,onChange:this.handleFieldChange},c.default.createElement("option",{value:"-1"},"-- Select Donation Type --")))),c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6,style:t},c.default.createElement(_,null,"Payment Method"),c.default.createElement(m.default,{name:"paymentMethod",id:"paymentMethod",url:"/api/donations/payment-methods",className:"form-control",value:e.paymentMethod,onChange:this.handleFieldChange},c.default.createElement("option",{value:"-1"},"-- Select Payment Method --"))),c.default.createElement(v.Col,{md:6,style:t},c.default.createElement(_,null,"Target Amount"),c.default.createElement("input",{type:"text",name:"targetAmount",id:"targetAmount",className:"form-control",value:e.targetAmount,onChange:this.handleFieldChange}))),c.default.createElement(_,null,"Body Text"),c.default.createElement(p.EditableHTML,{value:e.body,onChange:this.handleFieldChange,name:"body",onlyEdit:!0}),c.default.createElement(v.Row,{style:{marginBottom:"20px"}},c.default.createElement(p.FormField,{width:12,label:"Admin Notes",style:t},c.default.createElement("textarea",{name:"notes",id:"notes",rows:"2",className:"form-control",value:e.notes,onChange:this.handleFieldChange})),c.default.createElement(v.Col,{md:6,style:t},c.default.createElement(_,null,"Did you manage to reach and get a positive response?"),c.default.createElement("input",{style:{display:"block"},type:"checkbox",name:"isCalled",checked:e.isCalled,onChange:this.handleFieldChange})),c.default.createElement(v.Col,{md:6,style:t},c.default.createElement(_,null,"Shown on front page?"),c.default.createElement("input",{style:{display:"block"},type:"checkbox",name:"isShown",checked:e.isShown,onChange:this.handleFieldChange}))),c.default.createElement(h.default,null,c.default.createElement(v.Button,{className:"custom btn-success",style:{marginRight:"15px"},type:"submit"},"Save"),c.default.createElement(v.Button,{className:"custom",onClick:this.back},"Back"))))}},{key:"render",value:function(){var e=this.state.isLoading;return!!this.isAllowed()&&(e?c.default.createElement("div",null,c.default.createElement(E.default,null)):c.default.createElement("div",{className:"content-block",style:{paddingTop:"35px"}},this.renderForm()))}}]),t}(u.Component);t.default=b,b.PropTypes={appTypeKey:u.PropTypes.string.isRequired},b.contextTypes={router:u.PropTypes.object.isRequired};var _=function(e){var t=e.children;return c.default.createElement("p",{className:"detail-field-label"},t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(12),f=a(n(22)),p=a(n(15)),h=a(n(16)),m=a(n(31)),v=n(6),y=n(9),g=a(n(11)),E=a(n(43)),b=a(n(19)),_=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,recordObj:{}},a.allowedRoles=[y.ROLES.ADMIN,y.ROLES.SUPER_ADMIN],a.promises={save:null,load:null},a.requestFields=["donation.title","donation.donationType.type","donation.targetAmount","donation.PaymentMethod","donation.paypalEmailAddress","donation.paypalSandboxEmailAddress","donationAmount","isReceived","term.name","name","notes","anotes","user.userEmailAddress","phoneNumber","user.profile.telephone","user.profile.number","paypalTransaction.fullDetails"],a.handleFieldChange=a.handleFieldChange.bind(a),a.back=a.back.bind(a),a.submit=a.submit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return-1!==this.allowedRoles.indexOf(e)}},{key:"load",value:function(){var e=this,t=this.props.params.id;t&&(this.setState({isLoading:!0}),this.promises.load=p.default.ajax({type:"get",url:"/api/donation-records/"+t,data:{fields:this.requestFields}}),this.promises.load.then(function(t){e.setState({isLoading:!1,recordObj:t}),$(function(){return(0,E.default)($("textarea"))})},function(t){e.setState({isLoading:!1}),console.log(t)}))}},{key:"save",value:function(){var e=this.state.recordObj,t=this.props.params.id;t&&(this.promises.save=p.default.ajax({type:"put",url:"/api/donation-records/"+t,data:{donationAmount:parseFloat(e.donationAmount),notes:e.notes,anotes:e.anotes}}),this.promises.save.then(function(e){g.default.success("Updated"),console.log(e)},function(e){g.default.error("Update failed"),console.log(e)}))}},{key:"componentWillMount",value:function(){this.isAllowed()&&this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"handleFieldChange",value:function(e){var t=this.state.recordObj;t[e.target.name]=e.target.value,this.setState({recordObj:t})}},{key:"submit",value:function(e){e.preventDefault(),this.save()}},{key:"back",value:function(){this.context.router.goBack()}},{key:"renderPaypalVars",value:function(){var e=this.state.recordObj,t=h.default.accessObjByPath(e,"paypalTransaction.fullDetails");if(!t)return!1;var n=[];for(var a in t){var r=m.default.ucWords(a.replace(/_/g,""));n.push(c.default.createElement(d.LabeledValue,{key:a,label:r,value:t[a]}))}return c.default.createElement("div",null,c.default.createElement("p",{style:{fontWidth:"bold"}},"Paypal Variables"),n)}},{key:"renderDetail",value:function(){var e=this.state.recordObj,t=h.default.accessObjByPath;return c.default.createElement("div",null,c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(d.LabeledValue,{label:"Title",value:t(e,"donation.title"),asRow:!0}),c.default.createElement(d.LabeledValue,{label:"Type",value:t(e,"donation.donationType.type"),asRow:!0}),c.default.createElement(d.LabeledValue,{label:"Type",value:" "+t(e,"donation.targetAmount"),asRow:!0}),c.default.createElement(d.LabeledValue,{label:"Payment Method",value:t(e,"donation.paymentMethod"),asRow:!0}),c.default.createElement(d.LabeledValue,{label:"Paypal Email Address",value:t(e,"donation.paypalEmailAddress"),asRow:!0}),c.default.createElement(d.LabeledValue,{label:"Paypal Sandbox Email Address",value:t(e,"donation.paypalSandboxEmailAddress"),asRow:!0}),c.default.createElement(d.LabeledValue,{label:"Type",value:t(e,"donation.donationType.type"),asRow:!0}),c.default.createElement(d.FormField,{width:5,label:"Donation Amount"},c.default.createElement("br",null),c.default.createElement("span",{style:{marginRight:"10px"}},""),c.default.createElement("input",{style:{display:"inline-block",width:"50%"},type:"text",className:"form-control",name:"donationAmount",value:e.donationAmount,onChange:this.handleFieldChange})),c.default.createElement(d.LabeledValue,{label:"Donation Received?",value:e.isReceived?"Yes":"No"}),c.default.createElement(d.LabeledValue,{label:"Donation term",value:t(e,"term.name")}),c.default.createElement(d.LabeledValue,{label:"Name",value:e.name}),c.default.createElement(d.FormField,{width:12,label:"Notes"},c.default.createElement("textarea",{name:"notes",id:"notes",rows:"2",className:"form-control",value:e.notes,onChange:this.handleFieldChange})),c.default.createElement(d.FormField,{width:12,label:"Admin Notes"},c.default.createElement("textarea",{name:"anotes",id:"anotes",rows:"2",className:"form-control",value:e.anotes,onChange:this.handleFieldChange})),c.default.createElement(d.LabeledValue,{label:"User Email Address",value:t(e,"user.userEmailAddress")}),c.default.createElement(d.LabeledValue,{label:"Telephone",value:t(e,"user.profile.profileTelephone")}),c.default.createElement(d.LabeledValue,{label:"Mobile",value:t(e,"user.profile.profileMobile")}),this.renderPaypalVars(),c.default.createElement(f.default,null,c.default.createElement(v.Button,{bsStyle:"info",style:{marginRight:"15px"},type:"submit"},"Update"),c.default.createElement(v.Button,{bsStyle:"warning",onClick:this.back},"Back"))))}},{key:"render",value:function(){if(!this.isAllowed())return!1;var e=this.state,t=e.isLoading,n=e.recordObj;return t?c.default.createElement("div",null,c.default.createElement(b.default,null)):n?c.default.createElement("div",null,c.default.createElement("h2",null,"Donation Record Detail"),this.renderDetail()):c.default.createElement("p",null,"Not found")}}]),t}(u.Component);t.default=_,_.PropTypes={appTypeKey:u.PropTypes.string.isRequired,params:u.PropTypes.object.isRequired},_.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(1256)),h=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.headerTypes=(a={},(0,r.default)(a,f.ROLES.SUPER_ADMIN,p.default),(0,r.default)(a,f.ROLES.ADMIN,p.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return this.headerTypes.hasOwnProperty(e)}},{key:"renderChildren",value:function(){var e=this.props,t=e.children,n=e.appTypeKey;return!!t&&d.default.cloneElement(t,{appTypeKey:n})}},{key:"render",value:function(){if(!this.isAllowed())return!1;var e=this.props.appTypeKey,t=this.headerTypes[e];return d.default.createElement("div",null,d.default.createElement(t,null),d.default.createElement("div",{id:"notifications"}),this.renderChildren())}}]),t}(c.Component);t.default=h,h.PropTypes={appTypeKey:c.PropTypes.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(99)),p=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.tabRoutes={General:"/settings/general","Multi Branches":["/settings/multi-branches","/websites","/branches"],Term:"/settings/terms",Bank:"/settings/bank"},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"navigate",value:function(e){this.context.router.push(e)}},{key:"render",value:function(){var e=this,t=window.location.pathname,n=[];for(var a in this.tabRoutes)!function(a){var r=e.tabRoutes[a],o=!1;Array.isArray(r)||(r=[r]);for(var l in r)if(t.includes(r[l])){o=!0;break}n.push(c.default.createElement(d.NavItem,{key:a,className:o?"active":"",onClick:function(){return e.navigate(r[0])}},a))}(a);return c.default.createElement("div",{className:"admin-nav-secondary"},c.default.createElement("div",{className:"container"},c.default.createElement(f.default,null,n)))}}]),t}(u.Component);t.default=p,p.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=a(n(22)),p=n(12),h=a(n(15)),m=(a(n(31)),n(6)),v=a(n(11)),y=a(n(19)),g=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,data:null},a.allowedRoles=[d.ROLES.ADMIN,d.ROLES.SUPER_ADMIN],a.promises={load:null,save:null},a.handleFieldChange=a.handleFieldChange.bind(a),a.submit=a.submit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"isAllowed",value:function(){return this.allowedRoles.includes(this.props.appTypeKey)}},{key:"save",value:function(){this.promises.save&&this.promises.save.cancel();var e=this.state.data;this.promises.save=h.default.ajax({type:"put",url:"/api/settings",data:{settingsInputs:e}}),this.promises.save.then(function(e){v.default.success("Saved successfully"),console.log(e)},function(e){v.default.error("Save failed"),console.log(e)})}},{key:"load",value:function(){var e=this;this.promises.load&&this.promises.load.cancel(),this.setState({isLoading:!0}),this.promises.load=h.default.ajax({type:"get",url:"/api/settings/email"}),this.promises.load.then(function(t){return e.setState({isLoading:!1,data:t})},function(t){e.setState({isLoading:!1}),console.log(t)})}},{key:"submit",value:function(e){e.preventDefault(),this.save()}},{key:"handleFieldChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.data;for(var o in r)if(r[o].settingKey==n){r[o].settingValue=a;break}this.setState({data:r})}},{key:"componentWillMount",value:function(){this.isAllowed()&&this.load()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"render",value:function(){if(!this.isAllowed())return!1;var e=this.state,t=e.isLoading,n=e.data;return t?c.default.createElement("div",null,c.default.createElement(y.default,null)):c.default.createElement("div",null,c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(p.SettingsForm,{settings:n,onChange:this.handleFieldChange}),c.default.createElement(f.default,null,c.default.createElement(m.Button,{bsStyle:"success",type:"submit"},"Save"))))}}]),t}(u.Component);t.default=g,g.PropTypes={appTypeKey:u.PropTypes.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=a(n(28)),p=a(n(14)),h=n(12),m=a(n(22)),v=n(6),y=a(n(1259)),g=[d.ROLES.ADMIN,d.ROLES.SUPER_ADMIN],E={},b=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:a.props.data},a.listeners={},a.handleFieldChange=a.handleFieldChange.bind(a),a.submit=a.submit.bind(a),a.onGetListeners=a.onGetListeners.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"handleFieldChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.data;for(var o in r)if(r[o].settingKey==n){r[o].settingValue=a;break}this.setState({data:r})}},{key:"submit",value:function(e){e.preventDefault(),(0,this.props.save)({settingsInputs:this.state.data});for(var t in this.listeners.submit)this.listeners.submit[t]();$(E).trigger("formSave")}},{key:"sortByGroups",value:function(e){var t={};return e.forEach(function(e){var n=e.settingGroup;t.hasOwnProperty(n)||(t[n]=[]),t[n].push(e)}),t}},{key:"onGetListeners",value:function(e){for(var t in e)this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e[t])}},{key:"render",value:function(){var e=this.state.data,t=this.sortByGroups(e);return c.default.createElement("div",{className:"content-block",style:{paddingTop:"15px"}},c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},c.default.createElement("h3",null,"General settings"),c.default.createElement(h.SettingsForm,{settings:t.general,onChange:this.handleFieldChange})),c.default.createElement(v.Col,{md:6},c.default.createElement("h3",null,"Email settings"),c.default.createElement(h.SettingsForm,{settings:t.email,onChange:this.handleFieldChange}))),c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},c.default.createElement("h3",null,"Paypal settings"),c.default.createElement(h.SettingsForm,{settings:t.paypal,onChange:this.handleFieldChange}),c.default.createElement("h3",null,"Stripe settings"),c.default.createElement(h.SettingsForm,{settings:t.stripe,onChange:this.handleFieldChange})),c.default.createElement(v.Col,{md:6},c.default.createElement("h3",null,"Website settings"),c.default.createElement(h.SettingsForm,{settings:t.website,onChange:this.handleFieldChange}))),c.default.createElement(v.Row,null,c.default.createElement(v.Col,{md:6},c.default.createElement("h3",null,"Crafty Clicks postcode api settings"),c.default.createElement(h.SettingsForm,{settings:t.postcodeApi,onChange:this.handleFieldChange})),c.default.createElement(v.Col,{md:6},c.default.createElement("h3",null,'"Where did you hear about us" settings'),c.default.createElement(y.default,{onSendListeners:this.onGetListeners}))),c.default.createElement(m.default,null,c.default.createElement(v.Button,{className:"custom btn-success",type:"submit"},"Save"))))}}]),t}(u.Component);t.default=(0,f.default)((0,p.default)(b,{load:{type:"get",url:"/api/settings",data:{groups:["email","general","paypal","website","postcodeApi","stripe"]}},save:{type:"put",url:"/api/settings"}}),g)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(14)),p=n(6),h=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={data:e.data},a.save=a.save.bind(a),a.add=a.add.bind(a),e.onSendListeners&&e.onSendListeners({submit:a.save}),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"save",value:function(){var e=this.state.data;e=e.map(function(e){return e.isVisible=1,e}),this.props.save({data:e})}},{key:"remove",value:function(e){var t=this.state.data;t[e].id?t[e].isDeleted=!0:t.splice(e,1),this.setState({data:t})}},{key:"add",value:function(){var e=this.state.data;e.push({placeName:""}),this.setState({data:e})}},{key:"change",value:function(e,t){var n=t.target,a=n.name,r=n.value,o=this.state.data;o[e][a]=r,this.setState({data:o})}},{key:"renderList",value:function(){var e=this,t=this.state.data,n=[];for(var a in t)!function(a){var r=t[a];if(r.isDeleted)return"continue";n.push(d.default.createElement("li",{key:a,style:{marginBottom:"10px",display:"flex"}},d.default.createElement("input",{type:"text",className:"form-control",name:"placeName",value:r.placeName,onChange:function(t){return e.change(a,t)}}),d.default.createElement(p.Button,{bsStyle:"danger",onClick:function(){return e.remove(a)}},d.default.createElement("span",{className:"glyphicon glyphicon-remove"}))))}(a);return d.default.createElement("ul",{style:{padding:"0",marginBottom:"10px"}},n)}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement("p",{className:"detail-field-label"},"Options"),this.renderList(),d.default.createElement("div",null,d.default.createElement(p.Button,{bsStyle:"success",onClick:this.add,style:{marginBottom:10}},d.default.createElement("span",{className:"glyphicon glyphicon-plus"}))))}}]),t}(c.Component),m=(0,f.default)(h);t.default=function(e){return d.default.createElement(m,(0,r.default)({},e,{ajaxOperations:{load:{type:"get",url:"/api/hear-places"},save:{type:"put",url:"/api/hear-places/update"}},notificationsEnabled:!1}))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=a(n(28)),p=a(n(14)),h=n(12),m=a(n(22)),v=n(6),y=[d.ROLES.ADMIN,d.ROLES.SUPER_ADMIN],g={},E=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:a.props.data},a.handleFieldChange=a.handleFieldChange.bind(a),a.submit=a.submit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"handleFieldChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.data;for(var o in r)if(r[o].settingKey==n){r[o].settingValue=a;break}this.setState({data:r})}},{key:"submit",value:function(e){e.preventDefault(),(0,this.props.save)({settingsInputs:this.state.data}),$(g).trigger("formSave")}},{key:"render",value:function(){var e=this.state.data;return c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(h.SettingsForm,{settings:e,onChange:this.handleFieldChange}),c.default.createElement(m.default,null,c.default.createElement(v.Button,{bsStyle:"success",type:"submit"},"Save")))}}]),t}(u.Component);(0,p.default)(function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:e.data},a.delete=a.delete.bind(a),a.add=a.add.bind(a),a.handleRowChange=a.handleRowChange.bind(a),a.renderRow=a.renderRow.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=this;$(g).on("formSave",function(){var t=e.props,n=t.save,a=t.load;n({data:e.state.data},function(){return a()})})}},{key:"componentWillUnmount",value:function(){$(g).off("formSave")}},{key:"componentWillReceiveProps",value:function(e){e.data&&this.setState({data:e.data})}},{key:"delete",value:function(e){var t=this.state.data;t[e]&&(t[e].id?t[e].isDeleted=!0:t.splice(e,1),this.setState({data:t}))}},{key:"add",value:function(){var e=this.state.data,t=(new Date).toISOString().slice(0,10);e.push({name:"",amount:0,duedate:t}),this.setState({data:e})}},{key:"getItemsCount",value:function(){var e=this.state.data;if(!e)return 0;var t=0;for(var n in e)e[n].isDeleted||t++;return t}},{key:"handleRowChange",value:function(e,t){var n=this.state.data,a=e.target,r=a.name,o=a.value;n[t]&&(n[t][r]=o,this.setState({data:n}))}},{key:"renderRow",value:function(e,t){var n=this;return!e.isDeleted&&c.default.createElement("tr",{key:t},c.default.createElement("td",null,c.default.createElement("input",{className:"form-control",type:"text",name:"name",value:e.name,onChange:function(e){return n.handleRowChange(e,t)}})),c.default.createElement("td",null,c.default.createElement("input",{className:"form-control",type:"text",name:"amount",value:e.amount,onChange:function(e){return n.handleRowChange(e,t)}})),c.default.createElement("td",null,c.default.createElement("input",{className:"form-control",type:"date",name:"duedate",value:e.duedate,onChange:function(e){return n.handleRowChange(e,t)}})),c.default.createElement("td",null,c.default.createElement(v.Button,{style:{width:"100%"},onClick:function(){return n.delete(t)}},"Delete")))}},{key:"renderTable",value:function(){var e=this,t=this.state.data;return 0!==this.getItemsCount()&&c.default.createElement("table",{className:"table table-striped results-table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("td",null,"Name"),c.default.createElement("td",null,"Amount"),c.default.createElement("td",null,"Duedate"),c.default.createElement("td",null))),c.default.createElement("tbody",null,t.map(function(t,n){return e.renderRow(t,n)})))}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("p",{style:{fontWeight:"bold"}},"Instalments"),this.renderTable(),c.default.createElement(m.default,null,c.default.createElement(v.Button,{onClick:this.add},"Add")))}}]),t}(u.Component),{load:{type:"get",url:"/api/instalments"},save:{type:"put",url:"/api/instalments"}}),t.default=(0,f.default)((0,p.default)(E,{load:{type:"get",url:"/api/settings/paypal"},save:{type:"put",url:"/api/settings"}}),y)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(28)),p=n(9),h=n(12),m=a(n(22)),v=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:a.props.data},a.handleFieldChange=a.handleFieldChange.bind(a),a.submit=a.submit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"handleFieldChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.data;for(var o in r)if(r[o].settingKey==n){r[o].settingValue=a;break}this.setState({data:r})}},{key:"submit",value:function(e){e.preventDefault(),(0,this.props.save)({settingsInputs:this.state.data})}},{key:"render",value:function(){var e=this.state.data;return c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(h.SettingsForm,{settings:e,onChange:this.handleFieldChange}),c.default.createElement(m.default,null,c.default.createElement("input",{className:"btn btn-success",type:"submit",value:"Save"})))}}]),t}(u.Component);t.default=(0,f.default)((0,d.default)(v,{load:{type:"get",url:"/api/settings/website"},save:{type:"put",url:"/api/settings"}}),[p.ROLES.ADMIN,p.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(1263)),p=a(n(1264)),h=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={selectedTab:0},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.state.selectedTab;return c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Multi Branches Management"),c.default.createElement("hr",null),c.default.createElement(d.Tabs,{className:"content-tabs",activeKey:t,onSelect:function(t){return e.setState({selectedTab:t})},style:{paddingTop:"35px"}},c.default.createElement(d.Tab,{eventKey:0,title:"Websites",style:{paddingTop:"20px"}},c.default.createElement(f.default,this.props)),c.default.createElement(d.Tab,{eventKey:1,title:"Branches",style:{paddingTop:"20px"}},c.default.createElement(p.default,this.props))))}}]),t}(u.Component);t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(28)),p=n(9),h=a(n(29)),m=a(n(22)),v=n(6),y=(n(18),a(n(11))),g=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:a.props.data,checkedRows:[]},a.delete=a.delete.bind(a),a.createRow=a.createRow.bind(a),a.onRowClick=a.onRowClick.bind(a),a.editBranch=a.editBranch.bind(a),a.removeBranch=a.removeBranch.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"delete",value:function(){var e=this,t=this.state,n=t.checkedRows,a=t.data;(0,this.props.execute)("delete",{ids:n},function(){y.default.success("Deleted successfully"),a=a.filter(function(e){return!n.includes(e.id.toString())}),e.setState({data:a,checkedRows:[]})},function(e){return y.default.error(e.responseText.replace(/"/g,""))})}},{key:"onRowClick",value:function(e,t){this.context.router.push("/websites/"+t.id)}},{key:"editBranch",value:function(e,t){e.stopPropagation(),this.context.router.push("/branches/"+t)}},{key:"removeBranch",value:function(e,t,n){var a=this;e.stopPropagation();for(var r=this.state.data,o=0;o<r.length;o++)if(r[o].id==t.id){for(var l=r[o].branchesAssociated,i=0;i<l.length;i++)if(l[i].id==n){l.splice(i,1);break}t=r[o];break}$.ajax({type:"delete",url:"/api/websites/"+t.id+"/branches/"+n,success:function(){a.notifyTimeout&&clearTimeout(a.notifyTimeout),a.notifyList||(a.notifyList=[]),a.notifyList.push(function(){return y.default.success("Branch removed successfully",{interval:0})}),a.notifyTimeout=setTimeout(function(){a.notifyList.forEach(function(e){return e()}),a.notifyList=[]},5e3)},error:function(e){y.default.error("Branch` was not removed"),console.log(e)}}),this.setState({data:r})}},{key:"createRow",value:function(e){var t=this,n=this.context.website,a=[],r=0,o=function(e){return a.push(c.default.createElement("td",{key:r++},e))};return o(c.default.createElement("p",null,e.name," ",e.id==n.id?"[active]":"")),o(c.default.createElement("ul",{style:{listStyleType:"none",padding:"0"}},e.branchesAssociated.map(function(n,a){return c.default.createElement("li",{key:a,style:{marginBottom:"5px"}},c.default.createElement("p",{style:{display:"inline-block",width:"200px",wordWrap:"break-word"}},n.branchName),c.default.createElement(v.Button,{style:{marginRight:"15px",verticalAlign:"top"},onClick:function(e){return t.editBranch(e,n.id)}},"Edit"),c.default.createElement(v.Button,{style:{verticalAlign:"top"},onClick:function(a){return t.removeBranch(a,e,n.id)}},"Remove"))}))),a}},{key:"renderTable",value:function(){var e=this,t=this.state.data;return t&&0!==t.length?c.default.createElement(h.default,{data:t,className:"table table-striped results-table table-hover",headers:["Name","Branches"],createRow:this.createRow,rowStyle:{cursor:"pointer"},onRowClick:this.onRowClick,checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}}):c.default.createElement("p",null,"No websites")}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,this.renderTable(),c.default.createElement(m.default,null,c.default.createElement(v.Button,{className:"custom btn-success",style:{marginRight:"15px"},onClick:function(){e.context.router.push("/websites/add")}},"Add Website"),c.default.createElement(v.Button,{className:"custom btn-success",style:{marginRight:"15px"},onClick:function(){e.context.router.push("/branches/add")}},"Add Branch"),c.default.createElement(v.Button,{className:"custom btn-danger",onClick:this.delete},"Delete")))}}]),t}(u.Component);g.contextTypes={router:u.PropTypes.object.isRequired,website:u.PropTypes.object.isRequired},t.default=(0,f.default)((0,d.default)(g,{load:{type:"get",url:"/api/websites"},delete:{type:"delete",url:"/api/websites"}}),[p.ROLES.ADMIN,p.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(9),f=a(n(28)),p=a(n(29)),h=a(n(14)),m=a(n(22)),v=n(6),y=a(n(11)),g=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={checkedRows:[],data:e.data},a.createRow=a.createRow.bind(a),a.delete=a.delete.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"createRow",value:function(e){var t=this.context.router,n=[],a=function(){var e=0;return function(t){n.push(c.default.createElement("td",{id:e++},t))}}();return a(e.id),a(e.branchName),a(c.default.createElement(v.Button,{style:{marginRight:"15px"},onClick:function(){t.push("/branches/"+e.id)}},"Edit")),n}},{key:"delete",value:function(){var e=this,t=this.state,n=t.checkedRows,a=t.data;(0,this.props.execute)("delete",{ids:n},function(){y.default.success("Deleted successfully"),a=a.filter(function(e){return!n.includes(e.id.toString())}),e.setState({data:a,checkedRows:[]})},function(e){return y.default.error(e.responseText.replace(/"/g,""))})}},{key:"render",value:function(){var e=this,t=this.state.data;return c.default.createElement("div",null,c.default.createElement("div",{id:"notifications"}),c.default.createElement(p.default,{data:t,className:"table table-striped results-table table-hover",headers:["id","Name",""],createRow:this.createRow,rowStyle:{cursor:"pointer"},onRowClick:this.onRowClick,checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}}),c.default.createElement(m.default,null,c.default.createElement(v.Button,{className:"custom btn-success",style:{marginRight:"15px"},onClick:function(){e.context.router.push("/branches/add")}},"Add Branch"),c.default.createElement(v.Button,{className:"custom btn-danger",onClick:this.delete},"Delete Selected")))}}]),t}(u.Component);g.contextTypes={router:u.PropTypes.object.isRequired},t.default=(0,f.default)((0,h.default)(g,{load:{type:"get",url:"/api/branches-associated"},delete:{type:"delete",url:"/api/branches-associated"}}),[d.ROLES.ADMIN,d.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(28)),p=a(n(22)),h=n(9),m=a(n(29)),v=(n(18),n(6)),y=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:a.props.data,checkedRows:[]},a.createRow=a.createRow.bind(a),a.delete=a.delete.bind(a),a.onRowClick=a.onRowClick.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"edit",value:function(e){this.context.router.push("/pages/"+e+"/edit")}},{key:"createRow",value:function(e){var t=this,n=[],a=0,r=function(e){return n.push(c.default.createElement("td",{key:a++},e))};return r(c.default.createElement("p",null,e.title)),r(c.default.createElement("p",null,e.slug)),r(c.default.createElement("p",null,e.linkPosition)),r(c.default.createElement(v.Button,{onClick:function(){return t.edit(e.id)}},"Edit")),n}},{key:"delete",value:function(){var e=this.state,t=e.checkedRows,n=e.data;(0,this.props.execute)("delete",{ids:t}),n=n.filter(function(e){return!t.includes(e.id.toString())}),this.setState({data:n,checkedRows:[]})}},{key:"onRowClick",value:function(e,t){this.context.router.push("/pages/"+t.id)}},{key:"renderTable",value:function(){var e=this,t=this.state.data;return t&&0!==t.length?c.default.createElement(m.default,{data:t,className:"table table-striped results-table table-hover",headers:["Title","Slug","Link Position",""],createRow:this.createRow,onRowClick:this.onRowClick,rowStyle:{cursor:"pointer"},checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}}):c.default.createElement("p",null,"No pages yet.")}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("h2",null,"Pages Management"),this.renderTable(),c.default.createElement(p.default,null,c.default.createElement(v.Button,{bsStyle:"success",style:{marginRight:"15px"}},"Add"),c.default.createElement(v.Button,{onClick:this.delete},"Delete")))}}]),t}(u.Component);y.contextTypes={router:u.PropTypes.object.isRequired},t.default=(0,f.default)((0,d.default)(y,{load:{type:"get",url:"/api/pages"},delete:{type:"delete",url:"/api/pages"}}),[h.ROLES.ADMIN,h.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(28)),p=a(n(22)),h=n(9),m=a(n(29)),v=(n(18),n(6)),y=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:a.props.data,checkedRows:[]},a.createRow=a.createRow.bind(a),a.delete=a.delete.bind(a),a.onRowClick=a.onRowClick.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"edit",value:function(e){this.context.types.push("/branches/"+e+"/edit")}},{key:"createRow",value:function(e){var t=this,n=[],a=0,r=function(e){return n.push(c.default.createElement("td",{key:a++},e))};return r(c.default.createElement("div",null,c.default.createElement("p",null,e.name),c.default.createElement("ul",{style:{listStyleType:"none"}},e.branchesAssociated.map(function(e,t){return c.default.createElement("li",{key:t},c.default.createElement("p",{style:{display:"inline-block",width:"200px",wordWrap:"break-word"}},e.branchName),c.default.createElement(v.Button,{style:{marginRight:"15px"}},"Edit"),c.default.createElement(v.Button,null,"Remove"))})))),r(c.default.createElement(v.Button,{onClick:function(){return t.edit(e.id)}},"Edit")),n}},{key:"delete",value:function(){var e=this.state,t=e.checkedRows,n=e.data;(0,this.props.execute)("delete",{ids:t}),n=n.filter(function(e){return!t.includes(e.id.toString())}),this.setState({data:n,checkedRows:[]})}},{key:"onRowClick",value:function(e,t){this.context.router.push("/branches/"+t.id)}},{key:"renderTable",value:function(){var e=this,t=this.state.data;return t&&0!==t.length?c.default.createElement(m.default,{data:t,className:"table table-striped results-table table-hover",headers:["City Name",""],createRow:this.createRow,onRowClick:this.onRowClick,rowStyle:{cursor:"pointer"},checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}}):c.default.createElement("p",null,"No cities yet.")}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("h2",null,"Cities Management"),this.renderTable(),c.default.createElement(p.default,null,c.default.createElement(v.Button,{bsStyle:"success",style:{marginRight:"15px"}},"Add"),c.default.createElement(v.Button,{onClick:this.delete},"Delete")))}}]),t}(u.Component);y.contextTypes={router:u.PropTypes.object.isRequired},t.default=(0,f.default)((0,d.default)(y,{load:{type:"get",url:"/api/branches",data:{fields:["id","name","branchesAssociated"]}},delete:{type:"delete",url:"/api/branches"}}),[h.ROLES.ADMIN,h.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(28)),p=a(n(22)),h=n(9),m=a(n(29)),v=(n(18),n(6)),y=n(12),g=a(n(11)),E=a(n(44)),b=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={selectedTab:0,showConfirmDelete:!1},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.state.selectedTab;return c.default.createElement("div",{className:"content-block"},c.default.createElement(v.Tabs,{className:"content-tabs",activeKey:t,onSelect:function(t){return e.setState({selectedTab:t})},style:{paddingTop:"35px"}},c.default.createElement(v.Tab,{eventKey:0,title:"Backend",style:{paddingTop:"20px"}},c.default.createElement(C,null)),c.default.createElement(v.Tab,{eventKey:1,title:"Frontend",style:{paddingTop:"20px"}},c.default.createElement(k,{logEnabled:!0}))))}}]),t}(u.Component),_=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:a.props.data,checkedRows:[],settingsData:null},a.createRow=a.createRow.bind(a),a.delete=a.delete.bind(a),a.onRowClick=a.onRowClick.bind(a),a.activateTerm=a.activateTerm.bind(a),a.addTerm=a.addTerm.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"edit",value:function(e){this.context.router.push("/terms/"+e)}},{key:"activateTerm",value:function(e){var t=this.state.data,n=this.props.execute;this.context.website.set("activeTermId",e),n("setActive",{id:e},function(){return g.default.success("Active term changed")},function(){return g.default.error("Active term was not changed")}),this.setState({data:t})}},{key:"createRow",value:function(e){var t=this,n=this.context.website,a=[],r=0,o=function(e){return a.push(c.default.createElement("td",{key:r++},e))},l=e.id==n.activeTermId;return o(c.default.createElement("p",null,e.name)),o(c.default.createElement("p",null,e.term)),o(c.default.createElement("p",null,e.year)),o(c.default.createElement("p",{style:{whiteSpace:"normal",maxWidth:"350px"}},e.fullTimeDescription)),o(c.default.createElement("p",{style:{whiteSpace:"normal",maxWidth:"350px"}},e.partTimeDescription)),o(c.default.createElement("div",{style:{margin:"auto"}},l?c.default.createElement(v.Button,{style:{width:"90px",textTransform:"uppercase"},bsStyle:"success",onClick:function(e){return e.stopPropagation()}},"Active"):c.default.createElement(v.Button,{style:{width:"90px",textTransform:"uppercase"},bsStyle:"danger",onClick:function(n){n.stopPropagation(),t.activateTerm(e.id)}},"Inactive"))),a}},{key:"delete",value:function(e){var t=this.state,n=t.checkedRows,a=t.data;(0,this.props.execute)("delete",{ids:n,reason:e},function(){return g.default.success("Deleted successfully")},function(){return g.default.error("Deletion failed")}),a=a.filter(function(e){return!n.includes(e.id.toString())}),this.setState({data:a,checkedRows:[],showConfirmDelete:!1})}},{key:"onRowClick",value:function(e,t){this.edit(t.id)}},{key:"addTerm",value:function(e){e.stopPropagation(),this.context.router.push("/terms/add")}},{key:"renderTable",value:function(){var e=this,t=this.state.data;return t&&0!==t.length?c.default.createElement("div",{style:{overflow:"auto"}},c.default.createElement("div",{style:{minWidth:1076}},c.default.createElement(m.default,{data:t,className:"table table-striped results-table table-hover",headers:["Name","Term","Year","Full Time Description","Part Time Description",""],createRow:this.createRow,onRowClick:this.onRowClick,rowStyle:{cursor:"pointer"},checkableRows:!0,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}}))):c.default.createElement("p",null,"No pages yet.")}},{key:"render",value:function(){var e=this,t=this.state.showConfirmDelete;return c.default.createElement("div",null,this.renderTable(),c.default.createElement(p.default,null,c.default.createElement(v.Button,{className:"custom btn-success",style:{marginRight:"15px"},onClick:this.addTerm},"Add"),c.default.createElement(v.Button,{className:"custom btn-danger",onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete")),c.default.createElement(E.default,{show:t,onConfirm:this.delete,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(u.Component);_.contextTypes={router:u.PropTypes.object.isRequired,website:u.PropTypes.object.isRequired};var C=(0,d.default)(_,{load:{type:"get",url:"/api/terms"},delete:{type:"delete",url:"/api/terms"},setActive:{type:"put",url:"/api/terms/set-active"}}),w=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={branches:e.data,termOptions:[]},a.save=a.save.bind(a),a.changeData=a.changeData.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"changeData",value:function(e,t,n){var a=this.state.branches;a[n]&&(a[n][e]=t.length>0?t:null),this.setState({branches:a})}},{key:"save",value:function(){this.props.save({data:this.state.branches})}},{key:"componentWillMount",value:function(){var e=this;(0,this.props.execute)("loadTermOptions",null,function(t){return e.setState({termOptions:t})})}},{key:"renderRows",value:function(){var e=this,t=this.state,n=t.branches,a=t.termOptions,r=this.context.website,o=[];return n.forEach(function(t,n){var l=!1;for(var i in r.branchesAssociated)if(r.branchesAssociated[i].id==t.id){l=!0;break}o.push(c.default.createElement("tr",{key:n},c.default.createElement("td",null,t.branchName," ",l?"[active]":""),c.default.createElement("td",null,c.default.createElement(y.EditableItemList,{passiveProps:{items:t.terms,showingProp:"name",width:12},activeProps:{items:t.terms,name:"terms",labelProp:"name",onChange:function(t,a){return e.changeData(t,a,n)},options:a}}))))}),o}},{key:"renderTable",value:function(){return c.default.createElement("table",{className:"table table-striped results-table",style:{tableLayout:"fixed"}},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{style:{width:"50%"}},"Branch"),c.default.createElement("th",{style:{width:"50%"}},"Terms"))),c.default.createElement("tbody",null,this.renderRows()))}},{key:"render",value:function(){return c.default.createElement("div",null,this.renderTable(),c.default.createElement(v.Button,{className:"custom btn-success",onClick:this.save},"Save"))}}]),t}(u.Component);w.contextTypes={website:u.PropTypes.object.isRequired};var k=(0,d.default)(w,{load:{type:"get",url:"/api/branches-associated/frontend",data:{fields:["id","branchName","terms"]}},save:{type:"put",url:"/api/branches-associated"},loadTermOptions:{type:"get",url:"/api/terms"}});t.default=(0,f.default)(b,[h.ROLES.ADMIN,h.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(28)),p=n(9),h=n(6),m=a(n(22)),v=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n)),l=e.data,s=e.execute;return a.state={data:l,feedbackCodes:[]},a.add=a.add.bind(a),a.save=a.save.bind(a),a.cancel=a.cancel.bind(a),a.delete=a.delete.bind(a),a.onRowChange=a.onRowChange.bind(a),s("getLevelOptions",{},function(e){return a.setState({feedbackCodes:e})}),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"add",value:function(){var e=this.state.data;e.push({description:"",feedbackCode:1}),this.setState({data:e})}},{key:"save",value:function(){var e=this.state.data,t=this.props,n=t.save,a=t.load;n({data:e},function(){a()})}},{key:"cancel",value:function(){this.props.load()}},{key:"delete",value:function(e){var t=this.state.data,n=t[e];n&&(n.id?n.isDeleted=!0:t.splice(e,1),this.setState({data:t}))}},{key:"onRowChange",value:function(e,t){var n=this.state.data,a=e.target,r=a.name,o=a.value;n[t]&&(n[t][r]=o),this.setState({data:n})}},{key:"getItemsCount",value:function(){var e=this.state.data;if(!e)return 0;var t=0;return e.forEach(function(e){e.isDeleted||t++}),t}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"renderTable",value:function(){var e=this,t=this.state,n=t.data,a=t.feedbackCodes;return 0===this.getItemsCount()?c.default.createElement("p",null,"No feedbacks yet"):c.default.createElement("div",{className:"table-responsive"},c.default.createElement("table",{className:"table table-striped results-table",style:{minWidth:500}},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("td",null,"Description"),c.default.createElement("td",null,"Level"),c.default.createElement("td",null),c.default.createElement("td",null))),c.default.createElement("tbody",null,n.map(function(t,n){return!t.isDeleted&&c.default.createElement("tr",{key:n},c.default.createElement("td",null,c.default.createElement("input",{name:"feedbackDescription",className:"form-control",type:"text",value:t.feedbackDescription,onClick:function(e){return e.preventDefault()},onChange:function(t){return e.onRowChange(t,n)}})),c.default.createElement("td",null,c.default.createElement("select",{name:"feedbackCode",className:"form-control",value:t.feedbackCode,onClick:function(e){return e.preventDefault()},onChange:function(t){return e.onRowChange(t,n)}},a.map(function(e,t){return c.default.createElement("option",{key:t,value:e.value},e.label)}))),c.default.createElement("td",null,c.default.createElement(h.Button,{className:"custom",onClick:function(t){t.preventDefault(),e.delete(n)},style:{width:"100%"}},"Delete")))}))))}},{key:"render",value:function(){return c.default.createElement("div",{className:"content-block",style:{paddingTop:"35px"}},this.renderTable(),c.default.createElement(m.default,null,c.default.createElement(h.Button,{className:"custom btn-success",onClick:this.add,style:{marginRight:"15px"}},"Add"),c.default.createElement(h.Button,{className:"custom btn-success",onClick:this.save,style:{marginRight:"15px"}},"Save"),c.default.createElement(h.Button,{className:"custom",onClick:this.cancel},"Cancel")))}}]),t}(u.Component);t.default=(0,f.default)((0,d.default)(v,{load:{type:"get",url:"/api/bank"},save:{type:"put",url:"/api/bank"},getLevelOptions:{type:"get",url:"/api/lookup/get-feedback-level"}}),[p.ROLES.ADMIN,p.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(14)),p=a(n(28)),h=n(9),m=n(12),v=n(6),y=a(n(16)),g=(a(n(31)),a(n(134)),function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={data:e.data,branchOptions:null},a.onFieldChange=a.onFieldChange.bind(a),a.onChange=a.onChange.bind(a),a.save=a.save.bind(a),a.submit=a.submit.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onFieldChange",value:function(e,t){var n=this.state.data;n[e]=t,this.setState({data:n})}},{key:"onChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.onFieldChange(n,a)}},{key:"loadOptions",value:function(){var e=this;(0,this.props.execute)("loadBranchOptions",null,function(t){return e.setState({branchOptions:t})})}},{key:"componentDidMount",value:function(){this.loadOptions()}},{key:"save",value:function(){var e=this,t=this.state.data,n=this.props.save;t.branchesAssociated&&(t.branchesAssociated=t.branchesAssociated.map(function(e){return{id:e.id}})),n({data:t},function(){e.context.router.push("/settings/multi-branches")})}},{key:"submit",value:function(e){e.preventDefault(),this.save()}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.branchOptions;return y.default.accessObjByPath,d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Website Detail"),d.default.createElement("hr",null),d.default.createElement(v.Row,{style:{marginBottom:"10px"}},d.default.createElement(v.Col,{md:3},d.default.createElement(m.EditableValue,{label:"Name",value:t.name,onFieldChange:this.onFieldChange},d.default.createElement("input",{type:"text",className:"form-control",name:"name"})),d.default.createElement("div",null,d.default.createElement(b,null,"Select templates folder"),d.default.createElement("select",{name:"folder",value:t.folder,className:"form-control",onChange:this.onChange,style:{marginBottom:"10px"}},d.default.createElement("option",{value:"0"}," -- Select Folder -- "),h.TEMPLATE_FOLDERS.map(function(e,t){return d.default.createElement("option",{key:t,value:e.value},e.label)}))),d.default.createElement(m.EditableValue,{label:"Main Site",value:t.mainSiteUrl,onFieldChange:this.onFieldChange},d.default.createElement("input",{type:"text",className:"form-control",name:"mainSiteUrl"}))),d.default.createElement(v.Col,{md:6,mdOffset:3},d.default.createElement(b,null,"Branches"),d.default.createElement(m.EditableItemList,{passiveProps:{items:t.branchesAssociated,showingProp:"branchName"},activeProps:{items:t.branchesAssociated,name:"branchesAssociated",labelProp:"branchName",onChange:this.onFieldChange,options:n}}))),d.default.createElement(v.Row,{style:{marginBottom:"10px"}},d.default.createElement(v.Col,{md:3},d.default.createElement(m.EditableValue,{label:"Payment heading",value:t.paymentHeading,onFieldChange:this.onFieldChange},d.default.createElement("input",{type:"text",className:"form-control",name:"paymentHeading"}))),d.default.createElement(v.Col,{md:3,mdOffset:3},d.default.createElement(m.EditableValue,{label:"Payment Field 1",value:t.paymentField1,onFieldChange:this.onFieldChange},d.default.createElement("input",{type:"text",className:"form-control",name:"paymentField1"})),d.default.createElement(m.EditableValue,{label:"Payment field 2",value:t.paymentField2,onFieldChange:this.onFieldChange},d.default.createElement("input",{type:"text",className:"form-control",name:"paymentField2"})),d.default.createElement(m.EditableValue,{label:"Pay Pal",value:t.payPal,onFieldChange:this.onFieldChange},d.default.createElement("input",{type:"text",className:"form-control",name:"payPal"})))),d.default.createElement("form",{onSubmit:this.submit},d.default.createElement(b,null,"Header"),d.default.createElement(m.EditableHTML,{name:"header",value:t.header,onChange:this.onChange,onlyEdit:!0}),d.default.createElement(b,null,"Footer"),d.default.createElement(m.EditableHTML,{name:"footer",value:t.footer,onChange:this.onChange,onlyEdit:!0}),d.default.createElement(b,null,"Terms And Condition"),d.default.createElement(m.EditableHTML,{name:"toc",value:t.toc,onChange:this.onChange,onlyEdit:!0}),d.default.createElement(v.Button,{className:"custom btn-success",type:"submit"},"Save")))}}]),t}(c.Component));g.contextTypes={router:c.PropTypes.object.isRequired};var E=(0,p.default)((0,f.default)(g,{loadBranchOptions:{type:"get",url:"/api/branches-associated"}}),[h.ROLES.ADMIN,h.ROLES.SUPER_ADMIN]);t.default=function(e){var t=e.params.id;return d.default.createElement(E,(0,r.default)({ajaxOperations:{load:{type:"get",url:"/api/websites/"+t,data:{fields:["name","slug","city.name","branchesAssociated","folder","mainSiteUrl","header","footer","toc","paymentHeading","paymentField1","paymentField2","payPal"]}},save:{type:"put",url:"/api/websites/"+t}}},e))};var b=function(e){var t=e.style,n=e.children;return d.default.createElement("p",{style:t,className:"detail-field-label"},n)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(28)),p=n(9),h=n(12),m=n(6),v=a(n(16)),y=(a(n(31)),function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={data:{},branchOptions:null},a.setField=a.setField.bind(a),a.onChange=a.onChange.bind(a),a.save=a.save.bind(a),a.submit=a.submit.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"setField",value:function(e,t){var n=this.state.data;n[e]=t,this.setState({data:n})}},{key:"onChange",value:function(e){this.setField(e.target.name,e.target.value)}},{key:"loadOptions",value:function(){var e=this;(0,this.props.execute)("loadBranchOptions",null,function(t){return e.setState({branchOptions:t})})}},{key:"componentDidMount",value:function(){this.loadOptions()}},{key:"save",value:function(){var e=this,t=this.state.data;(0,this.props.save)({data:t},function(){e.context.router.push("/settings/multi-branches")})}},{key:"submit",value:function(e){e.preventDefault(),this.save()}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.branchOptions,a=v.default.getIfExists,r=function(e){var t=e.style,n=e.children;return c.default.createElement("p",{style:t,className:"detail-field-label"},n)};return c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Website Edit"),c.default.createElement("hr",null),c.default.createElement("form",{onSubmit:this.submit},c.default.createElement(m.Row,{style:{marginBottom:"10px"}},c.default.createElement(m.Col,{md:6},c.default.createElement("div",null,c.default.createElement(r,null,"Name"),c.default.createElement("input",{type:"text",className:"form-control",name:"name",onChange:this.onChange,value:t.name,style:{marginBottom:"10px"}})),c.default.createElement("div",null,c.default.createElement(r,null,"Select templates folder"),c.default.createElement("select",{name:"folder",value:t.folder,className:"form-control",onChange:this.onChange,style:{marginBottom:"10px"}},c.default.createElement("option",{value:"0"}," -- Select Folder -- "),p.TEMPLATE_FOLDERS.map(function(e,t){return c.default.createElement("option",{key:t,value:e.value},e.label)}))),c.default.createElement("div",null,c.default.createElement(r,null,"Main Site"),c.default.createElement("input",{type:"text",className:"form-control",name:"mainSiteUrl",value:t.mainSiteUrl,onChange:this.onChange,style:{marginBottom:"10px"}}))),c.default.createElement(m.Col,{md:6},c.default.createElement(r,null,"Branches"),c.default.createElement(h.CheckableItemList,{items:a(t,"branchesAssociated",[]),name:"branchesAssociated",labelProp:"branchName",onChange:this.setField,options:n,style:{marginBottom:"10px"}}))),c.default.createElement(m.Row,{style:{marginBottom:"10px"}},c.default.createElement(m.Col,{md:4},c.default.createElement(r,null,"Payment Heading"),c.default.createElement("input",{name:"paymentHeading",type:"text",className:"form-control",onChange:this.onChange,value:t.paymentHeading})),c.default.createElement(m.Col,{md:4},c.default.createElement(r,null,"Payment Field 1"),c.default.createElement("input",{name:"paymentField1",type:"text",className:"form-control",onChange:this.onChange,value:t.paymentField1})),c.default.createElement(m.Col,{md:4},c.default.createElement(r,null,"Payment Field 2"),c.default.createElement("input",{name:"paymentField2",type:"text",className:"form-control",onChange:this.onChange,value:t.paymentField2})),c.default.createElement(m.Col,{md:4},c.default.createElement(r,null,"PayPal"),c.default.createElement("input",{name:"payPal",type:"text",className:"form-control",onChange:this.onChange,value:t.payPal}))),c.default.createElement(r,null,"Header"),c.default.createElement(h.EditableHTML,{name:"header",value:t.header,onChange:this.onChange,onlyEdit:!0}),c.default.createElement(r,null,"Footer"),c.default.createElement(h.EditableHTML,{name:"footer",value:t.footer,onChange:this.onChange,onlyEdit:!0}),c.default.createElement(r,null,"Terms And Condition"),c.default.createElement(h.EditableHTML,{name:"toc",value:t.toc,onChange:this.onChange,onlyEdit:!0}),c.default.createElement(m.Button,{className:"custom btn-success",type:"submit"},"Save")))}}]),t}(u.Component));y.contextTypes={router:u.PropTypes.object.isRequired},t.default=(0,f.default)((0,d.default)(y,{loadBranchOptions:{type:"get",url:"/api/branches-associated"},save:{type:"post",url:"/api/websites"}}),[p.ROLES.ADMIN,p.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(23)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(14)),h=a(n(28)),m=n(9),v=n(12),y=n(6),g=a(n(11)),E=a(n(44)),b=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={data:e.data?e.data:{},termOptions:[],showConfirmDelete:!1},a.onChange=a.onChange.bind(a),a.changeData=a.changeData.bind(a),a.save=a.save.bind(a),a.delete=a.delete.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.execute)("loadTermOptions",null,function(t){return e.setState({termOptions:t})})}},{key:"changeData",value:function(e,t){this.state.data[e]=t,this.setState({name:t})}},{key:"onChange",value:function(e){var t="checkbox"==e.target.type?"checked":"value";this.changeData(e.target.name,e.target[t])}},{key:"save",value:function(){var e=this,t=this.props,n=t.save;t.params.id,n({data:this.state.data},function(){e.context.router.push("/settings/multi-branches")})}},{key:"delete",value:function(e){var t=this,n=this.props,a=n.params.id;(0,n.execute)("delete",{ids:[a],reason:e},function(){g.default.success("Deleted successfully"),t.context.router.push("/settings/multi-branches")},function(e){g.default.error(e.responseText.replace(/"/g,""))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.termOptions,r=t.showConfirmDelete,o=this.props.params.id,l=function(e){var t=e.style,n=e.children;return f.default.createElement("p",{style:t,className:"detail-field-label"},n)};return f.default.createElement("div",{className:"content-block",style:{paddingTop:"35px"}},f.default.createElement("h2",{className:"block-heading"},o?"Branch Edit":"New Branch"),f.default.createElement("hr",null),f.default.createElement(y.Row,{style:{marginBottom:"10px"}},f.default.createElement(y.Col,{md:6},f.default.createElement("input",{type:"checkbox",className:"form-control",name:"isListed",checked:"1"==n.isListed,style:{display:"inline-block",marginRight:"10px",marginBottom:"1px"},onChange:function(){return e.changeData("isListed","1"==n.isListed?"0":"1")}}),f.default.createElement(l,{style:{display:"inline-block",verticalAlign:"middle"}},"Listed in students closest branches"))),f.default.createElement(y.Row,{style:{marginBottom:"10px"}},f.default.createElement(y.Col,{md:6},f.default.createElement(l,null,"Branch name"),f.default.createElement("input",{name:"branchName",type:"text",className:"form-control",value:n.branchName,onChange:this.onChange})),f.default.createElement(y.Col,{md:6},f.default.createElement(l,null,"Branch weight"),f.default.createElement("input",{name:"branchWeight",type:"text",className:"form-control",value:n.branchWeight,onChange:this.onChange}))),f.default.createElement(y.Row,null,f.default.createElement(v.FormField,{label:"Terms",width:4},f.default.createElement(v.EditableItemList,{passiveProps:{items:n.terms,showingProp:"name"},activeProps:{items:n.terms,name:"terms",labelProp:"name",onChange:this.changeData,options:a}}))),f.default.createElement("div",{style:{marginBottom:"10px"}}),f.default.createElement(y.Tabs,{className:"content-tabs",activeKey:this.state.selectedTab,onSelect:function(t){return e.setState({selectedTab:t})}},f.default.createElement(y.Tab,{eventKey:0,title:"Emailed Invoice Template",style:{paddingTop:"20px"}},f.default.createElement(v.FormField,{width:12},f.default.createElement("p",null,f.default.createElement("b",null,"Required variables: ")),f.default.createElement("p",null,"%INVOICE_NO%"),f.default.createElement("p",null,"%REG_DATE%"),f.default.createElement("p",null,"%PAYMENT_STATUS%"),f.default.createElement("p",null,"%NAME%"),f.default.createElement("p",null,"%ADDRESS%"),f.default.createElement("p",null,"%EMAIL%"),f.default.createElement("p",null,"%TELEPHONE%"),f.default.createElement("p",null,"%TOTAL_PRICE%"),f.default.createElement("p",null,"%ROW%")),f.default.createElement("div",{style:{marginBottom:"20px"}}),f.default.createElement("textarea",{className:"form-control",name:"invoiceEmailTemplate",id:"invoiceEmailTemplate",style:{height:"100%",marginBottom:"20px",overflowY:"scroll !important"},value:n.invoiceEmailTemplate,onChange:this.onChange})),f.default.createElement(y.Tab,{eventKey:1,title:"Print Receipt Template",style:{paddingTop:"20px"}},f.default.createElement(v.FormField,{width:12},f.default.createElement("p",null,f.default.createElement("b",null,"Required variables: ")),f.default.createElement("p",null,"%INVOICE_NO%"),f.default.createElement("p",null,"%REG_DATE%"),f.default.createElement("p",null,"%PAYMENT_STATUS%"),f.default.createElement("p",null,"%NAME%"),f.default.createElement("p",null,"%ADDRESS%"),f.default.createElement("p",null,"%EMAIL%"),f.default.createElement("p",null,"%TELEPHONE%"),f.default.createElement("p",null,"%TOTAL_PRICE%"),f.default.createElement("p",null,"%TABLE_PAYMENT_LIST%")),f.default.createElement("textarea",{className:"form-control",name:"printReceiptTemplate",id:"printReceiptTemplate",style:{height:"100%",marginBottom:"20px",overflowY:"scroll !important"},value:n.printReceiptTemplate,onChange:this.onChange}))),f.default.createElement(y.Button,{className:"custom btn-success",style:{marginRight:"15px"},onClick:this.save},"Save"),o?f.default.createElement(y.Button,{className:"custom btn-danger",onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete"):"",f.default.createElement(E.default,{show:r,onConfirm:this.delete,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(d.Component);b.contextTypes={router:d.PropTypes.object.isRequired};var _=(0,h.default)((0,p.default)(b),[m.ROLES.ADMIN,m.ROLES.SUPER_ADMIN]);t.default=function(e){var t=e.params.id,n={loadTermOptions:{type:"get",url:"/api/terms"}};return t?(0,o.default)(n,{load:{type:"get",url:"/api/branches-associated/"+t},save:{type:"put",url:"/api/branches-associated/"+t},delete:{type:"delete",url:"/api/branches-associated"}}):n.save={type:"post",url:"/api/branches-associated"},f.default.createElement(_,(0,r.default)({ajaxOperations:n},e))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(14)),p=a(n(28)),h=n(9),m=(n(12),n(6)),v=a(n(44)),y=a(n(43)),g=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={data:e.data?e.data:{},showConfirmDelete:!1},a.onChange=a.onChange.bind(a),a.changeData=a.changeData.bind(a),a.save=a.save.bind(a),a.delete=a.delete.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"changeData",value:function(e,t){this.state.data[e]=t,this.setState({name:t})}},{key:"onChange",value:function(e){this.changeData(e.target.name,e.target.value)}},{key:"save",value:function(){var e=this,t=this.props,n=t.save;t.params.id,n({data:this.state.data},function(){e.context.router.push("/settings/terms")})}},{key:"delete",value:function(e){var t=this,n=this.props,a=n.params.id;(0,n.execute)("delete",{ids:[a],reason:e},function(){t.context.router.push("/settings/terms")})}},{key:"componentDidMount",value:function(){$(function(){return(0,y.default)($("textarea"))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.showConfirmDelete,r=this.props.params.id;return d.default.createElement("div",{className:"content-block",style:{paddingTop:"35px"}},d.default.createElement(m.Row,null,d.default.createElement(m.Col,{md:4,style:{marginBottom:"10px"}},d.default.createElement(b,null,"Name"),d.default.createElement("input",{name:"name",type:"text",className:"form-control",value:n.name,onChange:this.onChange})),d.default.createElement(m.Col,{md:4,style:{marginBottom:"10px"}},d.default.createElement(b,null,"Semester"),d.default.createElement("select",{name:"term",type:"text",className:"form-control",value:n.term,onChange:this.onChange},d.default.createElement("option",{value:"0"},"-- Select semester --"),d.default.createElement("option",{value:"1"},"1"),d.default.createElement("option",{value:"2"},"2"),d.default.createElement("option",{value:"3"},"3"),d.default.createElement("option",{value:"4"},"4"))),d.default.createElement(m.Col,{md:4,style:{marginBottom:"10px"}},d.default.createElement(b,null,"Year"),d.default.createElement("input",{name:"year",type:"text",className:"form-control",value:n.year,onChange:this.onChange}))),d.default.createElement(m.Row,null,d.default.createElement(m.Col,{md:6,style:{marginBottom:"10px"}},d.default.createElement(b,null,"Full Time Description"),d.default.createElement("textarea",{name:"fullTimeDescription",type:"text",rows:"2",className:"form-control",value:n.fullTimeDescription,onChange:this.onChange})),d.default.createElement(m.Col,{md:6,style:{marginBottom:"10px"}},d.default.createElement(b,null,"Part Time Description"),d.default.createElement("textarea",{name:"partTimeDescription",type:"text",rows:"2",className:"form-control",value:n.partTimeDescription,onChange:this.onChange}))),d.default.createElement("div",{style:{marginTop:"20px"}},d.default.createElement(m.Button,{className:"custom btn-success",style:{marginRight:"15px"},onClick:this.save},"Save"),r?d.default.createElement(m.Button,{className:"custom btn-danger",onClick:function(){return e.setState({showConfirmDelete:!0})}},"Delete"):""),d.default.createElement(v.default,{show:a,onConfirm:this.delete,onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(c.Component);g.contextTypes={router:c.PropTypes.object.isRequired};var E=(0,p.default)((0,f.default)(g),[h.ROLES.ADMIN,h.ROLES.SUPER_ADMIN]);t.default=function(e){var t=e.params.id,n={};return t?(n.load={type:"get",url:"/api/terms/"+t},n.save={type:"put",url:"/api/terms/"+t},n.delete={type:"delete",url:"/api/terms"}):n.save={type:"post",url:"/api/terms"},d.default.createElement(E,(0,r.default)({ajaxOperations:n,logEnabled:!0},e))};var b=function(e){var t=e.children;return d.default.createElement("p",{className:"detail-field-label"},t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=n(9),d=a(n(15)),f=a(n(16)),p=n(12),h=a(n(71)),m=n(6),v=a(n(19)),y=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={isLoading:!1,data:null},a.allowedRoles=[c.ROLES.SUPER_ADMIN],a.requestFields=["user.userFullname","action","module","moduleId","confirmText","loggingData","actionTime","actionIp"],a.labels=["Stuff username","Action","Module","Module ID","Reason","Logging Data","Action Time","Action IP Address"],a.loadPromise=null,a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return this.allowedRoles.includes(e)}},{key:"componentWillUnmount",value:function(){this.loadPromise&&this.loadPromise.cancel()}},{key:"componentDidMount",value:function(){this.isAllowed()&&this.loadData()}},{key:"render",value:function(){if(!this.isAllowed())return!1;var e=u.default.createElement("h2",{style:{marginBottom:"30px"}},"Log Detail");return this.state.isLoading?u.default.createElement("div",null,e,u.default.createElement("div",null,u.default.createElement(v.default,null))):this.state.data?u.default.createElement("div",{className:"content-block"},e,this.showData()):u.default.createElement("div",null,e,u.default.createElement("p",null,"No data."))}},{key:"loadData",value:function(){var e=this;this.setState({isLoading:!0});var t={fields:this.requestFields};this.loadPromise=d.default.makeCancelableAjax(h.default.ajax({type:"get",url:"/api/logs/"+this.props.params.id,data:t})),this.loadPromise.promise.then(function(t){return e.setState({isLoading:!1,data:t})},function(e){return console.log(e)})}},{key:"showData",value:function(){for(var e=[],t=0;t<this.requestFields.length&&t<this.labels.length;t++){var n=this.requestFields[t],a=this.labels[t],r=f.default.accessObjByPath(this.state.data,n);e.push(u.default.createElement(m.Row,{key:t},u.default.createElement(m.Col,{md:5},u.default.createElement(p.LabeledValue,{label:a,value:r}))))}return e}}]),t}(u.default.Component);t.default=y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(50)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=n(9),h=a(n(15)),m=a(n(31)),v=a(n(16)),y=a(n(47)),g=n(12),E=a(n(22)),b=n(6),_=a(n(14)),C=a(n(11)),w=a(n(1275)),k=n(18),S=a(n(77)),x=a(n(100)),T=a(n(607)),P=a(n(19)),R=a(n(609)),O=v.default.getIfExists,D={buttonTitle:{float:"right",marginTop:"20px",marginBottom:"20px",marginLeft:10,marginRight:10}};window.innerWidth<768&&(D={buttonTitle:{display:"inline-block",marginTop:10,marginBottom:10,marginRight:10}});var N=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={isLoading:!1,data:{},showSelectUserWnd:!1},a.allowedRoles=[p.ROLES.ADMIN,p.ROLES.SUPER_ADMIN,p.ROLES.REGISTRAR],a.headerTypes=(0,o.default)({},p.ROLES.ADMIN,y.default),a.promises={save:null,load:null},a.isStudentReduced=null,a.reducedValuesStyle={},a.saved=!0,a.handleFieldChange=a.handleFieldChange.bind(a),a.onPaymentsChange=a.onPaymentsChange.bind(a),a.changeUser=a.changeUser.bind(a),a.submit=a.submit.bind(a),a.loadData=a.loadData.bind(a),a.deleteStudent=a.deleteStudent.bind(a),a.onChange=a.onChange.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return-1!==this.allowedRoles.indexOf(e)}},{key:"deleteStudent",value:function(){var e=this,t=this.state.data;this.deletePromise||(this.deletePromise=h.default.ajax({type:"delete",data:{ids:[t.student.id]},url:"/api/students"}),this.deletePromise.then(function(){e.context.router.push("/users/"+t.student.studentId),C.default.success("Class deleted from student"),e.deletePromise=null},function(t){C.default.error(t.responseText),e.deletePromise=null}))}},{key:"componentWillMount",value:function(){var e=this;this.isAllowed()&&(window.onReactNavigate=function(){return!(!e.validate(!0)||!e.saved&&(alert("Save before continue please"),1))},this.loadData())}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel();window.onReactNavigate=void 0}},{key:"changeUser",value:function(e){var t=this.context.router,n=this.state.data;n.student.studentId=e,n.student.adminNotes||(n.student.adminNotes=""),n.student.adminNotes+="<p>Student moved from old student name("+n.student.user.userFullname+")</p>",this.saveData(n,function(){t.push("/users/"+e)})}},{key:"showHeader",value:function(){var e=this.props.appTypeKey,t=!1;return e in this.headerTypes&&(t=this.headerTypes[e]),f.default.createElement("div",null,t?f.default.createElement(t,{selectedTab:"/classes"}):"")}},{key:"renderCourseRegEditForm",value:function(){var e=this,t=this.state,n=t.data,a=n.student,r=n.studentPayments,o=t.showSelectUserWnd,l=(this.props.params.id,this.getTotalPaid()),i=Math.max(this.getFee()-l,0);return null===this.isStudentReduced?(this.isStudentReduced="reduced"==a.studentStatus,this.reducedValuesStyle.display=this.isStudentReduced?"block":"none"):this.isStudentReduced!==("reduced"==a.studentStatus)&&(this.isStudentReduced=!this.isStudentReduced,$("#reducedValues").slideToggle("slow")),f.default.createElement("div",null,f.default.createElement("form",{id:"classEditForm",onSubmit:this.submit},f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"Edit Course Registration"),f.default.createElement("div",{style:D.buttonTitle},f.default.createElement(b.Button,{onClick:this.deleteStudent},"Delete class from student")),f.default.createElement("div",{style:D.buttonTitle},f.default.createElement(b.Button,{onClick:function(){return e.context.router.push("/users/"+O(a,"user.id"))}},"Profile")),f.default.createElement("hr",null),f.default.createElement(b.Row,null,f.default.createElement(b.Col,{md:6},f.default.createElement("p",{className:"detail-field-label"},"Course"),f.default.createElement(g.EditableSourceSelected,{activeProps:{url:"/api/classes/list",params:{termId:"active",classGender:O(a,"user.profile.profileGender")},defaultOption:"Select course",className:"form-control",id:"classSelect",onChange:this.onChange,name:"classId",value:a.classId},passiveProps:{value:O(a,"course.courseTitle")}}),f.default.createElement(g.LabeledValue,{label:"Term",value:O(a,"courseClass.term.name")}),f.default.createElement(g.LabeledValue,{label:"Classroom",value:O(a,"courseClass.classroom.classroomName")}),f.default.createElement(A,null,"Class time"),this.renderClassOptions(),f.default.createElement(g.LabeledValue,{label:"Male/Female",value:O(a,"courseClass.classGender")}),f.default.createElement(E.default,null,f.default.createElement(b.Row,null,f.default.createElement(b.Col,{md:6},f.default.createElement("p",{className:"detail-field-label"},"Student Name"),f.default.createElement(k.Link,{to:"/users/"+O(a,"user.id")},O(a,"user.userFullname"))))),f.default.createElement(E.default,null,f.default.createElement(b.Row,null,f.default.createElement(b.Col,{md:6},f.default.createElement("p",{className:"detail-field-label"},"Teacher Name"),f.default.createElement(k.Link,{to:"/users/"+O(a,"courseClass.teacher.id","role/teachers")},O(a,"courseClass.teacher.userFullname","","None"))))),f.default.createElement(g.LabeledValue,{label:"Register Date",value:a.registerDate})),f.default.createElement(b.Col,{md:6},this.renderStudentOptions(["regPaymentMethod","gradeStatus"]))),f.default.createElement(A,null,"Admin Notes"),f.default.createElement(g.EditableHTML,{name:"adminNotes",value:a.adminNotes,onChange:this.handleFieldChange,onlyEdit:!0}),f.default.createElement("div",null,f.default.createElement(b.Button,{style:{marginRight:"15px",marginBottom:15},className:"custom btn-success",type:"submit"},"Save"),f.default.createElement(b.Button,{style:{marginBottom:15},className:"custom",onClick:function(){return e.setState({showSelectUserWnd:!0})}},"Change user for this course registration"))),f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"Payments"),f.default.createElement("hr",null),this.renderStudentOptions(["studentStatus"]),f.default.createElement("div",{id:"reducedValues",className:"row",style:this.reducedValuesStyle},f.default.createElement(g.FormField,{label:"Reduced amount:",width:4,style:{marginBottom:10}},f.default.createElement("input",{name:"reducedAmount",className:"form-control",type:"text",value:a.reducedAmount,onChange:this.handleFieldChange})),f.default.createElement(g.FormField,{label:"Reduced notes:",width:4,style:{marginBottom:10}},f.default.createElement("input",{name:"reducedNotes",className:"form-control",type:"text",value:a.reducedNotes,onChange:this.handleFieldChange}))),f.default.createElement(I,{appTypeKey:this.props.appTypeKey,remainingFee:i,student:a,payments:r,onChange:this.onPaymentsChange,onLoadData:this.loadData,onSave:this.submit}),f.default.createElement(b.Row,null,f.default.createElement(b.Col,{md:3,style:{marginBottom:15}},f.default.createElement(A,null,"Total Amount Paid So Far"),f.default.createElement("input",{type:"text",className:"form-control",value:" "+l,disabled:!0})),f.default.createElement(b.Col,{md:3,style:{marginBottom:15}},f.default.createElement(A,null,"Remaining Amount"),f.default.createElement("input",{type:"text",className:"form-control",value:" "+i,disabled:!0})))),f.default.createElement(R.default,{appTypeKey:this.props.appTypeKey,params:{studentId:a.id}})),f.default.createElement(w.default,{show:o,headerText:"Select new user",onClose:function(){return e.setState({showSelectUserWnd:!1})},onSelect:this.changeUser}))}},{key:"renderClassOptions",value:function(){var e=this,t=this.state.data,n=t.student,a=t.classOptions;return f.default.createElement(E.default,null,a.map(function(t,a){return f.default.createElement(E.default,{key:a},f.default.createElement("input",{type:"radio",name:"classId",value:t.id,checked:n.classId==t.id,onChange:e.handleFieldChange})," "+t.classTime+" - "+t.classGender)}))}},{key:"renderStudentOptions",value:function(e){var t=this,n=this.state.data,a=n.student,o=n.studentOptions,l=["Payment Method","Results","Student Status"],i=[],s=(0,r.default)(o);e&&(s=s.filter(function(t){return-1!==e.indexOf(t)}));for(var u=0;u<s.length;u++)!function(e){var n=s[e];Array.isArray(o[n])?i.push(f.default.createElement(E.default,{key:n},f.default.createElement(A,null,l[e]),o[n].map(function(e,r){var o=e.split(" ")[0];return f.default.createElement("div",{key:r},f.default.createElement("input",{type:"radio",name:n,value:o,checked:a[n]==o,onChange:t.handleFieldChange})," "+m.default.ucWords(e.replace(/_/g," ")))}))):i.push(f.default.createElement(E.default,{key:n},f.default.createElement(A,null,l[e]),(0,r.default)(o[n]).map(function(e,r){return f.default.createElement("div",{key:r},f.default.createElement("input",{type:"radio",name:n,value:e,checked:a[n]==e,onChange:t.handleFieldChange})," "+m.default.ucWords(o[n][e].replace(/_/g," ")))})))}(u);return i}},{key:"render",value:function(){if(!this.isAllowed())return!1;var e=this.state.isLoading;return f.default.createElement("div",null,this.showHeader(),f.default.createElement("div",{id:"notifications"}),e?f.default.createElement(P.default,null):this.renderCourseRegEditForm())}},{key:"validate",value:function(e){for(var t=this.state.data.studentPayments,n=this.props.appTypeKey,a=0;a<t.length;a++){var r=t[a],o=r.id,l=r.receivedBy,i=r.paymentMethod,s=r.date,u=r.staff,c=r.isDeleted;if(function(e){for(var t=0;t<e.length;t++)if(void 0===e[t]||""==e[t]||null==e[t])return!0;return!1}([l,i,s,u])&&!c&&("stripe"!=i||o&&n==p.ROLES.SUPER_ADMIN||!o))return e&&C.default.error("All payments fields must be complete"),!1}return!0}},{key:"submit",value:function(e){var t=this;if(e.preventDefault(),!this.validate(!0))return!1;var n=v.default.getIfExists(this.state,"data.student.studentId",null);this.saveData(null,function(){n&&(t.saved=!0,t.context.router.push("/users/"+n))})}},{key:"onPaymentsChange",value:function(e){var t=this.state.data;t.studentPayments=e,this.saved=!1,this.setState({data:t})}},{key:"handleFieldChange",value:function(e){var t=this.state.data;t.student[e.target.name]=e.target.value,this.saved=!1,this.setState({data:t})}},{key:"loadData",value:function(){var e=this,t=this.props.params.id;t&&(this.setState({isLoading:!0}),this.promises.load=h.default.ajax({type:"get",url:"/api/students/"+t+"/form-data"}),this.promises.load.then(function(t){t.studentPayments=t.studentPayments.filter(function(e){return e.amount>0||0==e.isInitial}),e.setState({isLoading:!1,data:t})},function(e){return console.log(e)}))}},{key:"onClassIdChange",value:function(e){var t=this.state.data;t.student.classId!=e.target.value&&(t.student.classId=e.target.value,this.saveData(t,this.loadData))}},{key:"onChange",value:function(e){var t="on"+m.default.ucFirst(e.target.name)+"Change";this[t]?this[t](e):console.error("default on change behaviour not implemented")}},{key:"saveData",value:function(e,t){var n=this,a=this.props.params.id,r=e||this.state.data,o=r.student,l=r.studentPayments;"reduced"!==o.studentStatus&&(o.reducedAmount=0,o.reducedNotes=""),$.ajax({type:"post",url:"/api/students/"+a+"/submit-form-data",data:{student:{studentId:o.studentId,classId:o.classId,regStatus:o.regStatus,adminNotes:o.adminNotes,studentStatus:o.studentStatus,regPaymentStatus:o.regPaymentStatus,paymentMethod:o.paymentMethod,regPaymentMethod:o.regPaymentMethod,reducedAmount:o.reducedAmount,reducedNotes:o.reducedNotes,gradeStatus:o.gradeStatus},studentPayments:l},success:function(e){t&&t(),n.setState({data:e}),C.default.success("Saved successfully")},error:function(e){C.default.error("Save failed"),C.default.error(e.responseText),console.error(e)}})}},{key:"getTotalPaid",value:function(){var e=this.state.data,t=(e.student,0);return e.studentPayments.forEach(function(e){if(!e.isDeleted){var n=parseFloat(e.amount);isNaN(n)||(t+=n)}}),t}},{key:"getFee",value:function(){var e=0,t=this.state.data.student;switch(t.studentStatus){case"employed":e=t.courseClass.feeForEmployed>=0?t.courseClass.feeForEmployed:t.course.feeForEmployed;break;case"unemployed":e=t.courseClass.feeForUnemployed>=0?t.courseClass.feeForUnemployed:t.course.feeForUnemployed;break;case"reduced":e=t.reducedAmount?t.reducedAmount:0}return e}}]),t}(d.Component);t.default=N,N.propTypes={appTypeKey:d.PropTypes.string.isRequired},N.contextTypes={router:d.PropTypes.object.isRequired};var I=(0,_.default)(function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={payments:e.payments,paymentMethods:e.data,showDeletePayment:!1,idToDelete:null,showStripeForm:!1},a.add=a.add.bind(a),a.change=a.change.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this,t=this.state.showStripeForm,n=this.props.student;return f.default.createElement("div",{style:{marginBottom:"20px"}},this.renderTable(),f.default.createElement(b.Button,{className:"custom btn-success",onClick:this.add,style:{marginRight:"15px"}},"Add New Payment"),f.default.createElement(b.Button,{className:"custom btn-success",style:{marginRight:"15px"},onClick:function(){return e.setState({showStripeForm:!0})}},"Take Card Payment"),f.default.createElement(b.Button,{style:{marginRight:"15px"},className:"custom btn-success",type:"submit"},"Save"),f.default.createElement(T.default,{show:t,onClose:function(t){e.setState({showStripeForm:!1}),t&&e.props.onLoadData()},studentId:n.id}))}},{key:"getPaymentsCount",value:function(){var e=0;return this.state.payments.forEach(function(t){t.isDeleted||e++}),e}},{key:"renderTable",value:function(){var e=this,t=this.state,n=t.payments,a=t.showDeletePayment;return this.props.student,n&&0!==this.getPaymentsCount()?f.default.createElement("div",null,f.default.createElement("div",{className:"table-responsive"},f.default.createElement("table",{className:"table table-striped results-table",style:{minWidth:768}},f.default.createElement("thead",null,f.default.createElement("tr",null,f.default.createElement("td",null,"Received by"),f.default.createElement("td",null,"Payment Method"),f.default.createElement("td",null,"Date"),f.default.createElement("td",null,"Amount"),f.default.createElement("td",null,"Staff"),f.default.createElement("td",null))),f.default.createElement("tbody",null,this.renderRows()))),f.default.createElement(x.default,{headerText:"Delete payment",confirmText:"Are you sure?",onYes:function(){e.delete(),e.setState({showDeletePayment:!1})},onNo:function(){return e.setState({showDeletePayment:!1})},show:a})):f.default.createElement("h3",null,"No payments yet")}},{key:"renderRows",value:function(){var e=this,t=this.state,n=t.payments,a=t.paymentMethods,r=this.props,o=r.student,l=r.appTypeKey,i=[];return parseInt(o.totalAmount)>0&&i.push(f.default.createElement(M,{key:"initial",paymentMethods:a,payment:{receivedBy:o.paymentMethod,paymentMethod:o.paymentMethod,date:S.default.dateToStr(new Date),amount:o.totalAmount,staff:o.invoiceId?"paypal":"cash"},disabled:!0})),n&&(i=i.concat(n.map(function(t,n){if(t.isDeleted)return!1;var r="stripe"==t.paymentMethod&&t.id&&l!=p.ROLES.SUPER_ADMIN;return f.default.createElement(M,{key:n,index:n,payment:t,onDelete:function(){return e.setState({idToDelete:n,showDeletePayment:!0})},onChange:function(t,a){return e.change(n,t,a)},paymentMethods:a,disabled:r,undeletable:r})}))),i}},{key:"add",value:function(){var e=this.state,t=e.payments,n=(e.paymentMethods,this.props),a=(n.remainingFee,n.student);t.push({instalmentId:0,date:null,amount:"",staff:"",courseStudentId:a.id,paymentMethod:""}),this.setState({payments:t}),this.props.onChange(t)}},{key:"delete",value:function(){var e=this.state,t=e.payments,n=e.idToDelete;t[n].id?t[n].isDeleted=!0:t.splice(n,1),this.setState({payments:t}),this.props.onChange(t)}},{key:"change",value:function(e,t,n){var a=this.state.payments;a[e][t]=n,this.setState({payments:a}),this.props.onChange(a)}}]),t}(d.Component),{load:{type:"get",url:"/api/student-payments/get-payment-method-enum"}});I.PropTypes={remainingFee:d.PropTypes.number,student:d.PropTypes.object,payments:d.PropTypes.arrayOf(d.PropTypes.object),onChange:d.PropTypes.func.isRequired};var M=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.onChange=a.onChange.bind(a),a.delete=a.delete.bind(a),a.handleDateChange=a.handleDateChange.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.index;g.DatePicker.init(this.handleDateChange,{selector:"#payment-datepicker-"+e})}},{key:"handleDateChange",value:function(){var e=void 0,t=void 0;switch(arguments.length){case 1:var n=arguments[0];e=n.target.name,t=n.target.value;break;case 2:e=arguments[0],t=arguments[1]}this.onChange(e,this.formatDate(t,"yyyy-mm-dd"))}},{key:"formatDate",value:function(e,t){if(!e)return e;var n=e.split("-");switch(t){case"dd-mm-yyyy":4===n[0].length&&n.reverse();break;case"yyyy-mm-dd":4===n[2].length&&n.reverse()}return n.join("-")}},{key:"render",value:function(){var e=this.props.payment,t=(e.instalmentId,e.id,e.receivedBy),n=e.paymentMethod,a=e.date,r=e.amount,o=e.staff,l=this.props,i=l.paymentMethods,s=l.disabled,u=l.undeletable,c=l.index;return f.default.createElement("tr",null,f.default.createElement("td",null,f.default.createElement("input",{type:"text",value:t,name:"receivedBy",className:"form-control",onChange:this.onChange,disabled:s})),f.default.createElement("td",null,f.default.createElement("select",{className:"form-control",name:"paymentMethod",id:"paymentMethod",value:n,onChange:this.onChange,disabled:s},f.default.createElement("option",{value:""},"Select method"),i?i.map(function(e,t){return f.default.createElement("option",{key:t,value:e.value},e.label)}):"")),f.default.createElement("td",null,f.default.createElement("input",{value:this.formatDate(a,"dd-mm-yyyy"),name:"date",id:"payment-datepicker-"+c,className:"form-control datepicker",onChange:this.handleDateChange,disabled:s})),f.default.createElement("td",null,f.default.createElement("input",{type:"text",value:r,name:"amount",className:"form-control",onChange:this.onChange,disabled:s})),f.default.createElement("td",null,f.default.createElement("input",{type:"text",value:o,name:"staff",className:"form-control",onChange:this.onChange,disabled:"stripe"!=n&&s})),f.default.createElement("td",null,s||u?"":f.default.createElement(b.Button,{bsStyle:"danger",onClick:this.delete},"Delete")))}},{key:"delete",value:function(){this.props.onDelete()}},{key:"onChange",value:function(){var e=void 0,t=void 0;switch(arguments.length){case 1:var n=arguments[0];e=n.target.name,t=n.target.value;break;case 2:e=arguments[0],t=arguments[1]}this.props.onChange(e,t)}}]),t}(d.Component);M.PropTypes={payment:d.PropTypes.shape({id:d.PropTypes.number,instalmentId:d.PropTypes.number,date:d.PropTypes.string.isRequired,amount:d.PropTypes.number.isRequired,staff:d.PropTypes.string.isRequired}).isRequired,onDelete:d.PropTypes.func.isRequired,onChange:d.PropTypes.func.isRequired};var A=function(e){var t=e.children;return f.default.createElement("p",{className:"detail-field-label"},t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=n(12),p=a(n(171)),h=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={userId:null},a.headerStyle={textAlign:"center",fontSize:"14pt"},a.close=a.close.bind(a),a.ok=a.ok.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"close",value:function(){this.setState({userId:""}),this.props.onClose()}},{key:"ok",value:function(){var e=this.state.userId;(0,this.props.onSelect)(e),this.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.headerText,a=t.show,r=this.state.userId;return c.default.createElement(d.Modal,{show:a,onHide:this.close},c.default.createElement(d.Modal.Dialog,null,c.default.createElement(d.Modal.Header,{closeButton:!0},c.default.createElement("p",{style:this.headerStyle},n)),c.default.createElement(d.Modal.Body,null,c.default.createElement(f.FormField,{label:"Find it using search bar",width:12},c.default.createElement(p.default,{elemId:"newUserSelect",onSelectResult:function(t){return e.setState({userId:t})}})),c.default.createElement(f.FormField,{label:"Or type correct id",width:12},c.default.createElement("input",{type:"text",name:"userId",className:"form-control",value:r,onChange:function(t){return e.setState({userId:t.target.value})}}))),c.default.createElement(d.Modal.Footer,null,c.default.createElement(d.Button,{onClick:this.close},"Cancel"),c.default.createElement(d.Button,{onClick:this.ok,style:{marginLeft:"15px"}},"Ok"))))}}]),t}(u.Component);t.default=h,h.propTypes={headerText:u.PropTypes.string,onSelect:u.PropTypes.func.isRequired,onClose:u.PropTypes.func.isRequired,show:u.PropTypes.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(50)),o=a(n(17)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=n(9),h=a(n(15)),m=a(n(31)),v=a(n(16)),y=a(n(47)),g=n(12),E=a(n(22)),b=n(6),_=(a(n(14)),a(n(11))),C=a(n(19)),w=function(e){function t(e,n){var a;(0,i.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return r.state={isLoading:!1,data:{}},r.allowedRoles=[p.ROLES.ADMIN,p.ROLES.SUPER_ADMIN,p.ROLES.REGISTRAR],r.headerTypes=(a={},(0,o.default)(a,p.ROLES.ADMIN,y.default),(0,o.default)(a,p.ROLES.SUPER_ADMIN,y.default),(0,o.default)(a,p.ROLES.REGISTRAR,y.default),a),r.promises={save:null,load:null},r.handleFieldChange=r.handleFieldChange.bind(r),r.onPaymentsChange=r.onPaymentsChange.bind(r),r.isStudentReduced=null,r.reducedValuesStyle={},r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"isAllowed",value:function(){var e=this.props.appTypeKey;return-1!==this.allowedRoles.indexOf(e)}},{key:"componentWillMount",value:function(){this.isAllowed()&&this.loadData()}},{key:"componentWillUnmount",value:function(){for(var e in this.promises)this.promises[e]&&this.promises[e].cancel()}},{key:"showHeader",value:function(){var e=this.props.appTypeKey;if(e in this.headerTypes)var t=this.headerTypes[e];return f.default.createElement("div",null,f.default.createElement(t,{selectedTab:"/classes"}))}},{key:"renderCourseRegEditForm",value:function(){var e=this,t=this.state.data,n=t.student,a=t.studentOptions,r=(this.props.params.id,this.getTotalPaid());return Math.max(this.getFee()-r,0),null===this.isStudentReduced?(this.isStudentReduced="reduced"==n.studentStatus,this.reducedValuesStyle.display=this.isStudentReduced?"block":"none"):this.isStudentReduced!==("reduced"==n.studentStatus)&&(this.isStudentReduced=!this.isStudentReduced,$("#reducedValues").slideToggle("slow")),f.default.createElement("div",null,f.default.createElement("div",{id:"notifications"}),f.default.createElement("form",{id:"classEditForm",onSubmit:function(t){return e.submit(t)}},f.default.createElement("div",{className:"content-block"},f.default.createElement("h2",{className:"block-heading"},"Course Registration Info"),f.default.createElement("hr",null),f.default.createElement(b.Row,null,f.default.createElement(b.Col,{md:6},f.default.createElement(g.LabeledValue,{label:"Course",value:v.default.accessObjByPath(n,"course.courseTitle"),width:12}),f.default.createElement(g.LabeledValue,{label:"Term",value:v.default.accessObjByPath(n,"courseClass.term.name"),width:12}),f.default.createElement(g.LabeledValue,{label:"Classroom",value:v.default.accessObjByPath(n,"courseClass.classroom.classroomName"),width:12}),this.renderClassTime(),f.default.createElement(g.LabeledValue,{label:"Male/Female",value:v.default.accessObjByPath(n,"courseClass.classGender"),width:12})),f.default.createElement(b.Col,{md:6},f.default.createElement(g.LabeledValue,{label:"Registration status",value:n.regStatus,width:12}),f.default.createElement(g.LabeledValue,{label:"Payment Status",value:n.regPaymentStatus,width:12}),f.default.createElement(g.LabeledValue,{label:"Payment Method",value:n.regPaymentMethod,width:12}),f.default.createElement(g.LabeledValue,{label:"Student Status",value:n.studentStatus,width:12}),f.default.createElement(g.LabeledValue,{label:"Student Name",value:v.default.accessObjByPath(n,"user.userFullname"),width:12}))),f.default.createElement(x,null,"Admin Notes"),f.default.createElement(g.EditableHTML,{name:"adminNotes",value:n.adminNotes,onChange:this.handleFieldChange,onlyEdit:!0}),f.default.createElement(g.FormField,{width:3,label:"Total Amount Paid So Far"},f.default.createElement("input",{type:"text",className:"form-control",value:" "+r,disabled:!0})),f.default.createElement("h2",{className:"block-heading"},"Exams"),f.default.createElement("hr",null),f.default.createElement(k,{student:n,onChange:this.handleFieldChange}),f.default.createElement(E.default,null,f.default.createElement("p",{style:{fontWeight:"bold"}},"Final Grade"),a.gradeStatus.map(function(t,a){var r=t.split(" ")[0];return f.default.createElement("div",{key:a},f.default.createElement("input",{type:"radio",name:"gradeStatus",value:r,checked:n.gradeStatus==r,onChange:e.handleFieldChange})," "+m.default.ucWords(t.replace(/_/g," ")))})),f.default.createElement(E.default,null,f.default.createElement(b.Button,{className:"custom btn-success",type:"submit"},"Save")))))}},{key:"renderClassTime",value:function(){for(var e=this.state.data,t=e.student,n=e.classOptions,a=0;a<n.length;a++){var r=n[a];if(t.classId==r.id)return f.default.createElement(g.LabeledValue,{label:"Class time",value:" "+r.classTime+" - "+r.classGender})}return!1}},{key:"renderStudentOptions",value:function(){for(var e=this,t=this.state.data,n=t.student,a=t.studentOptions,o=["Payment Method","Student Status"],l=[],i=(0,r.default)(a),s=0;s<i.length;s++)!function(t){var r=i[t];l.push(f.default.createElement(E.default,{key:r},f.default.createElement("p",{style:{fontWeight:"bold"}},o[t]),a[r].map(function(t,a){var o=t.split(" ")[0];return f.default.createElement("div",{key:a},f.default.createElement("input",{type:"radio",name:r,value:o,checked:n[r]==o,onChange:e.handleFieldChange})," "+m.default.ucWords(t.replace(/_/g," ")))})))}(s);return l}},{key:"render",value:function(){return!!this.isAllowed()&&(this.state.isLoading?f.default.createElement("div",null,this.showHeader(),f.default.createElement("p",null,"Loading...")):f.default.createElement("div",null,this.showHeader(),this.renderCourseRegEditForm()))}},{key:"submit",value:function(e){e.preventDefault(),this.saveData()}},{key:"onPaymentsChange",value:function(e){var t=this.state.data;t.studentPayments=e,this.setState({data:t})}},{key:"handleFieldChange",value:function(e){var t=this.state.data;t.student[e.target.name]=e.target.value,this.setState({data:t})}},{key:"loadData",value:function(){var e=this,t=this.props.params.id;t&&(this.setState({isLoading:!0}),this.promises.load=h.default.ajax({type:"get",url:"/api/students/"+t+"/form-data"}),this.promises.load.then(function(t){return e.setState({isLoading:!1,data:t})},function(e){return console.log(e)}))}},{key:"saveData",value:function(){var e=this.props.params.id,t=this.state.data,n=t.student,a=t.studentPayments;"reduced"!==n.studentStatus&&(n.reducedAmount=0,n.reducedNotes=""),$.ajax({type:"post",url:"/api/students/"+e+"/submit-form-data",data:{student:{studentId:n.studentId,adminNotes:n.adminNotes,feedback:n.feedback,gradeStatus:n.gradeStatus,score:n.score,attendanceCode:n.attendanceCode,scores:n.scores},studentPayments:a},success:function(){return _.default.success("Saved successfully")},error:function(e){_.default.error("Save failed"),console.log(e)}})}},{key:"getTotalPaid",value:function(){var e=this.state.data,t=(e.student,0);return e.studentPayments.forEach(function(e){if(!e.isDeleted){var n=parseFloat(e.amount);isNaN(n)||(t+=n)}}),t}},{key:"getFee",value:function(){var e=0,t=this.state.data.student;switch(t.studentStatus){case"employed":e=t.courseClass.feeForEmployed>=0?t.courseClass.feeForEmployed:t.course.feeForEmployed;break;case"unemployed":e=t.courseClass.feeForUnemployed>=0?t.courseClass.feeForUnemployed:t.course.feeForUnemployed}return e}}]),t}(d.Component);t.default=w,w.PropTypes={appTypeKey:d.PropTypes.string.isRequired};var k=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={isLoading:!1,commentTypes:[],bank:[]},a.onCommentTypeSelect=a.onCommentTypeSelect.bind(a),a.loadCommentsBank=a.loadCommentsBank.bind(a),a.loadCommentTypes=a.loadCommentTypes.bind(a),a.load=a.load.bind(a),a.onChange=a.onChange.bind(a),a.onExamChange=a.onExamChange.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"updateField",value:function(e,t){}},{key:"onCommentTypeSelect",value:function(){var e=this,t=arguments,n=null,a=null,r=null;switch(arguments.length){case 1:n=this.onChange,a=arguments[0],r="feedback";break;case 2:n=function(n){return e.onExamChange(t[0],n)},a=arguments[1],r="comment"}n(a);var o=a.target.value,l=this.state.bank.filter(function(e){return e.feedbackCode==o});n({target:{name:r,value:l.length>0?l[Math.floor(Math.random()*l.length)].feedbackDescription:""}})}},{key:"onChange",value:function(e){(0,this.props.onChange)(e)}},{key:"onExamChange",value:function(e,t){var n=this.props,a=n.student.scores,r=n.onChange,o=t.target,l=o.name,i=o.value;a[e][l]=i,r({target:{name:"scores",value:a}})}},{key:"loadCommentTypes",value:function(e){var t=this;$.ajax({type:"get",url:"/api/lookup/get-attendance-level",success:function(n){t.setState({commentTypes:n}),e()},error:function(t){console.error(t),_.default.error(t.responseText),e()}})}},{key:"loadCommentsBank",value:function(e){var t=this;$.ajax({type:"get",url:"/api/bank",success:function(n){t.setState({bank:n}),e()},error:function(t){console.error(t),_.default.error(t.responseText),e()}})}},{key:"load",value:function(e){var t=[this.loadCommentTypes,this.loadCommentsBank],n=t.length,a=function(){0==--n&&e()};t.forEach(function(e){return e(a)})}},{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.load(function(){return e.setState({isLoading:!1})})}},{key:"renderBody",value:function(){var e=this,t=this.state.commentTypes,n=this.props.student,a=v.default.getIfExists,r=a(n,"attendanceCode",-1),o=a(n,"score",0),l=a(n,"feedback",""),i=[];i.push(f.default.createElement("tr",{key:i.length},f.default.createElement("td",null,"Final Grade"),f.default.createElement("td",null,f.default.createElement("input",{type:"text",className:"form-control",name:"score",value:o,onChange:this.onChange})),f.default.createElement("td",null,f.default.createElement(S,{name:"attendanceCode",options:t,value:r,onChange:this.onCommentTypeSelect})),f.default.createElement("td",null,f.default.createElement("input",{type:"text",className:"form-control",name:"feedback",value:l,onChange:this.onChange}))));for(var s=0;s<n.scores.length;s++)!function(r){var o=n.scores[r],l=a(o,"examTitle",""),s=a(o,"score",0),u=a(o,"attendanceCode",-1),c=a(o,"comment","");i.push(f.default.createElement("tr",{key:i.length},f.default.createElement("td",null,l),f.default.createElement("td",null,f.default.createElement("input",{type:"text",className:"form-control",name:"score",value:s,onChange:function(t){return e.onExamChange(r,t)}})),f.default.createElement("td",null,f.default.createElement(S,{name:"attendanceCode",options:t,value:u,onChange:function(t){return e.onCommentTypeSelect(r,t)}})),f.default.createElement("td",null,f.default.createElement("input",{type:"text",className:"form-control",name:"comment",value:c,onChange:function(t){return e.onExamChange(r,t)}}))))}(s);return i}},{key:"render",value:function(){return this.state.isLoading?f.default.createElement(C.default,null):f.default.createElement("table",{className:"table table-striped results-table"},f.default.createElement("thead",null,f.default.createElement("tr",null,f.default.createElement("td",null,"Exam"),f.default.createElement("td",null,"Score"),f.default.createElement("td",null,"Comment Type"),f.default.createElement("td",null,"Comment"))),f.default.createElement("tbody",null,this.renderBody()))}}]),t}(d.Component),S=function(e){var t=e.options,n=e.value,a=e.onChange,r=e.name;return f.default.createElement("select",{name:r,value:n,className:"form-control",onChange:a},f.default.createElement("option",{value:-1},"Custom comment"),t.map(function(e,t){return f.default.createElement("option",{key:t,value:e.value},m.default.ucFirst(e.label))}))},x=function(e){var t=e.children;return f.default.createElement("p",{className:"detail-field-label"},t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=(a(n(16)),a(n(15)),n(6)),p=(a(n(31)),a(n(14)),a(n(11))),h=(a(n(7)),a(n(77)),function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={a:"",b:"",result:""},a.onChange=a.onChange.bind(a),a.test=a.test.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"test",value:function(){p.default.success("test"),p.default.error("error!")}},{key:"onChange",value:function(e){this.setState((0,r.default)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state;return e.a,e.b,e.result,d.default.createElement("div",null,d.default.createElement(f.Button,{onClick:this.test},"Calc"))}}]),t}(d.default.Component));t.default=h,function(e){function t(){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onHide,n=e.show;return d.default.createElement(f.Modal,{show:n,onHide:t},d.default.createElement(f.Modal.Dialog,null,d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement("p",null,"Success")),d.default.createElement(f.Modal.Body,null,"Course updated"),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,null,"ok"))))}}])}(c.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(0,a(n(14)).default)(function(e){var t=e.data;return setTimeout(window.print,500),c.default.createElement("div",{style:{margin:"8px"},dangerouslySetInnerHTML:{__html:t}})}),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params,t=e.id,n=e.branchId;return c.default.createElement("div",null,c.default.createElement("title",null,"Invoice"),c.default.createElement(d,{ajaxOperations:{load:{type:"get",url:"/api/students/"+t+"/print-receipt/"+n}}}))}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(0,a(n(14)).default)(function(e){var t=e.data;return setTimeout(window.print,500),c.default.createElement("div",{style:{margin:"8px"},dangerouslySetInnerHTML:{__html:t}})}),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params.students.split(",").map(function(e){return"studentsIds[]="+e}).join("&");return c.default.createElement("div",null,c.default.createElement("title",null,"Receipt"),c.default.createElement(d,{ajaxOperations:{load:{type:"get",url:"/api/students/print-receipt-rows?"+e}}}))}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(16)),p=(0,d.default)(function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"renderExams",value:function(){var e=f.default.getIfExists,t=this.props.data,n=t.attendances,a=e(t,"student.exams");return!(!a||0===a.length)&&c.default.createElement("div",{className:"print-container"},c.default.createElement("p",null,c.default.createElement("b",null,"Exams: ")),c.default.createElement("table",{className:"table print-table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"Exam"),c.default.createElement("th",null,"Score"),c.default.createElement("th",null,"Attendance"),c.default.createElement("th",null,"Comment"))),c.default.createElement("tbody",null,a.map(function(e,t){var a=e.attendanceCode in n?n[e.attendanceCode].label:"none";return c.default.createElement("tr",{key:t},c.default.createElement("td",null,e.title),c.default.createElement("td",null,e.score),c.default.createElement("td",null,a),c.default.createElement("td",null,e.comment))}))))}},{key:"renderLessons",value:function(){var e=this.props.data,t=(0,f.default.getIfExists)(e,"student.lessons");return!(!t||0===t.length)&&c.default.createElement("div",{className:"print-container"},c.default.createElement("p",null,c.default.createElement("b",null,"Lessons: ")),c.default.createElement("table",{className:"table print-table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"Date"),c.default.createElement("th",null,"Class work"),c.default.createElement("th",null,"Home work"),c.default.createElement("th",null,"Attendance"),c.default.createElement("th",null,"Comment"))),c.default.createElement("tbody",null,t.map(function(e,t){return c.default.createElement("tr",{key:t},c.default.createElement("td",null,e.date),c.default.createElement("td",null,e.doneWork),c.default.createElement("td",null,e.homeWork),c.default.createElement("td",null,e.attendance),c.default.createElement("td",null,e.comment))}))))}},{key:"render",value:function(){setTimeout(window.print,500);var e=this.props.data,t=f.default.getIfExists,n={fontWeight:"bold"},a=t(e,"student.user.userFullname"),r=t(e,"student.courseClass.teacher.userFullname",""),o=t(e,"student.course.courseTitle"),l=t(e,"student.courseClass.classTime"),i=t(e,"student.courseClass.term.name",""),s=t(e,"student.user.profile.profileGender"),u=t(e,"student.registerDate"),d=t(e,"student.regStatus"),p=t(e,"student.regPaymentStatus"),h=t(e,"student.regPaymentMethod"),m=t(e,"student.studentStatus"),v=t(e,"student.reducedNotes"),y=t(e,"student.course.feeForEmployed",0),g=t(e,"student.course.feeForUnemployed",0),E=t(e,"student.totalAmount",0),b=t(e,"student.gradeStatus"),_=t(e,"student.courseClass.classKeyCode"),C=t(e,"student.adminNotes"),w="";switch(m){case"employed":w="(Fee:  "+parseFloat(y).toFixed(2)+")";break;case"unemployed":w="(Fee:  "+parseFloat(g).toFixed(2)+")";break;case"reduced":w="("+v+")"}return c.default.createElement("div",null,c.default.createElement("div",{className:"print-container"},c.default.createElement("h2",{style:n},"Student: ",a),c.default.createElement("h2",{style:n},o,": ",l),c.default.createElement("h2",{style:n},"Teacher: ",r)),c.default.createElement("div",{className:"print-container"},c.default.createElement("p",null,c.default.createElement("b",null,"Term: "),i),c.default.createElement("p",null,c.default.createElement("b",null,"Male/Female: "),s),c.default.createElement("p",null,c.default.createElement("b",null,"Register Date: "),u),c.default.createElement("p",null,c.default.createElement("b",null,"Registration Status: "),d),c.default.createElement("p",null,c.default.createElement("b",null,"Payment Status: "),p),c.default.createElement("p",null,c.default.createElement("b",null,"Payment Method: "),h),c.default.createElement("p",null,c.default.createElement("b",null,"Student Status: "),m," ",w),c.default.createElement("p",null,c.default.createElement("b",null,"Total Amount: ")," ",parseFloat(E).toFixed(2)),c.default.createElement("p",null,c.default.createElement("b",null,"Final Grade: "),b),c.default.createElement("p",null,c.default.createElement("b",null,"Class Key Code: "),_)),c.default.createElement("div",{className:"print-container"},c.default.createElement("p",null,c.default.createElement("b",null,"Admin Notes: ")),c.default.createElement("div",{dangerouslySetInnerHTML:{__html:C}})),this.renderExams(),this.renderLessons())}}]),t}(u.Component)),h=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params.id;return c.default.createElement(p,{ajaxOperations:{load:{type:"get",url:"/api/students/"+e+"/export-student-data"}},logEnabled:!0})}}]),t}(u.Component);t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(14)),f=a(n(16)),p=a(n(88)),h=f.default.getIfExists,m=(0,d.default)(function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.assetManager=new p.default,a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.assetManager.loadCss("src/style/printings/certificate.css")}},{key:"componentWillUnount",value:function(){this.assetManager.unloadAll()}},{key:"render",value:function(){var e=this.props.data;return c.default.createElement("div",null,c.default.createElement("div",{className:"cert-container"},c.default.createElement("p",null,h(e,"user.userFullname","")),c.default.createElement("p",null,c.default.createElement("span",null,c.default.createElement("br",null),c.default.createElement("br",null),h(e,"course.courseTitle","")),c.default.createElement("span",null," - "),c.default.createElement("span",null,e.score)),c.default.createElement("p",null,h(e,"courseClass.term.name")),c.default.createElement("p",{style:{pageBreakAfter:"always"}})))}}]),t}(u.Component)),v=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params.id;return c.default.createElement(m,{ajaxOperations:{load:{type:"get",url:"/api/students/"+e,data:{fields:["user.userFullname","course.courseTitle","courseClass.term.name","score"]}}},logEnabled:!0})}}]),t}(u.Component);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(0,a(n(14)).default)(function(e){var t=e.data;return c.default.createElement("div",{style:{margin:"8px"},dangerouslySetInnerHTML:{__html:t}})}),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params,t=e.role,n=e.type,a=e.filters;return c.default.createElement("div",null,c.default.createElement(d,{ajaxOperations:{load:{type:"get",url:"/api/users/"+t+"/print/"+n+"/filters/"+a}},logEnabled:!0}))}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(0,a(n(14)).default)(function(e){var t=e.data;return c.default.createElement("div",{style:{margin:"8px"},dangerouslySetInnerHTML:{__html:t}})}),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params,t=e.branchId,n=e.payNameId;return c.default.createElement("div",null,c.default.createElement(d,{ajaxOperations:{load:{type:"get",url:"/api/payname/"+n+"/"+t}},logEnabled:!0}))}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(12),p=n(6),h=a(n(96)),m=a(n(11)),v=(a(n(16)),n(9)),y=(a(n(296)),a(n(14)),n(18),a(n(15))),g=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={userName:"",password:""},a.onChange=a.onChange.bind(a),a.login=a.login.bind(a),a.next=a.next.bind(a),a.forgotPassword=a.forgotPassword.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onChange",value:function(e){this.setState((0,r.default)({},e.target.name,e.target.value))}},{key:"pushStoredItemsToCart",value:function(){var e=this.context.router,t=localStorage.getItem("registeredClasses");null!=t&&(t=JSON.parse(t),$.ajax({type:"post",url:"api/cart/add",data:{classes:t},success:function(){localStorage.removeItem("registeredClasses"),e.push("/cart")},error:function(e){return console.log(e)}}))}},{key:"forgotPassword",value:function(){localStorage.setItem("forgotEmail",this.state.userName),this.context.router.push("/forgot-password")}},{key:"next",value:function(){var e=this;this.usernameCheckPm&&this.usernameCheckPm.cancel();var t=this.state.userName;this.usernameCheckPm=y.default.ajax({type:"get",url:"/api/auth/check-username",data:{username:t}}),this.usernameCheckPm.then(function(){e.setState({usernameSelected:!0}),$(function(){return $('[name="password"]').focus()})},function(n){localStorage.setItem("username",t),e.context.router.push("/registration")})}},{key:"componentDidMount",value:function(){$(function(){return $('[name="userName"]').focus()})}},{key:"login",value:function(){var e=this,t=this.state,n=t.userName,a=t.password;0!==n.length?0!==a.length?h.default.login(n,a).then(function(){e.pushStoredItemsToCart(),e.props.onUserUpdate()},function(e){return m.default.error(e.responseText.replace(/"/g,""))}):m.default.error("Password should not be empty"):m.default.error("User name or email should not be empty")}},{key:"renderUserNameSelect",value:function(){var e=this,t=this.state.userName;return d.default.createElement("div",null,d.default.createElement(f.FormField,{width:12,label:"Username / Email"},d.default.createElement("input",{type:"text",className:"form-control",name:"userName",onChange:this.onChange,value:t,onKeyPress:function(t){return(13==t.charCode||13==t.keyCode)&&e.next()}})),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{md:12},d.default.createElement(p.Button,{onClick:this.next,bsStyle:"primary",style:{marginRight:"15px"}},"Next"))))}},{key:"renderPasswordInput",value:function(){var e=this,t=this.state.password;return d.default.createElement("div",null,d.default.createElement("h3",null,d.default.createElement("a",{onClick:function(t){t.preventDefault(),e.setState({usernameSelected:!1})},style:{cursor:"pointer"}},"Log in using another account")),d.default.createElement(f.FormField,{width:12,label:"Password"},d.default.createElement("input",{type:"password",className:"form-control",name:"password",onChange:this.onChange,value:t,onKeyPress:function(t){return(13==t.charCode||13==t.keyCode)&&e.login()}})),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{md:12},d.default.createElement(p.Button,{onClick:this.login,bsStyle:"primary",style:{marginRight:"15px"}},"Login"),d.default.createElement(p.Button,{onClick:this.forgotPassword},"Forgot password"))))}},{key:"render",value:function(){this.props.appTypeKey!==v.ROLES.GUEST&&this.context.router.push("/");var e=this.state.usernameSelected;return d.default.createElement("div",null,d.default.createElement("div",{style:{marginTop:"40px"}},d.default.createElement(p.Row,null,d.default.createElement(p.Col,{mdOffset:3,md:6,smOffset:2,sm:8},d.default.createElement("div",{id:"notifications"}),d.default.createElement("h2",null,"Enter your email address"),e?this.renderPasswordInput():this.renderUserNameSelect()))))}}]),t}(c.Component);t.default=g,g.contextTypes={router:c.PropTypes.object.isRequired},g.propTypes={appTypeKey:c.PropTypes.string,onUserUpdate:c.PropTypes.func}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=n(18),h=a(n(11)),m=a(n(15)),v=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={userEmailAddress:localStorage.getItem("forgotEmail"),profileForname:"",profileSurname:"",profilePostcode:"",emailSent:!1},localStorage.removeItem("forgotEmail"),a.onChange=a.onChange.bind(a),a.onForgotPassClick=a.onForgotPassClick.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onForgotPassClick",value:function(){var e=this,t=this.state,n=t.userEmailAddress,a=t.profileForname,r=t.profileSurname,o=t.profilePostcode;if(n||a&&r&&o){var l=n?{userEmailAddress:n}:{profileForname:a,profileSurname:r,profilePostcode:o};this.promise&&this.promise.cancel(),this.promise=m.default.ajax({type:"post",url:"/api/users/forgot-password",data:l}),this.promise.then(function(){h.default.success("Check your email for reset password link"),e.setState({emailSent:!0})},function(e){h.default.error(e.responseText.replace(/"/g,""))})}else h.default.error("Fill email or form bellow")}},{key:"onChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({},n,a))}},{key:"render",value:function(){var e=this.state,t=e.userEmailAddress,n=e.profileForname,a=e.profileSurname,r=e.profilePostcode;return e.emailSent?d.default.createElement("div",null,d.default.createElement(f.Row,null,d.default.createElement(f.Col,{md:8,mdOffset:3},d.default.createElement("h2",null,"Reset code sent to email"),d.default.createElement("p",null,"Please check your email and follow the instruction on resetting your password. If you have not recieved an email please also check your spam and junk mail.")))):d.default.createElement("div",null,d.default.createElement(f.Row,null,d.default.createElement(f.Col,{md:6,mdOffset:3},d.default.createElement("h2",null,"Forgot your account password?"),d.default.createElement("p",null,"Enter your email so we may email you your password"))),d.default.createElement(f.Row,{style:{marginTop:"5px"}},d.default.createElement(f.Col,{md:6,mdOffset:3},d.default.createElement("p",{className:"detail-field-label"},"Your email address"),d.default.createElement("input",{type:"text",className:"form-control",name:"userEmailAddress",onChange:this.onChange,value:t}))),d.default.createElement(f.Row,null,d.default.createElement(f.Col,{md:6,mdOffset:3},d.default.createElement("hr",{style:{borderTop:"1px solid #CACACC",borderRight:"0px none",borderLeft:"0px none",borderBottom:"0px none",height:"1px",marginTop:"40px"}}))),d.default.createElement(f.Row,{style:{marginBottom:"20px"}},d.default.createElement(f.Col,{md:8,mdOffset:3},d.default.createElement("p",null,d.default.createElement("b",null,"Alternatively")," complete the fields below to reset your password immediately"))),d.default.createElement(f.Row,{style:{marginBottom:"5px"}},d.default.createElement(f.Col,{md:6,mdOffset:3},d.default.createElement("p",{className:"detail-field-label"},"Forname"),d.default.createElement("input",{type:"text",className:"form-control",name:"profileForname",onChange:this.onChange,value:n}))),d.default.createElement(f.Row,{style:{marginBottom:"5px"}},d.default.createElement(f.Col,{md:6,mdOffset:3},d.default.createElement("p",{className:"detail-field-label"},"Surname"),d.default.createElement("input",{type:"text",className:"form-control",name:"profileSurname",onChange:this.onChange,value:a}))),d.default.createElement(f.Row,{style:{marginBottom:"5px"}},d.default.createElement(f.Col,{md:6,mdOffset:3},d.default.createElement("p",{className:"detail-field-label"},"Postcode"),d.default.createElement("input",{type:"text",className:"form-control",name:"profilePostcode",onChange:this.onChange,value:r}))),d.default.createElement(f.Row,{style:{marginTop:"10px"}},d.default.createElement(f.Col,{md:6,mdOffset:3},d.default.createElement(f.Button,{onClick:this.onForgotPassClick},"Forgot Password"),d.default.createElement(p.Link,{to:"/login"},d.default.createElement(f.Button,{style:{marginLeft:"15px"}},"Cancel")))))}}]),t}(c.Component);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(15)),p=a(n(11)),h=n(12),m=n(6),v=a(n(19)),y=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={isLoaded:!1,newPassword:"",newPasswordConfirm:"",passwordReseted:!1},a.onChange=a.onChange.bind(a),a.submit=a.submit.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"load",value:function(){var e=this,t=this.props.params,n=t.resetCode,a=t.userId,r=this.context.router;this.promise&&this.promise.cancel(),this.promise=f.default.ajax({type:"get",url:"/api/users/reset-password/"+n+"/"+a}),this.promise.then(function(){return e.setState({isLoaded:!0})},function(e){p.default.error(e.responseText.replace(/"/g,""),5e3),r.push("/")})}},{key:"onChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((0,r.default)({},n,a))}},{key:"submit",value:function(){var e=this,t=this.props.params,n=t.resetCode,a=t.userId,r=this.state,o=r.newPassword,l=r.newPasswordConfirm;o?o===l?(this.promise&&this.promise.cancel(),this.promise=f.default.ajax({type:"post",url:"/api/users/reset-password",data:{resetCode:n,userId:a,newPassword:o,newPasswordConfirm:l}}),this.promise.then(function(){return e.setState({passwordReseted:!0})},function(e){return p.default.error(e.responseText.replace(/"/g,""))})):p.default.error("Passwords should match"):p.default.error("Enter new password")}},{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoaded,a=t.newPassword,r=t.newPasswordConfirm,o=t.passwordReseted;return n?o?d.default.createElement("div",null,d.default.createElement("h2",null,"New password is set"),d.default.createElement("p",null,"You can login now using your new password")):d.default.createElement("div",{style:{marginTop:"15px"}},d.default.createElement(h.FormField,{width:6,offset:3,label:"New Password"},d.default.createElement("input",{className:"form-control",type:"text",name:"newPassword",value:a,onChange:this.onChange})),d.default.createElement(h.FormField,{width:6,offset:3,label:"Confirm New Password"},d.default.createElement("input",{className:"form-control",type:"text",name:"newPasswordConfirm",value:r,onChange:this.onChange})),d.default.createElement(h.FormField,{width:6,offset:3},d.default.createElement(m.Button,{onClick:this.submit},"Submit"),d.default.createElement(m.Button,{style:{marginLeft:"15px"},onClick:function(){return e.context.router.push("/")}},"Cancel"))):d.default.createElement("div",null,d.default.createElement(v.default,null))}}]),t}(c.Component);t.default=y,y.contextTypes={router:c.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=(a(u),a(n(110))),d=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.renderTemplatedComponent("Cart")}}]),t}(u.Component);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(9),p=a(n(1289)),h=a(n(1290)),m=a(n(292)),v=a(n(293)),y=function(e){function t(e,n){var a;(0,l.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.state={childTypeKey:null},i.childTypes=(a={},(0,r.default)(a,f.ROLES.STUDENT,p.default),(0,r.default)(a,f.ROLES.GUEST,p.default),(0,r.default)(a,f.ROLES.REGISTRAR,h.default),(0,r.default)(a,f.ROLES.SUPER_ADMIN,m.default),(0,r.default)(a,f.ROLES.ADMIN,v.default),a),i}return(0,u.default)(t,e),(0,i.default)(t,[{key:"getChildComponent",value:function(){var e=this.props.appTypeKey;return e in this.childTypes&&this.childTypes[e]}},{key:"getChildrenWithType",value:function(){var e=this.props,t=e.children,n=e.appTypeKey;return!!t&&d.default.cloneElement(t,{appTypeKey:n})}},{key:"render",value:function(){var e=this.getChildComponent(),t=this.getChildrenWithType();return!(!e||!this.context.user)&&d.default.createElement("div",null,d.default.createElement(e,{id:this.context.user.id}),t)}}]),t}(c.Component);t.default=y,y.PropTypes={appTypeKey:c.PropTypes.string.isRequired},y.contextTypes={user:c.PropTypes.object}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=(a(n(22)),a(n(16))),h=(a(n(15)),a(n(36)),n(12),a(n(14))),m=(a(n(28)),a(n(296))),v=a(n(11)),y=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n)),r=e.data;return r.userPassword="",a.state={user:r,showConfirmWnd:!1},a.onToggle=a.onToggle.bind(a),a.onChange=a.onChange.bind(a),a.submit=a.submit.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onChange",value:function(e){this.setState({user:e})}},{key:"validate",value:function(e){return!e.userPassword||e.userPassword===e.userPasswordConfirm||(alert("Passwords should match"),!1)}},{key:"submit",value:function(){var e=this.state.user;if(this.validate(e)){var t=p.default.getIfExists;e.userFullname=t(e,"profile.profileForname","")+" "+t(e,"profile.profileSurname",""),$.ajax({type:"put",url:"/api/users/"+e.id,data:e,success:function(){return v.default.success("Profile Updated")},error:function(e){v.default.error("Error updating profile"),console.error(e)}})}}},{key:"onToggle",value:function(e){var t=e.target.value;this.setState((0,r.default)({},t,!this.state[t]))}},{key:"render",value:function(){var e=this.state.user;return d.default.createElement("div",null,d.default.createElement(f.Row,null,d.default.createElement(f.Col,{md:8,mdOffset:2},d.default.createElement("h2",null,"Profile"),d.default.createElement("div",{id:"notifications"}),d.default.createElement(m.default,{user:e,onChange:this.onChange}))),d.default.createElement(f.Row,null,d.default.createElement(f.Col,{md:2,mdOffset:5},d.default.createElement(f.Button,{style:{marginTop:"15px"},onClick:this.submit,bsStyle:"primary"},"Save"))))}}]),t}(d.default.Component),g=(0,h.default)(y),E=function(e){function t(){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.context,t=e.user,n=e.router;if(!t)return n.push("/login"),d.default.createElement("div",null);var a=t.id;return d.default.createElement(g,{ajaxOperations:{load:{type:"get",url:"/api/users/"+a},save:{type:"put",url:"/api/users/"+a}}})}}]),t}(c.Component);t.default=E,E.contextTypes={user:c.PropTypes.object,router:c.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(294)),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.context,t=e.user,n=e.router;return t||n.replace("/login"),c.default.createElement("div",null,c.default.createElement(d.default,{id:t.id}))}}]),t}(u.Component);t.default=f,f.contextTypes={user:u.PropTypes.object,router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(18),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("h1",null,"Registration successful"),c.default.createElement("h2",null,"You can ",c.default.createElement(d.Link,{to:"/login"},"login")," now and start using your account"))}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(1293)),f=a(n(28)),p=n(9),h=n(6);t.default=(0,f.default)(function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement(h.Row,null,c.default.createElement(h.Col,{md:8,mdOffset:2},c.default.createElement("div",{id:"notifications"}),c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Add New User"),c.default.createElement("hr",null),c.default.createElement(d.default,{redirectTo:"created"}))))}}]),t}(u.Component),[p.ROLES.REGISTRAR,p.ROLES.ADMIN,p.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(16)),f=a(n(14)),p=a(n(296)),h=n(6),m=a(n(11)),v=function(e){function t(){var e;(0,o.default)(this,t);for(var n=arguments.length,a=Array(n),l=0;l<n;l++)a[l]=arguments[l];var s=(0,i.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a)));return s.state={user:{}},s.save=s.save.bind(s),s}return(0,s.default)(t,e),(0,l.default)(t,[{key:"validate",value:function(e){var t=d.default.getIfExists,n=[],a={};for(var r in a){var o=!0,l=r.split("|");for(var i in l)if(t(e,l[i],null)){o=!1;break}o&&n.push(a[r]+" should not be empty")}return e.userPassword&&e.userPassword!=e.userPasswordConfirm&&n.push("Passwords should match"),n.forEach(function(e){return m.default.error(e)}),0===n.length}},{key:"save",value:function(e){var t=this;e.preventDefault();var n=this.state.user,a=this.props,r=a.save,o=a.redirectTo,l=this.context.router;if(this.validate(n)){var i=d.default.getIfExists;n.userFullname=i(n,"profile.profileForname","")+" "+i(n,"profile.profileSurname",""),r(n,function(e){t.setState({user:{}}),o&&o.length>0?"created"==o?l.push("/users/"+e.id):l.push(o):l.push("/registration-success")})}}},{key:"render",value:function(){var e=this,t=this.state.user;return c.default.createElement("div",null,c.default.createElement("form",{id:"userCreateForm",action:"none",onSubmit:this.save},c.default.createElement(p.default,{user:t,onChange:function(t){return e.setState({user:t})},colWidth:6,colOffset:0,excludePasswords:!0}),c.default.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px"}},c.default.createElement(h.Button,{style:{textTransform:"uppercase",width:"33%"},bsStyle:"success",type:"submit"},"Submit"))))}}]),t}(u.Component);v.contextTypes={router:u.PropTypes.object.isRequired},t.default=(0,f.default)(v,{save:{type:"post",url:"/api/users"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=a(n(295)),p=a(n(14)),h=n(6),m=n(12),v=a(n(77)),y=a(n(1295)),g=a(n(11)),E=a(n(28)),b=n(9),_=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.state={teacherId:-1,paymentDate:v.default.extractValues(new Date).toString("-"),teacherGender:"all",selectedTabKey:0,useDateFilter:!1,showEditPayment:!1,teachers:e.data.rows},a.deletePayment=a.deletePayment.bind(a),a.onChange=a.onChange.bind(a),a.onPaymentsChange=a.onPaymentsChange.bind(a),a.onPaymentAdd=a.onPaymentAdd.bind(a),a.onPaymentUpdate=a.onPaymentUpdate.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onChange",value:function(e){var t=e.target,n=t.type,a=t.name,o=t.value,l=t.checked;"checkbox"!=n?this.setState((0,r.default)({},a,o)):this.setState((0,r.default)({},a,l))}},{key:"onPaymentAdd",value:function(e){for(var t=this.state.teachers,n=0;n<t.length;n++)if(t[n].id==e.teacherId){t[n].teacherPayments.push(e);break}}},{key:"onPaymentUpdate",value:function(e){this.deletePayment(e),this.onPaymentAdd(e)}},{key:"deletePayment",value:function(e){for(var t=this.state.teachers,n=0;n<t.length;n++)if(t[n].teacherPayments){for(var a=!1,r=0;r<t[n].teacherPayments.length;r++)if(t[n].teacherPayments[r].id==e.id){t[n].teacherPayments.splice(r,1),a=!0;break}if(a)break}this.setState({teachers:t})}},{key:"onPaymentsChange",value:function(e){var t=this;if(e){var n=this.props.execute,a=(this.state.teachers,[]);e.forEach(function(e){e.isDeleted&&(t.deletePayment(e),a.push(e.id))}),a.length>0&&n("deletePayments",{ids:a},function(){return g.default.success("Deleted successfully")},function(e){return g.default.error("Deletion failed")})}}},{key:"componentDidMount",value:function(){var e=this;$(function(){$(".datepicker").datepicker({dateFormat:"dd-mm-yy",onSelect:function(t,n){n.inline=!1;var a=t.split("-"),o=[a[2],a[1],a[0]].join("-"),l=$(this).attr("name");e.setState((0,r.default)({},l,o))}})})}},{key:"renderFilters",value:function(){var e=this.state,t=e.teachers,n=e.teacherId,a=e.teacherGender,r=e.paymentDate,o=e.useDateFilter;return d.default.createElement(h.Row,{style:{marginTop:"30px",marginBottom:"30px"}},d.default.createElement(m.FormField,{width:4},d.default.createElement("select",{className:"form-control",name:"teacherId",onChange:this.onChange,value:n},d.default.createElement("option",{value:"-1"},"All teachers"),t.map(function(e,t){return d.default.createElement("option",{value:e.id,key:t},e.userFullname)}))),-1==n?d.default.createElement(m.FormField,{width:4},d.default.createElement("select",{className:"form-control",name:"teacherGender",onChange:this.onChange,value:a},d.default.createElement("option",{value:"all"},"All genders"),d.default.createElement("option",{value:"male"},"Male"),d.default.createElement("option",{value:"female"},"Female"))):d.default.createElement("div",null),d.default.createElement(h.Col,{md:4,style:{marginBottom:15}},d.default.createElement("input",{className:"form-control datepicker",name:"paymentDate",value:r,onChange:this.onChange})),d.default.createElement(h.Col,{md:2,mdOffset:10,style:{marginTop:"7px"}},d.default.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:15}},d.default.createElement("input",{name:"useDateFilter",type:"checkbox",checked:o,onChange:this.onChange,style:{alignSelf:"center",marginTop:"0"}}),d.default.createElement("span",{style:{marginLeft:"5px",alignSelf:"center"}},"Use date filter"))))}},{key:"renderPayments",value:function(){for(var e=this,t=this.state,n=t.teacherId,a=t.teacherGender,r=t.paymentDate,o=t.useDateFilter,l=t.teachers,i={data:[],push:function(e,t){var n=this;t&&t.forEach(function(t,a){o&&t.payDate!=r||(t.teacherName=e,n.data.push(t))})}},s=0;s<l.length;s++)if(-1!=n){if(l[s].id==n){i.push(l[s].userFullname,l[s].teacherPayments);break}}else a!=l[s].profile.profileGender&&"all"!=a||i.push(l[s].userFullname,l[s].teacherPayments);return d.default.createElement("div",{style:{marginTop:"15px"}},d.default.createElement(f.default,{editBtn:!0,displayNames:!0,payments:i.data,onAdd:function(){return e.setState({selectedPayment:null,showEditPayment:!0})},onChange:this.onPaymentsChange,onEdit:function(t){return e.setState({selectedPayment:t,showEditPayment:!0})}}))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.selectedTabKey,t.showEditPayment),a=t.teachers,r=t.selectedPayment;return d.default.createElement("div",null,d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Filter"),d.default.createElement("hr",null),this.renderFilters()),d.default.createElement("div",{className:"content-block"},d.default.createElement("h2",{className:"block-heading"},"Payments"),d.default.createElement("hr",null),this.renderPayments(),d.default.createElement(y.default,{payment:r,teachers:a,show:n,onAdd:this.onPaymentAdd,onUpdate:this.onPaymentUpdate,onClose:function(){return e.setState({showEditPayment:!1})}})))}}]),t}(c.Component);t.default=(0,E.default)((0,p.default)(_,{load:{type:"get",url:"/api/users/teachers",data:{fields:["id","profile.profileGender","teacherPayments","userFullname"]}},deletePayments:{type:"delete",url:"/api/teacher-payments"}}),[b.ROLES.ADMIN,b.ROLES.SUPER_ADMIN])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(6),p=n(12),h=a(n(77)),m=a(n(14)),v=a(n(11)),y=function(e){function t(e,n){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return a.defaultState={id:null,teacherId:-1,payName:"",payDate:h.default.extractValues(new Date).toString("-"),paidAmount:0,workedHours:0,paidBy:"",submitted:!1},a.state=a.defaultState,a.close=a.close.bind(a),a.add=a.add.bind(a),a.update=a.update.bind(a),a.onChange=a.onChange.bind(a),a}return(0,u.default)(t,e),(0,i.default)(t,[{key:"onChange",value:function(e){var t=e.target,n=t.name,a=t.value,o=t.type,l=t.checked;"checkbox"!=o?this.setState((0,r.default)({},n,a)):this.setState((0,r.default)({},n,l))}},{key:"close",value:function(){this.setState(this.defaultState),(0,this.props.onClose)()}},{key:"getInput",value:function(){var e=this.state;return{teacherId:e.teacherId,payName:e.payName,payDate:e.payDate,paidAmount:e.paidAmount,workedHours:e.workedHours,paidBy:e.paidBy,submitted:e.submitted}}},{key:"add",value:function(){var e=this,t=this.props,n=t.save,a=t.onAdd;n({data:this.getInput()},function(t){a(t),e.close()})}},{key:"update",value:function(){var e=this,t=this.props.onUpdate,n=this.state.id;n&&$.ajax({type:"put",url:"/api/teacher-payments/"+n,data:this.getInput(),success:function(a){v.default.success("Updated"),a.id=n,t(a),e.close()},error:function(e){v.default.error("Update failed")}})}},{key:"loadPayment",value:function(e){var t=e.payment;t?(console.log("loading payment",t),this.setState(t)):this.setState(this.defaultState)}},{key:"componentWillMount",value:function(){this.loadPayment(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){this.loadPayment(e)}},{key:"componentDidMount",value:function(){var e=this;$(function(){$(".datepicker").datepicker({dateFormat:"dd-mm-yy",onSelect:function(t,n){n.inline=!1;var a=t.split("-"),o=[a[2],a[1],a[0]].join("-"),l=$(this).attr("name");e.setState((0,r.default)({},l,o))}})})}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.teachers,a=this.state,r=a.id,o=a.teacherId,l=a.payName,i=a.payDate,s=a.paidAmount,u=a.workedHours,c=a.paidBy,h=a.submitted;return d.default.createElement(f.Modal,{show:t,onHide:this.close},d.default.createElement(f.Modal.Dialog,null,d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement("p",{style:{textAlign:"center",fontSize:"14pt"}},"Add teacher payment")),d.default.createElement(f.Modal.Body,null,d.default.createElement(p.FormField,{width:8,offset:2,label:"Teacher"},d.default.createElement("select",{onChange:this.onChange,name:"teacherId",className:"form-control",value:o},d.default.createElement("option",{value:"-1"},"-"),n.map(function(e,t){return d.default.createElement("option",{key:t,value:e.id},e.userFullname)}))),d.default.createElement(p.FormField,{width:8,offset:2,label:"Pay name"},d.default.createElement("input",{name:"payName",type:"text",className:"form-control",value:l,onChange:this.onChange})),d.default.createElement(p.FormField,{width:8,offset:2,label:"Paid by"},d.default.createElement("input",{name:"paidBy",type:"text",className:"form-control",value:c,onChange:this.onChange})),d.default.createElement(p.FormField,{width:8,offset:2,label:"Pay date"},d.default.createElement("input",{name:"payDate",className:"form-control datepicker",value:i,onChange:this.onChange})),d.default.createElement(p.FormField,{width:8,offset:2,label:"Hours"},d.default.createElement("input",{name:"workedHours",type:"text",className:"form-control",value:u,onChange:this.onChange})),d.default.createElement(p.FormField,{width:8,offset:2,label:"Amount Paid"},d.default.createElement("input",{name:"paidAmount",type:"text",className:"form-control",value:s,onChange:this.onChange})),d.default.createElement(p.FormField,{width:8,offset:2,label:"Submitted"},d.default.createElement("input",{style:{marginLeft:"10px"},name:"submitted",type:"checkbox",checked:h,onChange:this.onChange}))),d.default.createElement(f.Modal.Footer,null,d.default.createElement(f.Button,{onClick:this.close},"Cancel"),r?d.default.createElement(f.Button,{onClick:this.update,style:{marginLeft:"15px"}},"Save"):d.default.createElement(f.Button,{onClick:this.add,style:{marginLeft:"15px"}},"Add"))))}}]),t}(c.Component);y.propTypes={payment:c.PropTypes.object,teachers:c.PropTypes.array,onAdd:c.PropTypes.func.isRequired,onUpdate:c.PropTypes.func.isRequired,onClose:c.PropTypes.func.isRequired,show:c.PropTypes.bool},t.default=(0,m.default)(y,{save:{type:"post",url:"/api/teacher-payments"}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(0,a(n(14)).default)(function(e){var t=e.data;return c.default.createElement("div",{style:{margin:"8px"},dangerouslySetInnerHTML:{__html:t}})}),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params,t=(e.role,e.type),n=this.props.params.filters;return n||(n=""),c.default.createElement("div",null,c.default.createElement(d,{ajaxOperations:{load:{type:"get",url:"/api/transactions/print/"+t+"/filters/"+n}},logEnabled:!0}))}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=(0,a(n(14)).default)(function(e){var t=e.data;return c.default.createElement("div",{style:{margin:"8px"},dangerouslySetInnerHTML:{__html:t}})}),f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.params,t=e.type,n=e.filters;return c.default.createElement("div",null,c.default.createElement(d,{ajaxOperations:{load:{type:"get",url:"/api/students/print/debtors/"+t+"/"+n}},logEnabled:!0}))}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(6),f=a(n(11)),p=a(n(16)),h=a(n(15)),m=n(12),v=a(n(193)),y=(a(n(36)),a(n(137))),g=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={user:{},username:localStorage.getItem("username"),usernameSelected:null!==localStorage.getItem("username"),hearPlaces:[]},a.onChange=a.onChange.bind(a),a.register=a.register.bind(a),a.next=a.next.bind(a),a.save=a.save.bind(a),a.setPlaceHolder=a.setPlaceHolder.bind(a),a.removePlaceholder=a.removePlaceholder.bind(a),a.changeField=a.changeField.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.state.username&&this.changeField("userEmailAddress",this.state.username)}},{key:"componentDidMount",value:function(){m.DatePicker.init(this.changeField),this.loadHearPlaces()}},{key:"loadHearPlaces",value:function(){var e=this;$.ajax({type:"get",url:"/api/hear-places/list",success:function(t){e.setState({hearPlaces:t});var n=e.props.user;if(n&&n.hearPlaceId)for(var a in t)if(t[a].value==n.hearPlaceId){if(t[a].isVisible)break;$("#otherHearPlaceInput").slideToggle("fast"),$("#otherHearPlaceInput input").val(t[a].label),n.hearPlaceId=-1,e.changeField("hearPlaceId",-1);break}}})}},{key:"changeField",value:function(e,t,n){var a=this.state.user;n&&(t=n(t)),p.default.accessObjByPath(a,e,function(e){return t}),this.setState({user:a})}},{key:"onChange",value:function(e,t){var n=e.target,a=n.name,r=n.value;this.changeField(a,r,t)}},{key:"validate",value:function(){var e=this.state.user,t=function(t){return p.default.getIfExists(e,t,null)},n=!0;return n&=function(e){for(var n=!0,a=0;a<e.length;a++){var r=t(e[a][0]),o=e[a].length>1?e[a][1]:e[a][0];r||(f.default.error('"'+o+'" should not be empty'),n=!1)}return n}([["profile.profileGender","Gender"],["userPassword","Password"],["profile.profileForname","First Name"],["profile.profileSurname","Last Name"]]),n&=!e.userPassword||e.userPassword==e.userPasswordRepeat||(f.default.error("Passwords should match"),!1)}},{key:"save",value:function(){var e=this,t=this.state.user,n=p.default.getIfExists;t.userFullname=n(t,"profile.profileForname","")+" "+n(t,"profile.profileSurname",""),this.savePm&&this.savePm.cancel(),this.savePm=h.default.ajax({type:"post",url:"/api/users",data:t}),this.savePm.then(function(){e.setState({user:{}}),e.context.router.push("/registration-success")},function(e){f.default.error("Save failed"),console.error(e)})}},{key:"register",value:function(){this.validate()&&this.emailUnique(this.save)}},{key:"emailUnique",value:function(e){var t=this.state.user;$.ajax({type:"get",url:"/api/auth/check-username",data:{username:t.userEmailAddress,fields:["userEmailAddress"]},success:function(){return f.default.error("Email is already in use")},error:function(){e()}})}},{key:"next",value:function(){var e=this;this.usernameCheckPm&&this.usernameCheckPm.cancel();var t=this.state.username;this.usernameCheckPm=h.default.ajax({type:"get",url:"/api/auth/check-username",data:{username:t}}),this.usernameCheckPm.then(function(){localStorage.setItem("forgotEmail",t),e.context.router.push("/forgot-password")},function(n){e.changeField("userEmailAddress",t),e.setState({usernameSelected:!0})})}},{key:"removePlaceholder",value:function(e){$(e.target).attr("placeholder")==e.target.value&&(e.target.value="")}},{key:"setPlaceHolder",value:function(e){""==e.target.value&&(e.target.value=$(e.target).attr("placeholder"))}},{key:"nameFilter",value:function(e){return e&&0!==e.length?e[0].toUpperCase()+e.slice(1).toLowerCase():e}},{key:"renderForm",value:function(){var e=this,t=this.state,n=t.user,a=t.hearPlaces,r=p.default.getIfExists;return c.default.createElement("div",null,c.default.createElement(d.Row,{style:{marginBottom:10}},c.default.createElement(d.Col,{md:8},c.default.createElement(d.Row,{className:"row-10"},c.default.createElement(d.Col,{xs:6,style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileForname",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:function(t){return e.onChange(t,e.nameFilter)},value:r(n,"profile.profileForname","First Name"),placeholder:"First Name",style:{color:r(n,"profile.profileForname","")?"black":"#A8A8A8"}})),c.default.createElement(d.Col,{xs:6,style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileSurname",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:function(t){return e.onChange(t,e.nameFilter)},value:r(n,"profile.profileSurname","Last Name"),placeholder:"Last Name",style:{color:r(n,"profile.profileSurname","")?"black":"#A8A8A8"}}))),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"email",name:"userEmailAddress",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,onChange:this.onChange,value:r(n,"userEmailAddress","Email"),placeholder:"Email",style:{width:"100%",marginBottom:"10px",color:r(n,"userEmailAddress","")?"black":"#A8A8A8"}})),c.default.createElement(d.Row,{className:"row-10"},c.default.createElement(d.Col,{xs:6,style:{marginBottom:10}},c.default.createElement("select",{className:"form-control",name:"profile.profileGender",id:"profile.profileGender",value:r(n,"profile.profileGender",""),onChange:this.onChange},c.default.createElement("option",{value:""},"Select Gender"),c.default.createElement("option",{value:"male"},"Male"),c.default.createElement("option",{value:"female"},"Female"))),c.default.createElement(d.Col,{xs:6,style:{marginBottom:10}},c.default.createElement("input",{className:"form-control datepicker",name:"age",value:r(n,"age","Birth date"),onChange:this.onChange,onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,placeholder:"Birth date",style:{color:r(n,"age","")?"black":"#A8A8A8"}}))),c.default.createElement(d.Row,{className:"row-10"},c.default.createElement(d.Col,{xs:6,style:{marginBottom:10}},c.default.createElement("input",{className:"form-control",type:r(n,"userPassword","")?"password":"text",name:"userPassword",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,value:r(n,"userPassword","Password"),onChange:this.onChange,placeholder:"Password",style:{color:r(n,"userPassword","")?"black":"#A8A8A8"}})),c.default.createElement(d.Col,{xs:6,style:{marginBottom:10}},c.default.createElement("input",{className:"form-control",type:r(n,"userPasswordRepeat","")?"password":"text",name:"userPasswordRepeat",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,value:r(n,"userPasswordRepeat","Re-enter password"),onChange:this.onChange,placeholder:"Re-enter password",style:{color:r(n,"userPasswordRepeat","")?"black":"#A8A8A8"}}))),c.default.createElement(d.Row,{className:"row-10"},c.default.createElement(d.Col,{xs:6,style:{marginBottom:10}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileTelephone",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,value:r(n,"profile.profileTelephone","Telephone"),onChange:this.onChange,placeholder:"Telephone",style:{color:r(n,"profile.profileTelephone","")?"black":"#A8A8A8"}})),c.default.createElement(d.Col,{xs:6,style:{marginBottom:10}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileMobile",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,value:r(n,"profile.profileMobile","Mobile"),onChange:this.onChange,placeholder:"Mobile",style:{color:r(n,"profile.profileMobile","")?"black":"#A8A8A8"}}))),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement(v.default,{onSelect:function(t){e.changeField("profile.profileAddress",t.line1),e.changeField("profile.profileAddress2",t.line2),e.changeField("profile.profilePostcode",t.postcode),e.changeField("profile.city",t.town)}})),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileAddress",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,value:r(n,"profile.profileAddress","Building name/No"),onChange:this.onChange,placeholder:"Building name/No",style:{color:r(n,"profile.profileAddress","")?"black":"#A8A8A8"}})),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.profileAddress2",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,value:r(n,"profile.profileAddress2","Street Name"),onChange:this.onChange,placeholder:"Street Name",style:{color:r(n,"profile.profileAddress2","")?"black":"#A8A8A8"}})),c.default.createElement("div",{style:{marginBottom:"10px"}},c.default.createElement("input",{className:"form-control",type:"text",name:"profile.city",onFocus:this.removePlaceholder,onBlur:this.setPlaceHolder,value:r(n,"profile.city","City or town"),onChange:this.onChange,placeholder:"City or town",style:{color:r(n,"profile.city","")?"black":"#A8A8A8"}})),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:12,style:{marginBottom:10}},c.default.createElement(m.Select,{options:a?a.filter(function(e){return e.isVisible}):[],className:"form-control",name:"hearPlaceId",value:r(n,"hearPlaceId",""),onChange:function(t){var a=t.target.value;"-1"==r(n,"hearPlaceId","")!=("-1"==a)&&$("#otherHearPlaceInput").slideToggle("fast"),e.onChange(t)}},c.default.createElement("option",{value:""},"Where did you hear about us?")))),c.default.createElement(d.Row,{id:"otherHearPlaceInput",style:{display:"none"}},c.default.createElement(d.Col,{md:12},c.default.createElement("input",{type:"text",className:"form-control",name:"otherHearPlace",onChange:this.onChange})))),c.default.createElement(d.Col,{md:4},c.default.createElement("div",{style:{display:"none"}},c.default.createElement(y.default,{name:"closestBranches",value:n.closestBranches,listedOnly:!0,label:"Select Closest Branches",onChange:function(t){return e.onChange(t)}})))),c.default.createElement(d.Row,{style:{marginTop:10,marginBottom:10}},c.default.createElement(d.Col,{md:4,mdOffset:4},c.default.createElement(d.Button,{style:{textTransform:"uppercase",width:"100%"},bsStyle:"success",onClick:this.register},"Register"))))}},{key:"renderUsernameSelect",value:function(){var e=this,t=this.state.userName;return c.default.createElement("div",null,c.default.createElement(m.FormField,{width:12,label:"Username / Email"},c.default.createElement("input",{type:"text",className:"form-control",name:"userName",onChange:function(t){return e.setState({username:t.target.value})},value:t})),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:12},c.default.createElement(d.Button,{onClick:this.next,bsStyle:"primary",style:{marginRight:"15px"}},"Next"))))}},{key:"render",value:function(){var e=this.state.usernameSelected;return c.default.createElement("div",{style:{marginTop:"40px"}},c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:8,mdOffset:2,sm:8,smOffset:2},c.default.createElement("div",{id:"notifications"}),c.default.createElement("h2",null,"Registration"),e?this.renderForm():this.renderUsernameSelect())))}}]),t}(u.Component);t.default=g,g.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.params;e.method,e.invoice}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("h2",null,"Payment Success"),c.default.createElement("p",null,"You have completed the payment!"),c.default.createElement("p",null,"Classes will be added after a few minutes"))}}]),t}(u.Component);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("h2",null,"Payment Cancelled"),c.default.createElement("p",null,"You have cancelled the payment!"))}}]),t}(u.Component);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Complaints=void 0;var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(28)),f=n(9),p=n(6),h=a(n(99)),m=t.Complaints=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.tabRoutes={List:["/complaints","/complaints/list"],Add:"/complaints/add"},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"navigate",value:function(e){this.context.router.push(e)}},{key:"render",value:function(){var e=this,t=window.location.pathname,n=[];for(var a in this.tabRoutes)!function(a){var r=e.tabRoutes[a],o=!1;Array.isArray(r)||(r=[r]);for(var l in r)if(t===r[l]){o=!0;break}n.push(c.default.createElement(p.NavItem,{key:a,className:o?"active":"",onClick:function(){return e.navigate(r[0])}},a))}(a);return c.default.createElement("div",null,c.default.createElement("div",{className:"admin-nav-secondary"},c.default.createElement("div",{className:"container"},c.default.createElement(h.default,null,n))),this.props.children)}}]),t}(u.Component);m.contextTypes={router:u.PropTypes.object.isRequired},t.default=(0,d.default)(m,[f.ROLES.ADMIN,f.ROLES.SUPER_ADMIN,f.ROLES.REGISTRAR])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(162)),o=a(n(23)),l=a(n(59)),i=a(n(3)),s=a(n(1)),u=a(n(2)),c=a(n(4)),d=a(n(5)),f=n(0),p=a(f),h=(a(n(28)),n(9),a(n(15))),m=a(n(29)),v=a(n(60)),y=a(n(19)),g=n(6),E=n(12),b=a(n(11)),_=n(18),C=(a(n(36)),a(n(1303))),w=a(n(44)),k=a(n(1304)),S=a(n(132)),x=a(n(7)),T=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.state={isLoading:!1,totalCount:0,rows:null,stats:null,branches:[],priorities:[],fullDetails:null,showFullDetails:!1,showConfirmDelete:!1,complaintTypes:[],termOptions:[],filters:{beginDate:"",endDate:"",orderByDeadline:!1,isOpenComplaints:"yes",branchId:"",termId:"",handlerFullname:"",priority:"",complaintType:"",studentName:""},checkedRows:[]},a.state.appliedFilters=a.state.filters,a.applyFilter=S.default.debounce(a.applyFilter,1e3),a.currentPage=1,a.rowsPerPage=40,a.loadPromise=null,a.requestFields=["id","types","createdAt","text","handlerFullname","userFullname","actionTaken","actionDeadline","completionDate","users","priority","branchId","branchName"],a.createRow=a.createRow.bind(a),a.loadData=a.loadData.bind(a),a.loadComplaintTypes=a.loadComplaintTypes.bind(a),a.handleFilterChange=a.handleFilterChange.bind(a),a.deleteRows=a.deleteRows.bind(a),a.print=a.print.bind(a),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"createRow",value:function(e){var t=this,n=[],a=function(){var e=0;return function(t){return n.push(p.default.createElement("td",{key:e++},t))}}(),r=S.default.trunc(e.text.replace(/<[^>]*>/g,""),{length:200,separator:" "});a(p.default.createElement("div",{style:{position:"relative",paddingBottom:40}},p.default.createElement("div",{style:{textTransform:"capitalize"}},e.branchName),p.default.createElement("div",{className:"detail-text",style:{position:"absolute",left:0,bottom:0,fontSize:"10px",lineHeight:"12px",width:window.innerWidth<477?350:.7*this.refs.complaintTableWrapper.clientWidth,whiteSpace:"normal"}},r))),new Array("createdAt","actionDeadline","completionDate").forEach(function(t){e[t]&&e[t].length>0&&(e[t]=e[t].split(" ")[0])});var o=(0,x.default)(e.actionDeadline).diff(Date.now(),"days");return o=o>0?o:0,a(p.default.createElement("p",null,(0,x.default)(e.createdAt).fromNow()," / ",o," left")),a(p.default.createElement("ul",{style:{paddingLeft:"0",listStyle:"none"}},e.users.map(function(e){return p.default.createElement("li",null,p.default.createElement(_.Link,{to:"/users/"+e.id},e.userFullname))}))),a(p.default.createElement("p",{style:{wordBreak:"break-all"}},e.handlerFullname)),a(p.default.createElement("div",{style:{wordBreak:"break-all",textTransform:"capitalize"}},p.default.createElement("p",null,e.priority),p.default.createElement("div",{className:"action-button-wrapper",style:{marginTop:5,marginLeft:-5,marginRight:-5}},p.default.createElement(_.Link,{to:"/complaints/print/"+(0,l.default)(this.state.filters),target:"_blank",style:{color:"inherit",padding:"0px 5px",borderRight:"1px solid #666666"}},"Print"),p.default.createElement("a",{href:"javascript:void(0)",style:{color:"inherit",padding:"0px 5px"},onClick:function(){return t.context.router.push("/complaints/"+e.id)}},"Edit")))),n}},{key:"loadData",value:function(){var e=this;this.setState({isLoading:!0});var t={page:this.currentPage,rowsPerPage:this.rowsPerPage,fields:this.requestFields,filters:this.state.appliedFilters};this.loadPromise=h.default.ajax({type:"get",url:"/api/complaints",data:t}),this.loadPromise.promise.then(function(t){e.setState({isLoading:!1,rows:e.manageRowsData(t.rows),totalCount:t.info.totalCount,stats:t.stats})},function(t){e.setState({isLoading:!1}),console.log(t.responseText)})}},{key:"loadBranchesData",value:function(){var e=this;return h.default.ajax({type:"get",url:"/api/branches-associated/list"}).promise.then(function(t){return e.setState({branches:t}),t})}},{key:"loadTermsData",value:function(){var e=this;return h.default.ajax({type:"get",url:"/api/terms/list"}).promise.then(function(t){return e.setState({termOptions:t}),t})}},{key:"loadPrioritiesData",value:function(){var e=this;return h.default.ajax({type:"get",url:"/api/complaints/priorities"}).promise.then(function(t){return e.setState({priorities:t}),t})}},{key:"loadActiveTermId",value:function(){var e=this;return h.default.ajax({type:"get",url:"/api/terms/active"}).promise.then(function(t){var n=e.state.filters;return n.termId=t.id.toString(10),e.setState({filters:n}),t})}},{key:"manageRowsData",value:function(e){return e.map(function(e){return(0,o.default)({},e,{branchName:e.branchName?e.branchName:"-"})})}},{key:"loadComplaintTypes",value:function(){var e=this;this.complaintTypesLoader||(this.complaintTypesLoader=h.default.ajax({type:"get",url:"/api/complaints/types"}),this.complaintTypesLoader.then(function(t){e.setState({complaintTypes:t}),e.complaintTypesLoader=null},function(t){b.default.error(t.responseText),console.error(t),e.complaintTypesLoader=null}))}},{key:"handleFilterChange",value:function(){var e=this.state.filters,t=void 0,n=void 0;switch(arguments.length){case 1:var a=arguments[0].target;t=a.name,n="checkbox"==$(a).attr("type")?a.checked:a.value;break;case 2:t=arguments[0],n=arguments[1];break;default:return void console.error("Error. expected 1 or 2 args in handleFilterChange")}e[t]=n,this.setState({filters:e}),this.applyFilter()}},{key:"applyFilter",value:function(){this.setState({appliedFilters:this.state.filters},this.loadData)}},{key:"print",value:function(){this.context.router.push("/complaints/print/"+(0,l.default)(this.state.filters))}},{key:"deleteRows",value:function(e,t){var n=this;if(e){var a=this.state.checkedRows;$.ajax({type:"delete",url:"/api/complaints",data:{ids:a,reason:t},success:function(){b.default.success("Deleted successfully"),n.setState({checkedRows:[]}),n.loadData()},error:function(e){b.default.error("Failed to delete"),console.error(e.responseText),n.loadData()}})}else this.setState({showConfirmDelete:!0})}},{key:"updateDatePickers",value:function(){E.DatePicker.init(this.handleFilterChange)}},{key:"componentDidUpdate",value:function(){this.updateDatePickers()}},{key:"componentDidMount",value:function(){var e=this;this.loadComplaintTypes(),r.default.all([this.loadBranchesData(),this.loadTermsData(),this.loadPrioritiesData(),this.loadActiveTermId()]).then(function(){e.loadData()}),this.updateDatePickers()}},{key:"renderFilters",value:function(){var e=this.state,t=e.filters,n=e.branches,a=e.termOptions,r=e.priorities,o=e.complaintTypes;return p.default.createElement("div",{style:{marginBottom:"20px"}},p.default.createElement(g.Row,null,p.default.createElement(g.Col,{md:3,style:{marginBottom:"10px"}},p.default.createElement(C.default,{defaultValue:"",name:"branchId",value:t.branchId,label:"BRANCH",onChange:this.handleFilterChange,hideLabelOnOptionChosen:!0},p.default.createElement("option",{value:""},"All"),n.map(function(e,t){return p.default.createElement("option",{value:e.value,key:t},e.label)}))),p.default.createElement(g.Col,{md:3,style:{marginBottom:"10px"}},p.default.createElement(C.default,{defaultValue:"",name:"complaintType",value:t.complaintType,label:"COMPLAINT TYPE",onChange:this.handleFilterChange,hideLabelOnOptionChosen:!0},p.default.createElement("option",{value:""},"All"),o.map(function(e,t){return p.default.createElement("option",{value:e.value,key:t},e.label)}))),p.default.createElement(g.Col,{md:3,style:{marginBottom:"10px"}},p.default.createElement(C.default,{defaultValue:"",name:"termId",value:t.termId,onChange:this.handleFilterChange,hideLabelOnOptionChosen:!0},p.default.createElement("option",{value:""},"All Term"),a.map(function(e,t){return p.default.createElement("option",{value:e.value,key:t},e.label)})))),p.default.createElement(g.Row,null,p.default.createElement(g.Col,{md:2,style:{marginBottom:"10px"}},p.default.createElement(C.default,{name:"isOpenComplaints",value:t.isOpenComplaints,onChange:this.handleFilterChange,hideLabelOnOptionChosen:!0},p.default.createElement("option",{value:"yes"},"Open"),p.default.createElement("option",{value:"no"},"Closed"))),p.default.createElement(g.Col,{md:2,style:{marginBottom:"10px"}},p.default.createElement("input",{className:"form-control datepicker",placeholder:"begin date",type:"text",id:"beginDate",name:"beginDate",value:t.beginDate,onChange:this.handleFilterChange})),p.default.createElement(g.Col,{md:2,style:{marginBottom:"10px"}},p.default.createElement("input",{className:"form-control datepicker",placeholder:"end date",type:"text",id:"endDate",name:"endDate",value:t.endDate,onChange:this.handleFilterChange})),p.default.createElement(g.Col,{md:3,style:{marginBottom:"10px"}},p.default.createElement(C.default,{defaultValue:"",name:"priority",value:t.priority,label:"PRIORITY",onChange:this.handleFilterChange,hideLabelOnOptionChosen:!0},p.default.createElement("option",{value:""},"All"),r.map(function(e,t){return p.default.createElement("option",{value:e.value,key:t},e.label)}))),p.default.createElement(g.Col,{md:3,style:{marginBottom:"10px"}},p.default.createElement("input",{type:"text",name:"studentName",placeholder:"NAME OF COMPLAINANT",value:t.studentName,onChange:this.handleFilterChange,className:"form-control"}))))}},{key:"renderTable",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.rows,r=t.showConfirmDelete;return n?p.default.createElement(y.default,null):a&&0!=a.length?p.default.createElement("div",null,p.default.createElement(m.default,{className:"table table-complaints",data:a,headers:["Branch","Created/Remaining","Student","Teacher","Urgency"],createRow:this.createRow,onCheckedRowsChange:function(t){return e.setState({checkedRows:t})}}),p.default.createElement(w.default,{show:r,onConfirm:function(t){return e.deleteRows(!0,t)},onClose:function(){return e.setState({showConfirmDelete:!1})}})):p.default.createElement("p",null,"No data")}},{key:"render",value:function(){var e=this,t=this.state,n=t.totalCount,a=(t.branches,t.complaintTypes,t.stats);return p.default.createElement("div",{className:"content-block",ref:"complaintTableWrapper"},p.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"}},p.default.createElement("h2",{className:"block-heading"},"Complaints List"),p.default.createElement(_.Link,{to:"/complaints/add",className:"custom btn-gray"},"Add Complaint")),p.default.createElement("hr",null),this.renderFilters(),this.renderTable(),p.default.createElement(v.default,{currentPage:this.currentPage,totalCount:n,rowsPerPage:this.rowsPerPage,onPageChange:function(t){e.currentPage=t,e.loadData()}}),p.default.createElement(k.default,{stats:a}))}}]),t}(f.Component);t.default=T,T.contextTypes={router:f.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(17)),o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=a(n(0)),d=function(e){function t(e){(0,l.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={value:"",isOpen:!1,dictionary:{}},n.dropdownCloseHandler=n.dropdownCloseHandler.bind(n),n.closeDropdownEvent=n.dropdownCloseHandler,n.toggleSelect=n.toggleSelect.bind(n),n}return(0,u.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoClose,n=e.defaultValue,a=e.children;this.initializeDictionary(n,a),t&&window.addEventListener("click",this.closeDropdownEvent)}},{key:"componentWillReceiveProps",value:function(e){var t=e.defaultValue;this.props.value===e.value&&e.defaultValue===e.value||(t=e.value),this.initializeDictionary(t,e.children)}},{key:"componentWillUnmount",value:function(){this.props.autoClose&&window.removeEventListener("click",this.closeDropdownEvent)}},{key:"initializeDictionary",value:function(e,t){var n={};c.default.Children.forEach(t,function(e){return n[e.props.value]=e.props.children}),this.setState({dictionary:n,value:e})}},{key:"dropdownCloseHandler",value:function(){this.state.isOpen&&(console.debug("CLOSE DROPDOWN"),this.setState({isOpen:!1}))}},{key:"makeOptionClickHandler",value:function(e,t){var n=this,a=this.props.name;return function(t){t.preventDefault(),t.stopPropagation(),n.setState({value:e,isOpen:!1}),n.props.onChange({target:(0,r.default)({name:a,value:e},"value",e)})}}},{key:"toggleSelect",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({isOpen:!this.state.isOpen})}},{key:"manageSelectOptions",value:function(){var e=this;return c.default.Children.map(this.props.children,function(t){return t.props.value===e.state.value?null:c.default.createElement("li",{onClick:e.makeOptionClickHandler(t.props.value,t.props),className:t.props.className},t.props.children)})}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.name,a=e.defaultValue,r=e.children,o=e.className,l=e.dropdownStyle,i=e.onChange,s=e.hideLabelOnOptionChosen,u=this.state,d=u.isOpen,f=u.dictionary,p=u.value,h=this.manageSelectOptions(),m="select-field"+(o?" "+o:"")+(d?" open":""),v=null;return s&&p!==a||(v=c.default.createElement("span",{className:"select-label"},t)),c.default.createElement("div",{className:m},c.default.createElement("select",{name:n,value:p,onChange:i},r),c.default.createElement("div",{className:"slide-mask"},c.default.createElement("div",{className:"active-option js-prevent-close-dropdown",onClick:this.toggleSelect},v," ",f[p]),c.default.createElement("ul",{className:"select-options",style:l},h)))}}]),t}(c.default.Component);d.propTypes={children:c.default.PropTypes.any,name:c.default.PropTypes.string,value:c.default.PropTypes.string,onChange:c.default.PropTypes.func,defaultValue:c.default.PropTypes.string,label:c.default.PropTypes.string,className:c.default.PropTypes.string,dropdownStyle:c.default.PropTypes.object,autoClose:c.default.PropTypes.bool,hideLabelOnOptionChosen:c.default.PropTypes.bool},d.defaultProps={autoClose:!0,hideLabelOnOptionChosen:!1},t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=a(n(1305)),d={display:"flex",justifyContent:"space-between",alignItems:"flex-end",paddingRight:50},f={color:"inherit"},p=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.branches,n=e.complaintTypes,a=e.teachers,r=e.months,o=e.stats;return u.default.createElement("div",null,u.default.createElement("div",{style:d},u.default.createElement("h2",{className:"block-heading",style:f},"Stats"),u.default.createElement("p",{style:{cursor:"pointer"},onClick:this.printHandler},"Print")),u.default.createElement("hr",null),u.default.createElement("div",{ref:"statContent"},u.default.createElement(c.default,{id:"branch",title:"Branch",info:"Branch Statistics",data:o&&o.branches?o.branches:t}),u.default.createElement(c.default,{id:"complaint",title:"Complaint Types",info:"Complaint Type Statistics",data:o&&o.complaintTypes?o.complaintTypes:n}),u.default.createElement(c.default,{id:"teacher",title:"Teacher",info:"Teacher",data:o&&o.teachers?o.teachers:a}),u.default.createElement(c.default,{id:"month",title:"Month",info:"Month",data:o&&o.months?o.months:r})))}},{key:"printHandler",get:function(){var e=this;return function(){var t=window.open("","PRINT","height=400,width=600");return t.document.write("<html><head><title>"+document.title+"</title>"),t.document.write("</head><body >"),t.document.write("<h1>"+document.title+"</h1>"),t.document.write(e.refs.statContent.innerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print(),t.close(),!0}}}]),t}(u.default.Component);t.default=p,p.propTypes={branches:u.default.PropTypes.array,complaintTypes:u.default.PropTypes.array,teachers:u.default.PropTypes.array},p.defaultProps={branches:[],complaintTypes:[],teachers:[],months:[]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=a(n(0)),c=a(n(132)),d=a(n(1306)),f=a(n(1307)),p=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.data;this.pieChart=new d.default("#"+t+"PieChartComplaint",n,{style:{width:280,height:280},onMount:function(e){e.labelType("percent")}}),this.barChart=new f.default("#"+t+"BarChartComplaint",[{key:"Complaint",values:n}],{style:{width:this.refs.barChart.clientWidth-40,height:300,margin:{top:10,right:0,bottom:100,left:40}}})}},{key:"componentWillReceiveProps",value:function(e){c.default.isEqual(this.props.data,e.data)||(this.pieChart.update(e.data),this.barChart.update([{key:"Complaint",values:e.data}]))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.title,a=e.data,r=e.info;return u.default.createElement("div",{className:"row",style:{marginBottom:15}},u.default.createElement("div",{className:"col-md-3"},u.default.createElement("h4",null,n),u.default.createElement("ul",{className:"list-unstyled"},h(a)),r&&u.default.createElement("p",null,r)),u.default.createElement("div",{className:"col-md-9"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-5"},u.default.createElement("div",{id:t+"PieChartComplaint",className:"pie-chart"})),u.default.createElement("div",{className:"col-sm-7"},u.default.createElement("div",{id:t+"BarChartComplaint",className:"bar-chart",ref:"barChart",style:{marginTop:50}})))))}}]),t}(u.default.Component),h=function(e){return e.map(function(e,t){return u.default.createElement("li",{key:t},u.default.createElement("strong",null,e.label)," ",e.value)})};p.propTypes={id:u.default.PropTypes.string.isRequired,title:u.default.PropTypes.string.isRequired,info:u.default.PropTypes.string.isRequired,data:u.default.PropTypes.arrayOf(u.default.PropTypes.object)},p.defaultProps={data:[]},t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(1)),l=a(n(2)),i=window,s=i.d3,u=i.nv,c={animationDuration:350,onMount:function(e){},style:{}},d=function(){function e(t,n,a){var l=this;(0,o.default)(this,e),this.settings=(0,r.default)({},c,a),this.selector=t,this.data=n,this.chart=u.models.pieChart(),this.chart.x(function(e){return e.label}).y(function(e){return e.value}).width(this.settings.style.width).height(this.settings.style.height).valueFormat(s.format(".0")).showLegend(!1).showLabels(!0).labelType("value"),this.settings.onMount(this.chart),this.initialized=!1,u.utils.windowResize(this.chart.update),u.addGraph(function(){l.loadGraph()})}return(0,l.default)(e,[{key:"loadGraph",value:function(){var e=this.selector,t=this.data,n=this.chart,a=this.animationDuration;return this.svg=s.select(e).append("svg").datum(t),this.svg.attr("width",this.settings.style.width),this.svg.attr("height",this.settings.style.height),this.svg.attr("class","pie-chart"),this.svg.transition().duration(a).call(n),this.initialized=!0,n}},{key:"update",value:function(e){var t=this.svg,n=this.chart,a=this.animationDuration;e&&(this.data=e&&e),this.initialized&&t&&(t.datum(this.data).transition().duration(a).call(n),u.utils.windowResize(n.update))}}]),e}();t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(23)),o=a(n(1)),l=a(n(2)),i=window,s=i.d3,u=i.nv,c={animationDuration:350,onMount:function(e){},style:{width:400,height:200,margin:{top:10,right:0,bottom:50,left:10}}},d=function(){function e(t,n,a){var l=this;(0,o.default)(this,e),this.settings=(0,r.default)({},c,a),this.selector=t,this.data=n,this.chart=u.models.discreteBarChart(),this.chart.x(function(e){return e.label}).y(function(e){return e.value}),this.chart.width(this.settings.style.width).height(this.settings.style.height).margin(this.settings.style.margin),this.chart.staggerLabels(!0),this.chart.showValues(!1),this.settings.onMount(this.chart),this.initialized=!1,u.utils.windowResize(this.chart.update),u.addGraph(function(){l.loadGraph()})}return(0,l.default)(e,[{key:"loadGraph",value:function(){var e=this.selector,t=this.data,n=this.chart;this.svg=s.select(e).append("svg").datum(t),this.svg.attr("width",this.settings.style.width),this.svg.attr("height",this.settings.style.height),this.svg.attr("class","bar-chart"),this.svg.transition().duration(this.settings.animationDuration).call(n),this.initialized=!0,this.rotateLabel()}},{key:"rotateLabel",value:function(){var e=this.svg.selectAll(".nv-x.nv-axis > g").selectAll("g").selectAll("text");e.attr("transform","translate(-8, 10) scale(0.8) rotate(-40)"),e.style("text-anchor","end")}},{key:"update",value:function(e){var t=this.svg,n=this.chart,a=this.settings;e&&(this.data=e&&e),this.initialized&&t&&(t.datum(this.data).transition().duration(a.animationDuration).call(n),u.utils.windowResize(n.update),this.rotateLabel())}}]),e}();t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=n(18),f=n(6),p=n(12),h=a(n(19)),m=a(n(1309)),v=a(n(15)),y=(a(n(31)),a(n(11))),g=a(n(36)),E=a(n(43)),b=a(n(44)),_=a(n(1310)),C=function(e){var t=e.children;return c.default.createElement("p",{className:"detail-field-label"},t)},w=(function(e){function t(e){(0,o.default)(this,t);var n=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={editorState:EditorState.createEmpty()},n.onChange=function(e){return n.setState({editorState:e})},n}(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.state.editorState;return c.default.createElement(Editor,{editorState:e,onChange:this.onChange})}}])}(u.Component),{buttonAfter:{marginLeft:15},button:{marginBottom:10}});window.innerWidth<768&&(w={buttonAfter:{width:"100%"},button:{width:"100%"}});var k=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.clearListeners=[],a.state={complaintTypes:[],isLoading:!1,showConfirmDelete:!1,initComplaint:{createdAt:(new Date).toJSON().slice(0,10),types:[],text:"",handlerFullname:"",actionTaken:"",actionDeadline:"",completionDate:"",users:[],branchId:"null",termId:"null",name:"",recordedBy:"",priority:"not urgent",suggestions:"",otherComments:"",dateOfAllegedIncident:""}},a.state.complaint=a.state.initComplaint,a.updateComplaint=a.updateComplaint.bind(a),a.onChange=a.onChange.bind(a),a.onMultiCheckboxChange=a.onMultiCheckboxChange.bind(a),a.submit=a.submit.bind(a),a.delete=a.delete.bind(a),a.updateDatePickers=a.updateDatePickers.bind(a),a.addClearListener=a.addClearListener.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"updateComplaint",value:function(e,t){var n=this.state.complaint;n[e]=t,this.setState({complaint:n})}},{key:"addClearListener",value:function(e){this.clearListeners.push(e)}},{key:"onChange",value:function(e){var t=e.target;this.updateComplaint(t.name,t.value)}},{key:"onMultiCheckboxChange",value:function(e){var t=e.target,n=this.state.complaint[t.name],a=parseInt(t.value),r=n.indexOf(a);-1===r?n.push(a):n.splice(r,1),this.updateComplaint(t.name,n)}},{key:"loadComplaintTypes",value:function(){var e=this;this.complaintTypesLoader||(this.complaintTypesLoader=v.default.ajax({type:"get",url:"/api/complaints/types"}),this.complaintTypesLoader.then(function(t){e.setState({complaintTypes:t}),e.complaintTypesLoader=null},function(t){y.default.error(t.responseText),console.error(t),e.complaintTypesLoader=null,e.setState({isLoading:!1})}))}},{key:"validate",value:function(e){return[{name:"createdAt",label:"Date of complaint"},{name:"text",label:"Complaint"},{name:"name",label:"Name of complainant"},{name:"recordedBy",label:"Complaint recorded by"},{name:"handlerFullname",label:"Person dealing with complaint"}].filter(function(t){return!e[t.name]}).map(function(e){return e.label+" must not be empty"})}},{key:"submit",value:function(){var e=this;if(!this.submitPromise){var t=this.validate(this.state.complaint);if(0==t.length){var n=this.props.params.id,a=this.state.complaint;a.users&&0==a.users.length&&(a.users=[""]),this.submitPromise=n?v.default.ajax({type:"put",url:"/api/complaints/"+n,data:a}):v.default.ajax({type:"post",url:"/api/complaints",data:a}),this.submitPromise.then(function(){y.default.success("Complaint "+(n?"updated":"added")),e.submitPromise=null,e.context.router.push("/complaints/list")},function(t){y.default.error("Failed to "+(n?"update":"add")+" complaint"),console.error(t.responseText),e.submitPromise=null})}else t.forEach(function(e){return y.default.error(e)})}}},{key:"delete",value:function(e,t){var n=this;e?$.ajax({type:"delete",url:"/api/complaints",data:{ids:[this.props.params.id],reason:t},success:function(){y.default.success("Deleted successfully"),n.context.router.push("/complaints/list")},error:function(e){y.default.error("Failed to delete"),console.error(e.responseText)}}):this.setState({showConfirmDelete:!0})}},{key:"updateDatePickers",value:function(){var e=this;p.DatePicker.init(function(t,n){var a=n.split("-"),r=[a[2],a[1],a[0]].join("-");e.updateComplaint(t,r)})}},{key:"loadActiveTermId",value:function(){var e=this;return v.default.ajax({type:"get",url:"/api/terms/active"}).promise.then(function(t){var n=e.state.initComplaint;return n.termId=t.id,e.setState({initComplaint:n}),t})}},{key:"loadComplaint",value:function(e){var t=this,n=(e||this.props).params.id;n&&(this.setState({isLoading:!0}),$.ajax({type:"get",url:"/api/complaints/"+n,success:function(e){e.types=e.types?e.types.map(function(e){return e.id}):[],t.setState({complaint:e,isLoading:!1})},error:function(e){console.error(e.responseText),y.default.error("Failed to load complaint"),t.setState({isLoading:!1})}}))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.id,n=e.newId;n!=t&&(n?this.loadComplaint(e):(this.setState({complaint:this.state.initComplaint}),this.clearListeners.forEach(function(e){return e()})))}},{key:"onGuiUpdate",value:function(){this.updateDatePickers(),(0,E.default)($("textarea"))}},{key:"componentDidMount",value:function(){this.loadComplaintTypes(),this.loadActiveTermId(),this.loadComplaint(),this.onGuiUpdate()}},{key:"componentDidUpdate",value:function(){this.onGuiUpdate()}},{key:"renderForm",value:function(){var e=this,t=this.state,n=t.complaintTypes,a=t.complaint,r=function(e){return e&&e.length>0?e.split(" ")[0]:e};return c.default.createElement("div",null,c.default.createElement(f.Row,null,c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Name of complainant"),c.default.createElement("input",{name:"name",value:a.name,type:"text",className:"form-control",onChange:this.onChange})),c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Complaint recorded by"),c.default.createElement("input",{name:"recordedBy",value:a.recordedBy,type:"text",className:"form-control",onChange:this.onChange}))),c.default.createElement(f.Row,null,c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Person dealing with complaint"),c.default.createElement("input",{name:"handlerFullname",value:a.handlerFullname,type:"text",className:"form-control",onChange:this.onChange})),c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Date of Alleged Incident"),c.default.createElement("input",{name:"dateOfAllegedIncident",value:a.dateOfAllegedIncident,type:"text",className:"form-control datepicker",onChange:this.onChange}))),c.default.createElement(f.Row,null,c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Branch"),c.default.createElement(g.default,{url:"/api/branches-associated/list",className:"form-control",name:"branchId",id:"branchId",value:a.branchId,onChange:this.onChange},c.default.createElement("option",{value:"null"},"None"))),c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Term"),c.default.createElement(g.default,{url:"/api/terms/list",className:"form-control",name:"termId",id:"termId",value:a.termId,onChange:this.onChange},c.default.createElement("option",{value:"null"},"None")))),c.default.createElement(f.Row,null,c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Complaint priority"),c.default.createElement(g.default,{url:"/api/complaints/priorities",name:"priority",id:"priority",value:a.priority,onChange:this.onChange,className:"form-control"})),c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Date of complaint"),c.default.createElement("input",{name:"createdAt",value:r(a.createdAt),type:"text",className:"form-control datepicker",onChange:this.onChange}))),c.default.createElement(f.Row,null,c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Complaint types"),n.map(function(t){return c.default.createElement("div",{style:{marginBottom:"5px"},key:t.value},c.default.createElement("input",{type:"checkbox",name:"types",className:"form-control",style:{display:"inline-block",verticalAlign:"middle"},value:t.value,checked:a.types.includes(parseInt(t.value)),onChange:e.onMultiCheckboxChange}),c.default.createElement("span",{style:{display:"inline-block",marginLeft:"10px"}},t.label))})),c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Attach students"),c.default.createElement(m.default,{initialData:a.users,onUpdate:function(t){return e.updateComplaint("users",t)},onSendClearFunc:this.addClearListener}))),c.default.createElement(f.Row,{style:{marginBottom:"10px"}},c.default.createElement(f.Col,{md:12},c.default.createElement(C,null,"Complaint"),c.default.createElement(_.default,{name:"text",initHTML:a.text,onChange:this.onChange}))),c.default.createElement(f.Row,{style:{marginBottom:"10px"}},c.default.createElement(f.Col,{md:12},c.default.createElement(C,null,"Action taken"),c.default.createElement(_.default,{name:"actionTaken",initHTML:a.actionTaken,onChange:this.onChange}))),c.default.createElement(f.Row,{style:{marginBottom:"10px"}},c.default.createElement(f.Col,{md:12},c.default.createElement(C,null,"Suggestions/Disposition"),c.default.createElement(_.default,{name:"suggestions",initHTML:a.suggestions,onChange:this.onChange}))),c.default.createElement(f.Row,{style:{marginBottom:"10px"}},c.default.createElement(f.Col,{md:12},c.default.createElement(C,null,"Follow up/Other comments"),c.default.createElement(_.default,{name:"otherComments",initHTML:a.otherComments,onChange:this.onChange}))),c.default.createElement(f.Row,null,c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Action deadline"),c.default.createElement("input",{name:"actionDeadline",value:r(a.actionDeadline),type:"text",className:"form-control datepicker",onChange:this.onChange})),c.default.createElement(f.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(C,null,"Completion date"),c.default.createElement("input",{name:"completionDate",value:r(a.completionDate),type:"text",className:"form-control datepicker",onChange:this.onChange}))))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.showConfirmDelete,r=this.props.params.id;return n?c.default.createElement(h.default,null):c.default.createElement("div",{className:"content-block"},c.default.createElement("h2",{className:"block-heading"},"Add Complaint"),c.default.createElement("hr",null),this.renderForm(),c.default.createElement(f.Button,{className:"custom btn-success",onClick:this.submit,style:w.button},"Submit"),r?c.default.createElement("span",null,c.default.createElement(f.Button,{style:w.buttonAfter,className:"custom btn-success",onClick:function(){return e.delete(!1)}},"Delete"),c.default.createElement(d.Link,{to:"/complaints/"+r+"/print",target:"_blank",style:{textDecoration:"none",color:"white"}},c.default.createElement(f.Button,{style:w.buttonAfter,className:"custom btn-success"},"Print"))):"",c.default.createElement(b.default,{show:a,onConfirm:function(t){return e.delete(!0,t)},onClose:function(){return e.setState({showConfirmDelete:!1})}}))}}]),t}(u.Component);t.default=k,k.contextTypes={router:u.PropTypes.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(2)),l=a(n(4)),i=a(n(5)),s=a(n(1)),u=n(0),c=a(u),d=n(6),f=a(n(171)),p=function(){var e=0;return function(){return e++}}(),h=function e(t,n){(0,s.default)(this,e),this.id=p(),this.value=t||null,this.text=n||null},m=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.updateListItem=a.updateListItem.bind(a),a.onChange=a.onChange.bind(a),a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"updateListItem",value:function(e,t){var n=this.props.data;return n[e]=t,n}},{key:"onChange",value:function(e){var t=e.target;this.props.onUpdate(this.updateListItem(t.name,t.value))}},{key:"render",value:function(){var e=this,t=this.props.data;return c.default.createElement(d.Row,null,c.default.createElement(d.Col,{md:6,style:{marginBottom:"10px"}},c.default.createElement(f.default,{searchQuery:t.text,receiveUpdates:!0,elemId:"user-"+t.id,onSelectResult:function(t,n){var a=e.props.data;a.value=t,a.text=n,e.props.onUpdate(a)}})),c.default.createElement(d.Col,{md:4,style:{marginBottom:"10px"}},c.default.createElement(d.Button,{className:"custom",onClick:function(){return e.props.onDelete(t)}},"Delete")))}}]),t}(u.Component);m.propTypes={data:u.PropTypes.object.isRequired,onDelete:u.PropTypes.func.isRequired,onUpdate:u.PropTypes.func.isRequired};var v=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.state={list:[]},a.addItem=a.addItem.bind(a),a.deleteItem=a.deleteItem.bind(a),a.updateItem=a.updateItem.bind(a),a.onUpdate=a.onUpdate.bind(a),a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"onUpdate",value:function(){this.props.onUpdate(this.state.list.map(function(e){return e.value}))}},{key:"addItem",value:function(){var e=this.state.list;e.push(new h),this.setState({list:e})}},{key:"deleteItem",value:function(e){console.log(e),this.setState({list:this.state.list.filter(function(t){return t.id!=e.id})},this.onUpdate)}},{key:"updateItem",value:function(e){for(var t=this.state.list,n=0;n<t.length;n++)if(t[n].id==e.id){t[n]=e;break}this.setState({list:t},this.onUpdate)}},{key:"componentDidMount",value:function(){var e=this,t=this.state.list;this.props.initialData&&Array.isArray(this.props.initialData)&&this.props.initialData.forEach(function(e){t.push(new h(e.id,e.userFullname))}),this.setState({list:t}),this.props.onSendClearFunc(function(){return e.setState({list:[]})})}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,this.state.list.map(function(t){return c.default.createElement(m,{data:t,onDelete:e.deleteItem,onUpdate:e.updateItem})}),c.default.createElement(d.Button,{onClick:this.addItem},"Add"))}}]),t}(u.Component);t.default=v,v.propTypes={initialData:u.PropTypes.array.isRequired,onUpdate:u.PropTypes.func.isRequired,onSendClearFunc:u.PropTypes.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(3)),l=a(n(1)),i=a(n(2)),s=a(n(4)),u=a(n(5)),c=n(0),d=a(c),f=n(610),p=n(1399),h=function(e){function t(e){(0,l.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),a=e.initHTML,r=void 0;return r=a&&a.length>0?f.EditorState.createWithContent(f.ContentState.createFromBlockArray((0,f.convertFromHTML)(a))):f.EditorState.createEmpty(),n.state={editorState:r},n.focus=function(){return n.refs.editor.focus()},n.onChange=function(e){n.setState({editorState:e}),n.props.onChange({target:{name:n.props.name,value:(0,p.stateToHTML)(e.getCurrentContent())}})},n.handleKeyCommand=function(e){return n._handleKeyCommand(e)},n.onTab=function(e){return n._onTab(e)},n.toggleBlockType=function(e){return n._toggleBlockType(e)},n.toggleInlineStyle=function(e){return n._toggleInlineStyle(e)},n}return(0,u.default)(t,e),(0,i.default)(t,[{key:"_handleKeyCommand",value:function(e){var t=this.state.editorState,n=f.RichUtils.handleKeyCommand(t,e);return!!n&&(this.onChange(n),!0)}},{key:"_onTab",value:function(e){this.onChange(f.RichUtils.onTab(e,this.state.editorState,4))}},{key:"_toggleBlockType",value:function(e){this.onChange(f.RichUtils.toggleBlockType(this.state.editorState,e))}},{key:"_toggleInlineStyle",value:function(e){this.onChange(f.RichUtils.toggleInlineStyle(this.state.editorState,e))}},{key:"render",value:function(){var e=this.state.editorState,t="RichEditor-editor",n=e.getCurrentContent();return n.hasText()||"unstyled"!==n.getBlockMap().first().getType()&&(t+=" RichEditor-hidePlaceholder"),d.default.createElement("div",{className:"RichEditor-root"},d.default.createElement(g,{editorState:e,onToggle:this.toggleBlockType}),d.default.createElement(b,{editorState:e,onToggle:this.toggleInlineStyle}),d.default.createElement("div",{className:t,onClick:this.focus},d.default.createElement(f.Editor,{blockStyleFn:r,customStyleMap:m,editorState:e,handleKeyCommand:this.handleKeyCommand,onChange:this.onChange,onTab:this.onTab,placeholder:"",ref:"editor",spellCheck:!0})))}}]),t}(c.Component);t.default=h,h.propTypes={name:c.PropTypes.string.isRequired,onChange:c.PropTypes.func.isRequired,initHTML:c.PropTypes.string};var m={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}},v=function(e){function t(){(0,l.default)(this,t);var e=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.onToggle=function(t){t.preventDefault(),e.props.onToggle(e.props.style)},e}return(0,u.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e="RichEditor-styleButton";return this.props.active&&(e+=" RichEditor-activeButton"),d.default.createElement("span",{className:e,onMouseDown:this.onToggle},this.props.label)}}]),t}(d.default.Component),y=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:"H4",style:"header-four"},{label:"H5",style:"header-five"},{label:"H6",style:"header-six"},{label:"Blockquote",style:"blockquote"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"},{label:"Code Block",style:"code-block"}],g=function(e){var t=e.editorState,n=t.getSelection(),a=t.getCurrentContent().getBlockForKey(n.getStartKey()).getType();return d.default.createElement("div",{className:"RichEditor-controls"},y.map(function(t){return d.default.createElement(v,{key:t.label,active:t.style===a,label:t.label,onToggle:e.onToggle,style:t.style})}))},E=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Monospace",style:"CODE"}],b=function(e){var t=e.editorState.getCurrentInlineStyle();return d.default.createElement("div",{className:"RichEditor-controls"},E.map(function(n){return d.default.createElement(v,{key:n.label,active:t.has(n.style),label:n.label,onToggle:e.onToggle,style:n.style})}))}},function(e,t,n){"use strict";var a=n(138),r=n(65),o=n(101),l=n(57),i=n(34),s=n(35),u=(n(139),n(73)),c=n(1326),d=s.List,f=s.Repeat,p={insertAtomicBlock:function(e,t,n){var s=e.getCurrentContent(),c=e.getSelection(),p=l.removeRange(s,c,"backward"),h=p.getSelectionAfter(),m=l.splitBlock(p,h),v=m.getSelectionAfter(),y=l.setBlockType(m,v,"atomic"),g=r.create({entity:t}),E=[new o({key:u(),type:"atomic",text:n,characterList:d(f(g,n.length))}),new o({key:u(),type:"unstyled",text:"",characterList:d()})],b=a.createFromArray(E),_=l.replaceWithFragment(y,v,b),C=_.merge({selectionBefore:c,selectionAfter:_.getSelectionAfter().set("hasFocus",!0)});return i.push(e,C,"insert-fragment")},moveAtomicBlock:function(e,t,n,a){var r=e.getCurrentContent(),o=e.getSelection(),s=void 0;if("before"===a||"after"===a){var u=r.getBlockForKey("before"===a?n.getStartKey():n.getEndKey());s=c(r,t,u,a)}else{var d=l.removeRange(r,n,"backward"),f=d.getSelectionAfter(),p=d.getBlockForKey(f.getFocusKey());if(0===f.getStartOffset())s=c(d,t,p,"before");else if(f.getEndOffset()===p.getLength())s=c(d,t,p,"after");else{var h=l.splitBlock(d,f),m=h.getSelectionAfter(),v=h.getBlockForKey(m.getFocusKey());s=c(h,t,v,"before")}}var y=s.merge({selectionBefore:o,selectionAfter:s.getSelectionAfter().set("hasFocus",!0)});return i.push(e,y,"move-block")}};e.exports=p},function(e,t,n){"use strict";function a(e,t,n,a){var l=e.getBlockMap(),i=t.getStartKey(),s=t.getStartOffset(),u=t.getEndKey(),c=t.getEndOffset(),d=l.skipUntil(function(e,t){return t===i}).takeUntil(function(e,t){return t===u}).concat(o([[u,l.get(u)]])).map(function(e,t){var o,l;i===u?(o=s,l=c):(o=t===i?s:0,l=t===u?c:e.getLength());for(var d,f=e.getCharacterList();o<l;)d=f.get(o),f=f.set(o,a?r.applyStyle(d,n):r.removeStyle(d,n)),o++;return e.set("characterList",f)});return e.merge({blockMap:l.merge(d),selectionBefore:t,selectionAfter:t})}var r=n(65),o=n(35).Map,l={add:function(e,t,n){return a(e,t,n,!0)},remove:function(e,t,n){return a(e,t,n,!1)}};e.exports=l},function(e,t,n){"use strict";e.exports={draft_killswitch_allow_nontextnodes:!1,draft_segmented_entities_behavior:!1}},function(e,t,n){"use strict";var a=n(35),r=n(1315);e.exports=function(e,t,n){var o=e.getBlockMap(),l=t.getStartKey(),i=t.getStartOffset(),s=t.getEndKey(),u=t.getEndOffset(),c=o.skipUntil(function(e,t){return t===l}).takeUntil(function(e,t){return t===s}).toOrderedMap().merge(a.OrderedMap([[s,o.get(s)]])).map(function(e,t){var a=t===l?i:0,o=t===s?u:e.getLength();return r(e,a,o,n)});return e.merge({blockMap:o.merge(c),selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var a=n(65);e.exports=function(e,t,n,r){for(var o=e.getCharacterList();t<n;)o=o.set(t,a.applyEntity(o.get(t),r)),t++;return e.set("characterList",o)}},function(e,t,n){"use strict";function a(e,t,n,a,i,s,u){var c=n.getStartOffset(),d=n.getEndOffset(),f=e.__get(i).getMutability(),p=u?c:d;if("MUTABLE"===f)return n;var h=o(t,i).filter(function(e){return p<=e.end&&p>=e.start});1!=h.length&&l(!1);var m=h[0];if("IMMUTABLE"===f)return n.merge({anchorOffset:m.start,focusOffset:m.end,isBackward:!1});s||(u?d=m.end:c=m.start);var v=r.getRemovalRange(c,d,t.getText().slice(m.start,m.end),m.start,a);return n.merge({anchorOffset:v.start,focusOffset:v.end,isBackward:!1})}var r=n(1317),o=n(1318),l=n(30);e.exports=function(e,t,n,r,o){var l=r.getStartOffset(),i=r.getEndOffset(),s=t.getEntityAt(l),u=n.getEntityAt(i-1);if(!s&&!u)return r;var c=r;if(s&&s===u)c=a(e,t,c,o,s,!0,!0);else if(s&&u){var d=a(e,t,c,o,s,!1,!0),f=a(e,n,c,o,u,!1,!1);c=c.merge({anchorOffset:d.getAnchorOffset(),focusOffset:f.getFocusOffset(),isBackward:!1})}else if(s){var p=a(e,t,c,o,s,!1,!0);c=c.merge({anchorOffset:p.getStartOffset(),isBackward:!1})}else if(u){var h=a(e,n,c,o,u,!1,!1);c=c.merge({focusOffset:h.getEndOffset(),isBackward:!1})}return c}},function(e,t,n){"use strict";e.exports={getRemovalRange:function(e,t,n,a,r){var o=n.split(" ");o=o.map(function(e,t){if("forward"===r){if(t>0)return" "+e}else if(t<o.length-1)return e+" ";return e});for(var l,i,s=a,u=null,c=null,d=0;d<o.length;d++){if(i=o[d],l=s+i.length,e<l&&s<t)null!==u?c=l:(u=s,c=l);else if(null!==u)break;s=l}var f=a+n.length,p=u===a,h=c===f;return(!p&&h||p&&!h)&&("forward"===r?c!==f&&c++:u!==a&&u--),{start:u,end:c}}}},function(e,t,n){"use strict";var a=n(30);e.exports=function(e,t){var n=[];return e.findEntityRanges(function(e){return e.getEntity()===t},function(e,t){n.push({start:e,end:t})}),n.length||a(!1),n}},function(e,t,n){"use strict";var a=n(138),r=n(73),o=n(613),l=n(30);e.exports=function(e,t,n){t.isCollapsed()||l(!1);var i,s,u=t.getStartKey(),c=t.getStartOffset(),d=e.getBlockMap(),f=n.size;if(1===f){var p=d.get(u),h=n.first(),m=p.getText(),v=p.getCharacterList(),y=p.merge({text:m.slice(0,c)+h.getText()+m.slice(c),characterList:o(v,h.getCharacterList(),c),data:h.getData()});return i=u,s=c+h.getText().length,e.merge({blockMap:d.set(u,y),selectionBefore:t,selectionAfter:t.merge({anchorKey:i,anchorOffset:s,focusKey:i,focusOffset:s,isBackward:!1})})}var g=[];return e.getBlockMap().forEach(function(e,t){if(t===u){var a=e.getText(),o=e.getCharacterList(),l=a.length,s=a.slice(0,c),d=o.slice(0,c),p=n.first(),h=e.merge({text:s+p.getText(),characterList:d.concat(p.getCharacterList()),type:s?e.getType():p.getType(),data:p.getData()});g.push(h),n.slice(1,f-1).forEach(function(e){g.push(e.set("key",r()))});var m=a.slice(c,l),v=o.slice(c,l),y=n.last();i=r();var E=y.merge({key:i,text:y.getText()+m,characterList:y.getCharacterList().concat(v),data:y.getData()});g.push(E)}else g.push(e)}),s=n.last().getLength(),e.merge({blockMap:a.createFromArray(g),selectionBefore:t,selectionAfter:t.merge({anchorKey:i,anchorOffset:s,focusKey:i,focusOffset:s,isBackward:!1})})}},function(e,t,n){"use strict";var a=n(35),r=n(613),o=n(30),l=a.Repeat;e.exports=function(e,t,n,a){t.isCollapsed()||o(!1);var i=n.length;if(!i)return e;var s=e.getBlockMap(),u=t.getStartKey(),c=t.getStartOffset(),d=s.get(u),f=d.getText(),p=d.merge({text:f.slice(0,c)+n+f.slice(c,d.getLength()),characterList:r(d.getCharacterList(),l(a,i).toList(),c)}),h=c+i;return e.merge({blockMap:s.set(u,p),selectionAfter:t.merge({anchorOffset:h,focusOffset:h})})}},function(e,t,n){"use strict";var a=n(35).Map;e.exports=function(e,t,n){var r=t.getStartKey(),o=t.getEndKey(),l=e.getBlockMap(),i=l.toSeq().skipUntil(function(e,t){return t===r}).takeUntil(function(e,t){return t===o}).concat(a([[o,l.get(o)]])).map(n);return e.merge({blockMap:l.merge(i),selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var a=n(35);e.exports=function(e,t){if(t.isCollapsed())return e;var n,r=e.getBlockMap(),o=t.getStartKey(),l=t.getStartOffset(),i=t.getEndKey(),s=t.getEndOffset(),u=r.get(o),c=r.get(i);n=u===c?function(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var a=e.slice(0,t),r=e.slice(n);e=a.concat(r).toList()}return e}(u.getCharacterList(),l,s):u.getCharacterList().slice(0,l).concat(c.getCharacterList().slice(s));var d=u.merge({text:u.getText().slice(0,l)+c.getText().slice(s),characterList:n}),f=r.toSeq().skipUntil(function(e,t){return t===o}).takeUntil(function(e,t){return t===i}).concat(a.Map([[i,null]])).map(function(e,t){return t===o?d:null});return r=r.merge(f).filter(function(e){return!!e}),e.merge({blockMap:r,selectionBefore:t,selectionAfter:t.merge({anchorKey:o,anchorOffset:l,focusKey:o,focusOffset:l,isBackward:!1})})}},function(e,t,n){"use strict";var a=n(35),r=n(73),o=n(30),l=a.Map;e.exports=function(e,t){t.isCollapsed()||o(!1);var n=t.getAnchorKey(),a=t.getAnchorOffset(),i=e.getBlockMap(),s=i.get(n),u=s.getText(),c=s.getCharacterList(),d=s.merge({text:u.slice(0,a),characterList:c.slice(0,a)}),f=r(),p=d.merge({key:f,text:u.slice(a),characterList:c.slice(a),data:l()}),h=i.toSeq().takeUntil(function(e){return e===s}),m=i.toSeq().skipUntil(function(e){return e===s}).rest(),v=h.concat([[d.getKey(),d],[p.getKey(),p]],m).toOrderedMap();return e.merge({blockMap:v,selectionBefore:t,selectionAfter:t.merge({anchorKey:f,anchorOffset:0,focusKey:f,focusOffset:0,isBackward:!1})})}},function(e,t,n){"use strict";var a,r=n(35),o=n(1325),l=n(61),i=r.OrderedMap,s={getDirectionMap:function(e,t){a?a.reset():a=new o;var n=e.getBlockMap(),s=n.valueSeq().map(function(e){return l(a).getDirection(e.getText())}),u=i(n.keySeq().zip(s));return null!=t&&r.is(t,u)?t:u}};e.exports=s},function(e,t,n){"use strict";var a=n(616),r=n(299),o=n(30),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?r.isStrong(t)||o(!1):t=r.getGlobalDir(),this._defaultDir=t,this.reset()}return e.prototype.reset=function(){this._lastDir=this._defaultDir},e.prototype.getDirection=function(e){return this._lastDir=a.getDirection(e,this._lastDir),this._lastDir},e}();e.exports=l},function(e,t,n){"use strict";var a=n(30);e.exports=function(e,t,n,r){t.getKey()===n.getKey()&&a(!1),"replace"===r&&a(!1);var o=n.getKey(),l=e.getBlockBefore(o),i=e.getBlockAfter(o),s=e.getBlockMap().delete(t.getKey()),u=s.toSeq().takeUntil(function(e){return e===n}),c=s.toSeq().skipUntil(function(e){return e===n}).skip(1),d=void 0;return"before"===r?(l&&l.getKey()===t.getKey()&&a(!1),d=u.concat([[t.getKey(),t],[n.getKey(),n]],c).toOrderedMap()):"after"===r&&(i&&i.getKey()===t.getKey()&&a(!1),d=u.concat([[n.getKey(),n],[t.getKey(),t]],c).toOrderedMap()),e.merge({blockMap:d,selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:t.getKey(),focusKey:t.getKey()})})}},function(e,t,n){"use strict";var a=n(35).List,r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._decorators=t.slice()}return e.prototype.getDecorations=function(e,t){var n=Array(e.getText().length).fill(null);return this._decorators.forEach(function(a,r){var o=0;(0,a.strategy)(e,function(e,t){(function(e,t,n){for(var a=t;a<n;a++)if(null!=e[a])return!1;return!0})(n,e,t)&&(function(e,t,n,a){for(var r=t;r<n;r++)e[r]=a}(n,e,t,r+"."+o),o++)},t)}),a(n)},e.prototype.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},e.prototype.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();e.exports=r},function(e,t,n){"use strict";var a=n(80)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(300),o=n(617),l=n(1329),i=n(1330),s=n(1352),u=n(1355),c=n(1389),d=n(34),f=n(0),p=n(37),h=n(621),m=n(304),v=n(74),y=n(140),g=n(118),E=n(73),b=n(634),_=n(305),C=n(30),w=n(61),k=v.isBrowser("IE"),S=!k,x={edit:u,composite:l,drag:s,cut:null,render:null},T=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._blockSelectEvents=!1,a._clipboard=null,a._handler=null,a._dragCount=0,a._editorKey=n.editorKey||E(),a._placeholderAccessibilityID="placeholder-"+a._editorKey,a._latestEditorState=n.editorState,a._latestCommittedEditorState=n.editorState,a._onBeforeInput=a._buildHandler("onBeforeInput"),a._onBlur=a._buildHandler("onBlur"),a._onCharacterData=a._buildHandler("onCharacterData"),a._onCompositionEnd=a._buildHandler("onCompositionEnd"),a._onCompositionStart=a._buildHandler("onCompositionStart"),a._onCopy=a._buildHandler("onCopy"),a._onCut=a._buildHandler("onCut"),a._onDragEnd=a._buildHandler("onDragEnd"),a._onDragOver=a._buildHandler("onDragOver"),a._onDragStart=a._buildHandler("onDragStart"),a._onDrop=a._buildHandler("onDrop"),a._onInput=a._buildHandler("onInput"),a._onFocus=a._buildHandler("onFocus"),a._onKeyDown=a._buildHandler("onKeyDown"),a._onKeyPress=a._buildHandler("onKeyPress"),a._onKeyUp=a._buildHandler("onKeyUp"),a._onMouseDown=a._buildHandler("onMouseDown"),a._onMouseUp=a._buildHandler("onMouseUp"),a._onPaste=a._buildHandler("onPaste"),a._onSelect=a._buildHandler("onSelect"),a.focus=a._focus.bind(a),a.blur=a._blur.bind(a),a.setMode=a._setMode.bind(a),a.exitCurrentMode=a._exitCurrentMode.bind(a),a.restoreEditorDOM=a._restoreEditorDOM.bind(a),a.setClipboard=a._setClipboard.bind(a),a.getClipboard=a._getClipboard.bind(a),a.getEditorKey=function(){return a._editorKey},a.update=a._update.bind(a),a.onDragEnter=a._onDragEnter.bind(a),a.onDragLeave=a._onDragLeave.bind(a),a.state={contentsKey:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._buildHandler=function(e){var t=this;return function(n){if(!t.props.readOnly){var a=t._handler&&t._handler[e];a&&a(t,n)}}},t.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},t.prototype._renderPlaceholder=function(){return this._showPlaceholder()?f.createElement(c,{text:w(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID}):null},t.prototype.render=function(){var e=this.props,t=e.readOnly,n=e.textAlignment,r=y({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===n,"DraftEditor/alignRight":"right"===n,"DraftEditor/alignCenter":"center"===n}),l=this.props.role||"textbox",s="combobox"===l?!!this.props.ariaExpanded:null;return f.createElement("div",{className:r},this._renderPlaceholder(),f.createElement("div",{className:y("DraftEditor/editorContainer"),ref:"editorContainer"},f.createElement("div",{"aria-activedescendant":t?null:this.props.ariaActiveDescendantID,"aria-autocomplete":t?null:this.props.ariaAutoComplete,"aria-controls":t?null:this.props.ariaControls,"aria-describedby":this._showPlaceholder()?this._placeholderAccessibilityID:null,"aria-expanded":t?null:s,"aria-label":this.props.ariaLabel,"aria-multiline":this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:y({notranslate:!t,"public/DraftEditor/content":!0}),contentEditable:!t,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:"editor",role:t?null:l,spellCheck:S&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},f.createElement(i,{blockRenderMap:this.props.blockRenderMap,blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,customStyleMap:a({},o,this.props.customStyleMap),customStyleFn:this.props.customStyleFn,editorKey:this._editorKey,editorState:this.props.editorState,key:"contents"+this.state.contentsKey,textDirectionality:this.props.textDirectionality}))))},t.prototype.componentDidMount=function(){this.setMode("edit"),k&&document.execCommand("AutoUrlDetect",!1,!1)},t.prototype.componentWillUpdate=function(e){this._blockSelectEvents=!0,this._latestEditorState=e.editorState},t.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestCommittedEditorState=this.props.editorState},t.prototype._focus=function(e){var t=this.props.editorState,n=t.getSelection().getHasFocus(),a=p.findDOMNode(this.refs.editor);if(a){var r=m.getScrollParent(a),o=e||_(r),l=o.x,i=o.y;a instanceof HTMLElement||C(!1),a.focus(),r===window?window.scrollTo(l,i):h.setTop(r,i),n||this.update(d.forceSelection(t,t.getSelection()))}},t.prototype._blur=function(){var e=p.findDOMNode(this.refs.editor);e instanceof HTMLElement||C(!1),e.blur()},t.prototype._setMode=function(e){this._handler=x[e]},t.prototype._exitCurrentMode=function(){this.setMode("edit")},t.prototype._restoreEditorDOM=function(e){var t=this;this.setState({contentsKey:this.state.contentsKey+1},function(){t._focus(e)})},t.prototype._setClipboard=function(e){this._clipboard=e},t.prototype._getClipboard=function(){return this._clipboard},t.prototype._update=function(e){this._latestEditorState=e,this.props.onChange(e)},t.prototype._onDragEnter=function(){this._dragCount++},t.prototype._onDragLeave=function(){0===--this._dragCount&&this.exitCurrentMode()},t}(f.Component);T.defaultProps={blockRenderMap:r,blockRendererFn:g.thatReturnsNull,blockStyleFn:g.thatReturns(""),keyBindingFn:b,readOnly:!1,spellCheck:!1,stripPastedStyles:!1},e.exports=T},function(e,t,n){"use strict";var a=n(57),r=n(34),o=n(301),l=n(302),i=n(618),s=!1,u=!1,c="",d={onBeforeInput:function(e,t){c=(c||"")+t.data},onCompositionStart:function(e){u=!0},onCompositionEnd:function(e){s=!1,u=!1,setTimeout(function(){s||d.resolveComposition(e)},20)},onKeyDown:function(e,t){if(!u)return d.resolveComposition(e),void e._onKeyDown(t);t.which!==o.RIGHT&&t.which!==o.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===o.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!u){s=!0;var t=c;c="";var n=r.set(e._latestEditorState,{inCompositionMode:!1}),o=n.getCurrentInlineStyle(),d=l(n.getCurrentContent(),n.getSelection()),f=!t||i(n)||o.size>0||null!==d;if(f&&e.restoreEditorDOM(),e.exitCurrentMode(),t){var p=a.replaceText(n.getCurrentContent(),n.getSelection(),t,o,d);e.update(r.push(n,p,"insert-characters"))}else f&&e.update(r.set(n,{nativelyRenderedContent:null,forceSelection:!0}))}}};e.exports=d},function(e,t,n){"use strict";var a=n(80)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(619),o=n(197),l=(n(34),n(0)),i=n(140),s=n(1351),u=n(61),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var a=n.getNativelyRenderedContent(),r=t.isInCompositionMode(),o=n.isInCompositionMode();if(t===n||null!==a&&n.getCurrentContent()===a||r&&o)return!1;var l=t.getCurrentContent(),i=n.getCurrentContent(),s=t.getDecorator(),u=n.getDecorator();return r!==o||l!==i||s!==u||n.mustForceSelection()},t.prototype.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,c=e.customStyleMap,d=e.customStyleFn,f=e.editorState,p=f.getCurrentContent(),h=f.getSelection(),m=f.mustForceSelection(),v=f.getDecorator(),y=u(f.getDirectionMap()),g=p.getBlocksAsArray(),E=[],b=null,_=null,C=0;C<g.length;C++){var w=g[C],k=w.getKey(),S=w.getType(),x=n(w),T=void 0,P=void 0,R=void 0;x&&(T=x.component,P=x.props,R=x.editable);var O=this.props.textDirectionality,D=O||y.get(k),N=o.encode(k,0,0),I={contentState:p,block:w,blockProps:P,customStyleMap:c,customStyleFn:d,decorator:v,direction:D,forceSelection:m,key:k,offsetKey:N,selection:h,tree:f.getBlockTree(k)},M=t.get(S)||t.get("unstyled"),A=M.wrapper,F=M.element||t.get("unstyled").element,L=w.getDepth(),j=this.props.blockStyleFn(w);"li"===F&&(j=s(j,function(e,t,n,a){return i({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":4===t,"public/DraftStyleDefault/listLTR":"LTR"===a,"public/DraftStyleDefault/listRTL":"RTL"===a})}(S,L,_!==A||null===b||L>b,D)));var B=T||r,U={className:j,"data-block":!0,"data-editor":this.props.editorKey,"data-offset-key":N,key:k};void 0!==R&&(U=a({},U,{contentEditable:R,suppressContentEditableWarning:!0}));var H=l.createElement(F,U,l.createElement(B,I));E.push({block:H,wrapperTemplate:A,key:k,offsetKey:N}),b=A?w.getDepth():null,_=A}for(var q=[],K=0;K<E.length;){var W=E[K];if(W.wrapperTemplate){var z=[];do{z.push(E[K].block),K++}while(K<E.length&&E[K].wrapperTemplate===W.wrapperTemplate);var G=l.cloneElement(W.wrapperTemplate,{key:W.key+"-wrap","data-offset-key":W.offsetKey},z);q.push(G)}else q.push(W.block),K++}return l.createElement("div",{"data-contents":"true"},q)},t}(l.Component);e.exports=c},function(e,t,n){"use strict";var a=n(80),r=(n(101),n(1332)),o=n(0),l=n(37),i=n(30),s=n(1339),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,n=t.block,a=t.start,r=t.text,o=n.getKey(),u=a+r.length;if(e.hasEdgeWithin(o,a,u)){var c=l.findDOMNode(this);c||i(!1);var d=c.firstChild;d||i(!1);var f=void 0;d.nodeType===Node.TEXT_NODE?f=d:"BR"===d.tagName?f=c:(f=d.firstChild)||i(!1),s(e,f,o,a,u)}}},t.prototype.shouldComponentUpdate=function(e){var t=l.findDOMNode(this.refs.leaf);return t||i(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},t.prototype.componentDidUpdate=function(){this._setSelection()},t.prototype.componentDidMount=function(){this._setSelection()},t.prototype.render=function(){var e=this.props.block,t=this.props.text;t.endsWith("\n")&&this.props.isLast&&(t+="\n");var n=this.props,l=n.customStyleMap,i=n.customStyleFn,s=n.offsetKey,u=n.styleSet,c=u.reduce(function(e,t){var n={},r=l[t];return void 0!==r&&e.textDecoration!==r.textDecoration&&(n.textDecoration=[e.textDecoration,r.textDecoration].join(" ").trim()),a(e,r,n)},{});if(i){var d=i(u,e);c=a(c,d)}return o.createElement("span",{"data-offset-key":s,ref:"leaf",style:c},o.createElement(r,null,t))},t}(o.Component);e.exports=u},function(e,t,n){"use strict";var a=n(0),r=n(37),o=n(74),l=n(30),i=o.isBrowser("IE <= 11"),s=i?a.createElement("span",{key:"A","data-text":"true"},"\n"):a.createElement("br",{key:"A","data-text":"true"}),u=i?a.createElement("span",{key:"B","data-text":"true"},"\n"):a.createElement("br",{key:"B","data-text":"true"}),c=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._forceFlag=!1,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){var t=r.findDOMNode(this),n=""===e.children;return t instanceof Element||l(!1),n?!function(e){return i?"\n"===e.textContent:"BR"===e.tagName}(t):t.textContent!==e.children},t.prototype.componentWillUpdate=function(){this._forceFlag=!this._forceFlag},t.prototype.render=function(){return""===this.props.children?this._forceFlag?s:u:a.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true"},this.props.children)},t}(a.Component);e.exports=c},function(e,t,n){"use strict";var a="Unknown",r={"Mac OS":"Mac OS X"},o=(new(n(1334))).getResult(),l=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(o.browser.version),i={browserArchitecture:o.cpu.architecture||a,browserFullVersion:o.browser.version||a,browserMinorVersion:l.minor||a,browserName:o.browser.name||a,browserVersion:o.browser.major||a,deviceName:o.device.model||a,engineName:o.engine.name||a,engineVersion:o.engine.version||a,platformArchitecture:o.cpu.architecture||a,platformName:function(e){return r[e]||e}(o.os.name)||a,platformVersion:o.os.version||a,platformFullVersion:o.os.version||a};e.exports=i},function(e,t,n){var a;!function(r,o){"use strict";var l="model",i="vendor",s="version",u="architecture",c="mobile",d="tablet",f="smarttv",p=function(e,t){var n={};for(var a in e)t[a]&&t[a].length%2==0?n[a]=t[a].concat(e[a]):n[a]=e[a];return n},h=function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},m=function(e){return e.toLowerCase()},v=function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},y=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},g={rgx:function(e,t){for(var n,a,r,o,l,i,s=0;s<t.length&&!l;){var u=t[s],c=t[s+1];for(n=a=0;n<u.length&&!l;)if(l=u[n++].exec(e))for(r=0;r<c.length;r++)i=l[++a],"object"==typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,i):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=i?i.replace(o[1],o[2]):void 0:this[o[0]]=i?o[1].call(this,i,o[2]):void 0:4==o.length&&(this[o[0]]=i?o[3].call(this,i.replace(o[1],o[2])):void 0):this[o]=i||void 0;s+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var a=0;a<t[n].length;a++)if(h(t[n][a],e))return"?"===n?void 0:n}else if(h(t[n],e))return"?"===n?void 0:n;return e}},E={oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},b={amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},_={windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}},C={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name",s],[/(opios)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],s],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],["name",s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],s],[/(edge)\/((\d+)?[\w\.]+)/i],["name",s],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],s],[/(puffin)\/([\w\.]+)/i],[["name","Puffin"],s],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],s],[/(micromessenger)\/([\w\.]+)/i],[["name","WeChat"],s],[/(QQ)\/([\d\.]+)/i],["name",s],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],["name",s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,["name","MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[s,["name","Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[s,["name","Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[["name",/(.+)/,"$1 WebView"],s],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[["name",/(.+(?:g|us))(.+)/,"$1 $2"],s],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[s,["name","Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name",s],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],s],[/(coast)\/([\w\.]+)/i],[["name","Opera Coast"],s],[/fxios\/([\w\.-]+)/i],[s,["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,"name"],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[["name","GSA"],s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",[s,g.str,E.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name",s],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name",s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[u,"amd64"]],[/(ia32(?=;))/i],[[u,m]],[/((?:i[346]|x)86)[;\)]/i],[[u,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[u,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[u,/ower/,"",m]],[/(sun4\w)[;\)]/i],[[u,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[u,m]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,i,["type",d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[i,"Apple"],["type",d]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[i,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[i,l,["type",d]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[l,[i,"Amazon"],["type",d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[l,g.str,b.amazon.model],[i,"Amazon"],["type",c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,i,["type",c]],[/\((ip[honed|\s\w*]+);/i],[l,[i,"Apple"],["type",c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[i,l,["type",c]],[/\(bb10;\s(\w+)/i],[l,[i,"BlackBerry"],["type",c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[l,[i,"Asus"],["type",d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[i,"Sony"],[l,"Xperia Tablet"],["type",d]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[l,[i,"Sony"],["type",c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[i,l,["type","console"]],[/android.+;\s(shield)\sbuild/i],[l,[i,"Nvidia"],["type","console"]],[/(playstation\s[34portablevi]+)/i],[l,[i,"Sony"],["type","console"]],[/(sprint\s(\w+))/i],[[i,g.str,b.sprint.vendor],[l,g.str,b.sprint.model],["type",c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[i,l,["type",d]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[i,[l,/_/g," "],["type",c]],[/(nexus\s9)/i],[l,[i,"HTC"],["type",d]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[l,[i,"Huawei"],["type",c]],[/(microsoft);\s(lumia[\s\w]+)/i],[i,l,["type",c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[i,"Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[i,"Microsoft"],["type",c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[i,"Motorola"],["type",c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[i,"Motorola"],["type",d]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[i,y],[l,y],["type",f]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[i,"Samsung"],["type",f]],[/\(dtv[\);].+(aquos)/i],[l,[i,"Sharp"],["type",f]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[i,"Samsung"],l,["type",d]],[/smart-tv.+(samsung)/i],[i,["type",f],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[i,"Samsung"],l,["type",c]],[/sie-(\w+)*/i],[l,[i,"Siemens"],["type",c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[i,"Nokia"],l,["type",c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[i,"Acer"],["type",d]],[/android.+([vl]k\-?\d{3})\s+build/i],[l,[i,"LG"],["type",d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[i,"LG"],l,["type",d]],[/(lg) netcast\.tv/i],[i,l,["type",f]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[l,[i,"LG"],["type",c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[i,"Lenovo"],["type",d]],[/linux;.+((jolla));/i],[i,l,["type",c]],[/((pebble))app\/[\d\.]+\s/i],[i,l,["type","wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[i,l,["type",c]],[/crkey/i],[[l,"Chromecast"],[i,"Google"]],[/android.+;\s(glass)\s\d/i],[l,[i,"Google"],["type","wearable"]],[/android.+;\s(pixel c)\s/i],[l,[i,"Google"],["type",d]],[/android.+;\s(pixel xl|pixel)\s/i],[l,[i,"Google"],["type",c]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[l,/_/g," "],[i,"Xiaomi"],["type",c]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[l,/_/g," "],[i,"Xiaomi"],["type",d]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[l,[i,"Meizu"],["type",d]],[/android.+a000(1)\s+build/i],[l,[i,"OnePlus"],["type",c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[l,[i,"RCA"],["type",d]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[l,[i,"Dell"],["type",d]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[l,[i,"Verizon"],["type",d]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[i,"Barnes & Noble"],l,["type",d]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[l,[i,"NuVision"],["type",d]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[i,"ZTE"],l,["type",d]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[l,[i,"Swiss"],["type",c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[l,[i,"Swiss"],["type",d]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[l,[i,"Zeki"],["type",d]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[i,"Dragon Touch"],l,["type",d]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[l,[i,"Insignia"],["type",d]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[l,[i,"NextBook"],["type",d]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[i,"Voice"],l,["type",c]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[i,"LvTel"],l,["type",c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[l,[i,"Envizen"],["type",d]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[i,l,["type",d]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[l,[i,"MachSpeed"],["type",d]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[i,l,["type",d]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[l,[i,"Rotor"],["type",d]],[/android.+(KS(.+))\s+build/i],[l,[i,"Amazon"],["type",d]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[i,l,["type",d]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[["type",m],i,l],[/(android.+)[;\/].+build/i],[l,[i,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name",s],[/rv\:([\w\.]+).*(gecko)/i],[s,"name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name",s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],["name",[s,g.str,_.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],[s,g.str,_.windows.version]],[/\((bb)(10);/i],[["name","BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name",s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],s],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name",s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],["name",s],[/(haiku)\s(\w+)/i],["name",s],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[s,/_/g,"."],["name","iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name",s]]},w=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof w))return new w(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),a=t?p(C,t):C;return this.getBrowser=function(){var e={name:void 0,version:void 0};return g.rgx.call(e,n,a.browser),e.major=v(e.version),e},this.getCPU=function(){var e={architecture:void 0};return g.rgx.call(e,n,a.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return g.rgx.call(e,n,a.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return g.rgx.call(e,n,a.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return g.rgx.call(e,n,a.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};w.VERSION="0.7.17",w.BROWSER={NAME:"name",MAJOR:"major",VERSION:s},w.CPU={ARCHITECTURE:u},w.DEVICE={MODEL:l,VENDOR:i,TYPE:"type",CONSOLE:"console",MOBILE:c,SMARTTV:f,TABLET:d,WEARABLE:"wearable",EMBEDDED:"embedded"},w.ENGINE={NAME:"name",VERSION:s},w.OS={NAME:"name",VERSION:s},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=w),t.UAParser=w):n(1335)?void 0===(a=function(){return w}.call(t,n,t,e))||(e.exports=a):r&&(r.UAParser=w);var k=r&&(r.jQuery||r.Zepto);if(void 0!==k){var S=new w;k.ua=S.getResult(),k.ua.get=function(){return S.getUA()},k.ua.set=function(e){S.setUA(e);var t=S.getResult();for(var n in t)k.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function a(e,t){var n=e.split(v);return n.length>1?n.some(function(e){return b.contains(e,t)}):(e=n[0].trim(),function(e,t){var n=e.split(y);if(n.length>0&&n.length<=2||h(!1),1===n.length)return r(n[0],t);var a=n[0],o=n[1];return u(a)&&u(o)||h(!1),r(">="+a,t)&&r("<="+o,t)}(e,t))}function r(e,t){if(""===(e=e.trim()))return!0;var n=t.split(m),a=i(e),r=a.modifier,u=a.rangeComponents;switch(r){case"<":return o(n,u);case"<=":return function(e,t){var n=p(e,t);return-1===n||0===n}(n,u);case">=":return l(n,u);case">":return function(e,t){return 1===p(e,t)}(n,u);case"~":case"~>":return function(e,t){var n=t.slice(),a=t.slice();a.length>1&&a.pop();var r=a.length-1,i=parseInt(a[r],10);return s(i)&&(a[r]=i+1+""),l(e,n)&&o(e,a)}(n,u);default:return function(e,t){return 0===p(e,t)}(n,u)}}function o(e,t){return-1===p(e,t)}function l(e,t){var n=p(e,t);return 1===n||0===n}function i(e){var t=e.split(m),n=t[0].match(g);return n||h(!1),{modifier:n[1],rangeComponents:[n[2]].concat(t.slice(1))}}function s(e){return!isNaN(e)&&isFinite(e)}function u(e){return!i(e).modifier}function c(e,t){for(var n=e.length;n<t;n++)e[n]="0"}function d(e,t){var n=e.match(E)[1],a=t.match(E)[1],r=parseInt(n,10),o=parseInt(a,10);return s(r)&&s(o)&&r!==o?f(r,o):f(e,t)}function f(e,t){return typeof e!=typeof t&&h(!1),e>t?1:e<t?-1:0}function p(e,t){for(var n=function(e,t){c(e=e.slice(),(t=t.slice()).length);for(var n=0;n<t.length;n++){var a=t[n].match(/^[x*]$/i);if(a&&(t[n]=e[n]="0","*"===a[0]&&n===t.length-1))for(var r=n;r<e.length;r++)e[r]="0"}return c(t,e.length),[e,t]}(e,t),a=n[0],r=n[1],o=0;o<r.length;o++){var l=d(a[o],r[o]);if(l)return l}return 0}var h=n(30),m=/\./,v=/\|\|/,y=/\s+\-\s+/,g=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,E=/^(\d*)(.*)/,b={contains:function(e,t){return a(e.trim(),t.trim())}};e.exports=b},function(e,t,n){"use strict";var a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!e)return null;var r={};for(var o in e)a.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";(function(t){function a(e,t){if(!e)return"[empty]";var n=r(e,t);return n.nodeType===Node.TEXT_NODE?n.textContent:(n instanceof Element||f(!1),n.outerHTML)}function r(e,t){var n=void 0!==t?t(e):[];if(e.nodeType===Node.TEXT_NODE){var a=e.textContent.length;return document.createTextNode("[text "+a+(n.length?" | "+n.join(", "):"")+"]")}var o=e.cloneNode();1===o.nodeType&&n.length&&o.setAttribute("data-labels",n.join(", "));for(var l=e.childNodes,i=0;i<l.length;i++)o.appendChild(r(l[i],t));return o}function o(e,t){for(var n=e;n;){if(n instanceof Element&&n.hasAttribute("contenteditable"))return a(n,t);n=n.parentNode}return"Could not find contentEditable parent of node"}function l(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function i(e,t,n,a){var r=d();if(e.extend&&c(r,t)){n>l(t)&&u.logSelectionStateFailure({anonymizedDom:o(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(a.toJS())});var i=t===e.focusNode;try{e.extend(t,n)}catch(l){throw u.logSelectionStateFailure({anonymizedDom:o(t,function(t){var n=[];return t===r&&n.push("active element"),t===e.anchorNode&&n.push("selection anchor node"),t===e.focusNode&&n.push("selection focus node"),n}),extraParams:JSON.stringify({activeElementName:r?r.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:i,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:l?""+l:null,offset:n},null,2),selectionState:JSON.stringify(a.toJS(),null,2)}),l}}else{var s=e.getRangeAt(0);s.setEnd(t,n),e.addRange(s.cloneRange())}}function s(e,t,n,a){var r=document.createRange();n>l(t)&&u.logSelectionStateFailure({anonymizedDom:o(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(a.toJS())}),r.setStart(t,n),e.addRange(r)}var u=n(1340),c=n(303),d=n(620),f=n(30);e.exports=function(e,n,a,r,o){if(c(document.documentElement,n)){var l=t.getSelection(),u=e.getAnchorKey(),d=e.getAnchorOffset(),f=e.getFocusKey(),p=e.getFocusOffset(),h=e.getIsBackward();if(!l.extend&&h){var m=u,v=d;u=f,d=p,f=m,p=v,h=!1}var y=u===a&&r<=d&&o>=d,g=f===a&&r<=p&&o>=p;if(y&&g)return l.removeAllRanges(),s(l,n,d-r,e),void i(l,n,p-r,e);if(h){if(g&&(l.removeAllRanges(),s(l,n,p-r,e)),y){var E=l.focusNode,b=l.focusOffset;l.removeAllRanges(),s(l,n,d-r,e),i(l,E,b,e)}}else y&&(l.removeAllRanges(),s(l,n,d-r,e)),g&&i(l,n,p-r,e)}}}).call(t,n(40))},function(e,t,n){"use strict";e.exports={logSelectionStateFailure:function(){return null}}},function(e,t,n){"use strict";var a=n(1342);e.exports=function(e){return a(e)&&3==e.nodeType}},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";function a(e){return null==e?e:String(e)}var r=n(1344),o=n(1345);e.exports=function(e,t){var n=void 0;if(window.getComputedStyle&&(n=window.getComputedStyle(e,null)))return a(n.getPropertyValue(o(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(e,null))return a(n.getPropertyValue(o(t)));if("display"===t)return"none"}return a(e.currentStyle?"float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[r(t)]:e.style&&e.style[r(t)])}},function(e,t,n){"use strict";var a=/-(.)/g;e.exports=function(e){return e.replace(a,function(e,t){return t.toUpperCase()})}},function(e,t,n){"use strict";var a=/([A-Z])/g;e.exports=function(e){return e.replace(a,"-$1").toLowerCase()}},function(e,t,n){"use strict";var a=n(1347);e.exports=function(e){var t=a(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}},function(e,t,n){"use strict";var a=n(303);e.exports=function(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e&&a(t,e)))return{left:0,right:0,top:0,bottom:0};var n=e.getBoundingClientRect();return{left:Math.round(n.left)-t.clientLeft,right:Math.round(n.right)-t.clientLeft,top:Math.round(n.top)-t.clientTop,bottom:Math.round(n.bottom)-t.clientTop}}},function(e,t,n){"use strict";var a="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;e.exports=function(e){return(e=e||document).scrollingElement?e.scrollingElement:a||"CSS1Compat"!==e.compatMode?e.body:e.documentElement}},function(e,t,n){"use strict";e.exports=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}},function(e,t,n){"use strict";function a(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function r(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function o(){return{width:window.innerWidth||a(),height:window.innerHeight||r()}}o.withoutScrollbars=function(){return{width:a(),height:r()}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){e||(e="");var t=void 0,n=arguments.length;if(n>1)for(var a=1;a<n;a++)(t=arguments[a])&&(e=(e?e+" ":"")+t);return e}},function(e,t,n){"use strict";function a(e,t,n){var a=o.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return l.push(e,a,"insert-fragment")}var r=n(622),o=n(57),l=n(34),i=n(306),s=n(624),u=n(625),c=n(198),d=n(61),f={onDragEnd:function(e){e.exitCurrentMode()},onDrop:function(e,t){var n=new r(t.nativeEvent.dataTransfer),f=e._latestEditorState,p=function(e,t){var n=null,a=null;if("function"==typeof document.caretRangeFromPoint){var r=document.caretRangeFromPoint(e.x,e.y);n=r.startContainer,a=r.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,a=e.rangeOffset}n=d(n),a=d(a);var o=d(i(n));return u(t,o,a,o,a)}(t.nativeEvent,f);if(t.preventDefault(),e.exitCurrentMode(),null!=p){var h=n.getFiles();if(h.length>0){if(e.props.handleDroppedFiles&&c(e.props.handleDroppedFiles(p,h)))return;s(h,function(t){t&&e.update(a(f,p,t))})}else{var m=e._internalDrag?"internal":"external";e.props.handleDrop&&c(e.props.handleDrop(p,n,m))||(e._internalDrag?e.update(function(e,t){var n=o.moveText(e.getCurrentContent(),e.getSelection(),t);return l.push(e,n,"insert-fragment")}(f,p)):e.update(a(f,p,n.getText())))}}}};e.exports=f},function(e,t,n){"use strict";function a(e){return e.split("/")}var r={isImage:function(e){return"image"===a(e)[0]},isJpeg:function(e){var t=a(e);return r.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};e.exports=r},function(e,t,n){"use strict";var a=n(30);e.exports=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&a(!1),"number"!=typeof t&&a(!1),0===t||t-1 in e||a(!1),"function"==typeof e.callee&&a(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}(e):[e]}},function(e,t,n){"use strict";var a={onBeforeInput:n(1356),onBlur:n(1360),onCompositionStart:n(1361),onCopy:n(1362),onCut:n(1363),onDragOver:n(1364),onDragStart:n(1365),onFocus:n(1366),onInput:n(1367),onKeyDown:n(1368),onPaste:n(1382),onSelect:n(1387)};e.exports=a},function(e,t,n){"use strict";(function(t){function a(e,t,n,a){var r=o.replaceText(e.getCurrentContent(),e.getSelection(),t,n,a);return l.push(e,r,"insert-characters")}var r=n(614),o=n(57),l=n(34),i=n(74),s=n(302),u=n(198),c=n(618),d=n(61),f=n(1357),p=i.isBrowser("Firefox");e.exports=function(e,n){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var o=e._latestEditorState,i=n.data;if(i)if(e.props.handleBeforeInput&&u(e.props.handleBeforeInput(i,o)))n.preventDefault();else{var h=o.getSelection(),m=h.getStartOffset(),v=h.getEndOffset(),y=h.getAnchorKey();if(h.isCollapsed()){var g=a(o,i,o.getCurrentInlineStyle(),s(o.getCurrentContent(),o.getSelection())),E=!1;if(E||(E=c(e._latestCommittedEditorState)),!E){var b=t.getSelection();if(b.anchorNode&&b.anchorNode.nodeType===Node.TEXT_NODE){var _=b.anchorNode.parentNode;E="SPAN"===_.nodeName&&_.firstChild.nodeType===Node.TEXT_NODE&&-1!==_.firstChild.nodeValue.indexOf("\t")}}if(E||(E=r.getFingerprint(o.getBlockTree(y))!==r.getFingerprint(g.getBlockTree(y))),E||(E=function(e){return p&&("'"==e||"/"==e)}(i)),E||(E=d(g.getDirectionMap()).get(y)!==d(o.getDirectionMap()).get(y)),E)return n.preventDefault(),void e.update(g);g=l.set(g,{nativelyRenderedContent:g.getCurrentContent()}),e._pendingStateFromBeforeInput=g,f(function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)})}else n.preventDefault(),i===o.getCurrentContent().getPlainText().slice(m,v)?this.update(l.forceSelection(o,h.merge({focusOffset:v}))):e.update(a(o,i,o.getCurrentInlineStyle(),s(o.getCurrentContent(),o.getSelection())))}}}).call(t,n(40))},function(e,t,n){"use strict";(function(t){n(1358),e.exports=t.setImmediate}).call(t,n(40))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function a(e){delete i[e]}function r(e){if(s)setTimeout(r,0,e);else{var t=i[e];if(t){s=!0;try{!function(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}(t)}finally{a(e),s=!1}}}}if(!e.setImmediate){var o,l=1,i={},s=!1,u=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick(function(){r(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&r(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){r(e.data)},o=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;o=function(t){var n=u.createElement("script");n.onreadystatechange=function(){r(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(r,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return i[l]=a,o(l),l++},c.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(40),n(1359))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(){h&&f&&(h=!1,f.length?p=f.concat(p):m=-1,p.length&&l())}function l(){if(!h){var e=r(o);h=!0;for(var t=p.length;t;){for(f=p,p=[];++m<t;)f&&f[m].run();m=-1,t=p.length}f=null,h=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===a||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var u,c,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{c="function"==typeof clearTimeout?clearTimeout:a}catch(e){c=a}}();var f,p=[],h=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new i(e,t)),1!==p.length||h||r(l)},i.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){var a=n(34),r=n(303),o=n(620);e.exports=function(e,n){if(o()===document.body){var l=t.getSelection(),i=e.refs.editor;1===l.rangeCount&&r(i,l.anchorNode)&&r(i,l.focusNode)&&l.removeAllRanges()}var s=e._latestEditorState,u=s.getSelection();if(u.getHasFocus()){var c=u.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(n),e.update(a.acceptSelection(s,c))}}}).call(t,n(40))},function(e,t,n){"use strict";var a=n(34);e.exports=function(e,t){e.setMode("composite"),e.update(a.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)}},function(e,t,n){"use strict";var a=n(626);e.exports=function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(a(e._latestEditorState))}},function(e,t,n){"use strict";var a=n(57),r=n(34),o=n(304),l=n(626),i=n(305);e.exports=function(e,t){var n=e._latestEditorState;if(n.getSelection().isCollapsed())t.preventDefault();else{var s=o.getScrollParent(t.target),u=i(s),c=u.x,d=u.y,f=l(n);e.setClipboard(f),e.setMode("cut"),setTimeout(function(){e.restoreEditorDOM({x:c,y:d}),e.exitCurrentMode(),e.update(function(e){var t=a.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return r.push(e,t,"remove-range")}(n))},0)}}},function(e,t,n){"use strict";e.exports=function(e,t){e._internalDrag=!1,e.setMode("drag"),t.preventDefault()}},function(e,t,n){"use strict";e.exports=function(e){e._internalDrag=!0,e.setMode("drag")}},function(e,t,n){"use strict";var a=n(34),r=n(74);e.exports=function(e,t){var n=e._latestEditorState,o=n.getSelection();if(!o.getHasFocus()){var l=o.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),r.isBrowser("Chrome < 60.0.3081.0")?e.update(a.forceSelection(n,l)):e.update(a.acceptSelection(n,l))}}},function(e,t,n){"use strict";(function(t){var a=n(611),r=n(57),o=n(197),l=n(34),i=n(74),s=n(306),u=n(61),c=i.isEngine("Gecko");e.exports=function(e){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=t.getSelection(),i=n.anchorNode,d=n.isCollapsed,f=i.nodeType!==Node.TEXT_NODE,p=i.nodeType!==Node.TEXT_NODE&&i.nodeType!==Node.ELEMENT_NODE;if(a.draft_killswitch_allow_nontextnodes){if(f)return}else if(p)return;if(i.nodeType===Node.TEXT_NODE&&(null!==i.previousSibling||null!==i.nextSibling)){var h=i.parentNode;i.nodeValue=h.textContent;for(var m=h.firstChild;null!==m;m=m.nextSibling)m!==i&&h.removeChild(m)}var v=i.textContent,y=e._latestEditorState,g=u(s(i)),E=o.decode(g),b=E.blockKey,_=E.decoratorKey,C=E.leafKey,w=y.getBlockTree(b).getIn([_,"leaves",C]),k=w.start,S=w.end,x=y.getCurrentContent(),T=x.getBlockForKey(b),P=T.getText().slice(k,S);if(v.endsWith("\n\n")&&(v=v.slice(0,-1)),v!==P){var R,O,D,N,I=y.getSelection(),M=I.merge({anchorOffset:k,focusOffset:S,isBackward:!1}),A=T.getEntityAt(k),F=A&&x.getEntity(A),L="MUTABLE"===(F&&F.getMutability()),j=L?"spellcheck-change":"apply-entity",B=r.replaceText(x,M,v,T.getInlineStyleAt(k),L?T.getEntityAt(k):null);if(c)R=n.anchorOffset,O=n.focusOffset,N=(D=k+Math.min(R,O))+Math.abs(R-O),R=D,O=N;else{var U=v.length-P.length;D=I.getStartOffset(),N=I.getEndOffset(),R=d?N+U:D,O=N+U}var H=B.merge({selectionBefore:x.getSelectionAfter(),selectionAfter:I.merge({anchorOffset:R,focusOffset:O})});e.update(l.push(y,H,j))}}}).call(t,n(40))},function(e,t,n){"use strict";var a=n(57),r=n(34),o=n(307),l=n(301),i=n(1369),s=n(74),u=n(198),c=n(1370),d=n(1372),f=n(1374),p=n(1375),h=n(1376),m=n(1377),v=n(1378),y=n(1379),g=n(1380),E=n(1381),b=o.isOptionKeyCommand,_=s.isBrowser("Chrome");e.exports=function(e,t){var n=t.which,o=e._latestEditorState;switch(n){case l.RETURN:if(t.preventDefault(),e.props.handleReturn&&u(e.props.handleReturn(t,o)))return;break;case l.ESC:return t.preventDefault(),void(e.props.onEscape&&e.props.onEscape(t));case l.TAB:return void(e.props.onTab&&e.props.onTab(t));case l.UP:return void(e.props.onUpArrow&&e.props.onUpArrow(t));case l.RIGHT:return void(e.props.onRightArrow&&e.props.onRightArrow(t));case l.DOWN:return void(e.props.onDownArrow&&e.props.onDownArrow(t));case l.LEFT:return void(e.props.onLeftArrow&&e.props.onLeftArrow(t));case l.SPACE:if(_&&b(t)){t.preventDefault();var s=a.replaceText(o.getCurrentContent(),o.getSelection(),"");return void e.update(r.push(o,s,"insert-characters"))}}var C=e.props.keyBindingFn(t);if(C)if("undo"!==C){if(t.preventDefault(),!e.props.handleKeyCommand||!u(e.props.handleKeyCommand(C,o))){var w=function(e,t){switch(e){case"redo":return r.redo(t);case"delete":return y(t);case"delete-word":return f(t);case"backspace":return v(t);case"backspace-word":return d(t);case"backspace-to-start-of-line":return c(t);case"split-block":return p(t);case"transpose-characters":return g(t);case"move-selection-to-start-of-block":return m(t);case"move-selection-to-end-of-block":return h(t);case"secondary-cut":return i.cut(t);case"secondary-paste":return i.paste(t);default:return t}}(C,o);w!==o&&e.update(w)}}else E(t,o,e.update)}},function(e,t,n){"use strict";var a=n(57),r=n(34),o=n(195),l=n(61),i=null,s={cut:function(e){var t=e.getCurrentContent(),n=e.getSelection(),s=null;if(n.isCollapsed()){var u=n.getAnchorKey(),c=t.getBlockForKey(u).getLength();if(c===n.getAnchorOffset())return e;s=n.set("focusOffset",c)}else s=n;s=l(s),i=o(t,s);var d=a.removeRange(t,s,"forward");return d===t?e:r.push(e,d,"remove-range")},paste:function(e){if(!i)return e;var t=a.replaceWithFragment(e.getCurrentContent(),e.getSelection(),i);return r.push(e,t,"insert-fragment")}};e.exports=s},function(e,t,n){"use strict";(function(t){var a=n(34),r=n(1371),o=n(628),l=n(308),i=n(141);e.exports=function(e){var n=i(e,function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return l(e,1);var a=t.getSelection().getRangeAt(0);return a=r(a),o(e,null,a.endContainer,a.endOffset,a.startContainer,a.startOffset).selectionState},"backward");return n===e.getCurrentContent()?e:a.push(e,n,"remove-range")}}).call(t,n(40))},function(e,t,n){"use strict";function a(e,t){for(var n=1/0,a=1/0,r=-1/0,o=-1/0,l=0;l<e.length;l++){var i=e[l];0!==i.width&&1!==i.width&&(n=Math.min(n,i.top),a=Math.min(a,i.bottom),r=Math.max(r,i.top),o=Math.max(o,i.bottom))}return r<=a&&r-n<t&&o-a<t}function r(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}var o=n(102),l=n(627),i=n(30);e.exports=function(e){e.collapsed||i(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var n=function(e){var t=getComputedStyle(e),n=document.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M";var a=document.body;a||i(!1),a.appendChild(n);var r=n.getBoundingClientRect();return a.removeChild(n),r.height}(t),s=e.endContainer,u=e.endOffset;for(e.setStart(e.startContainer,0);a(l(e),n)&&(s=e.startContainer,u=e.startOffset,s.parentNode||i(!1),e.setStartBefore(s),1!==s.nodeType||"inline"===getComputedStyle(s).display););for(var c=s,d=u-1;;){for(var f=c.nodeValue,p=d;p>=0;p--)if(!(null!=f&&p>0&&o.isSurrogatePair(f,p-1))){if(e.setStart(c,p),!a(l(e),n))break;s=c,u=p}if(-1===p||0===c.childNodes.length)break;d=r(c=c.childNodes[p])}return e.setStart(s,u),e}},function(e,t,n){"use strict";var a=n(629),r=n(34),o=n(308),l=n(141);e.exports=function(e){var t=l(e,function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return o(e,1);var r=t.getStartKey(),l=e.getCurrentContent().getBlockForKey(r).getText().slice(0,n),i=a.getBackward(l);return o(e,i.length||1)},"backward");return t===e.getCurrentContent()?e:r.push(e,t,"remove-range")}},function(e,t,n){"use strict";e.exports={getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;-----------]"}}},function(e,t,n){"use strict";var a=n(629),r=n(34),o=n(630),l=n(141);e.exports=function(e){var t=l(e,function(e){var t=e.getSelection(),n=t.getStartOffset(),r=t.getStartKey(),l=e.getCurrentContent().getBlockForKey(r).getText().slice(n),i=a.getForward(l);return o(e,i.length||1)},"forward");return t===e.getCurrentContent()?e:r.push(e,t,"remove-range")}},function(e,t,n){"use strict";var a=n(57),r=n(34);e.exports=function(e){var t=a.splitBlock(e.getCurrentContent(),e.getSelection());return r.push(e,t,"split-block")}},function(e,t,n){"use strict";var a=n(34);e.exports=function(e){var t=e.getSelection(),n=t.getEndKey(),r=e.getCurrentContent().getBlockForKey(n).getLength();return a.set(e,{selection:t.merge({anchorKey:n,anchorOffset:r,focusKey:n,focusOffset:r,isBackward:!1}),forceSelection:!0})}},function(e,t,n){"use strict";var a=n(34);e.exports=function(e){var t=e.getSelection(),n=t.getStartKey();return a.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}},function(e,t,n){"use strict";var a=n(34),r=n(102),o=n(308),l=n(141);e.exports=function(e){var t=l(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),a=t.getAnchorKey(),l=t.getAnchorOffset(),i=n.getBlockForKey(a).getText()[l-1];return o(e,i?r.getUTF16Length(i,0):1)},"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return a.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}},function(e,t,n){"use strict";var a=n(34),r=n(102),o=n(630),l=n(141);e.exports=function(e){var t=l(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),a=t.getAnchorKey(),l=t.getAnchorOffset(),i=n.getBlockForKey(a).getText()[l];return o(e,i?r.getUTF16Length(i,0):1)},"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return a.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}},function(e,t,n){"use strict";var a=n(57),r=n(34),o=n(195);e.exports=function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var l=t.getAnchorKey(),i=e.getCurrentContent(),s=i.getBlockForKey(l).getLength();if(s<=1)return e;var u,c;n===s?(u=t.set("anchorOffset",n-1),c=t):c=(u=t.set("focusOffset",n+1)).set("anchorOffset",n+1);var d=o(i,u),f=a.removeRange(i,u,"backward"),p=f.getSelectionAfter(),h=p.getAnchorOffset()-1,m=p.merge({anchorOffset:h,focusOffset:h}),v=a.replaceWithFragment(f,m,d),y=r.push(e,v,"insert-fragment");return r.acceptSelection(y,c)}},function(e,t,n){"use strict";var a=n(34);e.exports=function(e,t,n){var r=a.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(n(a.set(t,{nativelyRenderedContent:null})),setTimeout(function(){n(r)},0)):n(r);else{var o=r.getCurrentContent();n(a.set(r,{nativelyRenderedContent:o}))}}},function(e,t,n){"use strict";function a(e,t,n){var a=i.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return u.push(e,a.set("entityMap",n),"insert-fragment")}var r=n(138),o=n(65),l=n(622),i=n(57),s=n(1383),u=n(34),c=n(633),d=n(302),f=n(624),p=n(198),h=n(1386);e.exports=function(e,t){t.preventDefault();var n=new l(t.clipboardData);if(!n.isRichText()){var m=n.getFiles(),v=n.getText();if(m.length>0){if(e.props.handlePastedFiles&&p(e.props.handlePastedFiles(m)))return;return void f(m,function(t){if(t=t||v){var n=e._latestEditorState,a=h(t),l=o.create({style:n.getCurrentInlineStyle(),entity:d(n.getCurrentContent(),n.getSelection())}),f=c.getCurrentBlockType(n),p=s.processText(a,l,f),m=r.createFromArray(p),y=i.replaceWithFragment(n.getCurrentContent(),n.getSelection(),m);e.update(u.push(n,y,"insert-fragment"))}})}}var y=[],g=n.getText(),E=n.getHTML(),b=e._latestEditorState;if(!e.props.handlePastedText||!p(e.props.handlePastedText(g,E,b))){if(g&&(y=h(g)),!e.props.stripPastedStyles){var _=e.getClipboard();if(n.isRichText()&&_){if(-1!==E.indexOf(e.getEditorKey())||1===y.length&&1===_.size&&_.first().getText()===g)return void e.update(a(e._latestEditorState,_))}else if(_&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every(function(t,n){return t.getText()===e[n]})}(y,_))return void e.update(a(e._latestEditorState,_));if(E){var C=s.processHTML(E,e.props.blockRenderMap);if(C){var w=C.contentBlocks,k=C.entityMap;if(w){var S=r.createFromArray(w);return void e.update(a(e._latestEditorState,S,k))}}}e.setClipboard(null)}if(y.length){var x=o.create({style:b.getCurrentInlineStyle(),entity:d(b.getCurrentContent(),b.getSelection())}),T=c.getCurrentBlockType(b),P=s.processText(y,x,T),R=r.createFromArray(P);e.update(a(e._latestEditorState,R))}}}},function(e,t,n){"use strict";n(65);var a=n(101),r=n(35),o=n(631),l=n(73),i=n(632),s=n(298),u=r.List,c=r.Repeat,d={processHTML:function(e,t){return o(e,i,t)},processText:function(e,t,n){return e.map(function(e){return e=s(e),new a({key:l(),type:n,text:e,characterList:u(c(t,e.length))})})}};e.exports=d},function(e,t,n){"use strict";var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uri=t}return e.prototype.toString=function(){return this._uri},e}();e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t,n,a){var r=t.getStartKey(),o=t.getEndKey(),l=e.getBlockMap(),i=l.toSeq().skipUntil(function(e,t){return t===r}).takeUntil(function(e,t){return t===o}).concat([[o,l.get(o)]]).map(function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,a)),e.set("depth",t)});return l=l.merge(i),e.merge({blockMap:l,selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var a=/\r\n?|\n/g;e.exports=function(e){return e.split(a)}},function(e,t,n){"use strict";var a=n(34),r=n(37),o=n(1388),l=n(30);e.exports=function(e){if(!e._blockSelectEvents&&e._latestEditorState===e.props.editorState){var t=e.props.editorState,n=r.findDOMNode(e.refs.editorContainer);n||l(!1),n.firstChild instanceof HTMLElement||l(!1);var i=o(t,n.firstChild),s=i.selectionState;s!==t.getSelection()&&(t=i.needsRecovery?a.forceSelection(t,s):a.acceptSelection(t,s),e.update(t))}}},function(e,t,n){"use strict";(function(t){var a=n(628);e.exports=function(e,n){var r=t.getSelection();return 0===r.rangeCount?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:a(e,n,r.anchorNode,r.anchorOffset,r.focusNode,r.focusOffset)}}).call(t,n(40))},function(e,t,n){"use strict";var a=n(0),r=n(140),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},t.prototype.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=r({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return a.createElement("div",{className:t},a.createElement("div",{className:r("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID},this.props.text))},t}(a.Component);e.exports=o},function(e,t,n){"use strict";var a=n(635),r=n(1391),o=n(1392);e.exports=function(e){var t=0,n={},l=[];e.getBlockMap().forEach(function(e,i){e.findEntityRanges(function(e){return null!==e.getEntity()},function(r){var o=a.stringify(e.getEntityAt(r));n.hasOwnProperty(o)||(n[o]=""+t++)}),l.push({key:i,text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:o(e),entityRanges:r(e,n),data:e.getData().toObject()})});var i={};return Object.keys(n).forEach(function(t,n){var r=e.getEntity(a.unstringify(t));i[n]={type:r.getType(),mutability:r.getMutability(),data:r.getData()}}),{entityMap:i,blocks:l}}},function(e,t,n){"use strict";var a=n(635),r=n(102).strlen;e.exports=function(e,t){var n=[];return e.findEntityRanges(function(e){return!!e.getEntity()},function(o,l){var i=e.getText(),s=e.getEntityAt(o);n.push({offset:r(i.slice(0,o)),length:r(i.slice(o,l)),key:Number(t[a.stringify(s)])})}),n}},function(e,t,n){"use strict";var a=n(102),r=n(194),o=function(e,t){return e===t},l=function(e){return!!e},i=[];e.exports=function(e){var t=e.getCharacterList().map(function(e){return e.getStyle()}).toList(),n=t.flatten().toSet().map(function(n){return function(e,t,n){var i=[],s=t.map(function(e){return e.has(n)}).toList();return r(s,o,l,function(t,r){var o=e.getText();i.push({offset:a.strlen(o.slice(0,t)),length:a.strlen(o.slice(t,r)),style:n})}),i}(e,t,n)});return Array.prototype.concat.apply(i,n.toJS())}},function(e,t,n){"use strict";var a=n(80)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(101),o=n(297),l=n(196),i=n(35),s=n(1394),u=n(1395),c=n(1396),d=n(73),f=i.Map;e.exports=function(e){var t=e.blocks,n=e.entityMap,i={};Object.keys(n).forEach(function(e){var t=n[e],a=t.type,r=t.mutability,o=t.data,s=l.__create(a,r,o||{});i[e]=s});var p=t.map(function(e){var t=e.key,n=e.type,o=e.text,l=e.depth,p=e.inlineStyleRanges,h=e.entityRanges,m=e.data;t=t||d(),n=n||"unstyled",l=l||0,p=p||[],h=h||[],m=f(m);var v=c(o,p),y=h.filter(function(e){return i.hasOwnProperty(e.key)}).map(function(e){return a({},e,{key:i[e.key]})}),g=u(o,y),E=s(v,g);return new r({key:t,type:n,text:o,depth:l,characterList:E,data:m})});return o.createFromBlockArray(p)}},function(e,t,n){"use strict";var a=n(65),r=n(35).List;e.exports=function(e,t){var n=e.map(function(e,n){var r=t[n];return a.create({style:e,entity:r})});return r(n)}},function(e,t,n){"use strict";var a=n(102).substr;e.exports=function(e,t){var n=Array(e.length).fill(null);return t&&t.forEach(function(t){for(var r=a(e,0,t.offset).length,o=r+a(e,t.offset,t.length).length,l=r;l<o;l++)n[l]=t.key}),n}},function(e,t,n){"use strict";var a=n(35).OrderedSet,r=n(102).substr,o=a();e.exports=function(e,t){var n=Array(e.length).fill(o);return t&&t.forEach(function(t){for(var a=r(e,0,t.offset).length,o=a+r(e,t.offset,t.length).length;a<o;)n[a]=n[a].add(t.style),a++}),n}},function(e,t,n){"use strict";var a=n(1398);e.exports=function(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=t.getRangeAt(0),r=a(n),o=r.top,l=r.right,i=r.bottom,s=r.left;return 0===o&&0===l&&0===i&&0===s?null:r}},function(e,t,n){"use strict";var a=n(627);e.exports=function(e){var t=a(e),n=0,r=0,o=0,l=0;if(t.length){if(t.length>1&&0===t[0].width){var i=t[1];n=i.top,r=i.right,o=i.bottom,l=i.left}else{var s=t[0];n=s.top,r=s.right,o=s.bottom,l=s.left}for(var u=1;u<t.length;u++){var c=t[u];0!==c.height&&0!==c.width&&(n=Math.min(n,c.top),r=Math.max(r,c.right),o=Math.max(o,c.bottom),l=Math.min(l,c.left))}}return{top:n,right:r,bottom:o,left:l,width:r-l,height:o-n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1400);Object.defineProperty(t,"stateToHTML",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(a).default}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){switch(e){case v.BLOCK_TYPE.HEADER_ONE:return["h1"];case v.BLOCK_TYPE.HEADER_TWO:return["h2"];case v.BLOCK_TYPE.HEADER_THREE:return["h3"];case v.BLOCK_TYPE.HEADER_FOUR:return["h4"];case v.BLOCK_TYPE.HEADER_FIVE:return["h5"];case v.BLOCK_TYPE.HEADER_SIX:return["h6"];case v.BLOCK_TYPE.UNORDERED_LIST_ITEM:case v.BLOCK_TYPE.ORDERED_LIST_ITEM:return["li"];case v.BLOCK_TYPE.BLOCKQUOTE:return["blockquote"];case v.BLOCK_TYPE.CODE:return["pre","code"];case v.BLOCK_TYPE.ATOMIC:return["figure"];default:return[t||"p"]}}function l(e){if(null==e)return"";var t=[],n=!0,a=!1,r=void 0;try{for(var o,l=Object.keys(e)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var i=o.value,s=e[i];null!=s&&t.push(" "+i+'="'+function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")}(s+"")+'"')}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}return t.join("")}Object.defineProperty(t,"__esModule",{value:!0});var i,s,u,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.default=function(e,t){return new P(e,t).generate()};var p=a(n(1401)),h=a(n(1402)),m=a(n(1403)),v=n(1404),y=v.INLINE_STYLE.BOLD,g=v.INLINE_STYLE.CODE,E=v.INLINE_STYLE.ITALIC,b=v.INLINE_STYLE.STRIKETHROUGH,_=v.INLINE_STYLE.UNDERLINE,C="<br>",w=/^data-([a-z0-9-]+)$/,k=(i={},r(i,y,{element:"strong"}),r(i,g,{element:"code"}),r(i,E,{element:"em"}),r(i,b,{element:"del"}),r(i,_,{element:"u"}),i),S=[y,E,_,b,g],x=(s={},r(s,v.ENTITY_TYPE.LINK,{url:"href",href:"href",rel:"rel",target:"target",title:"title",className:"class"}),r(s,v.ENTITY_TYPE.IMAGE,{src:"src",height:"height",width:"width",alt:"alt",className:"class"}),s),T=(u={},r(u,v.ENTITY_TYPE.LINK,function(e,t){var n=x.hasOwnProperty(e)?x[e]:{},a=t.getData(),r={},o=!0,l=!1,i=void 0;try{for(var s,u=Object.keys(a)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value,d=a[c];n.hasOwnProperty(c)?r[n[c]]=d:w.test(c)&&(r[c]=d)}}catch(e){l=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(l)throw i}}return r}),r(u,v.ENTITY_TYPE.IMAGE,function(e,t){var n=x.hasOwnProperty(e)?x[e]:{},a=t.getData(),r={},o=!0,l=!1,i=void 0;try{for(var s,u=Object.keys(a)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value,d=a[c];n.hasOwnProperty(c)?r[n[c]]=d:w.test(c)&&(r[c]=d)}}catch(e){l=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(l)throw i}}return r}),u),P=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==n&&(n={}),this.contentState=t,this.options=n;var a=(0,p.default)(n.inlineStyles,[k,S]),r=d(a,2),o=r[0],l=r[1];this.inlineStyles=o,this.styleOrder=l}return f(e,[{key:"generate",value:function(){for(this.output=[],this.blocks=this.contentState.getBlocksAsArray(),this.totalBlocks=this.blocks.length,this.currentBlock=0,this.indentLevel=0,this.wrapperTag=null;this.currentBlock<this.totalBlocks;)this.processBlock();return this.closeWrapperTag(),this.output.join("").trim()}},{key:"processBlock",value:function(){var e=this.options,t=e.blockRenderers,n=e.defaultBlockTag,a=this.blocks[this.currentBlock],r=a.getType(),o=function(e){switch(e){case v.BLOCK_TYPE.UNORDERED_LIST_ITEM:return"ul";case v.BLOCK_TYPE.ORDERED_LIST_ITEM:return"ol";default:return null}}(r);this.wrapperTag!==o&&(this.wrapperTag&&this.closeWrapperTag(),o&&this.openWrapperTag(o)),this.indent();var l=null!=t&&t.hasOwnProperty(r)?t[r]:null,i=l?l(a):null;if(null!=i)return this.output.push(i),this.output.push("\n"),void(this.currentBlock+=1);this.writeStartTag(a,n),this.output.push(this.renderBlockContent(a));var s=this.getNextBlock();if(function(e){switch(e){case v.BLOCK_TYPE.UNORDERED_LIST_ITEM:case v.BLOCK_TYPE.ORDERED_LIST_ITEM:return!0;default:return!1}}(r)&&s&&s.getDepth()===a.getDepth()+1){this.output.push("\n");var u=this.wrapperTag;this.wrapperTag=null,this.indentLevel+=1,this.currentBlock+=1,this.processBlocksAtDepth(s.getDepth()),this.wrapperTag=u,this.indentLevel-=1,this.indent()}else this.currentBlock+=1;this.writeEndTag(a,n)}},{key:"processBlocksAtDepth",value:function(e){for(var t=this.blocks[this.currentBlock];t&&t.getDepth()===e;)this.processBlock(),t=this.blocks[this.currentBlock];this.closeWrapperTag()}},{key:"getNextBlock",value:function(){return this.blocks[this.currentBlock+1]}},{key:"writeStartTag",value:function(e,t){var n=o(e.getType(),t),a=void 0;if(this.options.blockStyleFn){var r=this.options.blockStyleFn(e)||{},i=r.attributes,s=r.style;if(i=(0,h.default)(i),null!=s){var u=(0,m.default)(s);i=null==i?{style:u}:c({},i,{style:u})}a=l(i)}else a="";var d=!0,f=!1,p=void 0;try{for(var v,y=n[Symbol.iterator]();!(d=(v=y.next()).done);d=!0){var g=v.value;this.output.push("<"+g+a+">")}}catch(e){f=!0,p=e}finally{try{!d&&y.return&&y.return()}finally{if(f)throw p}}}},{key:"writeEndTag",value:function(e,t){var n=o(e.getType(),t);if(1===n.length)this.output.push("</"+n[0]+">\n");else{var a=[],r=!0,l=!1,i=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;a.unshift("</"+c+">")}}catch(e){l=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw i}}this.output.push(a.join("")+"\n")}}},{key:"openWrapperTag",value:function(e){this.wrapperTag=e,this.indent(),this.output.push("<"+e+">\n"),this.indentLevel+=1}},{key:"closeWrapperTag",value:function(){var e=this.wrapperTag;e&&(this.indentLevel-=1,this.indent(),this.output.push("</"+e+">\n"),this.wrapperTag=null)}},{key:"indent",value:function(){this.output.push("  ".repeat(this.indentLevel))}},{key:"renderBlockContent",value:function(e){var t=this,n=e.getType(),a=e.getText();if(""===a)return C;a=this.preserveWhitespace(a);var r=e.getCharacterList();return(0,v.getEntityRanges)(a,r).map(function(e){var a=d(e,2),r=a[0],o=a[1].map(function(e){var a=d(e,2),r=a[0],o=a[1],i=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split("").join("&nbsp;").split("\n").join(C+"\n")}(r),s=!0,u=!1,f=void 0;try{for(var p,y=t.styleOrder[Symbol.iterator]();!(s=(p=y.next()).done);s=!0){var E=p.value;if((E!==g||n!==v.BLOCK_TYPE.CODE)&&o.has(E)){var b=t.inlineStyles[E],_=b.element,w=b.attributes,k=b.style;if(null==_&&(_="span"),w=(0,h.default)(w),null!=k){var S=(0,m.default)(k);w=null==w?{style:S}:c({},w,{style:S})}i="<"+_+l(w)+">"+i+"</"+_+">"}}}catch(e){u=!0,f=e}finally{try{!s&&y.return&&y.return()}finally{if(u)throw f}}return i}).join(""),i=r?t.contentState.getEntity(r):null,s=null==i?null:i.getType().toUpperCase(),u=void 0;if(null!=i&&t.options.entityStyleFn&&(u=t.options.entityStyleFn(i))){var f=u,p=f.element,y=f.attributes,E=f.style;if(null==p&&(p="span"),y=(0,h.default)(y),null!=E){var b=(0,m.default)(E);y=null==y?{style:b}:c({},y,{style:b})}return"<"+p+l(y)+">"+o+"</"+p+">"}return null!=s&&s===v.ENTITY_TYPE.LINK?"<a"+l(T.hasOwnProperty(s)?T[s](s,i):null)+">"+o+"</a>":null!=s&&s===v.ENTITY_TYPE.IMAGE?"<img"+l(T.hasOwnProperty(s)?T[s](s,i):null)+"/>":o}).join("")}},{key:"preserveWhitespace",value:function(e){for(var t=e.length,n=new Array(t),a=0;a<t;a++)" "!==e[a]||0!==a&&a!==t-1&&" "!==e[a-1]?n[a]=e[a]:n[a]="";return n.join("")}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e,t){if(null==e)return t;var n=r(t,2),o=n[0],l=n[1],i=a({},o),s=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l)),u=!0,c=!1,d=void 0;try{for(var f,p=Object.keys(e)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;if(o.hasOwnProperty(h)){var m=o[h];i[h]=a({},m,e[h])}else i[h]=e[h],s.push(h)}}catch(e){c=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw d}}return[i,s]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"};t.default=function(e){if(null==e)return e;var t={},n=!1,r=!0,o=!1,l=void 0;try{for(var i,s=Object.keys(e)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value,c=u;a.hasOwnProperty(u)&&(c=a[u],n=!0),t[c]=e[u]}}catch(e){o=!0,l=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw l}}return n?t:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=/^(moz|ms|o|webkit)-/,r=/^\d+$/,o=/([A-Z])/g,l={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};t.default=function(e){return Object.keys(e).map(function(t){var n=function(e,t){var n=void 0;return"string"==typeof t?n=r.test(t):(n=!0,t=String(t)),n&&"0"!==t&&!0!==l[e]?t+"px":t}(t,e[t]);return function(e){return e.replace(o,"-$1").toLowerCase().replace(a,"-$1-")}(t)+": "+n}).join("; ")}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1405);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}),Object.defineProperty(t,"Constants",{enumerable:!0,get:function(){return a(r).default}});var o=n(1406);Object.defineProperty(t,"getEntityRanges",{enumerable:!0,get:function(){return a(o).default}});var l=n(309);Object.defineProperty(t,"getSelectedBlocks",{enumerable:!0,get:function(){return a(l).default}});var i=n(1408);Object.defineProperty(t,"selectionContainsEntity",{enumerable:!0,get:function(){return a(i).default}});var s=n(1409);Object.defineProperty(t,"callModifierForSelectedBlocks",{enumerable:!0,get:function(){return a(s).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=t.BLOCK_TYPE={UNSTYLED:"unstyled",HEADER_ONE:"header-one",HEADER_TWO:"header-two",HEADER_THREE:"header-three",HEADER_FOUR:"header-four",HEADER_FIVE:"header-five",HEADER_SIX:"header-six",UNORDERED_LIST_ITEM:"unordered-list-item",ORDERED_LIST_ITEM:"ordered-list-item",BLOCKQUOTE:"blockquote",PULLQUOTE:"pullquote",CODE:"code-block",ATOMIC:"atomic"},r=t.ENTITY_TYPE={LINK:"LINK",IMAGE:"IMAGE"},o=t.INLINE_STYLE={BOLD:"BOLD",CODE:"CODE",ITALIC:"ITALIC",STRIKETHROUGH:"STRIKETHROUGH",UNDERLINE:"UNDERLINE"};t.default={BLOCK_TYPE:a,ENTITY_TYPE:r,INLINE_STYLE:o}},function(e,t,n){"use strict";function a(e,t){for(var n=o,a=o,l=[],i=0,s=0,u=e.length;s<u;s++){a=n;var c=t.get(s);n=c?c.getStyle():o,s>0&&!(0,r.is)(n,a)&&(l.push([e.slice(i,s),a]),i=s)}return l.push([e.slice(i),n]),l}Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_SET=void 0,t.default=function(e,t){for(var n=null,r=null,o=[],l=0,i=0,s=e.length;i<s;i++){r=n;var u=t.get(i);n=u?u.getEntity():null,i>0&&n!==r&&(o.push([r,a(e.slice(l,i),t.slice(l,i))]),l=i)}return o.push([n,a(e.slice(l),t.slice(l))]),o};var r=n(1407),o=t.EMPTY_SET=new r.OrderedSet},function(e,t,n){!function(t,n){e.exports=function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return o(e)?e:R(e)}function n(e){return l(e)?e:O(e)}function a(e){return i(e)?e:D(e)}function r(e){return o(e)&&!s(e)?e:N(e)}function o(e){return!(!e||!e[Kt])}function l(e){return!(!e||!e[Wt])}function i(e){return!(!e||!e[zt])}function s(e){return l(e)||i(e)}function u(e){return!(!e||!e[Gt])}function c(e){return e.value=!1,e}function d(e){e&&(e.value=!0)}function f(){}function p(e,t){t=t||0;for(var n=Math.max(0,e.length-t),a=new Array(n),r=0;r<n;r++)a[r]=e[r+t];return a}function h(e){return void 0===e.size&&(e.size=e.__iterate(v)),e.size}function m(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?h(e)+t:t}function v(){return!0}function y(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function g(e,t){return b(e,t,0)}function E(e,t){return b(e,t,t)}function b(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function _(e){this.next=e}function C(e,t,n,a){var r=0===e?t:1===e?n:[t,n];return a?a.value=r:a={value:r,done:!1},a}function w(){return{value:void 0,done:!0}}function k(e){return!!T(e)}function S(e){return e&&"function"==typeof e.next}function x(e){var t=T(e);return t&&t.call(e)}function T(e){var t=e&&(nn&&e[nn]||e[an]);if("function"==typeof t)return t}function P(e){return e&&"number"==typeof e.length}function R(e){return null===e||void 0===e?j():o(e)?e.toSeq():function(e){var t=H(e)||"object"==typeof e&&new M(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function O(e){return null===e||void 0===e?j().toKeyedSeq():o(e)?l(e)?e.toSeq():e.fromEntrySeq():B(e)}function D(e){return null===e||void 0===e?j():o(e)?l(e)?e.entrySeq():e.toIndexedSeq():U(e)}function N(e){return(null===e||void 0===e?j():o(e)?l(e)?e.entrySeq():e:U(e)).toSetSeq()}function I(e){this._array=e,this.size=e.length}function M(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function A(e){this._iterable=e,this.size=e.length||e.size}function F(e){this._iterator=e,this._iteratorCache=[]}function L(e){return!(!e||!e[on])}function j(){return ln||(ln=new I([]))}function B(e){var t=Array.isArray(e)?new I(e).fromEntrySeq():S(e)?new F(e).fromEntrySeq():k(e)?new A(e).fromEntrySeq():"object"==typeof e?new M(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function U(e){var t=H(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function H(e){return P(e)?new I(e):S(e)?new F(e):k(e)?new A(e):void 0}function q(e,t,n,a){var r=e._cache;if(r){for(var o=r.length-1,l=0;l<=o;l++){var i=r[n?o-l:l];if(!1===t(i[1],a?i[0]:l,e))return l+1}return l}return e.__iterateUncached(t,n)}function K(e,t,n,a){var r=e._cache;if(r){var o=r.length-1,l=0;return new _(function(){var e=r[n?o-l:l];return l++>o?{value:void 0,done:!0}:C(t,a?e[0]:l-1,e[1])})}return e.__iteratorUncached(t,n)}function W(e,t){return t?z(t,e,"",{"":e}):G(e)}function z(e,t,n,a){return Array.isArray(t)?e.call(a,n,D(t).map(function(n,a){return z(e,n,a,t)})):V(t)?e.call(a,n,O(t).map(function(n,a){return z(e,n,a,t)})):t}function G(e){return Array.isArray(e)?D(e).map(G).toList():V(e)?O(e).map(G).toMap():e}function V(e){return e&&(e.constructor===Object||void 0===e.constructor)}function $(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function Y(e,t){if(e===t)return!0;if(!o(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||l(e)!==l(t)||i(e)!==i(t)||u(e)!==u(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!s(e);if(u(e)){var a=e.entries();return t.every(function(e,t){var r=a.next().value;return r&&$(r[1],e)&&(n||$(r[0],t))})&&a.next().done}var r=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{r=!0;var c=e;e=t,t=c}var d=!0,f=t.__iterate(function(t,a){if(n?!e.has(t):r?!$(t,e.get(a,Jt)):!$(e.get(a,Jt),t))return d=!1,!1});return d&&e.size===f}function J(e,t){if(!(this instanceof J))return new J(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(sn)return sn;sn=this}}function X(e,t){if(!e)throw new Error(t)}function Q(e,t,n){if(!(this instanceof Q))return new Q(e,t,n);if(X(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(un)return un;un=this}}function Z(){throw TypeError("Abstract")}function ee(){}function te(){}function ne(){}function ae(e){return e>>>1&1073741824|3221225471&e}function re(e){if(!1===e||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!=e||e===1/0)return 0;var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)n^=e/=4294967295;return ae(n)}if("string"===t)return e.length>yn?function(e){var t=bn[e];return void 0===t&&(t=oe(e),En===gn&&(En=0,bn={}),En++,bn[e]=t),t}(e):oe(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(hn&&void 0!==(t=cn.get(e)))return t;if(void 0!==(t=e[vn]))return t;if(!pn){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[vn]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++mn,1073741824&mn&&(mn=0),hn)cn.set(e,t);else{if(void 0!==fn&&!1===fn(e))throw new Error("Non-extensible objects are not allowed as keys.");if(pn)Object.defineProperty(e,vn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[vn]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[vn]=t}}return t}(e);if("function"==typeof e.toString)return oe(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function oe(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ae(t)}function le(e){X(e!==1/0,"Cannot perform this action with an infinite size.")}function ie(e){return null===e||void 0===e?ge():se(e)&&!u(e)?e:ge().withMutations(function(t){var a=n(e);le(a.size),a.forEach(function(e,n){return t.set(n,e)})})}function se(e){return!(!e||!e[_n])}function ue(e,t){this.ownerID=e,this.entries=t}function ce(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function de(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function fe(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function pe(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function he(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&ve(e._root)}function me(e,t){return C(e,t[0],t[1])}function ve(e,t){return{node:e,index:0,__prev:t}}function ye(e,t,n,a){var r=Object.create(Cn);return r.size=e,r._root=t,r.__ownerID=n,r.__hash=a,r.__altered=!1,r}function ge(){return wn||(wn=ye(0))}function Ee(e,t,n){var a,r;if(e._root){var o=c(Xt),l=c(Qt);if(a=be(e._root,e.__ownerID,0,void 0,t,n,o,l),!l.value)return e;r=e.size+(o.value?n===Jt?-1:1:0)}else{if(n===Jt)return e;r=1,a=new ue(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=r,e._root=a,e.__hash=void 0,e.__altered=!0,e):a?ye(r,a):ge()}function be(e,t,n,a,r,o,l,i){return e?e.update(t,n,a,r,o,l,i):o===Jt?e:(d(i),d(l),new pe(t,a,[r,o]))}function _e(e){return e.constructor===pe||e.constructor===fe}function Ce(e,t,n,a,r){if(e.keyHash===a)return new fe(t,a,[e.entry,r]);var o,l=(0===n?e.keyHash:e.keyHash>>>n)&Yt,i=(0===n?a:a>>>n)&Yt;return new ce(t,1<<l|1<<i,l===i?[Ce(e,t,n+Vt,a,r)]:(o=new pe(t,a,r),l<i?[e,o]:[o,e]))}function we(e,t,a){for(var r=[],l=0;l<a.length;l++){var i=a[l],s=n(i);o(i)||(s=s.map(function(e){return W(e)})),r.push(s)}return xe(e,t,r)}function ke(e,t,n){return e&&e.mergeDeep&&o(t)?e.mergeDeep(t):$(e,t)?e:t}function Se(e){return function(t,n,a){if(t&&t.mergeDeepWith&&o(n))return t.mergeDeepWith(e,n);var r=e(t,n,a);return $(t,r)?t:r}}function xe(e,t,n){return 0===(n=n.filter(function(e){return 0!==e.size})).length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var a=t?function(n,a){e.update(a,Jt,function(e){return e===Jt?n:t(e,n,a)})}:function(t,n){e.set(n,t)},r=0;r<n.length;r++)n[r].forEach(a)}):e.constructor(n[0])}function Te(e,t,n,a){var r=e===Jt,o=t.next();if(o.done){var l=r?n:e,i=a(l);return i===l?e:i}X(r||e&&e.set,"invalid keyPath");var s=o.value,u=r?Jt:e.get(s,Jt),c=Te(u,t,n,a);return c===u?e:c===Jt?e.remove(s):(r?ge():e).set(s,c)}function Pe(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function Re(e,t,n,a){var r=a?e:p(e);return r[t]=n,r}function Oe(e){var t=Ae();if(null===e||void 0===e)return t;if(De(e))return e;var n=a(e),r=n.size;return 0===r?t:(le(r),r>0&&r<$t?Me(0,r,Vt,null,new Ne(n.toArray())):t.withMutations(function(e){e.setSize(r),n.forEach(function(t,n){return e.set(n,t)})}))}function De(e){return!(!e||!e[Tn])}function Ne(e,t){this.array=e,this.ownerID=t}function Ie(e,t){function n(e,i,s){return 0===i?function(e,n){var i=n===o?l&&l.array:e&&e.array,s=n>a?0:a-n,u=r-n;return u>$t&&(u=$t),function(){if(s===u)return On;var e=t?--u:s++;return i&&i[e]}}(e,s):function(e,o,l){var i,s=e&&e.array,u=l>a?0:a-l>>o,c=1+(r-l>>o);return c>$t&&(c=$t),function(){for(;;){if(i){var e=i();if(e!==On)return e;i=null}if(u===c)return On;var a=t?--c:u++;i=n(s&&s[a],o-Vt,l+(a<<o))}}}(e,i,s)}var a=e._origin,r=e._capacity,o=He(r),l=e._tail;return n(e._root,e._level,0)}function Me(e,t,n,a,r,o,l){var i=Object.create(Pn);return i.size=t-e,i._origin=e,i._capacity=t,i._level=n,i._root=a,i._tail=r,i.__ownerID=o,i.__hash=l,i.__altered=!1,i}function Ae(){return Rn||(Rn=Me(0,0,Vt))}function Fe(e,t,n,a,r,o){var l=a>>>n&Yt,i=e&&l<e.array.length;if(!i&&void 0===r)return e;var s;if(n>0){var u=e&&e.array[l],c=Fe(u,t,n-Vt,a,r,o);return c===u?e:(s=Le(e,t),s.array[l]=c,s)}return i&&e.array[l]===r?e:(d(o),s=Le(e,t),void 0===r&&l===s.array.length-1?s.array.pop():s.array[l]=r,s)}function Le(e,t){return t&&e&&t===e.ownerID?e:new Ne(e?e.array.slice():[],t)}function je(e,t){if(t>=He(e._capacity))return e._tail;if(t<1<<e._level+Vt){for(var n=e._root,a=e._level;n&&a>0;)n=n.array[t>>>a&Yt],a-=Vt;return n}}function Be(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var a=e.__ownerID||new f,r=e._origin,o=e._capacity,l=r+t,i=void 0===n?o:n<0?o+n:r+n;if(l===r&&i===o)return e;if(l>=i)return e.clear();for(var s=e._level,u=e._root,c=0;l+c<0;)u=new Ne(u&&u.array.length?[void 0,u]:[],a),c+=1<<(s+=Vt);c&&(l+=c,r+=c,i+=c,o+=c);for(var d=He(o),p=He(i);p>=1<<s+Vt;)u=new Ne(u&&u.array.length?[u]:[],a),s+=Vt;var h=e._tail,m=p<d?je(e,i-1):p>d?new Ne([],a):h;if(h&&p>d&&l<o&&h.array.length){for(var v=u=Le(u,a),y=s;y>Vt;y-=Vt){var g=d>>>y&Yt;v=v.array[g]=Le(v.array[g],a)}v.array[d>>>Vt&Yt]=h}if(i<o&&(m=m&&m.removeAfter(a,0,i)),l>=p)l-=p,i-=p,s=Vt,u=null,m=m&&m.removeBefore(a,0,l);else if(l>r||p<d){for(c=0;u;){var E=l>>>s&Yt;if(E!==p>>>s&Yt)break;E&&(c+=(1<<s)*E),s-=Vt,u=u.array[E]}u&&l>r&&(u=u.removeBefore(a,s,l-c)),u&&p<d&&(u=u.removeAfter(a,s,p-c)),c&&(l-=c,i-=c)}return e.__ownerID?(e.size=i-l,e._origin=l,e._capacity=i,e._level=s,e._root=u,e._tail=m,e.__hash=void 0,e.__altered=!0,e):Me(l,i,s,u,m)}function Ue(e,t,n){for(var r=[],l=0,i=0;i<n.length;i++){var s=n[i],u=a(s);u.size>l&&(l=u.size),o(s)||(u=u.map(function(e){return W(e)})),r.push(u)}return l>e.size&&(e=e.setSize(l)),xe(e,t,r)}function He(e){return e<$t?0:e-1>>>Vt<<Vt}function qe(e){return null===e||void 0===e?ze():Ke(e)?e:ze().withMutations(function(t){var a=n(e);le(a.size),a.forEach(function(e,n){return t.set(n,e)})})}function Ke(e){return se(e)&&u(e)}function We(e,t,n,a){var r=Object.create(qe.prototype);return r.size=e?e.size:0,r._map=e,r._list=t,r.__ownerID=n,r.__hash=a,r}function ze(){return Dn||(Dn=We(ge(),Ae()))}function Ge(e,t,n){var a,r,o=e._map,l=e._list,i=o.get(t),s=void 0!==i;if(n===Jt){if(!s)return e;l.size>=$t&&l.size>=2*o.size?(a=(r=l.filter(function(e,t){return void 0!==e&&i!==t})).toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(a.__ownerID=r.__ownerID=e.__ownerID)):(a=o.remove(t),r=i===l.size-1?l.pop():l.set(i,void 0))}else if(s){if(n===l.get(i)[1])return e;a=o,r=l.set(i,[t,n])}else a=o.set(t,l.size),r=l.set(l.size,[t,n]);return e.__ownerID?(e.size=a.size,e._map=a,e._list=r,e.__hash=void 0,e):We(a,r)}function Ve(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function $e(e){this._iter=e,this.size=e.size}function Ye(e){this._iter=e,this.size=e.size}function Je(e){this._iter=e,this.size=e.size}function Xe(e){var t=ft(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=pt,t.__iterateUncached=function(t,n){var a=this;return e.__iterate(function(e,n){return!1!==t(n,e,a)},n)},t.__iteratorUncached=function(t,n){if(t===tn){var a=e.__iterator(t,n);return new _(function(){var e=a.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===en?Zt:en,n)},t}function Qe(e,t,n){var a=ft(e);return a.size=e.size,a.has=function(t){return e.has(t)},a.get=function(a,r){var o=e.get(a,Jt);return o===Jt?r:t.call(n,o,a,e)},a.__iterateUncached=function(a,r){var o=this;return e.__iterate(function(e,r,l){return!1!==a(t.call(n,e,r,l),r,o)},r)},a.__iteratorUncached=function(a,r){var o=e.__iterator(tn,r);return new _(function(){var r=o.next();if(r.done)return r;var l=r.value,i=l[0];return C(a,i,t.call(n,l[1],i,e),r)})},a}function Ze(e,t){var n=ft(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Xe(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,a){return e.get(t?n:-1-n,a)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=pt,n.__iterate=function(t,n){var a=this;return e.__iterate(function(e,n){return t(e,n,a)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function et(e,t,n,a){var r=ft(e);return a&&(r.has=function(a){var r=e.get(a,Jt);return r!==Jt&&!!t.call(n,r,a,e)},r.get=function(a,r){var o=e.get(a,Jt);return o!==Jt&&t.call(n,o,a,e)?o:r}),r.__iterateUncached=function(r,o){var l=this,i=0;return e.__iterate(function(e,o,s){if(t.call(n,e,o,s))return i++,r(e,a?o:i-1,l)},o),i},r.__iteratorUncached=function(r,o){var l=e.__iterator(tn,o),i=0;return new _(function(){for(;;){var o=l.next();if(o.done)return o;var s=o.value,u=s[0],c=s[1];if(t.call(n,c,u,e))return C(r,a?u:i++,c,o)}})},r}function tt(e,t,n,a){var r=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n===1/0?n=r:n|=0),y(t,n,r))return e;var o=g(t,r),l=E(n,r);if(o!=o||l!=l)return tt(e.toSeq().cacheResult(),t,n,a);var i,s=l-o;s==s&&(i=s<0?0:s);var u=ft(e);return u.size=0===i?i:e.size&&i||void 0,!a&&L(e)&&i>=0&&(u.get=function(t,n){return(t=m(this,t))>=0&&t<i?e.get(t+o,n):n}),u.__iterateUncached=function(t,n){var r=this;if(0===i)return 0;if(n)return this.cacheResult().__iterate(t,n);var l=0,s=!0,u=0;return e.__iterate(function(e,n){if(!s||!(s=l++<o))return u++,!1!==t(e,a?n:u-1,r)&&u!==i}),u},u.__iteratorUncached=function(t,n){if(0!==i&&n)return this.cacheResult().__iterator(t,n);var r=0!==i&&e.__iterator(t,n),l=0,s=0;return new _(function(){for(;l++<o;)r.next();if(++s>i)return{value:void 0,done:!0};var e=r.next();return a||t===en?e:C(t,s-1,t===Zt?void 0:e.value[1],e)})},u}function nt(e,t,n,a){var r=ft(e);return r.__iterateUncached=function(r,o){var l=this;if(o)return this.cacheResult().__iterate(r,o);var i=!0,s=0;return e.__iterate(function(e,o,u){if(!i||!(i=t.call(n,e,o,u)))return s++,r(e,a?o:s-1,l)}),s},r.__iteratorUncached=function(r,o){var l=this;if(o)return this.cacheResult().__iterator(r,o);var i=e.__iterator(tn,o),s=!0,u=0;return new _(function(){var e,o,c;do{if((e=i.next()).done)return a||r===en?e:C(r,u++,r===Zt?void 0:e.value[1],e);var d=e.value;o=d[0],c=d[1],s&&(s=t.call(n,c,o,l))}while(s);return r===tn?e:C(r,o,c,e)})},r}function at(e,t,n){var a=ft(e);return a.__iterateUncached=function(a,r){function l(e,u){var c=this;e.__iterate(function(e,r){return(!t||u<t)&&o(e)?l(e,u+1):!1===a(e,n?r:i++,c)&&(s=!0),!s},r)}var i=0,s=!1;return l(e,0),i},a.__iteratorUncached=function(a,r){var l=e.__iterator(a,r),i=[],s=0;return new _(function(){for(;l;){var e=l.next();if(!1===e.done){var u=e.value;if(a===tn&&(u=u[1]),t&&!(i.length<t)||!o(u))return n?e:C(a,s++,u,e);i.push(l),l=u.__iterator(a,r)}else l=i.pop()}return{value:void 0,done:!0}})},a}function rt(e,t,n){t||(t=ht);var a=l(e),r=0,o=e.toSeq().map(function(t,a){return[a,t,r++,n?n(t,a,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(a?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),a?O(o):i(e)?D(o):N(o)}function ot(e,t,n){if(t||(t=ht),n){var a=e.toSeq().map(function(t,a){return[t,n(t,a,e)]}).reduce(function(e,n){return lt(t,e[1],n[1])?n:e});return a&&a[0]}return e.reduce(function(e,n){return lt(t,e,n)?n:e})}function lt(e,t,n){var a=e(n,t);return 0===a&&n!==t&&(void 0===n||null===n||n!=n)||a>0}function it(e,n,a){var r=ft(e);return r.size=new I(a).map(function(e){return e.size}).min(),r.__iterate=function(e,t){for(var n,a=this.__iterator(en,t),r=0;!(n=a.next()).done&&!1!==e(n.value,r++,this););return r},r.__iteratorUncached=function(e,r){var o=a.map(function(e){return e=t(e),x(r?e.reverse():e)}),l=0,i=!1;return new _(function(){var t;return i||(t=o.map(function(e){return e.next()}),i=t.some(function(e){return e.done})),i?{value:void 0,done:!0}:C(e,l++,n.apply(null,t.map(function(e){return e.value})))})},r}function st(e,t){return L(e)?t:e.constructor(t)}function ut(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function ct(e){return le(e.size),h(e)}function dt(e){return l(e)?n:i(e)?a:r}function ft(e){return Object.create((l(e)?O:i(e)?D:N).prototype)}function pt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):R.prototype.cacheResult.call(this)}function ht(e,t){return e>t?1:e<t?-1:0}function mt(e){var n=x(e);if(!n){if(!P(e))throw new TypeError("Expected iterable or array-like: "+e);n=x(t(e))}return n}function vt(e,t){var n,a=function(o){if(o instanceof a)return o;if(!(this instanceof a))return new a(o);if(!n){n=!0;var l=Object.keys(e);!function(e,t){try{t.forEach(function(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){X(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}.bind(void 0,e))}catch(e){}}(r,l),r.size=l.length,r._name=t,r._keys=l,r._defaultValues=e}this._map=ie(o)},r=a.prototype=Object.create(Nn);return r.constructor=a,a}function yt(e,t,n){var a=Object.create(Object.getPrototypeOf(e));return a._map=t,a.__ownerID=n,a}function gt(e){return e._name||e.constructor.name||"Record"}function Et(e){return null===e||void 0===e?wt():bt(e)&&!u(e)?e:wt().withMutations(function(t){var n=r(e);le(n.size),n.forEach(function(e){return t.add(e)})})}function bt(e){return!(!e||!e[In])}function _t(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Ct(e,t){var n=Object.create(Mn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function wt(){return An||(An=Ct(ge()))}function kt(e){return null===e||void 0===e?Tt():St(e)?e:Tt().withMutations(function(t){var n=r(e);le(n.size),n.forEach(function(e){return t.add(e)})})}function St(e){return bt(e)&&u(e)}function xt(e,t){var n=Object.create(Fn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Tt(){return Ln||(Ln=xt(ze()))}function Pt(e){return null===e||void 0===e?Dt():Rt(e)?e:Dt().unshiftAll(e)}function Rt(e){return!(!e||!e[jn])}function Ot(e,t,n,a){var r=Object.create(Bn);return r.size=e,r._head=t,r.__ownerID=n,r.__hash=a,r.__altered=!1,r}function Dt(){return Un||(Un=Ot(0))}function Nt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function It(e,t){return t}function Mt(e,t){return[t,e]}function At(e){return function(){return!e.apply(this,arguments)}}function Ft(e){return function(){return-e.apply(this,arguments)}}function Lt(e){return"string"==typeof e?JSON.stringify(e):String(e)}function jt(){return p(arguments)}function Bt(e,t){return e<t?1:e>t?-1:0}function Ut(e){if(e.size===1/0)return 0;var t=u(e),n=l(e),a=t?1:0;return function(e,t){return t=dn(t,3432918353),t=dn(t<<15|t>>>-15,461845907),t=dn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=dn(t^t>>>16,2246822507),t=dn(t^t>>>13,3266489909),t=ae(t^t>>>16)}(e.__iterate(n?t?function(e,t){a=31*a+Ht(re(e),re(t))|0}:function(e,t){a=a+Ht(re(e),re(t))|0}:t?function(e){a=31*a+re(e)|0}:function(e){a=a+re(e)|0}),a)}function Ht(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var qt=Array.prototype.slice;e(n,t),e(a,t),e(r,t),t.isIterable=o,t.isKeyed=l,t.isIndexed=i,t.isAssociative=s,t.isOrdered=u,t.Keyed=n,t.Indexed=a,t.Set=r;var Kt="@@__IMMUTABLE_ITERABLE__@@",Wt="@@__IMMUTABLE_KEYED__@@",zt="@@__IMMUTABLE_INDEXED__@@",Gt="@@__IMMUTABLE_ORDERED__@@",Vt=5,$t=1<<Vt,Yt=$t-1,Jt={},Xt={value:!1},Qt={value:!1},Zt=0,en=1,tn=2,nn="function"==typeof Symbol&&Symbol.iterator,an="@@iterator",rn=nn||an;_.prototype.toString=function(){return"[Iterator]"},_.KEYS=Zt,_.VALUES=en,_.ENTRIES=tn,_.prototype.inspect=_.prototype.toSource=function(){return this.toString()},_.prototype[rn]=function(){return this},e(R,t),R.of=function(){return R(arguments)},R.prototype.toSeq=function(){return this},R.prototype.toString=function(){return this.__toString("Seq {","}")},R.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},R.prototype.__iterate=function(e,t){return q(this,e,t,!0)},R.prototype.__iterator=function(e,t){return K(this,e,t,!0)},e(O,R),O.prototype.toKeyedSeq=function(){return this},e(D,R),D.of=function(){return D(arguments)},D.prototype.toIndexedSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq [","]")},D.prototype.__iterate=function(e,t){return q(this,e,t,!1)},D.prototype.__iterator=function(e,t){return K(this,e,t,!1)},e(N,R),N.of=function(){return N(arguments)},N.prototype.toSetSeq=function(){return this},R.isSeq=L,R.Keyed=O,R.Set=N,R.Indexed=D;var on="@@__IMMUTABLE_SEQ__@@";R.prototype[on]=!0,e(I,D),I.prototype.get=function(e,t){return this.has(e)?this._array[m(this,e)]:t},I.prototype.__iterate=function(e,t){for(var n=this._array,a=n.length-1,r=0;r<=a;r++)if(!1===e(n[t?a-r:r],r,this))return r+1;return r},I.prototype.__iterator=function(e,t){var n=this._array,a=n.length-1,r=0;return new _(function(){return r>a?{value:void 0,done:!0}:C(e,r,n[t?a-r++:r++])})},e(M,O),M.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},M.prototype.has=function(e){return this._object.hasOwnProperty(e)},M.prototype.__iterate=function(e,t){for(var n=this._object,a=this._keys,r=a.length-1,o=0;o<=r;o++){var l=a[t?r-o:o];if(!1===e(n[l],l,this))return o+1}return o},M.prototype.__iterator=function(e,t){var n=this._object,a=this._keys,r=a.length-1,o=0;return new _(function(){var l=a[t?r-o:o];return o++>r?{value:void 0,done:!0}:C(e,l,n[l])})},M.prototype[Gt]=!0,e(A,D),A.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=x(this._iterable),a=0;if(S(n))for(var r;!(r=n.next()).done&&!1!==e(r.value,a++,this););return a},A.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=x(this._iterable);if(!S(n))return new _(w);var a=0;return new _(function(){var t=n.next();return t.done?t:C(e,a++,t.value)})},e(F,D),F.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,a=this._iteratorCache,r=0;r<a.length;)if(!1===e(a[r],r++,this))return r;for(var o;!(o=n.next()).done;){var l=o.value;if(a[r]=l,!1===e(l,r++,this))break}return r},F.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,a=this._iteratorCache,r=0;return new _(function(){if(r>=a.length){var t=n.next();if(t.done)return t;a[r]=t.value}return C(e,r,a[r++])})};var ln;e(J,D),J.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},J.prototype.get=function(e,t){return this.has(e)?this._value:t},J.prototype.includes=function(e){return $(this._value,e)},J.prototype.slice=function(e,t){var n=this.size;return y(e,t,n)?this:new J(this._value,E(t,n)-g(e,n))},J.prototype.reverse=function(){return this},J.prototype.indexOf=function(e){return $(this._value,e)?0:-1},J.prototype.lastIndexOf=function(e){return $(this._value,e)?this.size:-1},J.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},J.prototype.__iterator=function(e,t){var n=this,a=0;return new _(function(){return a<n.size?C(e,a++,n._value):{value:void 0,done:!0}})},J.prototype.equals=function(e){return e instanceof J?$(this._value,e._value):Y(e)};var sn;e(Q,D),Q.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Q.prototype.get=function(e,t){return this.has(e)?this._start+m(this,e)*this._step:t},Q.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Q.prototype.slice=function(e,t){return y(e,t,this.size)?this:(e=g(e,this.size),(t=E(t,this.size))<=e?new Q(0,0):new Q(this.get(e,this._end),this.get(t,this._end),this._step))},Q.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Q.prototype.lastIndexOf=function(e){return this.indexOf(e)},Q.prototype.__iterate=function(e,t){for(var n=this.size-1,a=this._step,r=t?this._start+n*a:this._start,o=0;o<=n;o++){if(!1===e(r,o,this))return o+1;r+=t?-a:a}return o},Q.prototype.__iterator=function(e,t){var n=this.size-1,a=this._step,r=t?this._start+n*a:this._start,o=0;return new _(function(){var l=r;return r+=t?-a:a,o>n?{value:void 0,done:!0}:C(e,o++,l)})},Q.prototype.equals=function(e){return e instanceof Q?this._start===e._start&&this._end===e._end&&this._step===e._step:Y(this,e)};var un;e(Z,t),e(ee,Z),e(te,Z),e(ne,Z),Z.Keyed=ee,Z.Indexed=te,Z.Set=ne;var cn,dn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),a=65535&(t|=0);return n*a+((e>>>16)*a+n*(t>>>16)<<16>>>0)|0},fn=Object.isExtensible,pn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),hn="function"==typeof WeakMap;hn&&(cn=new WeakMap);var mn=0,vn="__immutablehash__";"function"==typeof Symbol&&(vn=Symbol(vn));var yn=16,gn=255,En=0,bn={};e(ie,ee),ie.of=function(){var e=qt.call(arguments,0);return ge().withMutations(function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}})},ie.prototype.toString=function(){return this.__toString("Map {","}")},ie.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},ie.prototype.set=function(e,t){return Ee(this,e,t)},ie.prototype.setIn=function(e,t){return this.updateIn(e,Jt,function(){return t})},ie.prototype.remove=function(e){return Ee(this,e,Jt)},ie.prototype.deleteIn=function(e){return this.updateIn(e,function(){return Jt})},ie.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},ie.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var a=Te(this,mt(e),t,n);return a===Jt?void 0:a},ie.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ge()},ie.prototype.merge=function(){return we(this,void 0,arguments)},ie.prototype.mergeWith=function(e){return we(this,e,qt.call(arguments,1))},ie.prototype.mergeIn=function(e){var t=qt.call(arguments,1);return this.updateIn(e,ge(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},ie.prototype.mergeDeep=function(){return we(this,ke,arguments)},ie.prototype.mergeDeepWith=function(e){var t=qt.call(arguments,1);return we(this,Se(e),t)},ie.prototype.mergeDeepIn=function(e){var t=qt.call(arguments,1);return this.updateIn(e,ge(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},ie.prototype.sort=function(e){return qe(rt(this,e))},ie.prototype.sortBy=function(e,t){return qe(rt(this,t,e))},ie.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},ie.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new f)},ie.prototype.asImmutable=function(){return this.__ensureOwner()},ie.prototype.wasAltered=function(){return this.__altered},ie.prototype.__iterator=function(e,t){return new he(this,e,t)},ie.prototype.__iterate=function(e,t){var n=this,a=0;return this._root&&this._root.iterate(function(t){return a++,e(t[1],t[0],n)},t),a},ie.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?ye(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},ie.isMap=se;var _n="@@__IMMUTABLE_MAP__@@",Cn=ie.prototype;Cn[_n]=!0,Cn.delete=Cn.remove,Cn.removeIn=Cn.deleteIn,ue.prototype.get=function(e,t,n,a){for(var r=this.entries,o=0,l=r.length;o<l;o++)if($(n,r[o][0]))return r[o][1];return a},ue.prototype.update=function(e,t,n,a,r,o,l){for(var i=r===Jt,s=this.entries,u=0,c=s.length;u<c&&!$(a,s[u][0]);u++);var h=u<c;if(h?s[u][1]===r:i)return this;if(d(l),(i||!h)&&d(o),!i||1!==s.length){if(!h&&!i&&s.length>=kn)return function(e,t,n,a){e||(e=new f);for(var r=new pe(e,re(n),[n,a]),o=0;o<t.length;o++){var l=t[o];r=r.update(e,0,void 0,l[0],l[1])}return r}(e,s,a,r);var m=e&&e===this.ownerID,v=m?s:p(s);return h?i?u===c-1?v.pop():v[u]=v.pop():v[u]=[a,r]:v.push([a,r]),m?(this.entries=v,this):new ue(e,v)}},ce.prototype.get=function(e,t,n,a){void 0===t&&(t=re(n));var r=1<<((0===e?t:t>>>e)&Yt),o=this.bitmap;return 0==(o&r)?a:this.nodes[Pe(o&r-1)].get(e+Vt,t,n,a)},ce.prototype.update=function(e,t,n,a,r,o,l){void 0===n&&(n=re(a));var i=(0===t?n:n>>>t)&Yt,s=1<<i,u=this.bitmap,c=0!=(u&s);if(!c&&r===Jt)return this;var d=Pe(u&s-1),f=this.nodes,p=c?f[d]:void 0,h=be(p,e,t+Vt,n,a,r,o,l);if(h===p)return this;if(!c&&h&&f.length>=Sn)return function(e,t,n,a,r){for(var o=0,l=new Array($t),i=0;0!==n;i++,n>>>=1)l[i]=1&n?t[o++]:void 0;return l[a]=r,new de(e,o+1,l)}(e,f,u,i,h);if(c&&!h&&2===f.length&&_e(f[1^d]))return f[1^d];if(c&&h&&1===f.length&&_e(h))return h;var m=e&&e===this.ownerID,v=c?h?u:u^s:u|s,y=c?h?Re(f,d,h,m):function(e,t,n){var a=e.length-1;if(n&&t===a)return e.pop(),e;for(var r=new Array(a),o=0,l=0;l<a;l++)l===t&&(o=1),r[l]=e[l+o];return r}(f,d,m):function(e,t,n,a){var r=e.length+1;if(a&&t+1===r)return e[t]=n,e;for(var o=new Array(r),l=0,i=0;i<r;i++)i===t?(o[i]=n,l=-1):o[i]=e[i+l];return o}(f,d,h,m);return m?(this.bitmap=v,this.nodes=y,this):new ce(e,v,y)},de.prototype.get=function(e,t,n,a){void 0===t&&(t=re(n));var r=(0===e?t:t>>>e)&Yt,o=this.nodes[r];return o?o.get(e+Vt,t,n,a):a},de.prototype.update=function(e,t,n,a,r,o,l){void 0===n&&(n=re(a));var i=(0===t?n:n>>>t)&Yt,s=r===Jt,u=this.nodes,c=u[i];if(s&&!c)return this;var d=be(c,e,t+Vt,n,a,r,o,l);if(d===c)return this;var f=this.count;if(c){if(!d&&--f<xn)return function(e,t,n,a){for(var r=0,o=0,l=new Array(n),i=0,s=1,u=t.length;i<u;i++,s<<=1){var c=t[i];void 0!==c&&i!==a&&(r|=s,l[o++]=c)}return new ce(e,r,l)}(e,u,f,i)}else f++;var p=e&&e===this.ownerID,h=Re(u,i,d,p);return p?(this.count=f,this.nodes=h,this):new de(e,f,h)},fe.prototype.get=function(e,t,n,a){for(var r=this.entries,o=0,l=r.length;o<l;o++)if($(n,r[o][0]))return r[o][1];return a},fe.prototype.update=function(e,t,n,a,r,o,l){void 0===n&&(n=re(a));var i=r===Jt;if(n!==this.keyHash)return i?this:(d(l),d(o),Ce(this,e,t,n,[a,r]));for(var s=this.entries,u=0,c=s.length;u<c&&!$(a,s[u][0]);u++);var f=u<c;if(f?s[u][1]===r:i)return this;if(d(l),(i||!f)&&d(o),i&&2===c)return new pe(e,this.keyHash,s[1^u]);var h=e&&e===this.ownerID,m=h?s:p(s);return f?i?u===c-1?m.pop():m[u]=m.pop():m[u]=[a,r]:m.push([a,r]),h?(this.entries=m,this):new fe(e,this.keyHash,m)},pe.prototype.get=function(e,t,n,a){return $(n,this.entry[0])?this.entry[1]:a},pe.prototype.update=function(e,t,n,a,r,o,l){var i=r===Jt,s=$(a,this.entry[0]);return(s?r===this.entry[1]:i)?this:(d(l),i?void d(o):s?e&&e===this.ownerID?(this.entry[1]=r,this):new pe(e,this.keyHash,[a,r]):(d(o),Ce(this,e,t,re(a),[a,r])))},ue.prototype.iterate=fe.prototype.iterate=function(e,t){for(var n=this.entries,a=0,r=n.length-1;a<=r;a++)if(!1===e(n[t?r-a:a]))return!1},ce.prototype.iterate=de.prototype.iterate=function(e,t){for(var n=this.nodes,a=0,r=n.length-1;a<=r;a++){var o=n[t?r-a:a];if(o&&!1===o.iterate(e,t))return!1}},pe.prototype.iterate=function(e,t){return e(this.entry)},e(he,_),he.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,a=t.node,r=t.index++;if(a.entry){if(0===r)return me(e,a.entry)}else if(a.entries){if(n=a.entries.length-1,r<=n)return me(e,a.entries[this._reverse?n-r:r])}else if(n=a.nodes.length-1,r<=n){var o=a.nodes[this._reverse?n-r:r];if(o){if(o.entry)return me(e,o.entry);t=this._stack=ve(o,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var wn,kn=$t/4,Sn=$t/2,xn=$t/4;e(Oe,te),Oe.of=function(){return this(arguments)},Oe.prototype.toString=function(){return this.__toString("List [","]")},Oe.prototype.get=function(e,t){if((e=m(this,e))>=0&&e<this.size){var n=je(this,e+=this._origin);return n&&n.array[e&Yt]}return t},Oe.prototype.set=function(e,t){return function(e,t,n){if((t=m(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Be(e,t).set(0,n):Be(e,0,t+1).set(t,n)});t+=e._origin;var a=e._tail,r=e._root,o=c(Qt);return t>=He(e._capacity)?a=Fe(a,e.__ownerID,0,t,n,o):r=Fe(r,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=r,e._tail=a,e.__hash=void 0,e.__altered=!0,e):Me(e._origin,e._capacity,e._level,r,a):e}(this,e,t)},Oe.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},Oe.prototype.insert=function(e,t){return this.splice(e,0,t)},Oe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Vt,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ae()},Oe.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Be(n,0,t+e.length);for(var a=0;a<e.length;a++)n.set(t+a,e[a])})},Oe.prototype.pop=function(){return Be(this,0,-1)},Oe.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Be(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},Oe.prototype.shift=function(){return Be(this,1)},Oe.prototype.merge=function(){return Ue(this,void 0,arguments)},Oe.prototype.mergeWith=function(e){return Ue(this,e,qt.call(arguments,1))},Oe.prototype.mergeDeep=function(){return Ue(this,ke,arguments)},Oe.prototype.mergeDeepWith=function(e){var t=qt.call(arguments,1);return Ue(this,Se(e),t)},Oe.prototype.setSize=function(e){return Be(this,0,e)},Oe.prototype.slice=function(e,t){var n=this.size;return y(e,t,n)?this:Be(this,g(e,n),E(t,n))},Oe.prototype.__iterator=function(e,t){var n=0,a=Ie(this,t);return new _(function(){var t=a();return t===On?{value:void 0,done:!0}:C(e,n++,t)})},Oe.prototype.__iterate=function(e,t){for(var n,a=0,r=Ie(this,t);(n=r())!==On&&!1!==e(n,a++,this););return a},Oe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Me(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},Oe.isList=De;var Tn="@@__IMMUTABLE_LIST__@@",Pn=Oe.prototype;Pn[Tn]=!0,Pn.delete=Pn.remove,Pn.setIn=Cn.setIn,Pn.deleteIn=Pn.removeIn=Cn.removeIn,Pn.update=Cn.update,Pn.updateIn=Cn.updateIn,Pn.mergeIn=Cn.mergeIn,Pn.mergeDeepIn=Cn.mergeDeepIn,Pn.withMutations=Cn.withMutations,Pn.asMutable=Cn.asMutable,Pn.asImmutable=Cn.asImmutable,Pn.wasAltered=Cn.wasAltered,Ne.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var a=n>>>t&Yt;if(a>=this.array.length)return new Ne([],e);var r,o=0===a;if(t>0){var l=this.array[a];if((r=l&&l.removeBefore(e,t-Vt,n))===l&&o)return this}if(o&&!r)return this;var i=Le(this,e);if(!o)for(var s=0;s<a;s++)i.array[s]=void 0;return r&&(i.array[a]=r),i},Ne.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var a=n-1>>>t&Yt;if(a>=this.array.length)return this;var r;if(t>0){var o=this.array[a];if((r=o&&o.removeAfter(e,t-Vt,n))===o&&a===this.array.length-1)return this}var l=Le(this,e);return l.array.splice(a+1),r&&(l.array[a]=r),l};var Rn,On={};e(qe,ie),qe.of=function(){return this(arguments)},qe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},qe.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ze()},qe.prototype.set=function(e,t){return Ge(this,e,t)},qe.prototype.remove=function(e){return Ge(this,e,Jt)},qe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},qe.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},qe.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},qe.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?We(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},qe.isOrderedMap=Ke,qe.prototype[Gt]=!0,qe.prototype.delete=qe.prototype.remove;var Dn;e(Ve,O),Ve.prototype.get=function(e,t){return this._iter.get(e,t)},Ve.prototype.has=function(e){return this._iter.has(e)},Ve.prototype.valueSeq=function(){return this._iter.valueSeq()},Ve.prototype.reverse=function(){var e=this,t=Ze(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},Ve.prototype.map=function(e,t){var n=this,a=Qe(this,e,t);return this._useKeys||(a.valueSeq=function(){return n._iter.toSeq().map(e,t)}),a},Ve.prototype.__iterate=function(e,t){var n,a=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,a)}:(n=t?ct(this):0,function(r){return e(r,t?--n:n++,a)}),t)},Ve.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(en,t),a=t?ct(this):0;return new _(function(){var r=n.next();return r.done?r:C(e,t?--a:a++,r.value,r)})},Ve.prototype[Gt]=!0,e($e,D),$e.prototype.includes=function(e){return this._iter.includes(e)},$e.prototype.__iterate=function(e,t){var n=this,a=0;return this._iter.__iterate(function(t){return e(t,a++,n)},t)},$e.prototype.__iterator=function(e,t){var n=this._iter.__iterator(en,t),a=0;return new _(function(){var t=n.next();return t.done?t:C(e,a++,t.value,t)})},e(Ye,N),Ye.prototype.has=function(e){return this._iter.includes(e)},Ye.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},Ye.prototype.__iterator=function(e,t){var n=this._iter.__iterator(en,t);return new _(function(){var t=n.next();return t.done?t:C(e,t.value,t.value,t)})},e(Je,O),Je.prototype.entrySeq=function(){return this._iter.toSeq()},Je.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){ut(t);var a=o(t);return e(a?t.get(1):t[1],a?t.get(0):t[0],n)}},t)},Je.prototype.__iterator=function(e,t){var n=this._iter.__iterator(en,t);return new _(function(){for(;;){var t=n.next();if(t.done)return t;var a=t.value;if(a){ut(a);var r=o(a);return C(e,r?a.get(0):a[0],r?a.get(1):a[1],t)}}})},$e.prototype.cacheResult=Ve.prototype.cacheResult=Ye.prototype.cacheResult=Je.prototype.cacheResult=pt,e(vt,ee),vt.prototype.toString=function(){return this.__toString(gt(this)+" {","}")},vt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},vt.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},vt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=yt(this,ge()))},vt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+gt(this));if(this._map&&!this._map.has(e)&&t===this._defaultValues[e])return this;var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:yt(this,n)},vt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:yt(this,t)},vt.prototype.wasAltered=function(){return this._map.wasAltered()},vt.prototype.__iterator=function(e,t){var a=this;return n(this._defaultValues).map(function(e,t){return a.get(t)}).__iterator(e,t)},vt.prototype.__iterate=function(e,t){var a=this;return n(this._defaultValues).map(function(e,t){return a.get(t)}).__iterate(e,t)},vt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?yt(this,t,e):(this.__ownerID=e,this._map=t,this)};var Nn=vt.prototype;Nn.delete=Nn.remove,Nn.deleteIn=Nn.removeIn=Cn.removeIn,Nn.merge=Cn.merge,Nn.mergeWith=Cn.mergeWith,Nn.mergeIn=Cn.mergeIn,Nn.mergeDeep=Cn.mergeDeep,Nn.mergeDeepWith=Cn.mergeDeepWith,Nn.mergeDeepIn=Cn.mergeDeepIn,Nn.setIn=Cn.setIn,Nn.update=Cn.update,Nn.updateIn=Cn.updateIn,Nn.withMutations=Cn.withMutations,Nn.asMutable=Cn.asMutable,Nn.asImmutable=Cn.asImmutable,e(Et,ne),Et.of=function(){return this(arguments)},Et.fromKeys=function(e){return this(n(e).keySeq())},Et.prototype.toString=function(){return this.__toString("Set {","}")},Et.prototype.has=function(e){return this._map.has(e)},Et.prototype.add=function(e){return _t(this,this._map.set(e,!0))},Et.prototype.remove=function(e){return _t(this,this._map.remove(e))},Et.prototype.clear=function(){return _t(this,this._map.clear())},Et.prototype.union=function(){var e=qt.call(arguments,0);return 0===(e=e.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)r(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Et.prototype.intersect=function(){var e=qt.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return r(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Et.prototype.subtract=function(){var e=qt.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return r(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Et.prototype.merge=function(){return this.union.apply(this,arguments)},Et.prototype.mergeWith=function(e){var t=qt.call(arguments,1);return this.union.apply(this,t)},Et.prototype.sort=function(e){return kt(rt(this,e))},Et.prototype.sortBy=function(e,t){return kt(rt(this,t,e))},Et.prototype.wasAltered=function(){return this._map.wasAltered()},Et.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,a){return e(a,a,n)},t)},Et.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Et.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Et.isSet=bt;var In="@@__IMMUTABLE_SET__@@",Mn=Et.prototype;Mn[In]=!0,Mn.delete=Mn.remove,Mn.mergeDeep=Mn.merge,Mn.mergeDeepWith=Mn.mergeWith,Mn.withMutations=Cn.withMutations,Mn.asMutable=Cn.asMutable,Mn.asImmutable=Cn.asImmutable,Mn.__empty=wt,Mn.__make=Ct;var An;e(kt,Et),kt.of=function(){return this(arguments)},kt.fromKeys=function(e){return this(n(e).keySeq())},kt.prototype.toString=function(){return this.__toString("OrderedSet {","}")},kt.isOrderedSet=St;var Fn=kt.prototype;Fn[Gt]=!0,Fn.__empty=Tt,Fn.__make=xt;var Ln;e(Pt,te),Pt.of=function(){return this(arguments)},Pt.prototype.toString=function(){return this.__toString("Stack [","]")},Pt.prototype.get=function(e,t){var n=this._head;for(e=m(this,e);n&&e--;)n=n.next;return n?n.value:t},Pt.prototype.peek=function(){return this._head&&this._head.value},Pt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Ot(e,t)},Pt.prototype.pushAll=function(e){if(0===(e=a(e)).size)return this;le(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ot(t,n)},Pt.prototype.pop=function(){return this.slice(1)},Pt.prototype.unshift=function(){return this.push.apply(this,arguments)},Pt.prototype.unshiftAll=function(e){return this.pushAll(e)},Pt.prototype.shift=function(){return this.pop.apply(this,arguments)},Pt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Dt()},Pt.prototype.slice=function(e,t){if(y(e,t,this.size))return this;var n=g(e,this.size);if(E(t,this.size)!==this.size)return te.prototype.slice.call(this,e,t);for(var a=this.size-n,r=this._head;n--;)r=r.next;return this.__ownerID?(this.size=a,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ot(a,r)},Pt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ot(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Pt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,a=this._head;a&&!1!==e(a.value,n++,this);)a=a.next;return n},Pt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,a=this._head;return new _(function(){if(a){var t=a.value;return a=a.next,C(e,n++,t)}return{value:void 0,done:!0}})},Pt.isStack=Rt;var jn="@@__IMMUTABLE_STACK__@@",Bn=Pt.prototype;Bn[jn]=!0,Bn.withMutations=Cn.withMutations,Bn.asMutable=Cn.asMutable,Bn.asImmutable=Cn.asImmutable,Bn.wasAltered=Cn.wasAltered;var Un;t.Iterator=_,Nt(t,{toArray:function(){le(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new $e(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new Ve(this,!0)},toMap:function(){return ie(this.toKeyedSeq())},toObject:function(){le(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return qe(this.toKeyedSeq())},toOrderedSet:function(){return kt(l(this)?this.valueSeq():this)},toSet:function(){return Et(l(this)?this.valueSeq():this)},toSetSeq:function(){return new Ye(this)},toSeq:function(){return i(this)?this.toIndexedSeq():l(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Pt(l(this)?this.valueSeq():this)},toList:function(){return Oe(l(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return st(this,function(e,t){var a=l(e),r=[e].concat(t).map(function(e){return o(e)?a&&(e=n(e)):e=a?B(e):U(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===r.length)return e;if(1===r.length){var s=r[0];if(s===e||a&&l(s)||i(e)&&i(s))return s}var u=new I(r);return a?u=u.toKeyedSeq():i(e)||(u=u.toSetSeq()),u=u.flatten(!0),u.size=r.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),u}(this,qt.call(arguments,0)))},includes:function(e){return this.some(function(t){return $(t,e)})},entries:function(){return this.__iterator(tn)},every:function(e,t){le(this.size);var n=!0;return this.__iterate(function(a,r,o){if(!e.call(t,a,r,o))return n=!1,!1}),n},filter:function(e,t){return st(this,et(this,e,t,!0))},find:function(e,t,n){var a=this.findEntry(e,t);return a?a[1]:n},forEach:function(e,t){return le(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){le(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(a){n?n=!1:t+=e,t+=null!==a&&void 0!==a?a.toString():""}),t},keys:function(){return this.__iterator(Zt)},map:function(e,t){return st(this,Qe(this,e,t))},reduce:function(e,t,n){le(this.size);var a,r;return arguments.length<2?r=!0:a=t,this.__iterate(function(t,o,l){r?(r=!1,a=t):a=e.call(n,a,t,o,l)}),a},reduceRight:function(e,t,n){var a=this.toKeyedSeq().reverse();return a.reduce.apply(a,arguments)},reverse:function(){return st(this,Ze(this,!0))},slice:function(e,t){return st(this,tt(this,e,t,!0))},some:function(e,t){return!this.every(At(e),t)},sort:function(e){return st(this,rt(this,e))},values:function(){return this.__iterator(en)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return h(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var a=ie().asMutable();return e.__iterate(function(r,o){a.update(t.call(n,r,o,e),0,function(e){return e+1})}),a.asImmutable()}(this,e,t)},equals:function(e){return Y(this,e)},entrySeq:function(){var e=this;if(e._cache)return new I(e._cache);var t=e.toSeq().map(Mt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(At(e),t)},findEntry:function(e,t,n){var a=n;return this.__iterate(function(n,r,o){if(e.call(t,n,r,o))return a=[r,n],!1}),a},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(v)},flatMap:function(e,t){return st(this,function(e,t,n){var a=dt(e);return e.toSeq().map(function(r,o){return a(t.call(n,r,o,e))}).flatten(!0)}(this,e,t))},flatten:function(e){return st(this,at(this,e,!0))},fromEntrySeq:function(){return new Je(this)},get:function(e,t){return this.find(function(t,n){return $(n,e)},void 0,t)},getIn:function(e,t){for(var n,a=this,r=mt(e);!(n=r.next()).done;){var o=n.value;if((a=a&&a.get?a.get(o,Jt):Jt)===Jt)return t}return a},groupBy:function(e,t){return function(e,t,n){var a=l(e),r=(u(e)?qe():ie()).asMutable();e.__iterate(function(o,l){r.update(t.call(n,o,l,e),function(e){return(e=e||[]).push(a?[l,o]:o),e})});var o=dt(e);return r.map(function(t){return st(e,o(t))})}(this,e,t)},has:function(e){return this.get(e,Jt)!==Jt},hasIn:function(e){return this.getIn(e,Jt)!==Jt},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:t(e)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return $(t,e)})},keySeq:function(){return this.toSeq().map(It).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return ot(this,e)},maxBy:function(e,t){return ot(this,t,e)},min:function(e){return ot(this,e?Ft(e):Bt)},minBy:function(e,t){return ot(this,t?Ft(t):Bt,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return st(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return st(this,nt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(At(e),t)},sortBy:function(e,t){return st(this,rt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return st(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return st(this,function(e,t,n){var a=ft(e);return a.__iterateUncached=function(a,r){var o=this;if(r)return this.cacheResult().__iterate(a,r);var l=0;return e.__iterate(function(e,r,i){return t.call(n,e,r,i)&&++l&&a(e,r,o)}),l},a.__iteratorUncached=function(a,r){var o=this;if(r)return this.cacheResult().__iterator(a,r);var l=e.__iterator(tn,r),i=!0;return new _(function(){if(!i)return{value:void 0,done:!0};var e=l.next();if(e.done)return e;var r=e.value,s=r[0],u=r[1];return t.call(n,u,s,o)?a===tn?e:C(a,s,u,e):(i=!1,{value:void 0,done:!0})})},a}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(At(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Ut(this))}});var Hn=t.prototype;Hn[Kt]=!0,Hn[rn]=Hn.values,Hn.__toJS=Hn.toArray,Hn.__toStringMapper=Lt,Hn.inspect=Hn.toSource=function(){return this.toString()},Hn.chain=Hn.flatMap,Hn.contains=Hn.includes,Nt(n,{flip:function(){return st(this,Xe(this))},mapEntries:function(e,t){var n=this,a=0;return st(this,this.toSeq().map(function(r,o){return e.call(t,[o,r],a++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return st(this,this.toSeq().flip().map(function(a,r){return e.call(t,a,r,n)}).flip())}});var qn=n.prototype;return qn[Wt]=!0,qn[rn]=Hn.entries,qn.__toJS=Hn.toObject,qn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Lt(e)},Nt(a,{toKeyedSeq:function(){return new Ve(this,!1)},filter:function(e,t){return st(this,et(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return st(this,Ze(this,!1))},slice:function(e,t){return st(this,tt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=g(e,e<0?this.count():this.size);var a=this.slice(0,e);return st(this,1===n?a:a.concat(p(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(e){return st(this,at(this,e,!1))},get:function(e,t){return(e=m(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return(e=m(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return st(this,function(e,t){var n=ft(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,a){var r=this,o=0;return e.__iterate(function(e,a){return(!o||!1!==n(t,o++,r))&&!1!==n(e,o++,r)},a),o},n.__iteratorUncached=function(n,a){var r,o=e.__iterator(en,a),l=0;return new _(function(){return(!r||l%2)&&(r=o.next()).done?r:l%2?C(n,l++,t):C(n,l++,r.value,r)})},n}(this,e))},interleave:function(){var e=[this].concat(p(arguments)),t=it(this.toSeq(),D.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),st(this,n)},keySeq:function(){return Q(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return st(this,nt(this,e,t,!1))},zip:function(){return st(this,it(this,jt,[this].concat(p(arguments))))},zipWith:function(e){var t=p(arguments);return t[0]=this,st(this,it(this,e,t))}}),a.prototype[zt]=!0,a.prototype[Gt]=!0,Nt(r,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),r.prototype.has=Hn.includes,r.prototype.contains=r.prototype.includes,Nt(O,n.prototype),Nt(D,a.prototype),Nt(N,r.prototype),Nt(ee,n.prototype),Nt(te,a.prototype),Nt(ne,r.prototype),{Iterable:t,Seq:R,Collection:Z,Map:ie,OrderedMap:qe,List:Oe,Stack:Pt,Set:Et,OrderedSet:kt,Record:vt,Range:Q,Repeat:J,is:$,fromJS:W}}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(309));t.default=function(e){return function(t,n){var r=t.getCurrentContent(),o=n||t.getSelection(),l=o.getStartKey(),i=o.getEndKey(),s=o.getStartOffset(),u=o.getEndOffset(),c=l===i,d=!1,f=s+1,p=u-1;return(0,a.default)(r,l,i).forEach(function(t){e(t,function(e,n){if(!d){var a=t.getKey();c&&(n<f||e>p)||a===l&&n<f||a===i&&e>p||(d=!0)}},r)}),d}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(610),r=function(e){return e&&e.__esModule?e:{default:e}}(n(309));t.default=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),l=2;l<n;l++)o[l-2]=arguments[l];var i=e.getCurrentContent(),s=e.getSelection(),u=s.getStartKey(),c=s.getEndKey(),d=s.getStartOffset(),f=s.getEndOffset(),p=u===c,h=e;return(0,r.default)(i,u,c).forEach(function(e){var n=e.getKey(),r=d,l=f;n===u?(r=d,l=p?f:e.getText().length):n===c?(r=p?d:0,l=f):(r=0,l=e.getText().length);var i=new a.SelectionState({anchorKey:n,anchorOffset:r,focusKey:n,focusOffset:l});h=t.apply(void 0,[h,i].concat(o))}),a.EditorState.forceSelection(h,s)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3)),o=a(n(1)),l=a(n(2)),i=a(n(4)),s=a(n(5)),u=n(0),c=a(u),d=a(n(19)),f=a(n(16)),p=n(12),h=f.default.getIfExists,m=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.requestFields=["id","createdAt","types","text","handlerFullname","actionTaken","actionDeadline","completionDate","users","branchAssociated"],a.state={isLoading:!1,data:[],styles:{table:{border:"1px solid black",padding:"5px 0px 0px 5px"}}},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"load",value:function(){var e=this;this.setState({isLoading:!0});var t=this.props.params.filters;$.ajax({type:"get",url:"/api/complaints",data:{fields:this.requestFields,filters:JSON.parse(t),page:1,rowsPerPage:999999999},success:function(t){return e.setState({data:t.rows,isLoading:!1})},error:function(t){e.setState({isLoading:!1}),console.error(t.responseText)}})}},{key:"componentWillMount",value:function(){this.load()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.data,a=e.styles;return t?c.default.createElement(d.default,null):n&&0!==n.length?c.default.createElement("table",{style:a.table,width:"100%"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{style:a.table},"Created at"),c.default.createElement("th",{style:a.table},"Type"),c.default.createElement("th",{style:a.table},"Handler name"),c.default.createElement("th",{style:a.table},"Text"),c.default.createElement("th",{style:a.table},"Action taken"),c.default.createElement("th",{style:a.table},"Action deadline"),c.default.createElement("th",{style:a.table},"Completion date"),c.default.createElement("th",{style:a.table},"Branch"),c.default.createElement("th",{style:a.table},"Students"))),c.default.createElement("tbody",null,n.map(function(e){return c.default.createElement("tr",null,c.default.createElement("td",{style:a.table},e.createdAt),c.default.createElement("td",{style:a.table},e.types.map(function(e){return c.default.createElement("p",null,e.name)})),c.default.createElement("td",{style:a.table},e.handlerFullname),c.default.createElement("td",{style:a.table},c.default.createElement(p.Html,{style:{width:"400px",wordBreak:"break-all"}},e.text)),c.default.createElement("td",{style:a.table},c.default.createElement(p.Html,{style:{width:"400px",wordBreak:"break-all"}},e.actionTaken)),c.default.createElement("td",{style:a.table},e.actionDeadline),c.default.createElement("td",{style:a.table},e.completionDate),c.default.createElement("td",{style:a.table},h(e,"branchAssociated.branch_name","None")),c.default.createElement("td",{style:a.table},e.users.length>0?c.default.createElement("ul",{style:{paddingLeft:"15px"}},e.users.map(function(e){return c.default.createElement("li",null,e.userFullname)})):"None"))}))):c.default.createElement("p",null,"No data")}}]),t}(u.Component);t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(39)),o=a(n(23)),l=a(n(3)),i=a(n(1)),s=a(n(2)),u=a(n(4)),c=a(n(5)),d=n(0),f=a(d),p=a(n(19)),h=a(n(16)),m=a(n(77)),v=a(n(88)),y=n(6),g=n(12),E=h.default.getIfExists,b=function(e){function t(e,n){(0,i.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e,n));return a.state={isLoading:!1,data:[],styles:{container:{border:"0px solid #94acca",borderRadius:"15px",margin:"15px",padding:"30px 50px 20px 50px"},logoContainer:{backgroundCollor:"white",width:"110px",height:"90px",position:"absolute",left:"78%",top:"15px",borderLeft:"0px solid #94acca",borderRight:"0px solid #94acca",borderBottom:"0px solid #94acca",borderBottomLeftRadius:"15px",borderBottomRightRadius:"15px",textAlign:"center"},table:{marginTop:"10px"},tableHeader:{width:"100%",height:"30px",backgroundColor:"#c7c7c7 !important",fontWeight:"bold",WebkitPrintColorAdjust:"exact"},cell:{height:"30px",borderLeft:"1px solid #c7c7c7"},row:{border:"1px solid #c7c7c7",borderTop:"0px",borderLeft:"0px",height:"30px"}},firstProfile:null,activeClasses:[]},a.assetManager=new v.default,a.loadProfile=a.loadProfile.bind(a),a.loadClasses=a.loadClasses.bind(a),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"loadProfile",value:function(e){var t=this;$.ajax({type:"get",url:"/api/users/"+e.id,data:{fields:["profile"]},success:function(e){return t.setState({firstProfile:e.profile})},error:function(e){return console.error(e.responseText)}})}},{key:"loadComplaint",value:function(e){var t=this;this.setState({isLoading:!0});var n=this.props.params.id;$.ajax({type:"get",url:"/api/complaints/"+n,success:function(n){n.users&&n.users.length>0&&t.loadProfile(n.users[0]),t.setState({complaint:n,isLoading:!1}),e()},error:function(e){t.setState({isLoading:!1}),console.error(e.responseText)}})}},{key:"loadClasses",value:function(){var e=this;console.log(this.state);var t=E(this.state,"complaint.users",[]).map(function(e){return e.id});console.log("complaint : ",this.state.complaint.users),console.log("userIds : ",t),$.ajax({type:"get",url:"/api/classes",data:{filters:{userIds:t,term:0==t.length?"active":this.state.complaint.termId},fields:["course.courseTitle","classTime","teacher.userFullname","classroom.classroomName","id","courseClassTermId"]},success:function(t){return e.setState({activeClasses:t.rows})},error:function(e){return console.error(e)}})}},{key:"load",value:function(){this.loadComplaint(this.loadClasses)}},{key:"componentWillUnmount",value:function(){this.assetManager.unloadAll()}},{key:"componentWillMount",value:function(){this.load()}},{key:"renderActiveClasses",value:function(e){var t=this.state.activeClasses;return f.default.createElement("ul",{style:{listStyle:"none",paddingLeft:"0",visibility:e?"visible":"hidden",marginBottom:"0"}},t.map(function(e){return f.default.createElement("li",{key:e.id},[e.course.courseTitle,"/",e.classTime,E(e,"teacher.userFullname",""),E(e,"classroom.classroomName","")].join(" "))}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.complaint,a=e.styles,l=e.firstProfile;if(e.activeClasses,t)return f.default.createElement(p.default,null);var i=function(e){return{md:e,sm:e,xs:e}},s=function(e){var t=e.style,n=e.children;return f.default.createElement("div",{style:function(e,t){return(0,o.default)((0,o.default)({},e),t)}(a.row,t)},n)},u=function(e){var t=e.width,n=e.children,o=e.style,l=e.textStyle;return f.default.createElement(y.Col,(0,r.default)({style:o||a.cell},i(t)),f.default.createElement("div",{style:l||{marginBottom:"0px",lineHeight:a.cell.height,fontSize:"12px"}},n))},c=function(e){var t=e.children;return f.default.createElement("div",{style:a.table},t)},d=(n.users&&n.users.length)>0?n.users[0]:null,h=d?m.default.years(d.age):"",v=d?d.userFullname.split(" "):null;v=v?v[0]+(v.length>1?" "+v[1]:""):"";for(var E=n.text.split(""),b=[];E.length>41;)b.push(E.splice(0,41).join(""));return b.push(E.join("")),f.default.createElement("div",{style:a.container},f.default.createElement("div",{style:a.logoContainer},f.default.createElement("img",{src:"/src/images/ftr_logo.jpg"})),f.default.createElement("h3",null,"TAYYIBUN"),f.default.createElement("h2",{style:{marginBottom:"10px"}},"Complaint Record"),f.default.createElement(c,null,f.default.createElement("div",{style:a.tableHeader}),f.default.createElement(s,null,f.default.createElement(u,{width:4},"Student name + age: "+(d?v+" "+h:"")),f.default.createElement(u,{width:4},"Date of complaint: "+function(e){return e.split(" ")[0]}(n.createdAt)),f.default.createElement(u,{width:4},"Mode of complaint: "+n.types.map(function(e){return e.name}).join(", "))),f.default.createElement(s,null,f.default.createElement(u,{width:4},"Name of complainant: "+n.name),f.default.createElement(u,{width:4},"Post code: "+(l?l.profile_postcode:"")),f.default.createElement(u,{width:4},"Status of complaint: "+("0000-00-00 00:00:00"==n.completionDate?"open":"closed"))),f.default.createElement(s,{style:{height:"auto"}},f.default.createElement(u,{style:{borderLeft:"1px solid #c7c7c7"},width:4},"Date of alleged incident:",this.renderActiveClasses(!1)),f.default.createElement(u,{style:{borderLeft:"1px solid #c7c7c7"},width:4},"Branch: "+(n.branchAssociated?n.branchAssociated.branchName:""),this.renderActiveClasses(!1)),f.default.createElement(u,{style:{float:"none",borderLeft:"1px solid #c7c7c7",display:"inline-block"},width:4},f.default.createElement("p",{style:{marginBottom:"0"}},"Weekday/weekend:"),this.renderActiveClasses(!0))),f.default.createElement(s,null,f.default.createElement(u,{width:4},"Completion Date: ","0000-00-00 00:00:00"!=n.completionDate?n.completionDate.split(" ")[0]:""),f.default.createElement(u,{width:4},"Contact no: "+(l?l.profile_telephone?l.profile_telephone:l.profile_mobile?l.profile_mobile:"":"")),f.default.createElement(u,{width:4},"Priority/seriousness: "+n.priority)),f.default.createElement(s,null,f.default.createElement(u,{width:12},"Person handling complaint: "+n.handlerFullname))),f.default.createElement(c,null,f.default.createElement("div",{style:a.tableHeader},f.default.createElement(u,{width:6},"2. Description/Issue of concern/ Complaint"),f.default.createElement(u,{width:6},"3.  Suggestions/Disposition")),f.default.createElement("div",{style:{border:"1px solid #c7c7c7",borderTop:"0px"}},f.default.createElement(y.Col,(0,r.default)({},i(6),{style:{borderRight:"1px solid #c7c7c7",display:"inline-block",float:"none"}}),f.default.createElement(g.Html,{style:{margin:"0",padding:"5px 0 5px 0"}},n.text)),f.default.createElement(y.Col,(0,r.default)({},i(6),{style:{borderRight:"1px solid #c7c7c7",display:"inline-block",float:"right"}}),f.default.createElement(g.Html,{style:{margin:"0",padding:"5px 0 5px 0"}},n.suggestions)))),f.default.createElement(c,null,f.default.createElement("div",{style:a.tableHeader},f.default.createElement(u,{width:12},"4. Follow up/other comments")),f.default.createElement(y.Col,(0,r.default)({},i(12),{style:{border:"1px solid #c7c7c7",float:"none"}}),f.default.createElement(g.Html,{style:{margin:"0",padding:"5px 0 5px 0"}},n.otherComments))))}}]),t}(d.Component);t.default=b},function(e,t){},function(e,t){},function(e,t){}],[636]);